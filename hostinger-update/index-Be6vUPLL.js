function __(t,n){for(var s=0;s<n.length;s++){const a=n[s];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in t)){const c=Object.getOwnPropertyDescriptor(a,o);c&&Object.defineProperty(t,o,c.get?c:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=s(o);fetch(o.href,c)}})();function Jv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jf={exports:{}},Do={},bf={exports:{}},Mt={};var fx;function S_(){if(fx)return Mt;fx=1;var t=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function C(T){return T===null||typeof T!="object"?null:(T=v&&T[v]||T["@@iterator"],typeof T=="function"?T:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,b={};function S(T,O,he){this.props=T,this.context=O,this.refs=b,this.updater=he||w}S.prototype.isReactComponent={},S.prototype.setState=function(T,O){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,O,"setState")},S.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function E(){}E.prototype=S.prototype;function P(T,O,he){this.props=T,this.context=O,this.refs=b,this.updater=he||w}var N=P.prototype=new E;N.constructor=P,_(N,S.prototype),N.isPureReactComponent=!0;var A=Array.isArray,D=Object.prototype.hasOwnProperty,U={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function L(T,O,he){var Y,xe={},Be=null,re=null;if(O!=null)for(Y in O.ref!==void 0&&(re=O.ref),O.key!==void 0&&(Be=""+O.key),O)D.call(O,Y)&&!R.hasOwnProperty(Y)&&(xe[Y]=O[Y]);var $e=arguments.length-2;if($e===1)xe.children=he;else if(1<$e){for(var qe=Array($e),Ge=0;Ge<$e;Ge++)qe[Ge]=arguments[Ge+2];xe.children=qe}if(T&&T.defaultProps)for(Y in $e=T.defaultProps,$e)xe[Y]===void 0&&(xe[Y]=$e[Y]);return{$$typeof:t,type:T,key:Be,ref:re,props:xe,_owner:U.current}}function pe(T,O){return{$$typeof:t,type:T.type,key:O,ref:T.ref,props:T.props,_owner:T._owner}}function ee(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function ve(T){var O={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(he){return O[he]})}var ge=/\/+/g;function V(T,O){return typeof T=="object"&&T!==null&&T.key!=null?ve(""+T.key):O.toString(36)}function le(T,O,he,Y,xe){var Be=typeof T;(Be==="undefined"||Be==="boolean")&&(T=null);var re=!1;if(T===null)re=!0;else switch(Be){case"string":case"number":re=!0;break;case"object":switch(T.$$typeof){case t:case n:re=!0}}if(re)return re=T,xe=xe(re),T=Y===""?"."+V(re,0):Y,A(xe)?(he="",T!=null&&(he=T.replace(ge,"$&/")+"/"),le(xe,O,he,"",function(Ge){return Ge})):xe!=null&&(ee(xe)&&(xe=pe(xe,he+(!xe.key||re&&re.key===xe.key?"":(""+xe.key).replace(ge,"$&/")+"/")+T)),O.push(xe)),1;if(re=0,Y=Y===""?".":Y+":",A(T))for(var $e=0;$e<T.length;$e++){Be=T[$e];var qe=Y+V(Be,$e);re+=le(Be,O,he,qe,xe)}else if(qe=C(T),typeof qe=="function")for(T=qe.call(T),$e=0;!(Be=T.next()).done;)Be=Be.value,qe=Y+V(Be,$e++),re+=le(Be,O,he,qe,xe);else if(Be==="object")throw O=String(T),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return re}function we(T,O,he){if(T==null)return T;var Y=[],xe=0;return le(T,Y,"","",function(Be){return O.call(he,Be,xe++)}),Y}function fe(T){if(T._status===-1){var O=T._result;O=O(),O.then(function(he){(T._status===0||T._status===-1)&&(T._status=1,T._result=he)},function(he){(T._status===0||T._status===-1)&&(T._status=2,T._result=he)}),T._status===-1&&(T._status=0,T._result=O)}if(T._status===1)return T._result.default;throw T._result}var ne={current:null},M={transition:null},K={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:M,ReactCurrentOwner:U};function se(){throw Error("act(...) is not supported in production builds of React.")}return Mt.Children={map:we,forEach:function(T,O,he){we(T,function(){O.apply(this,arguments)},he)},count:function(T){var O=0;return we(T,function(){O++}),O},toArray:function(T){return we(T,function(O){return O})||[]},only:function(T){if(!ee(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Mt.Component=S,Mt.Fragment=s,Mt.Profiler=o,Mt.PureComponent=P,Mt.StrictMode=a,Mt.Suspense=p,Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,Mt.act=se,Mt.cloneElement=function(T,O,he){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var Y=_({},T.props),xe=T.key,Be=T.ref,re=T._owner;if(O!=null){if(O.ref!==void 0&&(Be=O.ref,re=U.current),O.key!==void 0&&(xe=""+O.key),T.type&&T.type.defaultProps)var $e=T.type.defaultProps;for(qe in O)D.call(O,qe)&&!R.hasOwnProperty(qe)&&(Y[qe]=O[qe]===void 0&&$e!==void 0?$e[qe]:O[qe])}var qe=arguments.length-2;if(qe===1)Y.children=he;else if(1<qe){$e=Array(qe);for(var Ge=0;Ge<qe;Ge++)$e[Ge]=arguments[Ge+2];Y.children=$e}return{$$typeof:t,type:T.type,key:xe,ref:Be,props:Y,_owner:re}},Mt.createContext=function(T){return T={$$typeof:d,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:c,_context:T},T.Consumer=T},Mt.createElement=L,Mt.createFactory=function(T){var O=L.bind(null,T);return O.type=T,O},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(T){return{$$typeof:f,render:T}},Mt.isValidElement=ee,Mt.lazy=function(T){return{$$typeof:m,_payload:{_status:-1,_result:T},_init:fe}},Mt.memo=function(T,O){return{$$typeof:x,type:T,compare:O===void 0?null:O}},Mt.startTransition=function(T){var O=M.transition;M.transition={};try{T()}finally{M.transition=O}},Mt.unstable_act=se,Mt.useCallback=function(T,O){return ne.current.useCallback(T,O)},Mt.useContext=function(T){return ne.current.useContext(T)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(T){return ne.current.useDeferredValue(T)},Mt.useEffect=function(T,O){return ne.current.useEffect(T,O)},Mt.useId=function(){return ne.current.useId()},Mt.useImperativeHandle=function(T,O,he){return ne.current.useImperativeHandle(T,O,he)},Mt.useInsertionEffect=function(T,O){return ne.current.useInsertionEffect(T,O)},Mt.useLayoutEffect=function(T,O){return ne.current.useLayoutEffect(T,O)},Mt.useMemo=function(T,O){return ne.current.useMemo(T,O)},Mt.useReducer=function(T,O,he){return ne.current.useReducer(T,O,he)},Mt.useRef=function(T){return ne.current.useRef(T)},Mt.useState=function(T){return ne.current.useState(T)},Mt.useSyncExternalStore=function(T,O,he){return ne.current.useSyncExternalStore(T,O,he)},Mt.useTransition=function(){return ne.current.useTransition()},Mt.version="18.3.1",Mt}var hx;function $h(){return hx||(hx=1,bf.exports=S_()),bf.exports}var mx;function C_(){if(mx)return Do;mx=1;var t=$h(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(f,p,x){var m,v={},C=null,w=null;x!==void 0&&(C=""+x),p.key!==void 0&&(C=""+p.key),p.ref!==void 0&&(w=p.ref);for(m in p)a.call(p,m)&&!c.hasOwnProperty(m)&&(v[m]=p[m]);if(f&&f.defaultProps)for(m in p=f.defaultProps,p)v[m]===void 0&&(v[m]=p[m]);return{$$typeof:n,type:f,key:C,ref:w,props:v,_owner:o.current}}return Do.Fragment=s,Do.jsx=d,Do.jsxs=d,Do}var px;function P_(){return px||(px=1,jf.exports=C_()),jf.exports}var e=P_(),gc={},Nf={exports:{}},bs={},_f={exports:{}},Sf={};var gx;function k_(){return gx||(gx=1,(function(t){function n(M,K){var se=M.length;M.push(K);e:for(;0<se;){var T=se-1>>>1,O=M[T];if(0<o(O,K))M[T]=K,M[se]=O,se=T;else break e}}function s(M){return M.length===0?null:M[0]}function a(M){if(M.length===0)return null;var K=M[0],se=M.pop();if(se!==K){M[0]=se;e:for(var T=0,O=M.length,he=O>>>1;T<he;){var Y=2*(T+1)-1,xe=M[Y],Be=Y+1,re=M[Be];if(0>o(xe,se))Be<O&&0>o(re,xe)?(M[T]=re,M[Be]=se,T=Be):(M[T]=xe,M[Y]=se,T=Y);else if(Be<O&&0>o(re,se))M[T]=re,M[Be]=se,T=Be;else break e}}return K}function o(M,K){var se=M.sortIndex-K.sortIndex;return se!==0?se:M.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();t.unstable_now=function(){return d.now()-f}}var p=[],x=[],m=1,v=null,C=3,w=!1,_=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(M){for(var K=s(x);K!==null;){if(K.callback===null)a(x);else if(K.startTime<=M)a(x),K.sortIndex=K.expirationTime,n(p,K);else break;K=s(x)}}function A(M){if(b=!1,N(M),!_)if(s(p)!==null)_=!0,fe(D);else{var K=s(x);K!==null&&ne(A,K.startTime-M)}}function D(M,K){_=!1,b&&(b=!1,E(L),L=-1),w=!0;var se=C;try{for(N(K),v=s(p);v!==null&&(!(v.expirationTime>K)||M&&!ve());){var T=v.callback;if(typeof T=="function"){v.callback=null,C=v.priorityLevel;var O=T(v.expirationTime<=K);K=t.unstable_now(),typeof O=="function"?v.callback=O:v===s(p)&&a(p),N(K)}else a(p);v=s(p)}if(v!==null)var he=!0;else{var Y=s(x);Y!==null&&ne(A,Y.startTime-K),he=!1}return he}finally{v=null,C=se,w=!1}}var U=!1,R=null,L=-1,pe=5,ee=-1;function ve(){return!(t.unstable_now()-ee<pe)}function ge(){if(R!==null){var M=t.unstable_now();ee=M;var K=!0;try{K=R(!0,M)}finally{K?V():(U=!1,R=null)}}else U=!1}var V;if(typeof P=="function")V=function(){P(ge)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,we=le.port2;le.port1.onmessage=ge,V=function(){we.postMessage(null)}}else V=function(){S(ge,0)};function fe(M){R=M,U||(U=!0,V())}function ne(M,K){L=S(function(){M(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){_||w||(_=!0,fe(D))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return s(p)},t.unstable_next=function(M){switch(C){case 1:case 2:case 3:var K=3;break;default:K=C}var se=C;C=K;try{return M()}finally{C=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,K){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var se=C;C=M;try{return K()}finally{C=se}},t.unstable_scheduleCallback=function(M,K,se){var T=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?T+se:T):se=T,M){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=se+O,M={id:m++,callback:K,priorityLevel:M,startTime:se,expirationTime:O,sortIndex:-1},se>T?(M.sortIndex=se,n(x,M),s(p)===null&&M===s(x)&&(b?(E(L),L=-1):b=!0,ne(A,se-T))):(M.sortIndex=O,n(p,M),_||w||(_=!0,fe(D))),M},t.unstable_shouldYield=ve,t.unstable_wrapCallback=function(M){var K=C;return function(){var se=C;C=K;try{return M.apply(this,arguments)}finally{C=se}}}})(Sf)),Sf}var xx;function E_(){return xx||(xx=1,_f.exports=k_()),_f.exports}var vx;function T_(){if(vx)return bs;vx=1;var t=$h(),n=E_();function s(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function c(r,i){d(r,i),d(r+"Capture",i)}function d(r,i){for(o[r]=i,r=0;r<i.length;r++)a.add(i[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function C(r){return p.call(v,r)?!0:p.call(m,r)?!1:x.test(r)?v[r]=!0:(m[r]=!0,!1)}function w(r,i,l,u){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function _(r,i,l,u){if(i===null||typeof i>"u"||w(r,i,l,u))return!0;if(u)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function b(r,i,l,u,g,y,k){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=r,this.type=i,this.sanitizeURL=y,this.removeEmptyString=k}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){S[r]=new b(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];S[i]=new b(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){S[r]=new b(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){S[r]=new b(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){S[r]=new b(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){S[r]=new b(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){S[r]=new b(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){S[r]=new b(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){S[r]=new b(r,5,!1,r.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function P(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(E,P);S[i]=new b(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(E,P);S[i]=new b(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(E,P);S[i]=new b(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){S[r]=new b(r,1,!1,r.toLowerCase(),null,!1,!1)}),S.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){S[r]=new b(r,1,!1,r.toLowerCase(),null,!0,!0)});function N(r,i,l,u){var g=S.hasOwnProperty(i)?S[i]:null;(g!==null?g.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(_(i,l,g,u)&&(l=null),u||g===null?C(i)&&(l===null?r.removeAttribute(i):r.setAttribute(i,""+l)):g.mustUseProperty?r[g.propertyName]=l===null?g.type===3?!1:"":l:(i=g.attributeName,u=g.attributeNamespace,l===null?r.removeAttribute(i):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,u?r.setAttributeNS(u,i,l):r.setAttribute(i,l))))}var A=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),U=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),pe=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),ve=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),M=Symbol.iterator;function K(r){return r===null||typeof r!="object"?null:(r=M&&r[M]||r["@@iterator"],typeof r=="function"?r:null)}var se=Object.assign,T;function O(r){if(T===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);T=i&&i[1]||""}return`
`+T+r}var he=!1;function Y(r,i){if(!r||he)return"";he=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(ie){var u=ie}Reflect.construct(r,[],i)}else{try{i.call()}catch(ie){u=ie}r.call(i.prototype)}else{try{throw Error()}catch(ie){u=ie}r()}}catch(ie){if(ie&&u&&typeof ie.stack=="string"){for(var g=ie.stack.split(`
`),y=u.stack.split(`
`),k=g.length-1,F=y.length-1;1<=k&&0<=F&&g[k]!==y[F];)F--;for(;1<=k&&0<=F;k--,F--)if(g[k]!==y[F]){if(k!==1||F!==1)do if(k--,F--,0>F||g[k]!==y[F]){var B=`
`+g[k].replace(" at new "," at ");return r.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",r.displayName)),B}while(1<=k&&0<=F);break}}}finally{he=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?O(r):""}function xe(r){switch(r.tag){case 5:return O(r.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return r=Y(r.type,!1),r;case 11:return r=Y(r.type.render,!1),r;case 1:return r=Y(r.type,!0),r;default:return""}}function Be(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case U:return"Portal";case pe:return"Profiler";case L:return"StrictMode";case V:return"Suspense";case le:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case ve:return(r.displayName||"Context")+".Consumer";case ee:return(r._context.displayName||"Context")+".Provider";case ge:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case we:return i=r.displayName||null,i!==null?i:Be(r.type)||"Memo";case fe:i=r._payload,r=r._init;try{return Be(r(i))}catch{}}return null}function re(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Be(i);case 8:return i===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function $e(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function qe(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ge(r){var i=qe(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),u=""+r[i];if(!r.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,y=l.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return g.call(this)},set:function(k){u=""+k,y.call(this,k)}}),Object.defineProperty(r,i,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(k){u=""+k},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function be(r){r._valueTracker||(r._valueTracker=Ge(r))}function mt(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),u="";return r&&(u=qe(r)?r.checked?"true":"false":r.value),r=u,r!==l?(i.setValue(r),!0):!1}function We(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Et(r,i){var l=i.checked;return se({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function ue(r,i){var l=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;l=$e(i.value!=null?i.value:l),r._wrapperState={initialChecked:u,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ze(r,i){i=i.checked,i!=null&&N(r,"checked",i,!1)}function Ee(r,i){ze(r,i);var l=$e(i.value),u=i.type;if(l!=null)u==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(u==="submit"||u==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?J(r,i.type,l):i.hasOwnProperty("defaultValue")&&J(r,i.type,$e(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function Ke(r,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,l||i===r.value||(r.value=i),r.defaultValue=i}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function J(r,i,l){(i!=="number"||We(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var ye=Array.isArray;function ae(r,i,l,u){if(r=r.options,i){i={};for(var g=0;g<l.length;g++)i["$"+l[g]]=!0;for(l=0;l<r.length;l++)g=i.hasOwnProperty("$"+r[l].value),r[l].selected!==g&&(r[l].selected=g),g&&u&&(r[l].defaultSelected=!0)}else{for(l=""+$e(l),i=null,g=0;g<r.length;g++){if(r[g].value===l){r[g].selected=!0,u&&(r[g].defaultSelected=!0);return}i!==null||r[g].disabled||(i=r[g])}i!==null&&(i.selected=!0)}}function Ze(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(s(91));return se({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function tt(r,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(s(92));if(ye(l)){if(1<l.length)throw Error(s(93));l=l[0]}i=l}i==null&&(i=""),l=i}r._wrapperState={initialValue:$e(l)}}function pt(r,i){var l=$e(i.value),u=$e(i.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),i.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),u!=null&&(r.defaultValue=""+u)}function yt(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function Ue(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ie(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?Ue(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var xt,Ve=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,u,g){MSApp.execUnsafeLocalFunction(function(){return r(i,l,u,g)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(xt=xt||document.createElement("div"),xt.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=xt.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function ct(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var Ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Me=["Webkit","ms","Moz","O"];Object.keys(Ft).forEach(function(r){Me.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),Ft[i]=Ft[r]})});function Tt(r,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Ft.hasOwnProperty(r)&&Ft[r]?(""+i).trim():i+"px"}function It(r,i){r=r.style;for(var l in i)if(i.hasOwnProperty(l)){var u=l.indexOf("--")===0,g=Tt(l,i[l],u);l==="float"&&(l="cssFloat"),u?r.setProperty(l,g):r[l]=g}}var ss=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rs(r,i){if(i){if(ss[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(s(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(s(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(s(61))}if(i.style!=null&&typeof i.style!="object")throw Error(s(62))}}function Ms(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hs=null;function En(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ps=null,Dt=null,an=null;function Qt(r){if(r=go(r)){if(typeof Ps!="function")throw Error(s(280));var i=r.stateNode;i&&(i=Dl(i),Ps(r.stateNode,r.type,i))}}function ms(r){Dt?an?an.push(r):an=[r]:Dt=r}function ot(){if(Dt){var r=Dt,i=an;if(an=Dt=null,Qt(r),i)for(r=0;r<i.length;r++)Qt(i[r])}}function wt(r,i){return r(i)}function Vt(){}var on=!1;function dn(r,i,l){if(on)return r(i,l);on=!0;try{return wt(r,i,l)}finally{on=!1,(Dt!==null||an!==null)&&(Vt(),ot())}}function bn(r,i){var l=r.stateNode;if(l===null)return null;var u=Dl(l);if(u===null)return null;l=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var vn=!1;if(f)try{var nn={};Object.defineProperty(nn,"passive",{get:function(){vn=!0}}),window.addEventListener("test",nn,nn),window.removeEventListener("test",nn,nn)}catch{vn=!1}function In(r,i,l,u,g,y,k,F,B){var ie=Array.prototype.slice.call(arguments,3);try{i.apply(l,ie)}catch(Ne){this.onError(Ne)}}var $=!1,Pe=null,nt=!1,it=null,bt={onError:function(r){$=!0,Pe=r}};function j(r,i,l,u,g,y,k,F,B){$=!1,Pe=null,In.apply(bt,arguments)}function z(r,i,l,u,g,y,k,F,B){if(j.apply(this,arguments),$){if($){var ie=Pe;$=!1,Pe=null}else throw Error(s(198));nt||(nt=!0,it=ie)}}function H(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function me(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Xe(r){if(H(r)!==r)throw Error(s(188))}function Lt(r){var i=r.alternate;if(!i){if(i=H(r),i===null)throw Error(s(188));return i!==r?null:r}for(var l=r,u=i;;){var g=l.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===l)return Xe(g),r;if(y===u)return Xe(g),i;y=y.sibling}throw Error(s(188))}if(l.return!==u.return)l=g,u=y;else{for(var k=!1,F=g.child;F;){if(F===l){k=!0,l=g,u=y;break}if(F===u){k=!0,u=g,l=y;break}F=F.sibling}if(!k){for(F=y.child;F;){if(F===l){k=!0,l=y,u=g;break}if(F===u){k=!0,u=y,l=g;break}F=F.sibling}if(!k)throw Error(s(189))}}if(l.alternate!==u)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?r:i}function Xt(r){return r=Lt(r),r!==null?$t(r):null}function $t(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=$t(r);if(i!==null)return i;r=r.sibling}return null}var Cn=n.unstable_scheduleCallback,Fs=n.unstable_cancelCallback,as=n.unstable_shouldYield,ps=n.unstable_requestPaint,Se=n.unstable_now,yn=n.unstable_getCurrentPriorityLevel,Nn=n.unstable_ImmediatePriority,Kn=n.unstable_UserBlockingPriority,Vn=n.unstable_NormalPriority,Er=n.unstable_LowPriority,Vr=n.unstable_IdlePriority,Hr=null,Is=null;function $d(r){if(Is&&typeof Is.onCommitFiberRoot=="function")try{Is.onCommitFiberRoot(Hr,r,void 0,(r.current.flags&128)===128)}catch{}}var X=Math.clz32?Math.clz32:Ut,st=Math.log,Bt=Math.LN2;function Ut(r){return r>>>=0,r===0?32:31-(st(r)/Bt|0)|0}var Nt=64,Ht=4194304;function fr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function qr(r,i){var l=r.pendingLanes;if(l===0)return 0;var u=0,g=r.suspendedLanes,y=r.pingedLanes,k=l&268435455;if(k!==0){var F=k&~g;F!==0?u=fr(F):(y&=k,y!==0&&(u=fr(y)))}else k=l&~g,k!==0?u=fr(k):y!==0&&(u=fr(y));if(u===0)return 0;if(i!==0&&i!==u&&(i&g)===0&&(g=u&-u,y=i&-i,g>=y||g===16&&(y&4194240)!==0))return i;if((u&4)!==0&&(u|=l&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=u;0<i;)l=31-X(i),g=1<<l,u|=r[l],i&=~g;return u}function Bd(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ud(r,i){for(var l=r.suspendedLanes,u=r.pingedLanes,g=r.expirationTimes,y=r.pendingLanes;0<y;){var k=31-X(y),F=1<<k,B=g[k];B===-1?((F&l)===0||(F&u)!==0)&&(g[k]=Bd(F,i)):B<=i&&(r.expiredLanes|=F),y&=~F}}function Xi(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function gs(){var r=Nt;return Nt<<=1,(Nt&4194240)===0&&(Nt=64),r}function zd(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function Ji(r,i,l){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-X(i),r[i]=l}function Hb(r,i){var l=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var u=r.eventTimes;for(r=r.expirationTimes;0<l;){var g=31-X(l),y=1<<g;i[g]=0,u[g]=-1,r[g]=-1,l&=~y}}function Wd(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var u=31-X(l),g=1<<u;g&i|r[u]&i&&(r[u]|=i),l&=~g}}var Jt=0;function Vm(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Hm,Vd,qm,Ym,Km,Hd=!1,gl=[],Yr=null,Kr=null,Qr=null,Zi=new Map,eo=new Map,Gr=[],qb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qm(r,i){switch(r){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":Zi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":eo.delete(i.pointerId)}}function to(r,i,l,u,g,y){return r===null||r.nativeEvent!==y?(r={blockedOn:i,domEventName:l,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},i!==null&&(i=go(i),i!==null&&Vd(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),r)}function Yb(r,i,l,u,g){switch(i){case"focusin":return Yr=to(Yr,r,i,l,u,g),!0;case"dragenter":return Kr=to(Kr,r,i,l,u,g),!0;case"mouseover":return Qr=to(Qr,r,i,l,u,g),!0;case"pointerover":var y=g.pointerId;return Zi.set(y,to(Zi.get(y)||null,r,i,l,u,g)),!0;case"gotpointercapture":return y=g.pointerId,eo.set(y,to(eo.get(y)||null,r,i,l,u,g)),!0}return!1}function Gm(r){var i=Ta(r.target);if(i!==null){var l=H(i);if(l!==null){if(i=l.tag,i===13){if(i=me(l),i!==null){r.blockedOn=i,Km(r.priority,function(){qm(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function xl(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=Yd(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);hs=u,l.target.dispatchEvent(u),hs=null}else return i=go(l),i!==null&&Vd(i),r.blockedOn=l,!1;i.shift()}return!0}function Xm(r,i,l){xl(r)&&l.delete(i)}function Kb(){Hd=!1,Yr!==null&&xl(Yr)&&(Yr=null),Kr!==null&&xl(Kr)&&(Kr=null),Qr!==null&&xl(Qr)&&(Qr=null),Zi.forEach(Xm),eo.forEach(Xm)}function no(r,i){r.blockedOn===i&&(r.blockedOn=null,Hd||(Hd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Kb)))}function so(r){function i(g){return no(g,r)}if(0<gl.length){no(gl[0],r);for(var l=1;l<gl.length;l++){var u=gl[l];u.blockedOn===r&&(u.blockedOn=null)}}for(Yr!==null&&no(Yr,r),Kr!==null&&no(Kr,r),Qr!==null&&no(Qr,r),Zi.forEach(i),eo.forEach(i),l=0;l<Gr.length;l++)u=Gr[l],u.blockedOn===r&&(u.blockedOn=null);for(;0<Gr.length&&(l=Gr[0],l.blockedOn===null);)Gm(l),l.blockedOn===null&&Gr.shift()}var ri=A.ReactCurrentBatchConfig,vl=!0;function Qb(r,i,l,u){var g=Jt,y=ri.transition;ri.transition=null;try{Jt=1,qd(r,i,l,u)}finally{Jt=g,ri.transition=y}}function Gb(r,i,l,u){var g=Jt,y=ri.transition;ri.transition=null;try{Jt=4,qd(r,i,l,u)}finally{Jt=g,ri.transition=y}}function qd(r,i,l,u){if(vl){var g=Yd(r,i,l,u);if(g===null)du(r,i,u,yl,l),Qm(r,u);else if(Yb(g,r,i,l,u))u.stopPropagation();else if(Qm(r,u),i&4&&-1<qb.indexOf(r)){for(;g!==null;){var y=go(g);if(y!==null&&Hm(y),y=Yd(r,i,l,u),y===null&&du(r,i,u,yl,l),y===g)break;g=y}g!==null&&u.stopPropagation()}else du(r,i,u,null,l)}}var yl=null;function Yd(r,i,l,u){if(yl=null,r=En(u),r=Ta(r),r!==null)if(i=H(r),i===null)r=null;else if(l=i.tag,l===13){if(r=me(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return yl=r,null}function Jm(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yn()){case Nn:return 1;case Kn:return 4;case Vn:case Er:return 16;case Vr:return 536870912;default:return 16}default:return 16}}var Xr=null,Kd=null,wl=null;function Zm(){if(wl)return wl;var r,i=Kd,l=i.length,u,g="value"in Xr?Xr.value:Xr.textContent,y=g.length;for(r=0;r<l&&i[r]===g[r];r++);var k=l-r;for(u=1;u<=k&&i[l-u]===g[y-u];u++);return wl=g.slice(r,1<u?1-u:void 0)}function jl(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function bl(){return!0}function ep(){return!1}function ks(r){function i(l,u,g,y,k){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=k,this.currentTarget=null;for(var F in r)r.hasOwnProperty(F)&&(l=r[F],this[F]=l?l(y):y[F]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?bl:ep,this.isPropagationStopped=ep,this}return se(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),i}var ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qd=ks(ai),ro=se({},ai,{view:0,detail:0}),Xb=ks(ro),Gd,Xd,ao,Nl=se({},ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zd,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ao&&(ao&&r.type==="mousemove"?(Gd=r.screenX-ao.screenX,Xd=r.screenY-ao.screenY):Xd=Gd=0,ao=r),Gd)},movementY:function(r){return"movementY"in r?r.movementY:Xd}}),tp=ks(Nl),Jb=se({},Nl,{dataTransfer:0}),Zb=ks(Jb),eN=se({},ro,{relatedTarget:0}),Jd=ks(eN),tN=se({},ai,{animationName:0,elapsedTime:0,pseudoElement:0}),nN=ks(tN),sN=se({},ai,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),rN=ks(sN),aN=se({},ai,{data:0}),np=ks(aN),iN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cN(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=lN[r])?!!i[r]:!1}function Zd(){return cN}var dN=se({},ro,{key:function(r){if(r.key){var i=iN[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=jl(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?oN[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zd,charCode:function(r){return r.type==="keypress"?jl(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?jl(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),uN=ks(dN),fN=se({},Nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sp=ks(fN),hN=se({},ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zd}),mN=ks(hN),pN=se({},ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),gN=ks(pN),xN=se({},Nl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),vN=ks(xN),yN=[9,13,27,32],eu=f&&"CompositionEvent"in window,io=null;f&&"documentMode"in document&&(io=document.documentMode);var wN=f&&"TextEvent"in window&&!io,rp=f&&(!eu||io&&8<io&&11>=io),ap=" ",ip=!1;function op(r,i){switch(r){case"keyup":return yN.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ii=!1;function jN(r,i){switch(r){case"compositionend":return lp(i);case"keypress":return i.which!==32?null:(ip=!0,ap);case"textInput":return r=i.data,r===ap&&ip?null:r;default:return null}}function bN(r,i){if(ii)return r==="compositionend"||!eu&&op(r,i)?(r=Zm(),wl=Kd=Xr=null,ii=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return rp&&i.locale!=="ko"?null:i.data;default:return null}}var NN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cp(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!NN[r.type]:i==="textarea"}function dp(r,i,l,u){ms(u),i=kl(i,"onChange"),0<i.length&&(l=new Qd("onChange","change",null,l,u),r.push({event:l,listeners:i}))}var oo=null,lo=null;function _N(r){kp(r,0)}function _l(r){var i=ui(r);if(mt(i))return r}function SN(r,i){if(r==="change")return i}var up=!1;if(f){var tu;if(f){var nu="oninput"in document;if(!nu){var fp=document.createElement("div");fp.setAttribute("oninput","return;"),nu=typeof fp.oninput=="function"}tu=nu}else tu=!1;up=tu&&(!document.documentMode||9<document.documentMode)}function hp(){oo&&(oo.detachEvent("onpropertychange",mp),lo=oo=null)}function mp(r){if(r.propertyName==="value"&&_l(lo)){var i=[];dp(i,lo,r,En(r)),dn(_N,i)}}function CN(r,i,l){r==="focusin"?(hp(),oo=i,lo=l,oo.attachEvent("onpropertychange",mp)):r==="focusout"&&hp()}function PN(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return _l(lo)}function kN(r,i){if(r==="click")return _l(i)}function EN(r,i){if(r==="input"||r==="change")return _l(i)}function TN(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Ks=typeof Object.is=="function"?Object.is:TN;function co(r,i){if(Ks(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),u=Object.keys(i);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!p.call(i,g)||!Ks(r[g],i[g]))return!1}return!0}function pp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function gp(r,i){var l=pp(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=i&&u>=i)return{node:l,offset:i-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=pp(l)}}function xp(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?xp(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function vp(){for(var r=window,i=We();i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=We(r.document)}return i}function su(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function DN(r){var i=vp(),l=r.focusedElem,u=r.selectionRange;if(i!==l&&l&&l.ownerDocument&&xp(l.ownerDocument.documentElement,l)){if(u!==null&&su(l)){if(i=u.start,r=u.end,r===void 0&&(r=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(r,l.value.length);else if(r=(i=l.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var g=l.textContent.length,y=Math.min(u.start,g);u=u.end===void 0?y:Math.min(u.end,g),!r.extend&&y>u&&(g=u,u=y,y=g),g=gp(l,y);var k=gp(l,u);g&&k&&(r.rangeCount!==1||r.anchorNode!==g.node||r.anchorOffset!==g.offset||r.focusNode!==k.node||r.focusOffset!==k.offset)&&(i=i.createRange(),i.setStart(g.node,g.offset),r.removeAllRanges(),y>u?(r.addRange(i),r.extend(k.node,k.offset)):(i.setEnd(k.node,k.offset),r.addRange(i)))}}for(i=[],r=l;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)r=i[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var RN=f&&"documentMode"in document&&11>=document.documentMode,oi=null,ru=null,uo=null,au=!1;function yp(r,i,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;au||oi==null||oi!==We(u)||(u=oi,"selectionStart"in u&&su(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),uo&&co(uo,u)||(uo=u,u=kl(ru,"onSelect"),0<u.length&&(i=new Qd("onSelect","select",null,i,l),r.push({event:i,listeners:u}),i.target=oi)))}function Sl(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var li={animationend:Sl("Animation","AnimationEnd"),animationiteration:Sl("Animation","AnimationIteration"),animationstart:Sl("Animation","AnimationStart"),transitionend:Sl("Transition","TransitionEnd")},iu={},wp={};f&&(wp=document.createElement("div").style,"AnimationEvent"in window||(delete li.animationend.animation,delete li.animationiteration.animation,delete li.animationstart.animation),"TransitionEvent"in window||delete li.transitionend.transition);function Cl(r){if(iu[r])return iu[r];if(!li[r])return r;var i=li[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in wp)return iu[r]=i[l];return r}var jp=Cl("animationend"),bp=Cl("animationiteration"),Np=Cl("animationstart"),_p=Cl("transitionend"),Sp=new Map,Cp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(r,i){Sp.set(r,i),c(i,[r])}for(var ou=0;ou<Cp.length;ou++){var lu=Cp[ou],AN=lu.toLowerCase(),ON=lu[0].toUpperCase()+lu.slice(1);Jr(AN,"on"+ON)}Jr(jp,"onAnimationEnd"),Jr(bp,"onAnimationIteration"),Jr(Np,"onAnimationStart"),Jr("dblclick","onDoubleClick"),Jr("focusin","onFocus"),Jr("focusout","onBlur"),Jr(_p,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MN=new Set("cancel close invalid load scroll toggle".split(" ").concat(fo));function Pp(r,i,l){var u=r.type||"unknown-event";r.currentTarget=l,z(u,i,void 0,r),r.currentTarget=null}function kp(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],g=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var k=u.length-1;0<=k;k--){var F=u[k],B=F.instance,ie=F.currentTarget;if(F=F.listener,B!==y&&g.isPropagationStopped())break e;Pp(g,F,ie),y=B}else for(k=0;k<u.length;k++){if(F=u[k],B=F.instance,ie=F.currentTarget,F=F.listener,B!==y&&g.isPropagationStopped())break e;Pp(g,F,ie),y=B}}}if(nt)throw r=it,nt=!1,it=null,r}function un(r,i){var l=i[gu];l===void 0&&(l=i[gu]=new Set);var u=r+"__bubble";l.has(u)||(Ep(i,r,2,!1),l.add(u))}function cu(r,i,l){var u=0;i&&(u|=4),Ep(l,r,u,i)}var Pl="_reactListening"+Math.random().toString(36).slice(2);function ho(r){if(!r[Pl]){r[Pl]=!0,a.forEach(function(l){l!=="selectionchange"&&(MN.has(l)||cu(l,!1,r),cu(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Pl]||(i[Pl]=!0,cu("selectionchange",!1,i))}}function Ep(r,i,l,u){switch(Jm(i)){case 1:var g=Qb;break;case 4:g=Gb;break;default:g=qd}l=g.bind(null,i,l,r),g=void 0,!vn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),u?g!==void 0?r.addEventListener(i,l,{capture:!0,passive:g}):r.addEventListener(i,l,!0):g!==void 0?r.addEventListener(i,l,{passive:g}):r.addEventListener(i,l,!1)}function du(r,i,l,u,g){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var k=u.tag;if(k===3||k===4){var F=u.stateNode.containerInfo;if(F===g||F.nodeType===8&&F.parentNode===g)break;if(k===4)for(k=u.return;k!==null;){var B=k.tag;if((B===3||B===4)&&(B=k.stateNode.containerInfo,B===g||B.nodeType===8&&B.parentNode===g))return;k=k.return}for(;F!==null;){if(k=Ta(F),k===null)return;if(B=k.tag,B===5||B===6){u=y=k;continue e}F=F.parentNode}}u=u.return}dn(function(){var ie=y,Ne=En(l),Te=[];e:{var je=Sp.get(r);if(je!==void 0){var Ye=Qd,Je=r;switch(r){case"keypress":if(jl(l)===0)break e;case"keydown":case"keyup":Ye=uN;break;case"focusin":Je="focus",Ye=Jd;break;case"focusout":Je="blur",Ye=Jd;break;case"beforeblur":case"afterblur":Ye=Jd;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ye=tp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ye=Zb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ye=mN;break;case jp:case bp:case Np:Ye=nN;break;case _p:Ye=gN;break;case"scroll":Ye=Xb;break;case"wheel":Ye=vN;break;case"copy":case"cut":case"paste":Ye=rN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ye=sp}var et=(i&4)!==0,Pn=!et&&r==="scroll",Q=et?je!==null?je+"Capture":null:je;et=[];for(var W=ie,te;W!==null;){te=W;var Ae=te.stateNode;if(te.tag===5&&Ae!==null&&(te=Ae,Q!==null&&(Ae=bn(W,Q),Ae!=null&&et.push(mo(W,Ae,te)))),Pn)break;W=W.return}0<et.length&&(je=new Ye(je,Je,null,l,Ne),Te.push({event:je,listeners:et}))}}if((i&7)===0){e:{if(je=r==="mouseover"||r==="pointerover",Ye=r==="mouseout"||r==="pointerout",je&&l!==hs&&(Je=l.relatedTarget||l.fromElement)&&(Ta(Je)||Je[Tr]))break e;if((Ye||je)&&(je=Ne.window===Ne?Ne:(je=Ne.ownerDocument)?je.defaultView||je.parentWindow:window,Ye?(Je=l.relatedTarget||l.toElement,Ye=ie,Je=Je?Ta(Je):null,Je!==null&&(Pn=H(Je),Je!==Pn||Je.tag!==5&&Je.tag!==6)&&(Je=null)):(Ye=null,Je=ie),Ye!==Je)){if(et=tp,Ae="onMouseLeave",Q="onMouseEnter",W="mouse",(r==="pointerout"||r==="pointerover")&&(et=sp,Ae="onPointerLeave",Q="onPointerEnter",W="pointer"),Pn=Ye==null?je:ui(Ye),te=Je==null?je:ui(Je),je=new et(Ae,W+"leave",Ye,l,Ne),je.target=Pn,je.relatedTarget=te,Ae=null,Ta(Ne)===ie&&(et=new et(Q,W+"enter",Je,l,Ne),et.target=te,et.relatedTarget=Pn,Ae=et),Pn=Ae,Ye&&Je)t:{for(et=Ye,Q=Je,W=0,te=et;te;te=ci(te))W++;for(te=0,Ae=Q;Ae;Ae=ci(Ae))te++;for(;0<W-te;)et=ci(et),W--;for(;0<te-W;)Q=ci(Q),te--;for(;W--;){if(et===Q||Q!==null&&et===Q.alternate)break t;et=ci(et),Q=ci(Q)}et=null}else et=null;Ye!==null&&Tp(Te,je,Ye,et,!1),Je!==null&&Pn!==null&&Tp(Te,Pn,Je,et,!0)}}e:{if(je=ie?ui(ie):window,Ye=je.nodeName&&je.nodeName.toLowerCase(),Ye==="select"||Ye==="input"&&je.type==="file")var rt=SN;else if(cp(je))if(up)rt=EN;else{rt=PN;var dt=CN}else(Ye=je.nodeName)&&Ye.toLowerCase()==="input"&&(je.type==="checkbox"||je.type==="radio")&&(rt=kN);if(rt&&(rt=rt(r,ie))){dp(Te,rt,l,Ne);break e}dt&&dt(r,je,ie),r==="focusout"&&(dt=je._wrapperState)&&dt.controlled&&je.type==="number"&&J(je,"number",je.value)}switch(dt=ie?ui(ie):window,r){case"focusin":(cp(dt)||dt.contentEditable==="true")&&(oi=dt,ru=ie,uo=null);break;case"focusout":uo=ru=oi=null;break;case"mousedown":au=!0;break;case"contextmenu":case"mouseup":case"dragend":au=!1,yp(Te,l,Ne);break;case"selectionchange":if(RN)break;case"keydown":case"keyup":yp(Te,l,Ne)}var ut;if(eu)e:{switch(r){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else ii?op(r,l)&&(vt="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(vt="onCompositionStart");vt&&(rp&&l.locale!=="ko"&&(ii||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&ii&&(ut=Zm()):(Xr=Ne,Kd="value"in Xr?Xr.value:Xr.textContent,ii=!0)),dt=kl(ie,vt),0<dt.length&&(vt=new np(vt,r,null,l,Ne),Te.push({event:vt,listeners:dt}),ut?vt.data=ut:(ut=lp(l),ut!==null&&(vt.data=ut)))),(ut=wN?jN(r,l):bN(r,l))&&(ie=kl(ie,"onBeforeInput"),0<ie.length&&(Ne=new np("onBeforeInput","beforeinput",null,l,Ne),Te.push({event:Ne,listeners:ie}),Ne.data=ut))}kp(Te,i)})}function mo(r,i,l){return{instance:r,listener:i,currentTarget:l}}function kl(r,i){for(var l=i+"Capture",u=[];r!==null;){var g=r,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=bn(r,l),y!=null&&u.unshift(mo(r,y,g)),y=bn(r,i),y!=null&&u.push(mo(r,y,g))),r=r.return}return u}function ci(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Tp(r,i,l,u,g){for(var y=i._reactName,k=[];l!==null&&l!==u;){var F=l,B=F.alternate,ie=F.stateNode;if(B!==null&&B===u)break;F.tag===5&&ie!==null&&(F=ie,g?(B=bn(l,y),B!=null&&k.unshift(mo(l,B,F))):g||(B=bn(l,y),B!=null&&k.push(mo(l,B,F)))),l=l.return}k.length!==0&&r.push({event:i,listeners:k})}var FN=/\r\n?/g,IN=/\u0000|\uFFFD/g;function Dp(r){return(typeof r=="string"?r:""+r).replace(FN,`
`).replace(IN,"")}function El(r,i,l){if(i=Dp(i),Dp(r)!==i&&l)throw Error(s(425))}function Tl(){}var uu=null,fu=null;function hu(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var mu=typeof setTimeout=="function"?setTimeout:void 0,LN=typeof clearTimeout=="function"?clearTimeout:void 0,Rp=typeof Promise=="function"?Promise:void 0,$N=typeof queueMicrotask=="function"?queueMicrotask:typeof Rp<"u"?function(r){return Rp.resolve(null).then(r).catch(BN)}:mu;function BN(r){setTimeout(function(){throw r})}function pu(r,i){var l=i,u=0;do{var g=l.nextSibling;if(r.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(u===0){r.removeChild(g),so(i);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=g}while(l);so(i)}function Zr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Ap(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return r;i--}else l==="/$"&&i++}r=r.previousSibling}return null}var di=Math.random().toString(36).slice(2),hr="__reactFiber$"+di,po="__reactProps$"+di,Tr="__reactContainer$"+di,gu="__reactEvents$"+di,UN="__reactListeners$"+di,zN="__reactHandles$"+di;function Ta(r){var i=r[hr];if(i)return i;for(var l=r.parentNode;l;){if(i=l[Tr]||l[hr]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=Ap(r);r!==null;){if(l=r[hr])return l;r=Ap(r)}return i}r=l,l=r.parentNode}return null}function go(r){return r=r[hr]||r[Tr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ui(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(s(33))}function Dl(r){return r[po]||null}var xu=[],fi=-1;function ea(r){return{current:r}}function fn(r){0>fi||(r.current=xu[fi],xu[fi]=null,fi--)}function ln(r,i){fi++,xu[fi]=r.current,r.current=i}var ta={},Qn=ea(ta),xs=ea(!1),Da=ta;function hi(r,i){var l=r.type.contextTypes;if(!l)return ta;var u=r.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in l)g[y]=i[y];return u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=g),g}function vs(r){return r=r.childContextTypes,r!=null}function Rl(){fn(xs),fn(Qn)}function Op(r,i,l){if(Qn.current!==ta)throw Error(s(168));ln(Qn,i),ln(xs,l)}function Mp(r,i,l){var u=r.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return l;u=u.getChildContext();for(var g in u)if(!(g in i))throw Error(s(108,re(r)||"Unknown",g));return se({},l,u)}function Al(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ta,Da=Qn.current,ln(Qn,r),ln(xs,xs.current),!0}function Fp(r,i,l){var u=r.stateNode;if(!u)throw Error(s(169));l?(r=Mp(r,i,Da),u.__reactInternalMemoizedMergedChildContext=r,fn(xs),fn(Qn),ln(Qn,r)):fn(xs),ln(xs,l)}var Dr=null,Ol=!1,vu=!1;function Ip(r){Dr===null?Dr=[r]:Dr.push(r)}function WN(r){Ol=!0,Ip(r)}function na(){if(!vu&&Dr!==null){vu=!0;var r=0,i=Jt;try{var l=Dr;for(Jt=1;r<l.length;r++){var u=l[r];do u=u(!0);while(u!==null)}Dr=null,Ol=!1}catch(g){throw Dr!==null&&(Dr=Dr.slice(r+1)),Cn(Nn,na),g}finally{Jt=i,vu=!1}}return null}var mi=[],pi=0,Ml=null,Fl=0,Ls=[],$s=0,Ra=null,Rr=1,Ar="";function Aa(r,i){mi[pi++]=Fl,mi[pi++]=Ml,Ml=r,Fl=i}function Lp(r,i,l){Ls[$s++]=Rr,Ls[$s++]=Ar,Ls[$s++]=Ra,Ra=r;var u=Rr;r=Ar;var g=32-X(u)-1;u&=~(1<<g),l+=1;var y=32-X(i)+g;if(30<y){var k=g-g%5;y=(u&(1<<k)-1).toString(32),u>>=k,g-=k,Rr=1<<32-X(i)+g|l<<g|u,Ar=y+r}else Rr=1<<y|l<<g|u,Ar=r}function yu(r){r.return!==null&&(Aa(r,1),Lp(r,1,0))}function wu(r){for(;r===Ml;)Ml=mi[--pi],mi[pi]=null,Fl=mi[--pi],mi[pi]=null;for(;r===Ra;)Ra=Ls[--$s],Ls[$s]=null,Ar=Ls[--$s],Ls[$s]=null,Rr=Ls[--$s],Ls[$s]=null}var Es=null,Ts=null,xn=!1,Qs=null;function $p(r,i){var l=Ws(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=r,i=r.deletions,i===null?(r.deletions=[l],r.flags|=16):i.push(l)}function Bp(r,i){switch(r.tag){case 5:var l=r.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,Es=r,Ts=Zr(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,Es=r,Ts=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=Ra!==null?{id:Rr,overflow:Ar}:null,r.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Ws(18,null,null,0),l.stateNode=i,l.return=r,r.child=l,Es=r,Ts=null,!0):!1;default:return!1}}function ju(r){return(r.mode&1)!==0&&(r.flags&128)===0}function bu(r){if(xn){var i=Ts;if(i){var l=i;if(!Bp(r,i)){if(ju(r))throw Error(s(418));i=Zr(l.nextSibling);var u=Es;i&&Bp(r,i)?$p(u,l):(r.flags=r.flags&-4097|2,xn=!1,Es=r)}}else{if(ju(r))throw Error(s(418));r.flags=r.flags&-4097|2,xn=!1,Es=r}}}function Up(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Es=r}function Il(r){if(r!==Es)return!1;if(!xn)return Up(r),xn=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!hu(r.type,r.memoizedProps)),i&&(i=Ts)){if(ju(r))throw zp(),Error(s(418));for(;i;)$p(r,i),i=Zr(i.nextSibling)}if(Up(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(i===0){Ts=Zr(r.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}r=r.nextSibling}Ts=null}}else Ts=Es?Zr(r.stateNode.nextSibling):null;return!0}function zp(){for(var r=Ts;r;)r=Zr(r.nextSibling)}function gi(){Ts=Es=null,xn=!1}function Nu(r){Qs===null?Qs=[r]:Qs.push(r)}var VN=A.ReactCurrentBatchConfig;function xo(r,i,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(s(309));var u=l.stateNode}if(!u)throw Error(s(147,r));var g=u,y=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===y?i.ref:(i=function(k){var F=g.refs;k===null?delete F[y]:F[y]=k},i._stringRef=y,i)}if(typeof r!="string")throw Error(s(284));if(!l._owner)throw Error(s(290,r))}return r}function Ll(r,i){throw r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Wp(r){var i=r._init;return i(r._payload)}function Vp(r){function i(Q,W){if(r){var te=Q.deletions;te===null?(Q.deletions=[W],Q.flags|=16):te.push(W)}}function l(Q,W){if(!r)return null;for(;W!==null;)i(Q,W),W=W.sibling;return null}function u(Q,W){for(Q=new Map;W!==null;)W.key!==null?Q.set(W.key,W):Q.set(W.index,W),W=W.sibling;return Q}function g(Q,W){return Q=da(Q,W),Q.index=0,Q.sibling=null,Q}function y(Q,W,te){return Q.index=te,r?(te=Q.alternate,te!==null?(te=te.index,te<W?(Q.flags|=2,W):te):(Q.flags|=2,W)):(Q.flags|=1048576,W)}function k(Q){return r&&Q.alternate===null&&(Q.flags|=2),Q}function F(Q,W,te,Ae){return W===null||W.tag!==6?(W=pf(te,Q.mode,Ae),W.return=Q,W):(W=g(W,te),W.return=Q,W)}function B(Q,W,te,Ae){var rt=te.type;return rt===R?Ne(Q,W,te.props.children,Ae,te.key):W!==null&&(W.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===fe&&Wp(rt)===W.type)?(Ae=g(W,te.props),Ae.ref=xo(Q,W,te),Ae.return=Q,Ae):(Ae=lc(te.type,te.key,te.props,null,Q.mode,Ae),Ae.ref=xo(Q,W,te),Ae.return=Q,Ae)}function ie(Q,W,te,Ae){return W===null||W.tag!==4||W.stateNode.containerInfo!==te.containerInfo||W.stateNode.implementation!==te.implementation?(W=gf(te,Q.mode,Ae),W.return=Q,W):(W=g(W,te.children||[]),W.return=Q,W)}function Ne(Q,W,te,Ae,rt){return W===null||W.tag!==7?(W=Ua(te,Q.mode,Ae,rt),W.return=Q,W):(W=g(W,te),W.return=Q,W)}function Te(Q,W,te){if(typeof W=="string"&&W!==""||typeof W=="number")return W=pf(""+W,Q.mode,te),W.return=Q,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case D:return te=lc(W.type,W.key,W.props,null,Q.mode,te),te.ref=xo(Q,null,W),te.return=Q,te;case U:return W=gf(W,Q.mode,te),W.return=Q,W;case fe:var Ae=W._init;return Te(Q,Ae(W._payload),te)}if(ye(W)||K(W))return W=Ua(W,Q.mode,te,null),W.return=Q,W;Ll(Q,W)}return null}function je(Q,W,te,Ae){var rt=W!==null?W.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return rt!==null?null:F(Q,W,""+te,Ae);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case D:return te.key===rt?B(Q,W,te,Ae):null;case U:return te.key===rt?ie(Q,W,te,Ae):null;case fe:return rt=te._init,je(Q,W,rt(te._payload),Ae)}if(ye(te)||K(te))return rt!==null?null:Ne(Q,W,te,Ae,null);Ll(Q,te)}return null}function Ye(Q,W,te,Ae,rt){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Q=Q.get(te)||null,F(W,Q,""+Ae,rt);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case D:return Q=Q.get(Ae.key===null?te:Ae.key)||null,B(W,Q,Ae,rt);case U:return Q=Q.get(Ae.key===null?te:Ae.key)||null,ie(W,Q,Ae,rt);case fe:var dt=Ae._init;return Ye(Q,W,te,dt(Ae._payload),rt)}if(ye(Ae)||K(Ae))return Q=Q.get(te)||null,Ne(W,Q,Ae,rt,null);Ll(W,Ae)}return null}function Je(Q,W,te,Ae){for(var rt=null,dt=null,ut=W,vt=W=0,Bn=null;ut!==null&&vt<te.length;vt++){ut.index>vt?(Bn=ut,ut=null):Bn=ut.sibling;var Yt=je(Q,ut,te[vt],Ae);if(Yt===null){ut===null&&(ut=Bn);break}r&&ut&&Yt.alternate===null&&i(Q,ut),W=y(Yt,W,vt),dt===null?rt=Yt:dt.sibling=Yt,dt=Yt,ut=Bn}if(vt===te.length)return l(Q,ut),xn&&Aa(Q,vt),rt;if(ut===null){for(;vt<te.length;vt++)ut=Te(Q,te[vt],Ae),ut!==null&&(W=y(ut,W,vt),dt===null?rt=ut:dt.sibling=ut,dt=ut);return xn&&Aa(Q,vt),rt}for(ut=u(Q,ut);vt<te.length;vt++)Bn=Ye(ut,Q,vt,te[vt],Ae),Bn!==null&&(r&&Bn.alternate!==null&&ut.delete(Bn.key===null?vt:Bn.key),W=y(Bn,W,vt),dt===null?rt=Bn:dt.sibling=Bn,dt=Bn);return r&&ut.forEach(function(ua){return i(Q,ua)}),xn&&Aa(Q,vt),rt}function et(Q,W,te,Ae){var rt=K(te);if(typeof rt!="function")throw Error(s(150));if(te=rt.call(te),te==null)throw Error(s(151));for(var dt=rt=null,ut=W,vt=W=0,Bn=null,Yt=te.next();ut!==null&&!Yt.done;vt++,Yt=te.next()){ut.index>vt?(Bn=ut,ut=null):Bn=ut.sibling;var ua=je(Q,ut,Yt.value,Ae);if(ua===null){ut===null&&(ut=Bn);break}r&&ut&&ua.alternate===null&&i(Q,ut),W=y(ua,W,vt),dt===null?rt=ua:dt.sibling=ua,dt=ua,ut=Bn}if(Yt.done)return l(Q,ut),xn&&Aa(Q,vt),rt;if(ut===null){for(;!Yt.done;vt++,Yt=te.next())Yt=Te(Q,Yt.value,Ae),Yt!==null&&(W=y(Yt,W,vt),dt===null?rt=Yt:dt.sibling=Yt,dt=Yt);return xn&&Aa(Q,vt),rt}for(ut=u(Q,ut);!Yt.done;vt++,Yt=te.next())Yt=Ye(ut,Q,vt,Yt.value,Ae),Yt!==null&&(r&&Yt.alternate!==null&&ut.delete(Yt.key===null?vt:Yt.key),W=y(Yt,W,vt),dt===null?rt=Yt:dt.sibling=Yt,dt=Yt);return r&&ut.forEach(function(N_){return i(Q,N_)}),xn&&Aa(Q,vt),rt}function Pn(Q,W,te,Ae){if(typeof te=="object"&&te!==null&&te.type===R&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case D:e:{for(var rt=te.key,dt=W;dt!==null;){if(dt.key===rt){if(rt=te.type,rt===R){if(dt.tag===7){l(Q,dt.sibling),W=g(dt,te.props.children),W.return=Q,Q=W;break e}}else if(dt.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===fe&&Wp(rt)===dt.type){l(Q,dt.sibling),W=g(dt,te.props),W.ref=xo(Q,dt,te),W.return=Q,Q=W;break e}l(Q,dt);break}else i(Q,dt);dt=dt.sibling}te.type===R?(W=Ua(te.props.children,Q.mode,Ae,te.key),W.return=Q,Q=W):(Ae=lc(te.type,te.key,te.props,null,Q.mode,Ae),Ae.ref=xo(Q,W,te),Ae.return=Q,Q=Ae)}return k(Q);case U:e:{for(dt=te.key;W!==null;){if(W.key===dt)if(W.tag===4&&W.stateNode.containerInfo===te.containerInfo&&W.stateNode.implementation===te.implementation){l(Q,W.sibling),W=g(W,te.children||[]),W.return=Q,Q=W;break e}else{l(Q,W);break}else i(Q,W);W=W.sibling}W=gf(te,Q.mode,Ae),W.return=Q,Q=W}return k(Q);case fe:return dt=te._init,Pn(Q,W,dt(te._payload),Ae)}if(ye(te))return Je(Q,W,te,Ae);if(K(te))return et(Q,W,te,Ae);Ll(Q,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,W!==null&&W.tag===6?(l(Q,W.sibling),W=g(W,te),W.return=Q,Q=W):(l(Q,W),W=pf(te,Q.mode,Ae),W.return=Q,Q=W),k(Q)):l(Q,W)}return Pn}var xi=Vp(!0),Hp=Vp(!1),$l=ea(null),Bl=null,vi=null,_u=null;function Su(){_u=vi=Bl=null}function Cu(r){var i=$l.current;fn($l),r._currentValue=i}function Pu(r,i,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===l)break;r=r.return}}function yi(r,i){Bl=r,_u=vi=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(ys=!0),r.firstContext=null)}function Bs(r){var i=r._currentValue;if(_u!==r)if(r={context:r,memoizedValue:i,next:null},vi===null){if(Bl===null)throw Error(s(308));vi=r,Bl.dependencies={lanes:0,firstContext:r}}else vi=vi.next=r;return i}var Oa=null;function ku(r){Oa===null?Oa=[r]:Oa.push(r)}function qp(r,i,l,u){var g=i.interleaved;return g===null?(l.next=l,ku(i)):(l.next=g.next,g.next=l),i.interleaved=l,Or(r,u)}function Or(r,i){r.lanes|=i;var l=r.alternate;for(l!==null&&(l.lanes|=i),l=r,r=r.return;r!==null;)r.childLanes|=i,l=r.alternate,l!==null&&(l.childLanes|=i),l=r,r=r.return;return l.tag===3?l.stateNode:null}var sa=!1;function Eu(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yp(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Mr(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function ra(r,i,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(qt&2)!==0){var g=u.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),u.pending=i,Or(r,l)}return g=u.interleaved,g===null?(i.next=i,ku(u)):(i.next=g.next,g.next=i),u.interleaved=i,Or(r,l)}function Ul(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var u=i.lanes;u&=r.pendingLanes,l|=u,i.lanes=l,Wd(r,l)}}function Kp(r,i){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var k={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?g=y=k:y=y.next=k,l=l.next}while(l!==null);y===null?g=y=i:y=y.next=i}else g=y=i;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,effects:u.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}function zl(r,i,l,u){var g=r.updateQueue;sa=!1;var y=g.firstBaseUpdate,k=g.lastBaseUpdate,F=g.shared.pending;if(F!==null){g.shared.pending=null;var B=F,ie=B.next;B.next=null,k===null?y=ie:k.next=ie,k=B;var Ne=r.alternate;Ne!==null&&(Ne=Ne.updateQueue,F=Ne.lastBaseUpdate,F!==k&&(F===null?Ne.firstBaseUpdate=ie:F.next=ie,Ne.lastBaseUpdate=B))}if(y!==null){var Te=g.baseState;k=0,Ne=ie=B=null,F=y;do{var je=F.lane,Ye=F.eventTime;if((u&je)===je){Ne!==null&&(Ne=Ne.next={eventTime:Ye,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var Je=r,et=F;switch(je=i,Ye=l,et.tag){case 1:if(Je=et.payload,typeof Je=="function"){Te=Je.call(Ye,Te,je);break e}Te=Je;break e;case 3:Je.flags=Je.flags&-65537|128;case 0:if(Je=et.payload,je=typeof Je=="function"?Je.call(Ye,Te,je):Je,je==null)break e;Te=se({},Te,je);break e;case 2:sa=!0}}F.callback!==null&&F.lane!==0&&(r.flags|=64,je=g.effects,je===null?g.effects=[F]:je.push(F))}else Ye={eventTime:Ye,lane:je,tag:F.tag,payload:F.payload,callback:F.callback,next:null},Ne===null?(ie=Ne=Ye,B=Te):Ne=Ne.next=Ye,k|=je;if(F=F.next,F===null){if(F=g.shared.pending,F===null)break;je=F,F=je.next,je.next=null,g.lastBaseUpdate=je,g.shared.pending=null}}while(!0);if(Ne===null&&(B=Te),g.baseState=B,g.firstBaseUpdate=ie,g.lastBaseUpdate=Ne,i=g.shared.interleaved,i!==null){g=i;do k|=g.lane,g=g.next;while(g!==i)}else y===null&&(g.shared.lanes=0);Ia|=k,r.lanes=k,r.memoizedState=Te}}function Qp(r,i,l){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var u=r[i],g=u.callback;if(g!==null){if(u.callback=null,u=l,typeof g!="function")throw Error(s(191,g));g.call(u)}}}var vo={},mr=ea(vo),yo=ea(vo),wo=ea(vo);function Ma(r){if(r===vo)throw Error(s(174));return r}function Tu(r,i){switch(ln(wo,i),ln(yo,r),ln(mr,vo),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ie(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Ie(i,r)}fn(mr),ln(mr,i)}function wi(){fn(mr),fn(yo),fn(wo)}function Gp(r){Ma(wo.current);var i=Ma(mr.current),l=Ie(i,r.type);i!==l&&(ln(yo,r),ln(mr,l))}function Du(r){yo.current===r&&(fn(mr),fn(yo))}var wn=ea(0);function Wl(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ru=[];function Au(){for(var r=0;r<Ru.length;r++)Ru[r]._workInProgressVersionPrimary=null;Ru.length=0}var Vl=A.ReactCurrentDispatcher,Ou=A.ReactCurrentBatchConfig,Fa=0,jn=null,An=null,Ln=null,Hl=!1,jo=!1,bo=0,HN=0;function Gn(){throw Error(s(321))}function Mu(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!Ks(r[l],i[l]))return!1;return!0}function Fu(r,i,l,u,g,y){if(Fa=y,jn=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Vl.current=r===null||r.memoizedState===null?QN:GN,r=l(u,g),jo){y=0;do{if(jo=!1,bo=0,25<=y)throw Error(s(301));y+=1,Ln=An=null,i.updateQueue=null,Vl.current=XN,r=l(u,g)}while(jo)}if(Vl.current=Kl,i=An!==null&&An.next!==null,Fa=0,Ln=An=jn=null,Hl=!1,i)throw Error(s(300));return r}function Iu(){var r=bo!==0;return bo=0,r}function pr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?jn.memoizedState=Ln=r:Ln=Ln.next=r,Ln}function Us(){if(An===null){var r=jn.alternate;r=r!==null?r.memoizedState:null}else r=An.next;var i=Ln===null?jn.memoizedState:Ln.next;if(i!==null)Ln=i,An=r;else{if(r===null)throw Error(s(310));An=r,r={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},Ln===null?jn.memoizedState=Ln=r:Ln=Ln.next=r}return Ln}function No(r,i){return typeof i=="function"?i(r):i}function Lu(r){var i=Us(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var u=An,g=u.baseQueue,y=l.pending;if(y!==null){if(g!==null){var k=g.next;g.next=y.next,y.next=k}u.baseQueue=g=y,l.pending=null}if(g!==null){y=g.next,u=u.baseState;var F=k=null,B=null,ie=y;do{var Ne=ie.lane;if((Fa&Ne)===Ne)B!==null&&(B=B.next={lane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),u=ie.hasEagerState?ie.eagerState:r(u,ie.action);else{var Te={lane:Ne,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null};B===null?(F=B=Te,k=u):B=B.next=Te,jn.lanes|=Ne,Ia|=Ne}ie=ie.next}while(ie!==null&&ie!==y);B===null?k=u:B.next=F,Ks(u,i.memoizedState)||(ys=!0),i.memoizedState=u,i.baseState=k,i.baseQueue=B,l.lastRenderedState=u}if(r=l.interleaved,r!==null){g=r;do y=g.lane,jn.lanes|=y,Ia|=y,g=g.next;while(g!==r)}else g===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function $u(r){var i=Us(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var u=l.dispatch,g=l.pending,y=i.memoizedState;if(g!==null){l.pending=null;var k=g=g.next;do y=r(y,k.action),k=k.next;while(k!==g);Ks(y,i.memoizedState)||(ys=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),l.lastRenderedState=y}return[y,u]}function Xp(){}function Jp(r,i){var l=jn,u=Us(),g=i(),y=!Ks(u.memoizedState,g);if(y&&(u.memoizedState=g,ys=!0),u=u.queue,Bu(tg.bind(null,l,u,r),[r]),u.getSnapshot!==i||y||Ln!==null&&Ln.memoizedState.tag&1){if(l.flags|=2048,_o(9,eg.bind(null,l,u,g,i),void 0,null),$n===null)throw Error(s(349));(Fa&30)!==0||Zp(l,i,g)}return g}function Zp(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=jn.updateQueue,i===null?(i={lastEffect:null,stores:null},jn.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function eg(r,i,l,u){i.value=l,i.getSnapshot=u,ng(i)&&sg(r)}function tg(r,i,l){return l(function(){ng(i)&&sg(r)})}function ng(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!Ks(r,l)}catch{return!0}}function sg(r){var i=Or(r,1);i!==null&&Zs(i,r,1,-1)}function rg(r){var i=pr();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:r},i.queue=r,r=r.dispatch=KN.bind(null,jn,r),[i.memoizedState,r]}function _o(r,i,l,u){return r={tag:r,create:i,destroy:l,deps:u,next:null},i=jn.updateQueue,i===null?(i={lastEffect:null,stores:null},jn.updateQueue=i,i.lastEffect=r.next=r):(l=i.lastEffect,l===null?i.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,i.lastEffect=r)),r}function ag(){return Us().memoizedState}function ql(r,i,l,u){var g=pr();jn.flags|=r,g.memoizedState=_o(1|i,l,void 0,u===void 0?null:u)}function Yl(r,i,l,u){var g=Us();u=u===void 0?null:u;var y=void 0;if(An!==null){var k=An.memoizedState;if(y=k.destroy,u!==null&&Mu(u,k.deps)){g.memoizedState=_o(i,l,y,u);return}}jn.flags|=r,g.memoizedState=_o(1|i,l,y,u)}function ig(r,i){return ql(8390656,8,r,i)}function Bu(r,i){return Yl(2048,8,r,i)}function og(r,i){return Yl(4,2,r,i)}function lg(r,i){return Yl(4,4,r,i)}function cg(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function dg(r,i,l){return l=l!=null?l.concat([r]):null,Yl(4,4,cg.bind(null,i,r),l)}function Uu(){}function ug(r,i){var l=Us();i=i===void 0?null:i;var u=l.memoizedState;return u!==null&&i!==null&&Mu(i,u[1])?u[0]:(l.memoizedState=[r,i],r)}function fg(r,i){var l=Us();i=i===void 0?null:i;var u=l.memoizedState;return u!==null&&i!==null&&Mu(i,u[1])?u[0]:(r=r(),l.memoizedState=[r,i],r)}function hg(r,i,l){return(Fa&21)===0?(r.baseState&&(r.baseState=!1,ys=!0),r.memoizedState=l):(Ks(l,i)||(l=gs(),jn.lanes|=l,Ia|=l,r.baseState=!0),i)}function qN(r,i){var l=Jt;Jt=l!==0&&4>l?l:4,r(!0);var u=Ou.transition;Ou.transition={};try{r(!1),i()}finally{Jt=l,Ou.transition=u}}function mg(){return Us().memoizedState}function YN(r,i,l){var u=la(r);if(l={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null},pg(r))gg(i,l);else if(l=qp(r,i,l,u),l!==null){var g=os();Zs(l,r,u,g),xg(l,i,u)}}function KN(r,i,l){var u=la(r),g={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null};if(pg(r))gg(i,g);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var k=i.lastRenderedState,F=y(k,l);if(g.hasEagerState=!0,g.eagerState=F,Ks(F,k)){var B=i.interleaved;B===null?(g.next=g,ku(i)):(g.next=B.next,B.next=g),i.interleaved=g;return}}catch{}finally{}l=qp(r,i,g,u),l!==null&&(g=os(),Zs(l,r,u,g),xg(l,i,u))}}function pg(r){var i=r.alternate;return r===jn||i!==null&&i===jn}function gg(r,i){jo=Hl=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function xg(r,i,l){if((l&4194240)!==0){var u=i.lanes;u&=r.pendingLanes,l|=u,i.lanes=l,Wd(r,l)}}var Kl={readContext:Bs,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},QN={readContext:Bs,useCallback:function(r,i){return pr().memoizedState=[r,i===void 0?null:i],r},useContext:Bs,useEffect:ig,useImperativeHandle:function(r,i,l){return l=l!=null?l.concat([r]):null,ql(4194308,4,cg.bind(null,i,r),l)},useLayoutEffect:function(r,i){return ql(4194308,4,r,i)},useInsertionEffect:function(r,i){return ql(4,2,r,i)},useMemo:function(r,i){var l=pr();return i=i===void 0?null:i,r=r(),l.memoizedState=[r,i],r},useReducer:function(r,i,l){var u=pr();return i=l!==void 0?l(i):i,u.memoizedState=u.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},u.queue=r,r=r.dispatch=YN.bind(null,jn,r),[u.memoizedState,r]},useRef:function(r){var i=pr();return r={current:r},i.memoizedState=r},useState:rg,useDebugValue:Uu,useDeferredValue:function(r){return pr().memoizedState=r},useTransition:function(){var r=rg(!1),i=r[0];return r=qN.bind(null,r[1]),pr().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,l){var u=jn,g=pr();if(xn){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),$n===null)throw Error(s(349));(Fa&30)!==0||Zp(u,i,l)}g.memoizedState=l;var y={value:l,getSnapshot:i};return g.queue=y,ig(tg.bind(null,u,y,r),[r]),u.flags|=2048,_o(9,eg.bind(null,u,y,l,i),void 0,null),l},useId:function(){var r=pr(),i=$n.identifierPrefix;if(xn){var l=Ar,u=Rr;l=(u&~(1<<32-X(u)-1)).toString(32)+l,i=":"+i+"R"+l,l=bo++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=HN++,i=":"+i+"r"+l.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},GN={readContext:Bs,useCallback:ug,useContext:Bs,useEffect:Bu,useImperativeHandle:dg,useInsertionEffect:og,useLayoutEffect:lg,useMemo:fg,useReducer:Lu,useRef:ag,useState:function(){return Lu(No)},useDebugValue:Uu,useDeferredValue:function(r){var i=Us();return hg(i,An.memoizedState,r)},useTransition:function(){var r=Lu(No)[0],i=Us().memoizedState;return[r,i]},useMutableSource:Xp,useSyncExternalStore:Jp,useId:mg,unstable_isNewReconciler:!1},XN={readContext:Bs,useCallback:ug,useContext:Bs,useEffect:Bu,useImperativeHandle:dg,useInsertionEffect:og,useLayoutEffect:lg,useMemo:fg,useReducer:$u,useRef:ag,useState:function(){return $u(No)},useDebugValue:Uu,useDeferredValue:function(r){var i=Us();return An===null?i.memoizedState=r:hg(i,An.memoizedState,r)},useTransition:function(){var r=$u(No)[0],i=Us().memoizedState;return[r,i]},useMutableSource:Xp,useSyncExternalStore:Jp,useId:mg,unstable_isNewReconciler:!1};function Gs(r,i){if(r&&r.defaultProps){i=se({},i),r=r.defaultProps;for(var l in r)i[l]===void 0&&(i[l]=r[l]);return i}return i}function zu(r,i,l,u){i=r.memoizedState,l=l(u,i),l=l==null?i:se({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Ql={isMounted:function(r){return(r=r._reactInternals)?H(r)===r:!1},enqueueSetState:function(r,i,l){r=r._reactInternals;var u=os(),g=la(r),y=Mr(u,g);y.payload=i,l!=null&&(y.callback=l),i=ra(r,y,g),i!==null&&(Zs(i,r,g,u),Ul(i,r,g))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var u=os(),g=la(r),y=Mr(u,g);y.tag=1,y.payload=i,l!=null&&(y.callback=l),i=ra(r,y,g),i!==null&&(Zs(i,r,g,u),Ul(i,r,g))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=os(),u=la(r),g=Mr(l,u);g.tag=2,i!=null&&(g.callback=i),i=ra(r,g,u),i!==null&&(Zs(i,r,u,l),Ul(i,r,u))}};function vg(r,i,l,u,g,y,k){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,k):i.prototype&&i.prototype.isPureReactComponent?!co(l,u)||!co(g,y):!0}function yg(r,i,l){var u=!1,g=ta,y=i.contextType;return typeof y=="object"&&y!==null?y=Bs(y):(g=vs(i)?Da:Qn.current,u=i.contextTypes,y=(u=u!=null)?hi(r,g):ta),i=new i(l,y),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ql,r.stateNode=i,i._reactInternals=r,u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=g,r.__reactInternalMemoizedMaskedChildContext=y),i}function wg(r,i,l,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,u),i.state!==r&&Ql.enqueueReplaceState(i,i.state,null)}function Wu(r,i,l,u){var g=r.stateNode;g.props=l,g.state=r.memoizedState,g.refs={},Eu(r);var y=i.contextType;typeof y=="object"&&y!==null?g.context=Bs(y):(y=vs(i)?Da:Qn.current,g.context=hi(r,y)),g.state=r.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(zu(r,i,y,l),g.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(i=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),i!==g.state&&Ql.enqueueReplaceState(g,g.state,null),zl(r,l,g,u),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308)}function ji(r,i){try{var l="",u=i;do l+=xe(u),u=u.return;while(u);var g=l}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:i,stack:g,digest:null}}function Vu(r,i,l){return{value:r,source:null,stack:l??null,digest:i??null}}function Hu(r,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var JN=typeof WeakMap=="function"?WeakMap:Map;function jg(r,i,l){l=Mr(-1,l),l.tag=3,l.payload={element:null};var u=i.value;return l.callback=function(){nc||(nc=!0,of=u),Hu(r,i)},l}function bg(r,i,l){l=Mr(-1,l),l.tag=3;var u=r.type.getDerivedStateFromError;if(typeof u=="function"){var g=i.value;l.payload=function(){return u(g)},l.callback=function(){Hu(r,i)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Hu(r,i),typeof u!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var k=i.stack;this.componentDidCatch(i.value,{componentStack:k!==null?k:""})}),l}function Ng(r,i,l){var u=r.pingCache;if(u===null){u=r.pingCache=new JN;var g=new Set;u.set(i,g)}else g=u.get(i),g===void 0&&(g=new Set,u.set(i,g));g.has(l)||(g.add(l),r=f_.bind(null,r,i,l),i.then(r,r))}function _g(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Sg(r,i,l,u,g){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Mr(-1,1),i.tag=2,ra(l,i,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=g,r)}var ZN=A.ReactCurrentOwner,ys=!1;function is(r,i,l,u){i.child=r===null?Hp(i,null,l,u):xi(i,r.child,l,u)}function Cg(r,i,l,u,g){l=l.render;var y=i.ref;return yi(i,g),u=Fu(r,i,l,u,y,g),l=Iu(),r!==null&&!ys?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~g,Fr(r,i,g)):(xn&&l&&yu(i),i.flags|=1,is(r,i,u,g),i.child)}function Pg(r,i,l,u,g){if(r===null){var y=l.type;return typeof y=="function"&&!mf(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=y,kg(r,i,y,u,g)):(r=lc(l.type,null,u,i,i.mode,g),r.ref=i.ref,r.return=i,i.child=r)}if(y=r.child,(r.lanes&g)===0){var k=y.memoizedProps;if(l=l.compare,l=l!==null?l:co,l(k,u)&&r.ref===i.ref)return Fr(r,i,g)}return i.flags|=1,r=da(y,u),r.ref=i.ref,r.return=i,i.child=r}function kg(r,i,l,u,g){if(r!==null){var y=r.memoizedProps;if(co(y,u)&&r.ref===i.ref)if(ys=!1,i.pendingProps=u=y,(r.lanes&g)!==0)(r.flags&131072)!==0&&(ys=!0);else return i.lanes=r.lanes,Fr(r,i,g)}return qu(r,i,l,u,g)}function Eg(r,i,l){var u=i.pendingProps,g=u.children,y=r!==null?r.memoizedState:null;if(u.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},ln(Ni,Ds),Ds|=l;else{if((l&1073741824)===0)return r=y!==null?y.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,ln(Ni,Ds),Ds|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=y!==null?y.baseLanes:l,ln(Ni,Ds),Ds|=u}else y!==null?(u=y.baseLanes|l,i.memoizedState=null):u=l,ln(Ni,Ds),Ds|=u;return is(r,i,g,l),i.child}function Tg(r,i){var l=i.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function qu(r,i,l,u,g){var y=vs(l)?Da:Qn.current;return y=hi(i,y),yi(i,g),l=Fu(r,i,l,u,y,g),u=Iu(),r!==null&&!ys?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~g,Fr(r,i,g)):(xn&&u&&yu(i),i.flags|=1,is(r,i,l,g),i.child)}function Dg(r,i,l,u,g){if(vs(l)){var y=!0;Al(i)}else y=!1;if(yi(i,g),i.stateNode===null)Xl(r,i),yg(i,l,u),Wu(i,l,u,g),u=!0;else if(r===null){var k=i.stateNode,F=i.memoizedProps;k.props=F;var B=k.context,ie=l.contextType;typeof ie=="object"&&ie!==null?ie=Bs(ie):(ie=vs(l)?Da:Qn.current,ie=hi(i,ie));var Ne=l.getDerivedStateFromProps,Te=typeof Ne=="function"||typeof k.getSnapshotBeforeUpdate=="function";Te||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(F!==u||B!==ie)&&wg(i,k,u,ie),sa=!1;var je=i.memoizedState;k.state=je,zl(i,u,k,g),B=i.memoizedState,F!==u||je!==B||xs.current||sa?(typeof Ne=="function"&&(zu(i,l,Ne,u),B=i.memoizedState),(F=sa||vg(i,l,F,u,je,B,ie))?(Te||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(i.flags|=4194308)):(typeof k.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=B),k.props=u,k.state=B,k.context=ie,u=F):(typeof k.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{k=i.stateNode,Yp(r,i),F=i.memoizedProps,ie=i.type===i.elementType?F:Gs(i.type,F),k.props=ie,Te=i.pendingProps,je=k.context,B=l.contextType,typeof B=="object"&&B!==null?B=Bs(B):(B=vs(l)?Da:Qn.current,B=hi(i,B));var Ye=l.getDerivedStateFromProps;(Ne=typeof Ye=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(F!==Te||je!==B)&&wg(i,k,u,B),sa=!1,je=i.memoizedState,k.state=je,zl(i,u,k,g);var Je=i.memoizedState;F!==Te||je!==Je||xs.current||sa?(typeof Ye=="function"&&(zu(i,l,Ye,u),Je=i.memoizedState),(ie=sa||vg(i,l,ie,u,je,Je,B)||!1)?(Ne||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(u,Je,B),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(u,Je,B)),typeof k.componentDidUpdate=="function"&&(i.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof k.componentDidUpdate!="function"||F===r.memoizedProps&&je===r.memoizedState||(i.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||F===r.memoizedProps&&je===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Je),k.props=u,k.state=Je,k.context=B,u=ie):(typeof k.componentDidUpdate!="function"||F===r.memoizedProps&&je===r.memoizedState||(i.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||F===r.memoizedProps&&je===r.memoizedState||(i.flags|=1024),u=!1)}return Yu(r,i,l,u,y,g)}function Yu(r,i,l,u,g,y){Tg(r,i);var k=(i.flags&128)!==0;if(!u&&!k)return g&&Fp(i,l,!1),Fr(r,i,y);u=i.stateNode,ZN.current=i;var F=k&&typeof l.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,r!==null&&k?(i.child=xi(i,r.child,null,y),i.child=xi(i,null,F,y)):is(r,i,F,y),i.memoizedState=u.state,g&&Fp(i,l,!0),i.child}function Rg(r){var i=r.stateNode;i.pendingContext?Op(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Op(r,i.context,!1),Tu(r,i.containerInfo)}function Ag(r,i,l,u,g){return gi(),Nu(g),i.flags|=256,is(r,i,l,u),i.child}var Ku={dehydrated:null,treeContext:null,retryLane:0};function Qu(r){return{baseLanes:r,cachePool:null,transitions:null}}function Og(r,i,l){var u=i.pendingProps,g=wn.current,y=!1,k=(i.flags&128)!==0,F;if((F=k)||(F=r!==null&&r.memoizedState===null?!1:(g&2)!==0),F?(y=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(g|=1),ln(wn,g&1),r===null)return bu(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(k=u.children,r=u.fallback,y?(u=i.mode,y=i.child,k={mode:"hidden",children:k},(u&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=k):y=cc(k,u,0,null),r=Ua(r,u,l,null),y.return=i,r.return=i,y.sibling=r,i.child=y,i.child.memoizedState=Qu(l),i.memoizedState=Ku,r):Gu(i,k));if(g=r.memoizedState,g!==null&&(F=g.dehydrated,F!==null))return e_(r,i,k,u,F,g,l);if(y){y=u.fallback,k=i.mode,g=r.child,F=g.sibling;var B={mode:"hidden",children:u.children};return(k&1)===0&&i.child!==g?(u=i.child,u.childLanes=0,u.pendingProps=B,i.deletions=null):(u=da(g,B),u.subtreeFlags=g.subtreeFlags&14680064),F!==null?y=da(F,y):(y=Ua(y,k,l,null),y.flags|=2),y.return=i,u.return=i,u.sibling=y,i.child=u,u=y,y=i.child,k=r.child.memoizedState,k=k===null?Qu(l):{baseLanes:k.baseLanes|l,cachePool:null,transitions:k.transitions},y.memoizedState=k,y.childLanes=r.childLanes&~l,i.memoizedState=Ku,u}return y=r.child,r=y.sibling,u=da(y,{mode:"visible",children:u.children}),(i.mode&1)===0&&(u.lanes=l),u.return=i,u.sibling=null,r!==null&&(l=i.deletions,l===null?(i.deletions=[r],i.flags|=16):l.push(r)),i.child=u,i.memoizedState=null,u}function Gu(r,i){return i=cc({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Gl(r,i,l,u){return u!==null&&Nu(u),xi(i,r.child,null,l),r=Gu(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function e_(r,i,l,u,g,y,k){if(l)return i.flags&256?(i.flags&=-257,u=Vu(Error(s(422))),Gl(r,i,k,u)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(y=u.fallback,g=i.mode,u=cc({mode:"visible",children:u.children},g,0,null),y=Ua(y,g,k,null),y.flags|=2,u.return=i,y.return=i,u.sibling=y,i.child=u,(i.mode&1)!==0&&xi(i,r.child,null,k),i.child.memoizedState=Qu(k),i.memoizedState=Ku,y);if((i.mode&1)===0)return Gl(r,i,k,null);if(g.data==="$!"){if(u=g.nextSibling&&g.nextSibling.dataset,u)var F=u.dgst;return u=F,y=Error(s(419)),u=Vu(y,u,void 0),Gl(r,i,k,u)}if(F=(k&r.childLanes)!==0,ys||F){if(u=$n,u!==null){switch(k&-k){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(u.suspendedLanes|k))!==0?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,Or(r,g),Zs(u,r,g,-1))}return hf(),u=Vu(Error(s(421))),Gl(r,i,k,u)}return g.data==="$?"?(i.flags|=128,i.child=r.child,i=h_.bind(null,r),g._reactRetry=i,null):(r=y.treeContext,Ts=Zr(g.nextSibling),Es=i,xn=!0,Qs=null,r!==null&&(Ls[$s++]=Rr,Ls[$s++]=Ar,Ls[$s++]=Ra,Rr=r.id,Ar=r.overflow,Ra=i),i=Gu(i,u.children),i.flags|=4096,i)}function Mg(r,i,l){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),Pu(r.return,i,l)}function Xu(r,i,l,u,g){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=l,y.tailMode=g)}function Fg(r,i,l){var u=i.pendingProps,g=u.revealOrder,y=u.tail;if(is(r,i,u.children,l),u=wn.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Mg(r,l,i);else if(r.tag===19)Mg(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}if(ln(wn,u),(i.mode&1)===0)i.memoizedState=null;else switch(g){case"forwards":for(l=i.child,g=null;l!==null;)r=l.alternate,r!==null&&Wl(r)===null&&(g=l),l=l.sibling;l=g,l===null?(g=i.child,i.child=null):(g=l.sibling,l.sibling=null),Xu(i,!1,g,l,y);break;case"backwards":for(l=null,g=i.child,i.child=null;g!==null;){if(r=g.alternate,r!==null&&Wl(r)===null){i.child=g;break}r=g.sibling,g.sibling=l,l=g,g=r}Xu(i,!0,l,null,y);break;case"together":Xu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Xl(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function Fr(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),Ia|=i.lanes,(l&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,l=da(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=da(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function t_(r,i,l){switch(i.tag){case 3:Rg(i),gi();break;case 5:Gp(i);break;case 1:vs(i.type)&&Al(i);break;case 4:Tu(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,g=i.memoizedProps.value;ln($l,u._currentValue),u._currentValue=g;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(ln(wn,wn.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?Og(r,i,l):(ln(wn,wn.current&1),r=Fr(r,i,l),r!==null?r.sibling:null);ln(wn,wn.current&1);break;case 19:if(u=(l&i.childLanes)!==0,(r.flags&128)!==0){if(u)return Fg(r,i,l);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ln(wn,wn.current),u)break;return null;case 22:case 23:return i.lanes=0,Eg(r,i,l)}return Fr(r,i,l)}var Ig,Ju,Lg,$g;Ig=function(r,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Ju=function(){},Lg=function(r,i,l,u){var g=r.memoizedProps;if(g!==u){r=i.stateNode,Ma(mr.current);var y=null;switch(l){case"input":g=Et(r,g),u=Et(r,u),y=[];break;case"select":g=se({},g,{value:void 0}),u=se({},u,{value:void 0}),y=[];break;case"textarea":g=Ze(r,g),u=Ze(r,u),y=[];break;default:typeof g.onClick!="function"&&typeof u.onClick=="function"&&(r.onclick=Tl)}rs(l,u);var k;l=null;for(ie in g)if(!u.hasOwnProperty(ie)&&g.hasOwnProperty(ie)&&g[ie]!=null)if(ie==="style"){var F=g[ie];for(k in F)F.hasOwnProperty(k)&&(l||(l={}),l[k]="")}else ie!=="dangerouslySetInnerHTML"&&ie!=="children"&&ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(o.hasOwnProperty(ie)?y||(y=[]):(y=y||[]).push(ie,null));for(ie in u){var B=u[ie];if(F=g?.[ie],u.hasOwnProperty(ie)&&B!==F&&(B!=null||F!=null))if(ie==="style")if(F){for(k in F)!F.hasOwnProperty(k)||B&&B.hasOwnProperty(k)||(l||(l={}),l[k]="");for(k in B)B.hasOwnProperty(k)&&F[k]!==B[k]&&(l||(l={}),l[k]=B[k])}else l||(y||(y=[]),y.push(ie,l)),l=B;else ie==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,F=F?F.__html:void 0,B!=null&&F!==B&&(y=y||[]).push(ie,B)):ie==="children"?typeof B!="string"&&typeof B!="number"||(y=y||[]).push(ie,""+B):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&(o.hasOwnProperty(ie)?(B!=null&&ie==="onScroll"&&un("scroll",r),y||F===B||(y=[])):(y=y||[]).push(ie,B))}l&&(y=y||[]).push("style",l);var ie=y;(i.updateQueue=ie)&&(i.flags|=4)}},$g=function(r,i,l,u){l!==u&&(i.flags|=4)};function So(r,i){if(!xn)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Xn(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(i)for(var g=r.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&14680064,u|=g.flags&14680064,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=u,r.childLanes=l,i}function n_(r,i,l){var u=i.pendingProps;switch(wu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xn(i),null;case 1:return vs(i.type)&&Rl(),Xn(i),null;case 3:return u=i.stateNode,wi(),fn(xs),fn(Qn),Au(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Il(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Qs!==null&&(df(Qs),Qs=null))),Ju(r,i),Xn(i),null;case 5:Du(i);var g=Ma(wo.current);if(l=i.type,r!==null&&i.stateNode!=null)Lg(r,i,l,u,g),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Xn(i),null}if(r=Ma(mr.current),Il(i)){u=i.stateNode,l=i.type;var y=i.memoizedProps;switch(u[hr]=i,u[po]=y,r=(i.mode&1)!==0,l){case"dialog":un("cancel",u),un("close",u);break;case"iframe":case"object":case"embed":un("load",u);break;case"video":case"audio":for(g=0;g<fo.length;g++)un(fo[g],u);break;case"source":un("error",u);break;case"img":case"image":case"link":un("error",u),un("load",u);break;case"details":un("toggle",u);break;case"input":ue(u,y),un("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!y.multiple},un("invalid",u);break;case"textarea":tt(u,y),un("invalid",u)}rs(l,y),g=null;for(var k in y)if(y.hasOwnProperty(k)){var F=y[k];k==="children"?typeof F=="string"?u.textContent!==F&&(y.suppressHydrationWarning!==!0&&El(u.textContent,F,r),g=["children",F]):typeof F=="number"&&u.textContent!==""+F&&(y.suppressHydrationWarning!==!0&&El(u.textContent,F,r),g=["children",""+F]):o.hasOwnProperty(k)&&F!=null&&k==="onScroll"&&un("scroll",u)}switch(l){case"input":be(u),Ke(u,y,!0);break;case"textarea":be(u),yt(u);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(u.onclick=Tl)}u=g,i.updateQueue=u,u!==null&&(i.flags|=4)}else{k=g.nodeType===9?g:g.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Ue(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=k.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof u.is=="string"?r=k.createElement(l,{is:u.is}):(r=k.createElement(l),l==="select"&&(k=r,u.multiple?k.multiple=!0:u.size&&(k.size=u.size))):r=k.createElementNS(r,l),r[hr]=i,r[po]=u,Ig(r,i,!1,!1),i.stateNode=r;e:{switch(k=Ms(l,u),l){case"dialog":un("cancel",r),un("close",r),g=u;break;case"iframe":case"object":case"embed":un("load",r),g=u;break;case"video":case"audio":for(g=0;g<fo.length;g++)un(fo[g],r);g=u;break;case"source":un("error",r),g=u;break;case"img":case"image":case"link":un("error",r),un("load",r),g=u;break;case"details":un("toggle",r),g=u;break;case"input":ue(r,u),g=Et(r,u),un("invalid",r);break;case"option":g=u;break;case"select":r._wrapperState={wasMultiple:!!u.multiple},g=se({},u,{value:void 0}),un("invalid",r);break;case"textarea":tt(r,u),g=Ze(r,u),un("invalid",r);break;default:g=u}rs(l,g),F=g;for(y in F)if(F.hasOwnProperty(y)){var B=F[y];y==="style"?It(r,B):y==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&Ve(r,B)):y==="children"?typeof B=="string"?(l!=="textarea"||B!=="")&&ct(r,B):typeof B=="number"&&ct(r,""+B):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?B!=null&&y==="onScroll"&&un("scroll",r):B!=null&&N(r,y,B,k))}switch(l){case"input":be(r),Ke(r,u,!1);break;case"textarea":be(r),yt(r);break;case"option":u.value!=null&&r.setAttribute("value",""+$e(u.value));break;case"select":r.multiple=!!u.multiple,y=u.value,y!=null?ae(r,!!u.multiple,y,!1):u.defaultValue!=null&&ae(r,!!u.multiple,u.defaultValue,!0);break;default:typeof g.onClick=="function"&&(r.onclick=Tl)}switch(l){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Xn(i),null;case 6:if(r&&i.stateNode!=null)$g(r,i,r.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(l=Ma(wo.current),Ma(mr.current),Il(i)){if(u=i.stateNode,l=i.memoizedProps,u[hr]=i,(y=u.nodeValue!==l)&&(r=Es,r!==null))switch(r.tag){case 3:El(u.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&El(u.nodeValue,l,(r.mode&1)!==0)}y&&(i.flags|=4)}else u=(l.nodeType===9?l:l.ownerDocument).createTextNode(u),u[hr]=i,i.stateNode=u}return Xn(i),null;case 13:if(fn(wn),u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(xn&&Ts!==null&&(i.mode&1)!==0&&(i.flags&128)===0)zp(),gi(),i.flags|=98560,y=!1;else if(y=Il(i),u!==null&&u.dehydrated!==null){if(r===null){if(!y)throw Error(s(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[hr]=i}else gi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Xn(i),y=!1}else Qs!==null&&(df(Qs),Qs=null),y=!0;if(!y)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(u=u!==null,u!==(r!==null&&r.memoizedState!==null)&&u&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(wn.current&1)!==0?On===0&&(On=3):hf())),i.updateQueue!==null&&(i.flags|=4),Xn(i),null);case 4:return wi(),Ju(r,i),r===null&&ho(i.stateNode.containerInfo),Xn(i),null;case 10:return Cu(i.type._context),Xn(i),null;case 17:return vs(i.type)&&Rl(),Xn(i),null;case 19:if(fn(wn),y=i.memoizedState,y===null)return Xn(i),null;if(u=(i.flags&128)!==0,k=y.rendering,k===null)if(u)So(y,!1);else{if(On!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(k=Wl(r),k!==null){for(i.flags|=128,So(y,!1),u=k.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=l,l=i.child;l!==null;)y=l,r=u,y.flags&=14680066,k=y.alternate,k===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=k.childLanes,y.lanes=k.lanes,y.child=k.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=k.memoizedProps,y.memoizedState=k.memoizedState,y.updateQueue=k.updateQueue,y.type=k.type,r=k.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return ln(wn,wn.current&1|2),i.child}r=r.sibling}y.tail!==null&&Se()>_i&&(i.flags|=128,u=!0,So(y,!1),i.lanes=4194304)}else{if(!u)if(r=Wl(k),r!==null){if(i.flags|=128,u=!0,l=r.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),So(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!xn)return Xn(i),null}else 2*Se()-y.renderingStartTime>_i&&l!==1073741824&&(i.flags|=128,u=!0,So(y,!1),i.lanes=4194304);y.isBackwards?(k.sibling=i.child,i.child=k):(l=y.last,l!==null?l.sibling=k:i.child=k,y.last=k)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=Se(),i.sibling=null,l=wn.current,ln(wn,u?l&1|2:l&1),i):(Xn(i),null);case 22:case 23:return ff(),u=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==u&&(i.flags|=8192),u&&(i.mode&1)!==0?(Ds&1073741824)!==0&&(Xn(i),i.subtreeFlags&6&&(i.flags|=8192)):Xn(i),null;case 24:return null;case 25:return null}throw Error(s(156,i.tag))}function s_(r,i){switch(wu(i),i.tag){case 1:return vs(i.type)&&Rl(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return wi(),fn(xs),fn(Qn),Au(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return Du(i),null;case 13:if(fn(wn),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));gi()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return fn(wn),null;case 4:return wi(),null;case 10:return Cu(i.type._context),null;case 22:case 23:return ff(),null;case 24:return null;default:return null}}var Jl=!1,Jn=!1,r_=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function bi(r,i){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(u){_n(r,i,u)}else l.current=null}function Zu(r,i,l){try{l()}catch(u){_n(r,i,u)}}var Bg=!1;function a_(r,i){if(uu=vl,r=vp(),su(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var k=0,F=-1,B=-1,ie=0,Ne=0,Te=r,je=null;t:for(;;){for(var Ye;Te!==l||g!==0&&Te.nodeType!==3||(F=k+g),Te!==y||u!==0&&Te.nodeType!==3||(B=k+u),Te.nodeType===3&&(k+=Te.nodeValue.length),(Ye=Te.firstChild)!==null;)je=Te,Te=Ye;for(;;){if(Te===r)break t;if(je===l&&++ie===g&&(F=k),je===y&&++Ne===u&&(B=k),(Ye=Te.nextSibling)!==null)break;Te=je,je=Te.parentNode}Te=Ye}l=F===-1||B===-1?null:{start:F,end:B}}else l=null}l=l||{start:0,end:0}}else l=null;for(fu={focusedElem:r,selectionRange:l},vl=!1,Qe=i;Qe!==null;)if(i=Qe,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Qe=r;else for(;Qe!==null;){i=Qe;try{var Je=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Je!==null){var et=Je.memoizedProps,Pn=Je.memoizedState,Q=i.stateNode,W=Q.getSnapshotBeforeUpdate(i.elementType===i.type?et:Gs(i.type,et),Pn);Q.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var te=i.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Ae){_n(i,i.return,Ae)}if(r=i.sibling,r!==null){r.return=i.return,Qe=r;break}Qe=i.return}return Je=Bg,Bg=!1,Je}function Co(r,i,l){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var g=u=u.next;do{if((g.tag&r)===r){var y=g.destroy;g.destroy=void 0,y!==void 0&&Zu(i,l,y)}g=g.next}while(g!==u)}}function Zl(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&r)===r){var u=l.create;l.destroy=u()}l=l.next}while(l!==i)}}function ef(r){var i=r.ref;if(i!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof i=="function"?i(r):i.current=r}}function Ug(r){var i=r.alternate;i!==null&&(r.alternate=null,Ug(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[hr],delete i[po],delete i[gu],delete i[UN],delete i[zN])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function zg(r){return r.tag===5||r.tag===3||r.tag===4}function Wg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||zg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function tf(r,i,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(r,i):l.insertBefore(r,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(r,l)):(i=l,i.appendChild(r)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Tl));else if(u!==4&&(r=r.child,r!==null))for(tf(r,i,l),r=r.sibling;r!==null;)tf(r,i,l),r=r.sibling}function nf(r,i,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(u!==4&&(r=r.child,r!==null))for(nf(r,i,l),r=r.sibling;r!==null;)nf(r,i,l),r=r.sibling}var Hn=null,Xs=!1;function aa(r,i,l){for(l=l.child;l!==null;)Vg(r,i,l),l=l.sibling}function Vg(r,i,l){if(Is&&typeof Is.onCommitFiberUnmount=="function")try{Is.onCommitFiberUnmount(Hr,l)}catch{}switch(l.tag){case 5:Jn||bi(l,i);case 6:var u=Hn,g=Xs;Hn=null,aa(r,i,l),Hn=u,Xs=g,Hn!==null&&(Xs?(r=Hn,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):Hn.removeChild(l.stateNode));break;case 18:Hn!==null&&(Xs?(r=Hn,l=l.stateNode,r.nodeType===8?pu(r.parentNode,l):r.nodeType===1&&pu(r,l),so(r)):pu(Hn,l.stateNode));break;case 4:u=Hn,g=Xs,Hn=l.stateNode.containerInfo,Xs=!0,aa(r,i,l),Hn=u,Xs=g;break;case 0:case 11:case 14:case 15:if(!Jn&&(u=l.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){g=u=u.next;do{var y=g,k=y.destroy;y=y.tag,k!==void 0&&((y&2)!==0||(y&4)!==0)&&Zu(l,i,k),g=g.next}while(g!==u)}aa(r,i,l);break;case 1:if(!Jn&&(bi(l,i),u=l.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=l.memoizedProps,u.state=l.memoizedState,u.componentWillUnmount()}catch(F){_n(l,i,F)}aa(r,i,l);break;case 21:aa(r,i,l);break;case 22:l.mode&1?(Jn=(u=Jn)||l.memoizedState!==null,aa(r,i,l),Jn=u):aa(r,i,l);break;default:aa(r,i,l)}}function Hg(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new r_),i.forEach(function(u){var g=m_.bind(null,r,u);l.has(u)||(l.add(u),u.then(g,g))})}}function Js(r,i){var l=i.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u];try{var y=r,k=i,F=k;e:for(;F!==null;){switch(F.tag){case 5:Hn=F.stateNode,Xs=!1;break e;case 3:Hn=F.stateNode.containerInfo,Xs=!0;break e;case 4:Hn=F.stateNode.containerInfo,Xs=!0;break e}F=F.return}if(Hn===null)throw Error(s(160));Vg(y,k,g),Hn=null,Xs=!1;var B=g.alternate;B!==null&&(B.return=null),g.return=null}catch(ie){_n(g,i,ie)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)qg(i,r),i=i.sibling}function qg(r,i){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Js(i,r),gr(r),u&4){try{Co(3,r,r.return),Zl(3,r)}catch(et){_n(r,r.return,et)}try{Co(5,r,r.return)}catch(et){_n(r,r.return,et)}}break;case 1:Js(i,r),gr(r),u&512&&l!==null&&bi(l,l.return);break;case 5:if(Js(i,r),gr(r),u&512&&l!==null&&bi(l,l.return),r.flags&32){var g=r.stateNode;try{ct(g,"")}catch(et){_n(r,r.return,et)}}if(u&4&&(g=r.stateNode,g!=null)){var y=r.memoizedProps,k=l!==null?l.memoizedProps:y,F=r.type,B=r.updateQueue;if(r.updateQueue=null,B!==null)try{F==="input"&&y.type==="radio"&&y.name!=null&&ze(g,y),Ms(F,k);var ie=Ms(F,y);for(k=0;k<B.length;k+=2){var Ne=B[k],Te=B[k+1];Ne==="style"?It(g,Te):Ne==="dangerouslySetInnerHTML"?Ve(g,Te):Ne==="children"?ct(g,Te):N(g,Ne,Te,ie)}switch(F){case"input":Ee(g,y);break;case"textarea":pt(g,y);break;case"select":var je=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var Ye=y.value;Ye!=null?ae(g,!!y.multiple,Ye,!1):je!==!!y.multiple&&(y.defaultValue!=null?ae(g,!!y.multiple,y.defaultValue,!0):ae(g,!!y.multiple,y.multiple?[]:"",!1))}g[po]=y}catch(et){_n(r,r.return,et)}}break;case 6:if(Js(i,r),gr(r),u&4){if(r.stateNode===null)throw Error(s(162));g=r.stateNode,y=r.memoizedProps;try{g.nodeValue=y}catch(et){_n(r,r.return,et)}}break;case 3:if(Js(i,r),gr(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{so(i.containerInfo)}catch(et){_n(r,r.return,et)}break;case 4:Js(i,r),gr(r);break;case 13:Js(i,r),gr(r),g=r.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(af=Se())),u&4&&Hg(r);break;case 22:if(Ne=l!==null&&l.memoizedState!==null,r.mode&1?(Jn=(ie=Jn)||Ne,Js(i,r),Jn=ie):Js(i,r),gr(r),u&8192){if(ie=r.memoizedState!==null,(r.stateNode.isHidden=ie)&&!Ne&&(r.mode&1)!==0)for(Qe=r,Ne=r.child;Ne!==null;){for(Te=Qe=Ne;Qe!==null;){switch(je=Qe,Ye=je.child,je.tag){case 0:case 11:case 14:case 15:Co(4,je,je.return);break;case 1:bi(je,je.return);var Je=je.stateNode;if(typeof Je.componentWillUnmount=="function"){u=je,l=je.return;try{i=u,Je.props=i.memoizedProps,Je.state=i.memoizedState,Je.componentWillUnmount()}catch(et){_n(u,l,et)}}break;case 5:bi(je,je.return);break;case 22:if(je.memoizedState!==null){Qg(Te);continue}}Ye!==null?(Ye.return=je,Qe=Ye):Qg(Te)}Ne=Ne.sibling}e:for(Ne=null,Te=r;;){if(Te.tag===5){if(Ne===null){Ne=Te;try{g=Te.stateNode,ie?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(F=Te.stateNode,B=Te.memoizedProps.style,k=B!=null&&B.hasOwnProperty("display")?B.display:null,F.style.display=Tt("display",k))}catch(et){_n(r,r.return,et)}}}else if(Te.tag===6){if(Ne===null)try{Te.stateNode.nodeValue=ie?"":Te.memoizedProps}catch(et){_n(r,r.return,et)}}else if((Te.tag!==22&&Te.tag!==23||Te.memoizedState===null||Te===r)&&Te.child!==null){Te.child.return=Te,Te=Te.child;continue}if(Te===r)break e;for(;Te.sibling===null;){if(Te.return===null||Te.return===r)break e;Ne===Te&&(Ne=null),Te=Te.return}Ne===Te&&(Ne=null),Te.sibling.return=Te.return,Te=Te.sibling}}break;case 19:Js(i,r),gr(r),u&4&&Hg(r);break;case 21:break;default:Js(i,r),gr(r)}}function gr(r){var i=r.flags;if(i&2){try{e:{for(var l=r.return;l!==null;){if(zg(l)){var u=l;break e}l=l.return}throw Error(s(160))}switch(u.tag){case 5:var g=u.stateNode;u.flags&32&&(ct(g,""),u.flags&=-33);var y=Wg(r);nf(r,y,g);break;case 3:case 4:var k=u.stateNode.containerInfo,F=Wg(r);tf(r,F,k);break;default:throw Error(s(161))}}catch(B){_n(r,r.return,B)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function i_(r,i,l){Qe=r,Yg(r)}function Yg(r,i,l){for(var u=(r.mode&1)!==0;Qe!==null;){var g=Qe,y=g.child;if(g.tag===22&&u){var k=g.memoizedState!==null||Jl;if(!k){var F=g.alternate,B=F!==null&&F.memoizedState!==null||Jn;F=Jl;var ie=Jn;if(Jl=k,(Jn=B)&&!ie)for(Qe=g;Qe!==null;)k=Qe,B=k.child,k.tag===22&&k.memoizedState!==null?Gg(g):B!==null?(B.return=k,Qe=B):Gg(g);for(;y!==null;)Qe=y,Yg(y),y=y.sibling;Qe=g,Jl=F,Jn=ie}Kg(r)}else(g.subtreeFlags&8772)!==0&&y!==null?(y.return=g,Qe=y):Kg(r)}}function Kg(r){for(;Qe!==null;){var i=Qe;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Jn||Zl(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!Jn)if(l===null)u.componentDidMount();else{var g=i.elementType===i.type?l.memoizedProps:Gs(i.type,l.memoizedProps);u.componentDidUpdate(g,l.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var y=i.updateQueue;y!==null&&Qp(i,y,u);break;case 3:var k=i.updateQueue;if(k!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}Qp(i,k,l)}break;case 5:var F=i.stateNode;if(l===null&&i.flags&4){l=F;var B=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&l.focus();break;case"img":B.src&&(l.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var ie=i.alternate;if(ie!==null){var Ne=ie.memoizedState;if(Ne!==null){var Te=Ne.dehydrated;Te!==null&&so(Te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Jn||i.flags&512&&ef(i)}catch(je){_n(i,i.return,je)}}if(i===r){Qe=null;break}if(l=i.sibling,l!==null){l.return=i.return,Qe=l;break}Qe=i.return}}function Qg(r){for(;Qe!==null;){var i=Qe;if(i===r){Qe=null;break}var l=i.sibling;if(l!==null){l.return=i.return,Qe=l;break}Qe=i.return}}function Gg(r){for(;Qe!==null;){var i=Qe;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{Zl(4,i)}catch(B){_n(i,l,B)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var g=i.return;try{u.componentDidMount()}catch(B){_n(i,g,B)}}var y=i.return;try{ef(i)}catch(B){_n(i,y,B)}break;case 5:var k=i.return;try{ef(i)}catch(B){_n(i,k,B)}}}catch(B){_n(i,i.return,B)}if(i===r){Qe=null;break}var F=i.sibling;if(F!==null){F.return=i.return,Qe=F;break}Qe=i.return}}var o_=Math.ceil,ec=A.ReactCurrentDispatcher,sf=A.ReactCurrentOwner,zs=A.ReactCurrentBatchConfig,qt=0,$n=null,Tn=null,qn=0,Ds=0,Ni=ea(0),On=0,Po=null,Ia=0,tc=0,rf=0,ko=null,ws=null,af=0,_i=1/0,Ir=null,nc=!1,of=null,ia=null,sc=!1,oa=null,rc=0,Eo=0,lf=null,ac=-1,ic=0;function os(){return(qt&6)!==0?Se():ac!==-1?ac:ac=Se()}function la(r){return(r.mode&1)===0?1:(qt&2)!==0&&qn!==0?qn&-qn:VN.transition!==null?(ic===0&&(ic=gs()),ic):(r=Jt,r!==0||(r=window.event,r=r===void 0?16:Jm(r.type)),r)}function Zs(r,i,l,u){if(50<Eo)throw Eo=0,lf=null,Error(s(185));Ji(r,l,u),((qt&2)===0||r!==$n)&&(r===$n&&((qt&2)===0&&(tc|=l),On===4&&ca(r,qn)),js(r,u),l===1&&qt===0&&(i.mode&1)===0&&(_i=Se()+500,Ol&&na()))}function js(r,i){var l=r.callbackNode;Ud(r,i);var u=qr(r,r===$n?qn:0);if(u===0)l!==null&&Fs(l),r.callbackNode=null,r.callbackPriority=0;else if(i=u&-u,r.callbackPriority!==i){if(l!=null&&Fs(l),i===1)r.tag===0?WN(Jg.bind(null,r)):Ip(Jg.bind(null,r)),$N(function(){(qt&6)===0&&na()}),l=null;else{switch(Vm(u)){case 1:l=Nn;break;case 4:l=Kn;break;case 16:l=Vn;break;case 536870912:l=Vr;break;default:l=Vn}l=ix(l,Xg.bind(null,r))}r.callbackPriority=i,r.callbackNode=l}}function Xg(r,i){if(ac=-1,ic=0,(qt&6)!==0)throw Error(s(327));var l=r.callbackNode;if(Si()&&r.callbackNode!==l)return null;var u=qr(r,r===$n?qn:0);if(u===0)return null;if((u&30)!==0||(u&r.expiredLanes)!==0||i)i=oc(r,u);else{i=u;var g=qt;qt|=2;var y=ex();($n!==r||qn!==i)&&(Ir=null,_i=Se()+500,$a(r,i));do try{d_();break}catch(F){Zg(r,F)}while(!0);Su(),ec.current=y,qt=g,Tn!==null?i=0:($n=null,qn=0,i=On)}if(i!==0){if(i===2&&(g=Xi(r),g!==0&&(u=g,i=cf(r,g))),i===1)throw l=Po,$a(r,0),ca(r,u),js(r,Se()),l;if(i===6)ca(r,u);else{if(g=r.current.alternate,(u&30)===0&&!l_(g)&&(i=oc(r,u),i===2&&(y=Xi(r),y!==0&&(u=y,i=cf(r,y))),i===1))throw l=Po,$a(r,0),ca(r,u),js(r,Se()),l;switch(r.finishedWork=g,r.finishedLanes=u,i){case 0:case 1:throw Error(s(345));case 2:Ba(r,ws,Ir);break;case 3:if(ca(r,u),(u&130023424)===u&&(i=af+500-Se(),10<i)){if(qr(r,0)!==0)break;if(g=r.suspendedLanes,(g&u)!==u){os(),r.pingedLanes|=r.suspendedLanes&g;break}r.timeoutHandle=mu(Ba.bind(null,r,ws,Ir),i);break}Ba(r,ws,Ir);break;case 4:if(ca(r,u),(u&4194240)===u)break;for(i=r.eventTimes,g=-1;0<u;){var k=31-X(u);y=1<<k,k=i[k],k>g&&(g=k),u&=~y}if(u=g,u=Se()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*o_(u/1960))-u,10<u){r.timeoutHandle=mu(Ba.bind(null,r,ws,Ir),u);break}Ba(r,ws,Ir);break;case 5:Ba(r,ws,Ir);break;default:throw Error(s(329))}}}return js(r,Se()),r.callbackNode===l?Xg.bind(null,r):null}function cf(r,i){var l=ko;return r.current.memoizedState.isDehydrated&&($a(r,i).flags|=256),r=oc(r,i),r!==2&&(i=ws,ws=l,i!==null&&df(i)),r}function df(r){ws===null?ws=r:ws.push.apply(ws,r)}function l_(r){for(var i=r;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var u=0;u<l.length;u++){var g=l[u],y=g.getSnapshot;g=g.value;try{if(!Ks(y(),g))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ca(r,i){for(i&=~rf,i&=~tc,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var l=31-X(i),u=1<<l;r[l]=-1,i&=~u}}function Jg(r){if((qt&6)!==0)throw Error(s(327));Si();var i=qr(r,0);if((i&1)===0)return js(r,Se()),null;var l=oc(r,i);if(r.tag!==0&&l===2){var u=Xi(r);u!==0&&(i=u,l=cf(r,u))}if(l===1)throw l=Po,$a(r,0),ca(r,i),js(r,Se()),l;if(l===6)throw Error(s(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,Ba(r,ws,Ir),js(r,Se()),null}function uf(r,i){var l=qt;qt|=1;try{return r(i)}finally{qt=l,qt===0&&(_i=Se()+500,Ol&&na())}}function La(r){oa!==null&&oa.tag===0&&(qt&6)===0&&Si();var i=qt;qt|=1;var l=zs.transition,u=Jt;try{if(zs.transition=null,Jt=1,r)return r()}finally{Jt=u,zs.transition=l,qt=i,(qt&6)===0&&na()}}function ff(){Ds=Ni.current,fn(Ni)}function $a(r,i){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,LN(l)),Tn!==null)for(l=Tn.return;l!==null;){var u=l;switch(wu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Rl();break;case 3:wi(),fn(xs),fn(Qn),Au();break;case 5:Du(u);break;case 4:wi();break;case 13:fn(wn);break;case 19:fn(wn);break;case 10:Cu(u.type._context);break;case 22:case 23:ff()}l=l.return}if($n=r,Tn=r=da(r.current,null),qn=Ds=i,On=0,Po=null,rf=tc=Ia=0,ws=ko=null,Oa!==null){for(i=0;i<Oa.length;i++)if(l=Oa[i],u=l.interleaved,u!==null){l.interleaved=null;var g=u.next,y=l.pending;if(y!==null){var k=y.next;y.next=g,u.next=k}l.pending=u}Oa=null}return r}function Zg(r,i){do{var l=Tn;try{if(Su(),Vl.current=Kl,Hl){for(var u=jn.memoizedState;u!==null;){var g=u.queue;g!==null&&(g.pending=null),u=u.next}Hl=!1}if(Fa=0,Ln=An=jn=null,jo=!1,bo=0,sf.current=null,l===null||l.return===null){On=1,Po=i,Tn=null;break}e:{var y=r,k=l.return,F=l,B=i;if(i=qn,F.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var ie=B,Ne=F,Te=Ne.tag;if((Ne.mode&1)===0&&(Te===0||Te===11||Te===15)){var je=Ne.alternate;je?(Ne.updateQueue=je.updateQueue,Ne.memoizedState=je.memoizedState,Ne.lanes=je.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var Ye=_g(k);if(Ye!==null){Ye.flags&=-257,Sg(Ye,k,F,y,i),Ye.mode&1&&Ng(y,ie,i),i=Ye,B=ie;var Je=i.updateQueue;if(Je===null){var et=new Set;et.add(B),i.updateQueue=et}else Je.add(B);break e}else{if((i&1)===0){Ng(y,ie,i),hf();break e}B=Error(s(426))}}else if(xn&&F.mode&1){var Pn=_g(k);if(Pn!==null){(Pn.flags&65536)===0&&(Pn.flags|=256),Sg(Pn,k,F,y,i),Nu(ji(B,F));break e}}y=B=ji(B,F),On!==4&&(On=2),ko===null?ko=[y]:ko.push(y),y=k;do{switch(y.tag){case 3:y.flags|=65536,i&=-i,y.lanes|=i;var Q=jg(y,B,i);Kp(y,Q);break e;case 1:F=B;var W=y.type,te=y.stateNode;if((y.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(ia===null||!ia.has(te)))){y.flags|=65536,i&=-i,y.lanes|=i;var Ae=bg(y,F,i);Kp(y,Ae);break e}}y=y.return}while(y!==null)}nx(l)}catch(rt){i=rt,Tn===l&&l!==null&&(Tn=l=l.return);continue}break}while(!0)}function ex(){var r=ec.current;return ec.current=Kl,r===null?Kl:r}function hf(){(On===0||On===3||On===2)&&(On=4),$n===null||(Ia&268435455)===0&&(tc&268435455)===0||ca($n,qn)}function oc(r,i){var l=qt;qt|=2;var u=ex();($n!==r||qn!==i)&&(Ir=null,$a(r,i));do try{c_();break}catch(g){Zg(r,g)}while(!0);if(Su(),qt=l,ec.current=u,Tn!==null)throw Error(s(261));return $n=null,qn=0,On}function c_(){for(;Tn!==null;)tx(Tn)}function d_(){for(;Tn!==null&&!as();)tx(Tn)}function tx(r){var i=ax(r.alternate,r,Ds);r.memoizedProps=r.pendingProps,i===null?nx(r):Tn=i,sf.current=null}function nx(r){var i=r;do{var l=i.alternate;if(r=i.return,(i.flags&32768)===0){if(l=n_(l,i,Ds),l!==null){Tn=l;return}}else{if(l=s_(l,i),l!==null){l.flags&=32767,Tn=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{On=6,Tn=null;return}}if(i=i.sibling,i!==null){Tn=i;return}Tn=i=r}while(i!==null);On===0&&(On=5)}function Ba(r,i,l){var u=Jt,g=zs.transition;try{zs.transition=null,Jt=1,u_(r,i,l,u)}finally{zs.transition=g,Jt=u}return null}function u_(r,i,l,u){do Si();while(oa!==null);if((qt&6)!==0)throw Error(s(327));l=r.finishedWork;var g=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(s(177));r.callbackNode=null,r.callbackPriority=0;var y=l.lanes|l.childLanes;if(Hb(r,y),r===$n&&(Tn=$n=null,qn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||sc||(sc=!0,ix(Vn,function(){return Si(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=zs.transition,zs.transition=null;var k=Jt;Jt=1;var F=qt;qt|=4,sf.current=null,a_(r,l),qg(l,r),DN(fu),vl=!!uu,fu=uu=null,r.current=l,i_(l),ps(),qt=F,Jt=k,zs.transition=y}else r.current=l;if(sc&&(sc=!1,oa=r,rc=g),y=r.pendingLanes,y===0&&(ia=null),$d(l.stateNode),js(r,Se()),i!==null)for(u=r.onRecoverableError,l=0;l<i.length;l++)g=i[l],u(g.value,{componentStack:g.stack,digest:g.digest});if(nc)throw nc=!1,r=of,of=null,r;return(rc&1)!==0&&r.tag!==0&&Si(),y=r.pendingLanes,(y&1)!==0?r===lf?Eo++:(Eo=0,lf=r):Eo=0,na(),null}function Si(){if(oa!==null){var r=Vm(rc),i=zs.transition,l=Jt;try{if(zs.transition=null,Jt=16>r?16:r,oa===null)var u=!1;else{if(r=oa,oa=null,rc=0,(qt&6)!==0)throw Error(s(331));var g=qt;for(qt|=4,Qe=r.current;Qe!==null;){var y=Qe,k=y.child;if((Qe.flags&16)!==0){var F=y.deletions;if(F!==null){for(var B=0;B<F.length;B++){var ie=F[B];for(Qe=ie;Qe!==null;){var Ne=Qe;switch(Ne.tag){case 0:case 11:case 15:Co(8,Ne,y)}var Te=Ne.child;if(Te!==null)Te.return=Ne,Qe=Te;else for(;Qe!==null;){Ne=Qe;var je=Ne.sibling,Ye=Ne.return;if(Ug(Ne),Ne===ie){Qe=null;break}if(je!==null){je.return=Ye,Qe=je;break}Qe=Ye}}}var Je=y.alternate;if(Je!==null){var et=Je.child;if(et!==null){Je.child=null;do{var Pn=et.sibling;et.sibling=null,et=Pn}while(et!==null)}}Qe=y}}if((y.subtreeFlags&2064)!==0&&k!==null)k.return=y,Qe=k;else e:for(;Qe!==null;){if(y=Qe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Co(9,y,y.return)}var Q=y.sibling;if(Q!==null){Q.return=y.return,Qe=Q;break e}Qe=y.return}}var W=r.current;for(Qe=W;Qe!==null;){k=Qe;var te=k.child;if((k.subtreeFlags&2064)!==0&&te!==null)te.return=k,Qe=te;else e:for(k=W;Qe!==null;){if(F=Qe,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:Zl(9,F)}}catch(rt){_n(F,F.return,rt)}if(F===k){Qe=null;break e}var Ae=F.sibling;if(Ae!==null){Ae.return=F.return,Qe=Ae;break e}Qe=F.return}}if(qt=g,na(),Is&&typeof Is.onPostCommitFiberRoot=="function")try{Is.onPostCommitFiberRoot(Hr,r)}catch{}u=!0}return u}finally{Jt=l,zs.transition=i}}return!1}function sx(r,i,l){i=ji(l,i),i=jg(r,i,1),r=ra(r,i,1),i=os(),r!==null&&(Ji(r,1,i),js(r,i))}function _n(r,i,l){if(r.tag===3)sx(r,r,l);else for(;i!==null;){if(i.tag===3){sx(i,r,l);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ia===null||!ia.has(u))){r=ji(l,r),r=bg(i,r,1),i=ra(i,r,1),r=os(),i!==null&&(Ji(i,1,r),js(i,r));break}}i=i.return}}function f_(r,i,l){var u=r.pingCache;u!==null&&u.delete(i),i=os(),r.pingedLanes|=r.suspendedLanes&l,$n===r&&(qn&l)===l&&(On===4||On===3&&(qn&130023424)===qn&&500>Se()-af?$a(r,0):rf|=l),js(r,i)}function rx(r,i){i===0&&((r.mode&1)===0?i=1:(i=Ht,Ht<<=1,(Ht&130023424)===0&&(Ht=4194304)));var l=os();r=Or(r,i),r!==null&&(Ji(r,i,l),js(r,l))}function h_(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),rx(r,l)}function m_(r,i){var l=0;switch(r.tag){case 13:var u=r.stateNode,g=r.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=r.stateNode;break;default:throw Error(s(314))}u!==null&&u.delete(i),rx(r,l)}var ax;ax=function(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps||xs.current)ys=!0;else{if((r.lanes&l)===0&&(i.flags&128)===0)return ys=!1,t_(r,i,l);ys=(r.flags&131072)!==0}else ys=!1,xn&&(i.flags&1048576)!==0&&Lp(i,Fl,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;Xl(r,i),r=i.pendingProps;var g=hi(i,Qn.current);yi(i,l),g=Fu(null,i,u,r,g,l);var y=Iu();return i.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,vs(u)?(y=!0,Al(i)):y=!1,i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Eu(i),g.updater=Ql,i.stateNode=g,g._reactInternals=i,Wu(i,u,r,l),i=Yu(null,i,u,!0,y,l)):(i.tag=0,xn&&y&&yu(i),is(null,i,g,l),i=i.child),i;case 16:u=i.elementType;e:{switch(Xl(r,i),r=i.pendingProps,g=u._init,u=g(u._payload),i.type=u,g=i.tag=g_(u),r=Gs(u,r),g){case 0:i=qu(null,i,u,r,l);break e;case 1:i=Dg(null,i,u,r,l);break e;case 11:i=Cg(null,i,u,r,l);break e;case 14:i=Pg(null,i,u,Gs(u.type,r),l);break e}throw Error(s(306,u,""))}return i;case 0:return u=i.type,g=i.pendingProps,g=i.elementType===u?g:Gs(u,g),qu(r,i,u,g,l);case 1:return u=i.type,g=i.pendingProps,g=i.elementType===u?g:Gs(u,g),Dg(r,i,u,g,l);case 3:e:{if(Rg(i),r===null)throw Error(s(387));u=i.pendingProps,y=i.memoizedState,g=y.element,Yp(r,i),zl(i,u,null,l);var k=i.memoizedState;if(u=k.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){g=ji(Error(s(423)),i),i=Ag(r,i,u,l,g);break e}else if(u!==g){g=ji(Error(s(424)),i),i=Ag(r,i,u,l,g);break e}else for(Ts=Zr(i.stateNode.containerInfo.firstChild),Es=i,xn=!0,Qs=null,l=Hp(i,null,u,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(gi(),u===g){i=Fr(r,i,l);break e}is(r,i,u,l)}i=i.child}return i;case 5:return Gp(i),r===null&&bu(i),u=i.type,g=i.pendingProps,y=r!==null?r.memoizedProps:null,k=g.children,hu(u,g)?k=null:y!==null&&hu(u,y)&&(i.flags|=32),Tg(r,i),is(r,i,k,l),i.child;case 6:return r===null&&bu(i),null;case 13:return Og(r,i,l);case 4:return Tu(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=xi(i,null,u,l):is(r,i,u,l),i.child;case 11:return u=i.type,g=i.pendingProps,g=i.elementType===u?g:Gs(u,g),Cg(r,i,u,g,l);case 7:return is(r,i,i.pendingProps,l),i.child;case 8:return is(r,i,i.pendingProps.children,l),i.child;case 12:return is(r,i,i.pendingProps.children,l),i.child;case 10:e:{if(u=i.type._context,g=i.pendingProps,y=i.memoizedProps,k=g.value,ln($l,u._currentValue),u._currentValue=k,y!==null)if(Ks(y.value,k)){if(y.children===g.children&&!xs.current){i=Fr(r,i,l);break e}}else for(y=i.child,y!==null&&(y.return=i);y!==null;){var F=y.dependencies;if(F!==null){k=y.child;for(var B=F.firstContext;B!==null;){if(B.context===u){if(y.tag===1){B=Mr(-1,l&-l),B.tag=2;var ie=y.updateQueue;if(ie!==null){ie=ie.shared;var Ne=ie.pending;Ne===null?B.next=B:(B.next=Ne.next,Ne.next=B),ie.pending=B}}y.lanes|=l,B=y.alternate,B!==null&&(B.lanes|=l),Pu(y.return,l,i),F.lanes|=l;break}B=B.next}}else if(y.tag===10)k=y.type===i.type?null:y.child;else if(y.tag===18){if(k=y.return,k===null)throw Error(s(341));k.lanes|=l,F=k.alternate,F!==null&&(F.lanes|=l),Pu(k,l,i),k=y.sibling}else k=y.child;if(k!==null)k.return=y;else for(k=y;k!==null;){if(k===i){k=null;break}if(y=k.sibling,y!==null){y.return=k.return,k=y;break}k=k.return}y=k}is(r,i,g.children,l),i=i.child}return i;case 9:return g=i.type,u=i.pendingProps.children,yi(i,l),g=Bs(g),u=u(g),i.flags|=1,is(r,i,u,l),i.child;case 14:return u=i.type,g=Gs(u,i.pendingProps),g=Gs(u.type,g),Pg(r,i,u,g,l);case 15:return kg(r,i,i.type,i.pendingProps,l);case 17:return u=i.type,g=i.pendingProps,g=i.elementType===u?g:Gs(u,g),Xl(r,i),i.tag=1,vs(u)?(r=!0,Al(i)):r=!1,yi(i,l),yg(i,u,g),Wu(i,u,g,l),Yu(null,i,u,!0,r,l);case 19:return Fg(r,i,l);case 22:return Eg(r,i,l)}throw Error(s(156,i.tag))};function ix(r,i){return Cn(r,i)}function p_(r,i,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(r,i,l,u){return new p_(r,i,l,u)}function mf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function g_(r){if(typeof r=="function")return mf(r)?1:0;if(r!=null){if(r=r.$$typeof,r===ge)return 11;if(r===we)return 14}return 2}function da(r,i){var l=r.alternate;return l===null?(l=Ws(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function lc(r,i,l,u,g,y){var k=2;if(u=r,typeof r=="function")mf(r)&&(k=1);else if(typeof r=="string")k=5;else e:switch(r){case R:return Ua(l.children,g,y,i);case L:k=8,g|=8;break;case pe:return r=Ws(12,l,i,g|2),r.elementType=pe,r.lanes=y,r;case V:return r=Ws(13,l,i,g),r.elementType=V,r.lanes=y,r;case le:return r=Ws(19,l,i,g),r.elementType=le,r.lanes=y,r;case ne:return cc(l,g,y,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case ee:k=10;break e;case ve:k=9;break e;case ge:k=11;break e;case we:k=14;break e;case fe:k=16,u=null;break e}throw Error(s(130,r==null?r:typeof r,""))}return i=Ws(k,l,i,g),i.elementType=r,i.type=u,i.lanes=y,i}function Ua(r,i,l,u){return r=Ws(7,r,u,i),r.lanes=l,r}function cc(r,i,l,u){return r=Ws(22,r,u,i),r.elementType=ne,r.lanes=l,r.stateNode={isHidden:!1},r}function pf(r,i,l){return r=Ws(6,r,null,i),r.lanes=l,r}function gf(r,i,l){return i=Ws(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function x_(r,i,l,u,g){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zd(0),this.expirationTimes=zd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zd(0),this.identifierPrefix=u,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function xf(r,i,l,u,g,y,k,F,B){return r=new x_(r,i,l,F,B),i===1?(i=1,y===!0&&(i|=8)):i=0,y=Ws(3,null,null,i),r.current=y,y.stateNode=r,y.memoizedState={element:u,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eu(y),r}function v_(r,i,l){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:u==null?null:""+u,children:r,containerInfo:i,implementation:l}}function ox(r){if(!r)return ta;r=r._reactInternals;e:{if(H(r)!==r||r.tag!==1)throw Error(s(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(vs(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(s(171))}if(r.tag===1){var l=r.type;if(vs(l))return Mp(r,l,i)}return i}function lx(r,i,l,u,g,y,k,F,B){return r=xf(l,u,!0,r,g,y,k,F,B),r.context=ox(null),l=r.current,u=os(),g=la(l),y=Mr(u,g),y.callback=i??null,ra(l,y,g),r.current.lanes=g,Ji(r,g,u),js(r,u),r}function dc(r,i,l,u){var g=i.current,y=os(),k=la(g);return l=ox(l),i.context===null?i.context=l:i.pendingContext=l,i=Mr(y,k),i.payload={element:r},u=u===void 0?null:u,u!==null&&(i.callback=u),r=ra(g,i,k),r!==null&&(Zs(r,g,k,y),Ul(r,g,k)),k}function uc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function cx(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function vf(r,i){cx(r,i),(r=r.alternate)&&cx(r,i)}function y_(){return null}var dx=typeof reportError=="function"?reportError:function(r){console.error(r)};function yf(r){this._internalRoot=r}fc.prototype.render=yf.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));dc(r,i,null,null)},fc.prototype.unmount=yf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;La(function(){dc(null,r,null,null)}),i[Tr]=null}};function fc(r){this._internalRoot=r}fc.prototype.unstable_scheduleHydration=function(r){if(r){var i=Ym();r={blockedOn:null,target:r,priority:i};for(var l=0;l<Gr.length&&i!==0&&i<Gr[l].priority;l++);Gr.splice(l,0,r),l===0&&Gm(r)}};function wf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function hc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function ux(){}function w_(r,i,l,u,g){if(g){if(typeof u=="function"){var y=u;u=function(){var ie=uc(k);y.call(ie)}}var k=lx(i,u,r,0,null,!1,!1,"",ux);return r._reactRootContainer=k,r[Tr]=k.current,ho(r.nodeType===8?r.parentNode:r),La(),k}for(;g=r.lastChild;)r.removeChild(g);if(typeof u=="function"){var F=u;u=function(){var ie=uc(B);F.call(ie)}}var B=xf(r,0,!1,null,null,!1,!1,"",ux);return r._reactRootContainer=B,r[Tr]=B.current,ho(r.nodeType===8?r.parentNode:r),La(function(){dc(i,B,l,u)}),B}function mc(r,i,l,u,g){var y=l._reactRootContainer;if(y){var k=y;if(typeof g=="function"){var F=g;g=function(){var B=uc(k);F.call(B)}}dc(i,k,r,g)}else k=w_(l,i,r,g,u);return uc(k)}Hm=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var l=fr(i.pendingLanes);l!==0&&(Wd(i,l|1),js(i,Se()),(qt&6)===0&&(_i=Se()+500,na()))}break;case 13:La(function(){var u=Or(r,1);if(u!==null){var g=os();Zs(u,r,1,g)}}),vf(r,1)}},Vd=function(r){if(r.tag===13){var i=Or(r,134217728);if(i!==null){var l=os();Zs(i,r,134217728,l)}vf(r,134217728)}},qm=function(r){if(r.tag===13){var i=la(r),l=Or(r,i);if(l!==null){var u=os();Zs(l,r,i,u)}vf(r,i)}},Ym=function(){return Jt},Km=function(r,i){var l=Jt;try{return Jt=r,i()}finally{Jt=l}},Ps=function(r,i,l){switch(i){case"input":if(Ee(r,l),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var u=l[i];if(u!==r&&u.form===r.form){var g=Dl(u);if(!g)throw Error(s(90));mt(u),Ee(u,g)}}}break;case"textarea":pt(r,l);break;case"select":i=l.value,i!=null&&ae(r,!!l.multiple,i,!1)}},wt=uf,Vt=La;var j_={usingClientEntryPoint:!1,Events:[go,ui,Dl,ms,ot,uf]},To={findFiberByHostInstance:Ta,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},b_={bundleType:To.bundleType,version:To.version,rendererPackageName:To.rendererPackageName,rendererConfig:To.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Xt(r),r===null?null:r.stateNode},findFiberByHostInstance:To.findFiberByHostInstance||y_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{Hr=pc.inject(b_),Is=pc}catch{}}return bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j_,bs.createPortal=function(r,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wf(i))throw Error(s(200));return v_(r,i,null,l)},bs.createRoot=function(r,i){if(!wf(r))throw Error(s(299));var l=!1,u="",g=dx;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),i=xf(r,1,!1,null,null,l,!1,u,g),r[Tr]=i.current,ho(r.nodeType===8?r.parentNode:r),new yf(i)},bs.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=Xt(i),r=r===null?null:r.stateNode,r},bs.flushSync=function(r){return La(r)},bs.hydrate=function(r,i,l){if(!hc(i))throw Error(s(200));return mc(null,r,i,!0,l)},bs.hydrateRoot=function(r,i,l){if(!wf(r))throw Error(s(405));var u=l!=null&&l.hydratedSources||null,g=!1,y="",k=dx;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(k=l.onRecoverableError)),i=lx(i,null,r,1,l??null,g,!1,y,k),r[Tr]=i.current,ho(r),u)for(r=0;r<u.length;r++)l=u[r],g=l._getVersion,g=g(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,g]:i.mutableSourceEagerHydrationData.push(l,g);return new fc(i)},bs.render=function(r,i,l){if(!hc(i))throw Error(s(200));return mc(null,r,i,!1,l)},bs.unmountComponentAtNode=function(r){if(!hc(r))throw Error(s(40));return r._reactRootContainer?(La(function(){mc(null,null,r,!1,function(){r._reactRootContainer=null,r[Tr]=null})}),!0):!1},bs.unstable_batchedUpdates=uf,bs.unstable_renderSubtreeIntoContainer=function(r,i,l,u){if(!hc(l))throw Error(s(200));if(r==null||r._reactInternals===void 0)throw Error(s(38));return mc(r,i,l,!1,u)},bs.version="18.3.1-next-f1338f8080-20240426",bs}var yx;function Zv(){if(yx)return Nf.exports;yx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Nf.exports=T_(),Nf.exports}var wx;function D_(){if(wx)return gc;wx=1;var t=Zv();return gc.createRoot=t.createRoot,gc.hydrateRoot=t.hydrateRoot,gc}var R_=D_(),h=$h();const Le=Jv(h),Bh=__({__proto__:null,default:Le},[h]),A_=1,O_=1e6;let Cf=0;function M_(){return Cf=(Cf+1)%Number.MAX_SAFE_INTEGER,Cf.toString()}const Pf=new Map,jx=t=>{if(Pf.has(t))return;const n=setTimeout(()=>{Pf.delete(t),Uo({type:"REMOVE_TOAST",toastId:t})},O_);Pf.set(t,n)},F_=(t,n)=>{switch(n.type){case"ADD_TOAST":return{...t,toasts:[n.toast,...t.toasts].slice(0,A_)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===n.toast.id?{...s,...n.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=n;return s?jx(s):t.toasts.forEach(a=>{jx(a.id)}),{...t,toasts:t.toasts.map(a=>a.id===s||s===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return n.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==n.toastId)}}},Rc=[];let Ac={toasts:[]};function Uo(t){Ac=F_(Ac,t),Rc.forEach(n=>{n(Ac)})}function I_({...t}){const n=M_(),s=o=>Uo({type:"UPDATE_TOAST",toast:{...o,id:n}}),a=()=>Uo({type:"DISMISS_TOAST",toastId:n});return Uo({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:o=>{o||a()}}}),{id:n,dismiss:a,update:s}}function L_(){const[t,n]=h.useState(Ac);return h.useEffect(()=>(Rc.push(n),()=>{const s=Rc.indexOf(n);s>-1&&Rc.splice(s,1)}),[t]),{...t,toast:I_,dismiss:s=>Uo({type:"DISMISS_TOAST",toastId:s})}}var $i=Zv();const ey=Jv($i);function at(t,n,{checkForDefaultPrevented:s=!0}={}){return function(o){if(t?.(o),s===!1||!o.defaultPrevented)return n?.(o)}}function bx(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function ty(...t){return n=>{let s=!1;const a=t.map(o=>{const c=bx(o,n);return!s&&typeof c=="function"&&(s=!0),c});if(s)return()=>{for(let o=0;o<a.length;o++){const c=a[o];typeof c=="function"?c():bx(t[o],null)}}}}function Gt(...t){return h.useCallback(ty(...t),t)}function $_(t,n){const s=h.createContext(n),a=c=>{const{children:d,...f}=c,p=h.useMemo(()=>f,Object.values(f));return e.jsx(s.Provider,{value:p,children:d})};a.displayName=t+"Provider";function o(c){const d=h.useContext(s);if(d)return d;if(n!==void 0)return n;throw new Error(`\`${c}\` must be used within \`${t}\``)}return[a,o]}function Cr(t,n=[]){let s=[];function a(c,d){const f=h.createContext(d),p=s.length;s=[...s,d];const x=v=>{const{scope:C,children:w,..._}=v,b=C?.[t]?.[p]||f,S=h.useMemo(()=>_,Object.values(_));return e.jsx(b.Provider,{value:S,children:w})};x.displayName=c+"Provider";function m(v,C){const w=C?.[t]?.[p]||f,_=h.useContext(w);if(_)return _;if(d!==void 0)return d;throw new Error(`\`${v}\` must be used within \`${c}\``)}return[x,m]}const o=()=>{const c=s.map(d=>h.createContext(d));return function(f){const p=f?.[t]||c;return h.useMemo(()=>({[`__scope${t}`]:{...f,[t]:p}}),[f,p])}};return o.scopeName=t,[a,B_(o,...n)]}function B_(...t){const n=t[0];if(t.length===1)return n;const s=()=>{const a=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(c){const d=a.reduce((f,{useScope:p,scopeName:x})=>{const v=p(c)[`__scope${x}`];return{...f,...v}},{});return h.useMemo(()=>({[`__scope${n.scopeName}`]:d}),[d])}};return s.scopeName=n.scopeName,s}function Qa(t){const n=z_(t),s=h.forwardRef((a,o)=>{const{children:c,...d}=a,f=h.Children.toArray(c),p=f.find(V_);if(p){const x=p.props.children,m=f.map(v=>v===p?h.Children.count(x)>1?h.Children.only(null):h.isValidElement(x)?x.props.children:null:v);return e.jsx(n,{...d,ref:o,children:h.isValidElement(x)?h.cloneElement(x,void 0,m):null})}return e.jsx(n,{...d,ref:o,children:c})});return s.displayName=`${t}.Slot`,s}var U_=Qa("Slot");function z_(t){const n=h.forwardRef((s,a)=>{const{children:o,...c}=s;if(h.isValidElement(o)){const d=q_(o),f=H_(c,o.props);return o.type!==h.Fragment&&(f.ref=a?ty(a,d):d),h.cloneElement(o,f)}return h.Children.count(o)>1?h.Children.only(null):null});return n.displayName=`${t}.SlotClone`,n}var ny=Symbol("radix.slottable");function W_(t){const n=({children:s})=>e.jsx(e.Fragment,{children:s});return n.displayName=`${t}.Slottable`,n.__radixId=ny,n}function V_(t){return h.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ny}function H_(t,n){const s={...n};for(const a in n){const o=t[a],c=n[a];/^on[A-Z]/.test(a)?o&&c?s[a]=(...f)=>{const p=c(...f);return o(...f),p}:o&&(s[a]=o):a==="style"?s[a]={...o,...c}:a==="className"&&(s[a]=[o,c].filter(Boolean).join(" "))}return{...t,...s}}function q_(t){let n=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?t.ref:(n=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function Uh(t){const n=t+"CollectionProvider",[s,a]=Cr(n),[o,c]=s(n,{collectionRef:{current:null},itemMap:new Map}),d=b=>{const{scope:S,children:E}=b,P=Le.useRef(null),N=Le.useRef(new Map).current;return e.jsx(o,{scope:S,itemMap:N,collectionRef:P,children:E})};d.displayName=n;const f=t+"CollectionSlot",p=Qa(f),x=Le.forwardRef((b,S)=>{const{scope:E,children:P}=b,N=c(f,E),A=Gt(S,N.collectionRef);return e.jsx(p,{ref:A,children:P})});x.displayName=f;const m=t+"CollectionItemSlot",v="data-radix-collection-item",C=Qa(m),w=Le.forwardRef((b,S)=>{const{scope:E,children:P,...N}=b,A=Le.useRef(null),D=Gt(S,A),U=c(m,E);return Le.useEffect(()=>(U.itemMap.set(A,{ref:A,...N}),()=>void U.itemMap.delete(A))),e.jsx(C,{[v]:"",ref:D,children:P})});w.displayName=m;function _(b){const S=c(t+"CollectionConsumer",b);return Le.useCallback(()=>{const P=S.collectionRef.current;if(!P)return[];const N=Array.from(P.querySelectorAll(`[${v}]`));return Array.from(S.itemMap.values()).sort((U,R)=>N.indexOf(U.ref.current)-N.indexOf(R.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:d,Slot:x,ItemSlot:w},_,a]}var Y_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jt=Y_.reduce((t,n)=>{const s=Qa(`Primitive.${n}`),a=h.forwardRef((o,c)=>{const{asChild:d,...f}=o,p=d?s:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(p,{...f,ref:c})});return a.displayName=`Primitive.${n}`,{...t,[n]:a}},{});function sy(t,n){t&&$i.flushSync(()=>t.dispatchEvent(n))}function qs(t){const n=h.useRef(t);return h.useEffect(()=>{n.current=t}),h.useMemo(()=>(...s)=>n.current?.(...s),[])}function K_(t,n=globalThis?.document){const s=qs(t);h.useEffect(()=>{const a=o=>{o.key==="Escape"&&s(o)};return n.addEventListener("keydown",a,{capture:!0}),()=>n.removeEventListener("keydown",a,{capture:!0})},[s,n])}var Q_="DismissableLayer",rh="dismissableLayer.update",G_="dismissableLayer.pointerDownOutside",X_="dismissableLayer.focusOutside",Nx,ry=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Bi=h.forwardRef((t,n)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:c,onInteractOutside:d,onDismiss:f,...p}=t,x=h.useContext(ry),[m,v]=h.useState(null),C=m?.ownerDocument??globalThis?.document,[,w]=h.useState({}),_=Gt(n,R=>v(R)),b=Array.from(x.layers),[S]=[...x.layersWithOutsidePointerEventsDisabled].slice(-1),E=b.indexOf(S),P=m?b.indexOf(m):-1,N=x.layersWithOutsidePointerEventsDisabled.size>0,A=P>=E,D=Z_(R=>{const L=R.target,pe=[...x.branches].some(ee=>ee.contains(L));!A||pe||(o?.(R),d?.(R),R.defaultPrevented||f?.())},C),U=eS(R=>{const L=R.target;[...x.branches].some(ee=>ee.contains(L))||(c?.(R),d?.(R),R.defaultPrevented||f?.())},C);return K_(R=>{P===x.layers.size-1&&(a?.(R),!R.defaultPrevented&&f&&(R.preventDefault(),f()))},C),h.useEffect(()=>{if(m)return s&&(x.layersWithOutsidePointerEventsDisabled.size===0&&(Nx=C.body.style.pointerEvents,C.body.style.pointerEvents="none"),x.layersWithOutsidePointerEventsDisabled.add(m)),x.layers.add(m),_x(),()=>{s&&x.layersWithOutsidePointerEventsDisabled.size===1&&(C.body.style.pointerEvents=Nx)}},[m,C,s,x]),h.useEffect(()=>()=>{m&&(x.layers.delete(m),x.layersWithOutsidePointerEventsDisabled.delete(m),_x())},[m,x]),h.useEffect(()=>{const R=()=>w({});return document.addEventListener(rh,R),()=>document.removeEventListener(rh,R)},[]),e.jsx(jt.div,{...p,ref:_,style:{pointerEvents:N?A?"auto":"none":void 0,...t.style},onFocusCapture:at(t.onFocusCapture,U.onFocusCapture),onBlurCapture:at(t.onBlurCapture,U.onBlurCapture),onPointerDownCapture:at(t.onPointerDownCapture,D.onPointerDownCapture)})});Bi.displayName=Q_;var J_="DismissableLayerBranch",ay=h.forwardRef((t,n)=>{const s=h.useContext(ry),a=h.useRef(null),o=Gt(n,a);return h.useEffect(()=>{const c=a.current;if(c)return s.branches.add(c),()=>{s.branches.delete(c)}},[s.branches]),e.jsx(jt.div,{...t,ref:o})});ay.displayName=J_;function Z_(t,n=globalThis?.document){const s=qs(t),a=h.useRef(!1),o=h.useRef(()=>{});return h.useEffect(()=>{const c=f=>{if(f.target&&!a.current){let p=function(){iy(G_,s,x,{discrete:!0})};const x={originalEvent:f};f.pointerType==="touch"?(n.removeEventListener("click",o.current),o.current=p,n.addEventListener("click",o.current,{once:!0})):p()}else n.removeEventListener("click",o.current);a.current=!1},d=window.setTimeout(()=>{n.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(d),n.removeEventListener("pointerdown",c),n.removeEventListener("click",o.current)}},[n,s]),{onPointerDownCapture:()=>a.current=!0}}function eS(t,n=globalThis?.document){const s=qs(t),a=h.useRef(!1);return h.useEffect(()=>{const o=c=>{c.target&&!a.current&&iy(X_,s,{originalEvent:c},{discrete:!1})};return n.addEventListener("focusin",o),()=>n.removeEventListener("focusin",o)},[n,s]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function _x(){const t=new CustomEvent(rh);document.dispatchEvent(t)}function iy(t,n,s,{discrete:a}){const o=s.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});n&&o.addEventListener(t,n,{once:!0}),a?sy(o,c):o.dispatchEvent(c)}var tS=Bi,nS=ay,Yn=globalThis?.document?h.useLayoutEffect:()=>{},sS="Portal",el=h.forwardRef((t,n)=>{const{container:s,...a}=t,[o,c]=h.useState(!1);Yn(()=>c(!0),[]);const d=s||o&&globalThis?.document?.body;return d?ey.createPortal(e.jsx(jt.div,{...a,ref:n}),d):null});el.displayName=sS;function rS(t,n){return h.useReducer((s,a)=>n[s][a]??s,t)}var Pr=t=>{const{present:n,children:s}=t,a=aS(n),o=typeof s=="function"?s({present:a.isPresent}):h.Children.only(s),c=Gt(a.ref,iS(o));return typeof s=="function"||a.isPresent?h.cloneElement(o,{ref:c}):null};Pr.displayName="Presence";function aS(t){const[n,s]=h.useState(),a=h.useRef(null),o=h.useRef(t),c=h.useRef("none"),d=t?"mounted":"unmounted",[f,p]=rS(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const x=xc(a.current);c.current=f==="mounted"?x:"none"},[f]),Yn(()=>{const x=a.current,m=o.current;if(m!==t){const C=c.current,w=xc(x);t?p("MOUNT"):w==="none"||x?.display==="none"?p("UNMOUNT"):p(m&&C!==w?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,p]),Yn(()=>{if(n){let x;const m=n.ownerDocument.defaultView??window,v=w=>{const b=xc(a.current).includes(w.animationName);if(w.target===n&&b&&(p("ANIMATION_END"),!o.current)){const S=n.style.animationFillMode;n.style.animationFillMode="forwards",x=m.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=S)})}},C=w=>{w.target===n&&(c.current=xc(a.current))};return n.addEventListener("animationstart",C),n.addEventListener("animationcancel",v),n.addEventListener("animationend",v),()=>{m.clearTimeout(x),n.removeEventListener("animationstart",C),n.removeEventListener("animationcancel",v),n.removeEventListener("animationend",v)}}else p("ANIMATION_END")},[n,p]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:h.useCallback(x=>{a.current=x?getComputedStyle(x):null,s(x)},[])}}function xc(t){return t?.animationName||"none"}function iS(t){let n=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?t.ref:(n=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var oS=Bh[" useInsertionEffect ".trim().toString()]||Yn;function _a({prop:t,defaultProp:n,onChange:s=()=>{},caller:a}){const[o,c,d]=lS({defaultProp:n,onChange:s}),f=t!==void 0,p=f?t:o;{const m=h.useRef(t!==void 0);h.useEffect(()=>{const v=m.current;v!==f&&console.warn(`${a} is changing from ${v?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=f},[f,a])}const x=h.useCallback(m=>{if(f){const v=cS(m)?m(t):m;v!==t&&d.current?.(v)}else c(m)},[f,t,c,d]);return[p,x]}function lS({defaultProp:t,onChange:n}){const[s,a]=h.useState(t),o=h.useRef(s),c=h.useRef(n);return oS(()=>{c.current=n},[n]),h.useEffect(()=>{o.current!==s&&(c.current?.(s),o.current=s)},[s,o]),[s,a,c]}function cS(t){return typeof t=="function"}var oy=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),dS="VisuallyHidden",od=h.forwardRef((t,n)=>e.jsx(jt.span,{...t,ref:n,style:{...oy,...t.style}}));od.displayName=dS;var uS=od,zh="ToastProvider",[Wh,fS,hS]=Uh("Toast"),[ly]=Cr("Toast",[hS]),[mS,ld]=ly(zh),cy=t=>{const{__scopeToast:n,label:s="Notification",duration:a=5e3,swipeDirection:o="right",swipeThreshold:c=50,children:d}=t,[f,p]=h.useState(null),[x,m]=h.useState(0),v=h.useRef(!1),C=h.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${zh}\`. Expected non-empty \`string\`.`),e.jsx(Wh.Provider,{scope:n,children:e.jsx(mS,{scope:n,label:s,duration:a,swipeDirection:o,swipeThreshold:c,toastCount:x,viewport:f,onViewportChange:p,onToastAdd:h.useCallback(()=>m(w=>w+1),[]),onToastRemove:h.useCallback(()=>m(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:C,children:d})})};cy.displayName=zh;var dy="ToastViewport",pS=["F8"],ah="toast.viewportPause",ih="toast.viewportResume",uy=h.forwardRef((t,n)=>{const{__scopeToast:s,hotkey:a=pS,label:o="Notifications ({hotkey})",...c}=t,d=ld(dy,s),f=fS(s),p=h.useRef(null),x=h.useRef(null),m=h.useRef(null),v=h.useRef(null),C=Gt(n,v,d.onViewportChange),w=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=d.toastCount>0;h.useEffect(()=>{const S=E=>{a.length!==0&&a.every(N=>E[N]||E.code===N)&&v.current?.focus()};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[a]),h.useEffect(()=>{const S=p.current,E=v.current;if(_&&S&&E){const P=()=>{if(!d.isClosePausedRef.current){const U=new CustomEvent(ah);E.dispatchEvent(U),d.isClosePausedRef.current=!0}},N=()=>{if(d.isClosePausedRef.current){const U=new CustomEvent(ih);E.dispatchEvent(U),d.isClosePausedRef.current=!1}},A=U=>{!S.contains(U.relatedTarget)&&N()},D=()=>{S.contains(document.activeElement)||N()};return S.addEventListener("focusin",P),S.addEventListener("focusout",A),S.addEventListener("pointermove",P),S.addEventListener("pointerleave",D),window.addEventListener("blur",P),window.addEventListener("focus",N),()=>{S.removeEventListener("focusin",P),S.removeEventListener("focusout",A),S.removeEventListener("pointermove",P),S.removeEventListener("pointerleave",D),window.removeEventListener("blur",P),window.removeEventListener("focus",N)}}},[_,d.isClosePausedRef]);const b=h.useCallback(({tabbingDirection:S})=>{const P=f().map(N=>{const A=N.ref.current,D=[A,...kS(A)];return S==="forwards"?D:D.reverse()});return(S==="forwards"?P.reverse():P).flat()},[f]);return h.useEffect(()=>{const S=v.current;if(S){const E=P=>{const N=P.altKey||P.ctrlKey||P.metaKey;if(P.key==="Tab"&&!N){const D=document.activeElement,U=P.shiftKey;if(P.target===S&&U){x.current?.focus();return}const pe=b({tabbingDirection:U?"backwards":"forwards"}),ee=pe.findIndex(ve=>ve===D);kf(pe.slice(ee+1))?P.preventDefault():U?x.current?.focus():m.current?.focus()}};return S.addEventListener("keydown",E),()=>S.removeEventListener("keydown",E)}},[f,b]),e.jsxs(nS,{ref:p,role:"region","aria-label":o.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&e.jsx(oh,{ref:x,onFocusFromOutsideViewport:()=>{const S=b({tabbingDirection:"forwards"});kf(S)}}),e.jsx(Wh.Slot,{scope:s,children:e.jsx(jt.ol,{tabIndex:-1,...c,ref:C})}),_&&e.jsx(oh,{ref:m,onFocusFromOutsideViewport:()=>{const S=b({tabbingDirection:"backwards"});kf(S)}})]})});uy.displayName=dy;var fy="ToastFocusProxy",oh=h.forwardRef((t,n)=>{const{__scopeToast:s,onFocusFromOutsideViewport:a,...o}=t,c=ld(fy,s);return e.jsx(od,{"aria-hidden":!0,tabIndex:0,...o,ref:n,style:{position:"fixed"},onFocus:d=>{const f=d.relatedTarget;!c.viewport?.contains(f)&&a()}})});oh.displayName=fy;var tl="Toast",gS="toast.swipeStart",xS="toast.swipeMove",vS="toast.swipeCancel",yS="toast.swipeEnd",hy=h.forwardRef((t,n)=>{const{forceMount:s,open:a,defaultOpen:o,onOpenChange:c,...d}=t,[f,p]=_a({prop:a,defaultProp:o??!0,onChange:c,caller:tl});return e.jsx(Pr,{present:s||f,children:e.jsx(bS,{open:f,...d,ref:n,onClose:()=>p(!1),onPause:qs(t.onPause),onResume:qs(t.onResume),onSwipeStart:at(t.onSwipeStart,x=>{x.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:at(t.onSwipeMove,x=>{const{x:m,y:v}=x.detail.delta;x.currentTarget.setAttribute("data-swipe","move"),x.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),x.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:at(t.onSwipeCancel,x=>{x.currentTarget.setAttribute("data-swipe","cancel"),x.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),x.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),x.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),x.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:at(t.onSwipeEnd,x=>{const{x:m,y:v}=x.detail.delta;x.currentTarget.setAttribute("data-swipe","end"),x.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),x.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),x.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),x.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),p(!1)})})})});hy.displayName=tl;var[wS,jS]=ly(tl,{onClose(){}}),bS=h.forwardRef((t,n)=>{const{__scopeToast:s,type:a="foreground",duration:o,open:c,onClose:d,onEscapeKeyDown:f,onPause:p,onResume:x,onSwipeStart:m,onSwipeMove:v,onSwipeCancel:C,onSwipeEnd:w,..._}=t,b=ld(tl,s),[S,E]=h.useState(null),P=Gt(n,le=>E(le)),N=h.useRef(null),A=h.useRef(null),D=o||b.duration,U=h.useRef(0),R=h.useRef(D),L=h.useRef(0),{onToastAdd:pe,onToastRemove:ee}=b,ve=qs(()=>{S?.contains(document.activeElement)&&b.viewport?.focus(),d()}),ge=h.useCallback(le=>{!le||le===1/0||(window.clearTimeout(L.current),U.current=new Date().getTime(),L.current=window.setTimeout(ve,le))},[ve]);h.useEffect(()=>{const le=b.viewport;if(le){const we=()=>{ge(R.current),x?.()},fe=()=>{const ne=new Date().getTime()-U.current;R.current=R.current-ne,window.clearTimeout(L.current),p?.()};return le.addEventListener(ah,fe),le.addEventListener(ih,we),()=>{le.removeEventListener(ah,fe),le.removeEventListener(ih,we)}}},[b.viewport,D,p,x,ge]),h.useEffect(()=>{c&&!b.isClosePausedRef.current&&ge(D)},[c,D,b.isClosePausedRef,ge]),h.useEffect(()=>(pe(),()=>ee()),[pe,ee]);const V=h.useMemo(()=>S?wy(S):null,[S]);return b.viewport?e.jsxs(e.Fragment,{children:[V&&e.jsx(NS,{__scopeToast:s,role:"status","aria-live":a==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),e.jsx(wS,{scope:s,onClose:ve,children:$i.createPortal(e.jsx(Wh.ItemSlot,{scope:s,children:e.jsx(tS,{asChild:!0,onEscapeKeyDown:at(f,()=>{b.isFocusedToastEscapeKeyDownRef.current||ve(),b.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(jt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":c?"open":"closed","data-swipe-direction":b.swipeDirection,..._,ref:P,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:at(t.onKeyDown,le=>{le.key==="Escape"&&(f?.(le.nativeEvent),le.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,ve()))}),onPointerDown:at(t.onPointerDown,le=>{le.button===0&&(N.current={x:le.clientX,y:le.clientY})}),onPointerMove:at(t.onPointerMove,le=>{if(!N.current)return;const we=le.clientX-N.current.x,fe=le.clientY-N.current.y,ne=!!A.current,M=["left","right"].includes(b.swipeDirection),K=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,se=M?K(0,we):0,T=M?0:K(0,fe),O=le.pointerType==="touch"?10:2,he={x:se,y:T},Y={originalEvent:le,delta:he};ne?(A.current=he,vc(xS,v,Y,{discrete:!1})):Sx(he,b.swipeDirection,O)?(A.current=he,vc(gS,m,Y,{discrete:!1}),le.target.setPointerCapture(le.pointerId)):(Math.abs(we)>O||Math.abs(fe)>O)&&(N.current=null)}),onPointerUp:at(t.onPointerUp,le=>{const we=A.current,fe=le.target;if(fe.hasPointerCapture(le.pointerId)&&fe.releasePointerCapture(le.pointerId),A.current=null,N.current=null,we){const ne=le.currentTarget,M={originalEvent:le,delta:we};Sx(we,b.swipeDirection,b.swipeThreshold)?vc(yS,w,M,{discrete:!0}):vc(vS,C,M,{discrete:!0}),ne.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),b.viewport)})]}):null}),NS=t=>{const{__scopeToast:n,children:s,...a}=t,o=ld(tl,n),[c,d]=h.useState(!1),[f,p]=h.useState(!1);return CS(()=>d(!0)),h.useEffect(()=>{const x=window.setTimeout(()=>p(!0),1e3);return()=>window.clearTimeout(x)},[]),f?null:e.jsx(el,{asChild:!0,children:e.jsx(od,{...a,children:c&&e.jsxs(e.Fragment,{children:[o.label," ",s]})})})},_S="ToastTitle",my=h.forwardRef((t,n)=>{const{__scopeToast:s,...a}=t;return e.jsx(jt.div,{...a,ref:n})});my.displayName=_S;var SS="ToastDescription",py=h.forwardRef((t,n)=>{const{__scopeToast:s,...a}=t;return e.jsx(jt.div,{...a,ref:n})});py.displayName=SS;var gy="ToastAction",xy=h.forwardRef((t,n)=>{const{altText:s,...a}=t;return s.trim()?e.jsx(yy,{altText:s,asChild:!0,children:e.jsx(Vh,{...a,ref:n})}):(console.error(`Invalid prop \`altText\` supplied to \`${gy}\`. Expected non-empty \`string\`.`),null)});xy.displayName=gy;var vy="ToastClose",Vh=h.forwardRef((t,n)=>{const{__scopeToast:s,...a}=t,o=jS(vy,s);return e.jsx(yy,{asChild:!0,children:e.jsx(jt.button,{type:"button",...a,ref:n,onClick:at(t.onClick,o.onClose)})})});Vh.displayName=vy;var yy=h.forwardRef((t,n)=>{const{__scopeToast:s,altText:a,...o}=t;return e.jsx(jt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...o,ref:n})});function wy(t){const n=[];return Array.from(t.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&n.push(a.textContent),PS(a)){const o=a.ariaHidden||a.hidden||a.style.display==="none",c=a.dataset.radixToastAnnounceExclude==="";if(!o)if(c){const d=a.dataset.radixToastAnnounceAlt;d&&n.push(d)}else n.push(...wy(a))}}),n}function vc(t,n,s,{discrete:a}){const o=s.originalEvent.currentTarget,c=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:s});n&&o.addEventListener(t,n,{once:!0}),a?sy(o,c):o.dispatchEvent(c)}var Sx=(t,n,s=0)=>{const a=Math.abs(t.x),o=Math.abs(t.y),c=a>o;return n==="left"||n==="right"?c&&a>s:!c&&o>s};function CS(t=()=>{}){const n=qs(t);Yn(()=>{let s=0,a=0;return s=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(n)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(a)}},[n])}function PS(t){return t.nodeType===t.ELEMENT_NODE}function kS(t){const n=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const o=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||o?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)n.push(s.currentNode);return n}function kf(t){const n=document.activeElement;return t.some(s=>s===n?!0:(s.focus(),document.activeElement!==n))}var ES=cy,jy=uy,by=hy,Ny=my,_y=py,Sy=xy,Cy=Vh;function Py(t){var n,s,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(n=0;n<o;n++)t[n]&&(s=Py(t[n]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s);return a}function ky(){for(var t,n,s=0,a="",o=arguments.length;s<o;s++)(t=arguments[s])&&(n=Py(t))&&(a&&(a+=" "),a+=n);return a}const Cx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Px=ky,cd=(t,n)=>s=>{var a;if(n?.variants==null)return Px(t,s?.class,s?.className);const{variants:o,defaultVariants:c}=n,d=Object.keys(o).map(x=>{const m=s?.[x],v=c?.[x];if(m===null)return null;const C=Cx(m)||Cx(v);return o[x][C]}),f=s&&Object.entries(s).reduce((x,m)=>{let[v,C]=m;return C===void 0||(x[v]=C),x},{}),p=n==null||(a=n.compoundVariants)===null||a===void 0?void 0:a.reduce((x,m)=>{let{class:v,className:C,...w}=m;return Object.entries(w).every(_=>{let[b,S]=_;return Array.isArray(S)?S.includes({...c,...f}[b]):{...c,...f}[b]===S})?[...x,v,C]:x},[]);return Px(t,d,p,s?.class,s?.className)};const TS=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ey=(...t)=>t.filter((n,s,a)=>!!n&&n.trim()!==""&&a.indexOf(n)===s).join(" ").trim();var DS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const RS=h.forwardRef(({color:t="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:c,iconNode:d,...f},p)=>h.createElement("svg",{ref:p,...DS,width:n,height:n,stroke:t,strokeWidth:a?Number(s)*24/Number(n):s,className:Ey("lucide",o),...f},[...d.map(([x,m])=>h.createElement(x,m)),...Array.isArray(c)?c:[c]]));const ft=(t,n)=>{const s=h.forwardRef(({className:a,...o},c)=>h.createElement(RS,{ref:c,iconNode:n,className:Ey(`lucide-${TS(t)}`,a),...o}));return s.displayName=`${t}`,s};const nl=ft("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const AS=ft("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const kx=ft("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);const ns=ft("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Ty=ft("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Dy=ft("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const OS=ft("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const MS=ft("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const FS=ft("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Hh=ft("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const ar=ft("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const qh=ft("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const IS=ft("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const Ry=ft("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);const qc=ft("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Ef=ft("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const ga=ft("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const dd=ft("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const zo=ft("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const LS=ft("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);const qa=ft("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const Yh=ft("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);const xa=ft("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);const Tf=ft("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"4oyue0"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);const $S=ft("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const BS=ft("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const Kt=ft("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const Ex=ft("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const US=ft("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const zS=ft("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Tx=ft("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);const WS=ft("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const Ay=ft("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Yc=ft("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);const jr=ft("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Oy=ft("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);const VS=ft("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Kh=ft("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const HS=ft("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const Qh=ft("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const qS=ft("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);const Oc=ft("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);const _s=ft("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);const YS=ft("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);const yc=ft("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);const lh=ft("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Kc=ft("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Dx=ft("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const Wo=ft("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const ud=ft("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const es=ft("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Gh=ft("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Xh="-",KS=t=>{const n=GS(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:a}=t;return{getClassGroupId:d=>{const f=d.split(Xh);return f[0]===""&&f.length!==1&&f.shift(),My(f,n)||QS(d)},getConflictingClassGroupIds:(d,f)=>{const p=s[d]||[];return f&&a[d]?[...p,...a[d]]:p}}},My=(t,n)=>{if(t.length===0)return n.classGroupId;const s=t[0],a=n.nextPart.get(s),o=a?My(t.slice(1),a):void 0;if(o)return o;if(n.validators.length===0)return;const c=t.join(Xh);return n.validators.find(({validator:d})=>d(c))?.classGroupId},Rx=/^\[(.+)\]$/,QS=t=>{if(Rx.test(t)){const n=Rx.exec(t)[1],s=n?.substring(0,n.indexOf(":"));if(s)return"arbitrary.."+s}},GS=t=>{const{theme:n,prefix:s}=t,a={nextPart:new Map,validators:[]};return JS(Object.entries(t.classGroups),s).forEach(([c,d])=>{ch(d,a,c,n)}),a},ch=(t,n,s,a)=>{t.forEach(o=>{if(typeof o=="string"){const c=o===""?n:Ax(n,o);c.classGroupId=s;return}if(typeof o=="function"){if(XS(o)){ch(o(a),n,s,a);return}n.validators.push({validator:o,classGroupId:s});return}Object.entries(o).forEach(([c,d])=>{ch(d,Ax(n,c),s,a)})})},Ax=(t,n)=>{let s=t;return n.split(Xh).forEach(a=>{s.nextPart.has(a)||s.nextPart.set(a,{nextPart:new Map,validators:[]}),s=s.nextPart.get(a)}),s},XS=t=>t.isThemeGetter,JS=(t,n)=>n?t.map(([s,a])=>{const o=a.map(c=>typeof c=="string"?n+c:typeof c=="object"?Object.fromEntries(Object.entries(c).map(([d,f])=>[n+d,f])):c);return[s,o]}):t,ZS=t=>{if(t<1)return{get:()=>{},set:()=>{}};let n=0,s=new Map,a=new Map;const o=(c,d)=>{s.set(c,d),n++,n>t&&(n=0,a=s,s=new Map)};return{get(c){let d=s.get(c);if(d!==void 0)return d;if((d=a.get(c))!==void 0)return o(c,d),d},set(c,d){s.has(c)?s.set(c,d):o(c,d)}}},Fy="!",e1=t=>{const{separator:n,experimentalParseClassName:s}=t,a=n.length===1,o=n[0],c=n.length,d=f=>{const p=[];let x=0,m=0,v;for(let S=0;S<f.length;S++){let E=f[S];if(x===0){if(E===o&&(a||f.slice(S,S+c)===n)){p.push(f.slice(m,S)),m=S+c;continue}if(E==="/"){v=S;continue}}E==="["?x++:E==="]"&&x--}const C=p.length===0?f:f.substring(m),w=C.startsWith(Fy),_=w?C.substring(1):C,b=v&&v>m?v-m:void 0;return{modifiers:p,hasImportantModifier:w,baseClassName:_,maybePostfixModifierPosition:b}};return s?f=>s({className:f,parseClassName:d}):d},t1=t=>{if(t.length<=1)return t;const n=[];let s=[];return t.forEach(a=>{a[0]==="["?(n.push(...s.sort(),a),s=[]):s.push(a)}),n.push(...s.sort()),n},n1=t=>({cache:ZS(t.cacheSize),parseClassName:e1(t),...KS(t)}),s1=/\s+/,r1=(t,n)=>{const{parseClassName:s,getClassGroupId:a,getConflictingClassGroupIds:o}=n,c=[],d=t.trim().split(s1);let f="";for(let p=d.length-1;p>=0;p-=1){const x=d[p],{modifiers:m,hasImportantModifier:v,baseClassName:C,maybePostfixModifierPosition:w}=s(x);let _=!!w,b=a(_?C.substring(0,w):C);if(!b){if(!_){f=x+(f.length>0?" "+f:f);continue}if(b=a(C),!b){f=x+(f.length>0?" "+f:f);continue}_=!1}const S=t1(m).join(":"),E=v?S+Fy:S,P=E+b;if(c.includes(P))continue;c.push(P);const N=o(b,_);for(let A=0;A<N.length;++A){const D=N[A];c.push(E+D)}f=x+(f.length>0?" "+f:f)}return f};function a1(){let t=0,n,s,a="";for(;t<arguments.length;)(n=arguments[t++])&&(s=Iy(n))&&(a&&(a+=" "),a+=s);return a}const Iy=t=>{if(typeof t=="string")return t;let n,s="";for(let a=0;a<t.length;a++)t[a]&&(n=Iy(t[a]))&&(s&&(s+=" "),s+=n);return s};function i1(t,...n){let s,a,o,c=d;function d(p){const x=n.reduce((m,v)=>v(m),t());return s=n1(x),a=s.cache.get,o=s.cache.set,c=f,f(p)}function f(p){const x=a(p);if(x)return x;const m=r1(p,s);return o(p,m),m}return function(){return c(a1.apply(null,arguments))}}const hn=t=>{const n=s=>s[t]||[];return n.isThemeGetter=!0,n},Ly=/^\[(?:([a-z-]+):)?(.+)\]$/i,o1=/^\d+\/\d+$/,l1=new Set(["px","full","screen"]),c1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,d1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,u1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,f1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,h1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lr=t=>Di(t)||l1.has(t)||o1.test(t),fa=t=>Ui(t,"length",j1),Di=t=>!!t&&!Number.isNaN(Number(t)),Df=t=>Ui(t,"number",Di),Ro=t=>!!t&&Number.isInteger(Number(t)),m1=t=>t.endsWith("%")&&Di(t.slice(0,-1)),Rt=t=>Ly.test(t),ha=t=>c1.test(t),p1=new Set(["length","size","percentage"]),g1=t=>Ui(t,p1,$y),x1=t=>Ui(t,"position",$y),v1=new Set(["image","url"]),y1=t=>Ui(t,v1,N1),w1=t=>Ui(t,"",b1),Ao=()=>!0,Ui=(t,n,s)=>{const a=Ly.exec(t);return a?a[1]?typeof n=="string"?a[1]===n:n.has(a[1]):s(a[2]):!1},j1=t=>d1.test(t)&&!u1.test(t),$y=()=>!1,b1=t=>f1.test(t),N1=t=>h1.test(t),_1=()=>{const t=hn("colors"),n=hn("spacing"),s=hn("blur"),a=hn("brightness"),o=hn("borderColor"),c=hn("borderRadius"),d=hn("borderSpacing"),f=hn("borderWidth"),p=hn("contrast"),x=hn("grayscale"),m=hn("hueRotate"),v=hn("invert"),C=hn("gap"),w=hn("gradientColorStops"),_=hn("gradientColorStopPositions"),b=hn("inset"),S=hn("margin"),E=hn("opacity"),P=hn("padding"),N=hn("saturate"),A=hn("scale"),D=hn("sepia"),U=hn("skew"),R=hn("space"),L=hn("translate"),pe=()=>["auto","contain","none"],ee=()=>["auto","hidden","clip","visible","scroll"],ve=()=>["auto",Rt,n],ge=()=>[Rt,n],V=()=>["",Lr,fa],le=()=>["auto",Di,Rt],we=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],fe=()=>["solid","dashed","dotted","double","none"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",Rt],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>[Di,Rt];return{cacheSize:500,separator:":",theme:{colors:[Ao],spacing:[Lr,fa],blur:["none","",ha,Rt],brightness:T(),borderColor:[t],borderRadius:["none","","full",ha,Rt],borderSpacing:ge(),borderWidth:V(),contrast:T(),grayscale:K(),hueRotate:T(),invert:K(),gap:ge(),gradientColorStops:[t],gradientColorStopPositions:[m1,fa],inset:ve(),margin:ve(),opacity:T(),padding:ge(),saturate:T(),scale:T(),sepia:K(),skew:T(),space:ge(),translate:ge()},classGroups:{aspect:[{aspect:["auto","square","video",Rt]}],container:["container"],columns:[{columns:[ha]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...we(),Rt]}],overflow:[{overflow:ee()}],"overflow-x":[{"overflow-x":ee()}],"overflow-y":[{"overflow-y":ee()}],overscroll:[{overscroll:pe()}],"overscroll-x":[{"overscroll-x":pe()}],"overscroll-y":[{"overscroll-y":pe()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ro,Rt]}],basis:[{basis:ve()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Rt]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",Ro,Rt]}],"grid-cols":[{"grid-cols":[Ao]}],"col-start-end":[{col:["auto",{span:["full",Ro,Rt]},Rt]}],"col-start":[{"col-start":le()}],"col-end":[{"col-end":le()}],"grid-rows":[{"grid-rows":[Ao]}],"row-start-end":[{row:["auto",{span:[Ro,Rt]},Rt]}],"row-start":[{"row-start":le()}],"row-end":[{"row-end":le()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Rt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Rt]}],gap:[{gap:[C]}],"gap-x":[{"gap-x":[C]}],"gap-y":[{"gap-y":[C]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[P]}],px:[{px:[P]}],py:[{py:[P]}],ps:[{ps:[P]}],pe:[{pe:[P]}],pt:[{pt:[P]}],pr:[{pr:[P]}],pb:[{pb:[P]}],pl:[{pl:[P]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Rt,n]}],"min-w":[{"min-w":[Rt,n,"min","max","fit"]}],"max-w":[{"max-w":[Rt,n,"none","full","min","max","fit","prose",{screen:[ha]},ha]}],h:[{h:[Rt,n,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Rt,n,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Rt,n,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Rt,n,"auto","min","max","fit"]}],"font-size":[{text:["base",ha,fa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Df]}],"font-family":[{font:[Ao]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Rt]}],"line-clamp":[{"line-clamp":["none",Di,Df]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Lr,Rt]}],"list-image":[{"list-image":["none",Rt]}],"list-style-type":[{list:["none","disc","decimal",Rt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Lr,fa]}],"underline-offset":[{"underline-offset":["auto",Lr,Rt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ge()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...we(),x1]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",g1]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},y1]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[c]}],"rounded-s":[{"rounded-s":[c]}],"rounded-e":[{"rounded-e":[c]}],"rounded-t":[{"rounded-t":[c]}],"rounded-r":[{"rounded-r":[c]}],"rounded-b":[{"rounded-b":[c]}],"rounded-l":[{"rounded-l":[c]}],"rounded-ss":[{"rounded-ss":[c]}],"rounded-se":[{"rounded-se":[c]}],"rounded-ee":[{"rounded-ee":[c]}],"rounded-es":[{"rounded-es":[c]}],"rounded-tl":[{"rounded-tl":[c]}],"rounded-tr":[{"rounded-tr":[c]}],"rounded-br":[{"rounded-br":[c]}],"rounded-bl":[{"rounded-bl":[c]}],"border-w":[{border:[f]}],"border-w-x":[{"border-x":[f]}],"border-w-y":[{"border-y":[f]}],"border-w-s":[{"border-s":[f]}],"border-w-e":[{"border-e":[f]}],"border-w-t":[{"border-t":[f]}],"border-w-r":[{"border-r":[f]}],"border-w-b":[{"border-b":[f]}],"border-w-l":[{"border-l":[f]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...fe(),"hidden"]}],"divide-x":[{"divide-x":[f]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[f]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:fe()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...fe()]}],"outline-offset":[{"outline-offset":[Lr,Rt]}],"outline-w":[{outline:[Lr,fa]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Lr,fa]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ha,w1]}],"shadow-color":[{shadow:[Ao]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[a]}],contrast:[{contrast:[p]}],"drop-shadow":[{"drop-shadow":["","none",ha,Rt]}],grayscale:[{grayscale:[x]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[v]}],saturate:[{saturate:[N]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[p]}],"backdrop-grayscale":[{"backdrop-grayscale":[x]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[d]}],"border-spacing-x":[{"border-spacing-x":[d]}],"border-spacing-y":[{"border-spacing-y":[d]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Rt]}],duration:[{duration:T()}],ease:[{ease:["linear","in","out","in-out",Rt]}],delay:[{delay:T()}],animate:[{animate:["none","spin","ping","pulse","bounce",Rt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[Ro,Rt]}],"translate-x":[{"translate-x":[L]}],"translate-y":[{"translate-y":[L]}],"skew-x":[{"skew-x":[U]}],"skew-y":[{"skew-y":[U]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Rt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Rt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ge()}],"scroll-mx":[{"scroll-mx":ge()}],"scroll-my":[{"scroll-my":ge()}],"scroll-ms":[{"scroll-ms":ge()}],"scroll-me":[{"scroll-me":ge()}],"scroll-mt":[{"scroll-mt":ge()}],"scroll-mr":[{"scroll-mr":ge()}],"scroll-mb":[{"scroll-mb":ge()}],"scroll-ml":[{"scroll-ml":ge()}],"scroll-p":[{"scroll-p":ge()}],"scroll-px":[{"scroll-px":ge()}],"scroll-py":[{"scroll-py":ge()}],"scroll-ps":[{"scroll-ps":ge()}],"scroll-pe":[{"scroll-pe":ge()}],"scroll-pt":[{"scroll-pt":ge()}],"scroll-pr":[{"scroll-pr":ge()}],"scroll-pb":[{"scroll-pb":ge()}],"scroll-pl":[{"scroll-pl":ge()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Rt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Lr,fa,Df]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},S1=i1(_1);function By(t,n){return function(){return t.apply(n,arguments)}}const{toString:C1}=Object.prototype,{getPrototypeOf:Jh}=Object,{iterator:fd,toStringTag:Uy}=Symbol,hd=(t=>n=>{const s=C1.call(n);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),dr=t=>(t=t.toLowerCase(),n=>hd(n)===t),md=t=>n=>typeof n===t,{isArray:zi}=Array,Oi=md("undefined");function sl(t){return t!==null&&!Oi(t)&&t.constructor!==null&&!Oi(t.constructor)&&Ss(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const zy=dr("ArrayBuffer");function P1(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&zy(t.buffer),n}const k1=md("string"),Ss=md("function"),Wy=md("number"),rl=t=>t!==null&&typeof t=="object",E1=t=>t===!0||t===!1,Mc=t=>{if(hd(t)!=="object")return!1;const n=Jh(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Uy in t)&&!(fd in t)},T1=t=>{if(!rl(t)||sl(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},D1=dr("Date"),R1=dr("File"),A1=dr("Blob"),O1=dr("FileList"),M1=t=>rl(t)&&Ss(t.pipe),F1=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||Ss(t.append)&&((n=hd(t))==="formdata"||n==="object"&&Ss(t.toString)&&t.toString()==="[object FormData]"))},I1=dr("URLSearchParams"),[L1,$1,B1,U1]=["ReadableStream","Request","Response","Headers"].map(dr),z1=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function al(t,n,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let a,o;if(typeof t!="object"&&(t=[t]),zi(t))for(a=0,o=t.length;a<o;a++)n.call(null,t[a],a,t);else{if(sl(t))return;const c=s?Object.getOwnPropertyNames(t):Object.keys(t),d=c.length;let f;for(a=0;a<d;a++)f=c[a],n.call(null,t[f],f,t)}}function Vy(t,n){if(sl(t))return null;n=n.toLowerCase();const s=Object.keys(t);let a=s.length,o;for(;a-- >0;)if(o=s[a],n===o.toLowerCase())return o;return null}const Wa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Hy=t=>!Oi(t)&&t!==Wa;function dh(){const{caseless:t,skipUndefined:n}=Hy(this)&&this||{},s={},a=(o,c)=>{const d=t&&Vy(s,c)||c;Mc(s[d])&&Mc(o)?s[d]=dh(s[d],o):Mc(o)?s[d]=dh({},o):zi(o)?s[d]=o.slice():(!n||!Oi(o))&&(s[d]=o)};for(let o=0,c=arguments.length;o<c;o++)arguments[o]&&al(arguments[o],a);return s}const W1=(t,n,s,{allOwnKeys:a}={})=>(al(n,(o,c)=>{s&&Ss(o)?t[c]=By(o,s):t[c]=o},{allOwnKeys:a}),t),V1=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),H1=(t,n,s,a)=>{t.prototype=Object.create(n.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),s&&Object.assign(t.prototype,s)},q1=(t,n,s,a)=>{let o,c,d;const f={};if(n=n||{},t==null)return n;do{for(o=Object.getOwnPropertyNames(t),c=o.length;c-- >0;)d=o[c],(!a||a(d,t,n))&&!f[d]&&(n[d]=t[d],f[d]=!0);t=s!==!1&&Jh(t)}while(t&&(!s||s(t,n))&&t!==Object.prototype);return n},Y1=(t,n,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=n.length;const a=t.indexOf(n,s);return a!==-1&&a===s},K1=t=>{if(!t)return null;if(zi(t))return t;let n=t.length;if(!Wy(n))return null;const s=new Array(n);for(;n-- >0;)s[n]=t[n];return s},Q1=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&Jh(Uint8Array)),G1=(t,n)=>{const a=(t&&t[fd]).call(t);let o;for(;(o=a.next())&&!o.done;){const c=o.value;n.call(t,c[0],c[1])}},X1=(t,n)=>{let s;const a=[];for(;(s=t.exec(n))!==null;)a.push(s);return a},J1=dr("HTMLFormElement"),Z1=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,a,o){return a.toUpperCase()+o}),Ox=(({hasOwnProperty:t})=>(n,s)=>t.call(n,s))(Object.prototype),eC=dr("RegExp"),qy=(t,n)=>{const s=Object.getOwnPropertyDescriptors(t),a={};al(s,(o,c)=>{let d;(d=n(o,c,t))!==!1&&(a[c]=d||o)}),Object.defineProperties(t,a)},tC=t=>{qy(t,(n,s)=>{if(Ss(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const a=t[s];if(Ss(a)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},nC=(t,n)=>{const s={},a=o=>{o.forEach(c=>{s[c]=!0})};return zi(t)?a(t):a(String(t).split(n)),s},sC=()=>{},rC=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n;function aC(t){return!!(t&&Ss(t.append)&&t[Uy]==="FormData"&&t[fd])}const iC=t=>{const n=new Array(10),s=(a,o)=>{if(rl(a)){if(n.indexOf(a)>=0)return;if(sl(a))return a;if(!("toJSON"in a)){n[o]=a;const c=zi(a)?[]:{};return al(a,(d,f)=>{const p=s(d,o+1);!Oi(p)&&(c[f]=p)}),n[o]=void 0,c}}return a};return s(t,0)},oC=dr("AsyncFunction"),lC=t=>t&&(rl(t)||Ss(t))&&Ss(t.then)&&Ss(t.catch),Yy=((t,n)=>t?setImmediate:n?((s,a)=>(Wa.addEventListener("message",({source:o,data:c})=>{o===Wa&&c===s&&a.length&&a.shift()()},!1),o=>{a.push(o),Wa.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Ss(Wa.postMessage)),cC=typeof queueMicrotask<"u"?queueMicrotask.bind(Wa):typeof process<"u"&&process.nextTick||Yy,dC=t=>t!=null&&Ss(t[fd]),ce={isArray:zi,isArrayBuffer:zy,isBuffer:sl,isFormData:F1,isArrayBufferView:P1,isString:k1,isNumber:Wy,isBoolean:E1,isObject:rl,isPlainObject:Mc,isEmptyObject:T1,isReadableStream:L1,isRequest:$1,isResponse:B1,isHeaders:U1,isUndefined:Oi,isDate:D1,isFile:R1,isBlob:A1,isRegExp:eC,isFunction:Ss,isStream:M1,isURLSearchParams:I1,isTypedArray:Q1,isFileList:O1,forEach:al,merge:dh,extend:W1,trim:z1,stripBOM:V1,inherits:H1,toFlatObject:q1,kindOf:hd,kindOfTest:dr,endsWith:Y1,toArray:K1,forEachEntry:G1,matchAll:X1,isHTMLForm:J1,hasOwnProperty:Ox,hasOwnProp:Ox,reduceDescriptors:qy,freezeMethods:tC,toObjectSet:nC,toCamelCase:Z1,noop:sC,toFiniteNumber:rC,findKey:Vy,global:Wa,isContextDefined:Hy,isSpecCompliantForm:aC,toJSONObject:iC,isAsyncFn:oC,isThenable:lC,setImmediate:Yy,asap:cC,isIterable:dC};function _t(t,n,s,a,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),s&&(this.config=s),a&&(this.request=a),o&&(this.response=o,this.status=o.status?o.status:null)}ce.inherits(_t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ce.toJSONObject(this.config),code:this.code,status:this.status}}});const Ky=_t.prototype,Qy={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Qy[t]={value:t}});Object.defineProperties(_t,Qy);Object.defineProperty(Ky,"isAxiosError",{value:!0});_t.from=(t,n,s,a,o,c)=>{const d=Object.create(Ky);ce.toFlatObject(t,d,function(m){return m!==Error.prototype},x=>x!=="isAxiosError");const f=t&&t.message?t.message:"Error",p=n==null&&t?t.code:n;return _t.call(d,f,p,s,a,o),t&&d.cause==null&&Object.defineProperty(d,"cause",{value:t,configurable:!0}),d.name=t&&t.name||"Error",c&&Object.assign(d,c),d};const uC=null;function uh(t){return ce.isPlainObject(t)||ce.isArray(t)}function Gy(t){return ce.endsWith(t,"[]")?t.slice(0,-2):t}function Mx(t,n,s){return t?t.concat(n).map(function(o,c){return o=Gy(o),!s&&c?"["+o+"]":o}).join(s?".":""):n}function fC(t){return ce.isArray(t)&&!t.some(uh)}const hC=ce.toFlatObject(ce,{},null,function(n){return/^is[A-Z]/.test(n)});function pd(t,n,s){if(!ce.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,s=ce.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,S){return!ce.isUndefined(S[b])});const a=s.metaTokens,o=s.visitor||m,c=s.dots,d=s.indexes,p=(s.Blob||typeof Blob<"u"&&Blob)&&ce.isSpecCompliantForm(n);if(!ce.isFunction(o))throw new TypeError("visitor must be a function");function x(_){if(_===null)return"";if(ce.isDate(_))return _.toISOString();if(ce.isBoolean(_))return _.toString();if(!p&&ce.isBlob(_))throw new _t("Blob is not supported. Use a Buffer instead.");return ce.isArrayBuffer(_)||ce.isTypedArray(_)?p&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function m(_,b,S){let E=_;if(_&&!S&&typeof _=="object"){if(ce.endsWith(b,"{}"))b=a?b:b.slice(0,-2),_=JSON.stringify(_);else if(ce.isArray(_)&&fC(_)||(ce.isFileList(_)||ce.endsWith(b,"[]"))&&(E=ce.toArray(_)))return b=Gy(b),E.forEach(function(N,A){!(ce.isUndefined(N)||N===null)&&n.append(d===!0?Mx([b],A,c):d===null?b:b+"[]",x(N))}),!1}return uh(_)?!0:(n.append(Mx(S,b,c),x(_)),!1)}const v=[],C=Object.assign(hC,{defaultVisitor:m,convertValue:x,isVisitable:uh});function w(_,b){if(!ce.isUndefined(_)){if(v.indexOf(_)!==-1)throw Error("Circular reference detected in "+b.join("."));v.push(_),ce.forEach(_,function(E,P){(!(ce.isUndefined(E)||E===null)&&o.call(n,E,ce.isString(P)?P.trim():P,b,C))===!0&&w(E,b?b.concat(P):[P])}),v.pop()}}if(!ce.isObject(t))throw new TypeError("data must be an object");return w(t),n}function Fx(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return n[a]})}function Zh(t,n){this._pairs=[],t&&pd(t,this,n)}const Xy=Zh.prototype;Xy.append=function(n,s){this._pairs.push([n,s])};Xy.toString=function(n){const s=n?function(a){return n.call(this,a,Fx)}:Fx;return this._pairs.map(function(o){return s(o[0])+"="+s(o[1])},"").join("&")};function mC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Jy(t,n,s){if(!n)return t;const a=s&&s.encode||mC;ce.isFunction(s)&&(s={serialize:s});const o=s&&s.serialize;let c;if(o?c=o(n,s):c=ce.isURLSearchParams(n)?n.toString():new Zh(n,s).toString(a),c){const d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t}class Ix{constructor(){this.handlers=[]}use(n,s,a){return this.handlers.push({fulfilled:n,rejected:s,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){ce.forEach(this.handlers,function(a){a!==null&&n(a)})}}const Zy={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pC=typeof URLSearchParams<"u"?URLSearchParams:Zh,gC=typeof FormData<"u"?FormData:null,xC=typeof Blob<"u"?Blob:null,vC={isBrowser:!0,classes:{URLSearchParams:pC,FormData:gC,Blob:xC},protocols:["http","https","file","blob","url","data"]},em=typeof window<"u"&&typeof document<"u",fh=typeof navigator=="object"&&navigator||void 0,yC=em&&(!fh||["ReactNative","NativeScript","NS"].indexOf(fh.product)<0),wC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",jC=em&&window.location.href||"http://localhost",bC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:em,hasStandardBrowserEnv:yC,hasStandardBrowserWebWorkerEnv:wC,navigator:fh,origin:jC},Symbol.toStringTag,{value:"Module"})),ts={...bC,...vC};function NC(t,n){return pd(t,new ts.classes.URLSearchParams,{visitor:function(s,a,o,c){return ts.isNode&&ce.isBuffer(s)?(this.append(a,s.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...n})}function _C(t){return ce.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function SC(t){const n={},s=Object.keys(t);let a;const o=s.length;let c;for(a=0;a<o;a++)c=s[a],n[c]=t[c];return n}function e0(t){function n(s,a,o,c){let d=s[c++];if(d==="__proto__")return!0;const f=Number.isFinite(+d),p=c>=s.length;return d=!d&&ce.isArray(o)?o.length:d,p?(ce.hasOwnProp(o,d)?o[d]=[o[d],a]:o[d]=a,!f):((!o[d]||!ce.isObject(o[d]))&&(o[d]=[]),n(s,a,o[d],c)&&ce.isArray(o[d])&&(o[d]=SC(o[d])),!f)}if(ce.isFormData(t)&&ce.isFunction(t.entries)){const s={};return ce.forEachEntry(t,(a,o)=>{n(_C(a),o,s,0)}),s}return null}function CC(t,n,s){if(ce.isString(t))try{return(n||JSON.parse)(t),ce.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(s||JSON.stringify)(t)}const il={transitional:Zy,adapter:["xhr","http","fetch"],transformRequest:[function(n,s){const a=s.getContentType()||"",o=a.indexOf("application/json")>-1,c=ce.isObject(n);if(c&&ce.isHTMLForm(n)&&(n=new FormData(n)),ce.isFormData(n))return o?JSON.stringify(e0(n)):n;if(ce.isArrayBuffer(n)||ce.isBuffer(n)||ce.isStream(n)||ce.isFile(n)||ce.isBlob(n)||ce.isReadableStream(n))return n;if(ce.isArrayBufferView(n))return n.buffer;if(ce.isURLSearchParams(n))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let f;if(c){if(a.indexOf("application/x-www-form-urlencoded")>-1)return NC(n,this.formSerializer).toString();if((f=ce.isFileList(n))||a.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return pd(f?{"files[]":n}:n,p&&new p,this.formSerializer)}}return c||o?(s.setContentType("application/json",!1),CC(n)):n}],transformResponse:[function(n){const s=this.transitional||il.transitional,a=s&&s.forcedJSONParsing,o=this.responseType==="json";if(ce.isResponse(n)||ce.isReadableStream(n))return n;if(n&&ce.isString(n)&&(a&&!this.responseType||o)){const d=!(s&&s.silentJSONParsing)&&o;try{return JSON.parse(n,this.parseReviver)}catch(f){if(d)throw f.name==="SyntaxError"?_t.from(f,_t.ERR_BAD_RESPONSE,this,null,this.response):f}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ts.classes.FormData,Blob:ts.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ce.forEach(["delete","get","head","post","put","patch"],t=>{il.headers[t]={}});const PC=ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),kC=t=>{const n={};let s,a,o;return t&&t.split(`
`).forEach(function(d){o=d.indexOf(":"),s=d.substring(0,o).trim().toLowerCase(),a=d.substring(o+1).trim(),!(!s||n[s]&&PC[s])&&(s==="set-cookie"?n[s]?n[s].push(a):n[s]=[a]:n[s]=n[s]?n[s]+", "+a:a)}),n},Lx=Symbol("internals");function Oo(t){return t&&String(t).trim().toLowerCase()}function Fc(t){return t===!1||t==null?t:ce.isArray(t)?t.map(Fc):String(t)}function EC(t){const n=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=s.exec(t);)n[a[1]]=a[2];return n}const TC=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Rf(t,n,s,a,o){if(ce.isFunction(a))return a.call(this,n,s);if(o&&(n=s),!!ce.isString(n)){if(ce.isString(a))return n.indexOf(a)!==-1;if(ce.isRegExp(a))return a.test(n)}}function DC(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,s,a)=>s.toUpperCase()+a)}function RC(t,n){const s=ce.toCamelCase(" "+n);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+s,{value:function(o,c,d){return this[a].call(this,n,o,c,d)},configurable:!0})})}let Cs=class{constructor(n){n&&this.set(n)}set(n,s,a){const o=this;function c(f,p,x){const m=Oo(p);if(!m)throw new Error("header name must be a non-empty string");const v=ce.findKey(o,m);(!v||o[v]===void 0||x===!0||x===void 0&&o[v]!==!1)&&(o[v||p]=Fc(f))}const d=(f,p)=>ce.forEach(f,(x,m)=>c(x,m,p));if(ce.isPlainObject(n)||n instanceof this.constructor)d(n,s);else if(ce.isString(n)&&(n=n.trim())&&!TC(n))d(kC(n),s);else if(ce.isObject(n)&&ce.isIterable(n)){let f={},p,x;for(const m of n){if(!ce.isArray(m))throw TypeError("Object iterator must return a key-value pair");f[x=m[0]]=(p=f[x])?ce.isArray(p)?[...p,m[1]]:[p,m[1]]:m[1]}d(f,s)}else n!=null&&c(s,n,a);return this}get(n,s){if(n=Oo(n),n){const a=ce.findKey(this,n);if(a){const o=this[a];if(!s)return o;if(s===!0)return EC(o);if(ce.isFunction(s))return s.call(this,o,a);if(ce.isRegExp(s))return s.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,s){if(n=Oo(n),n){const a=ce.findKey(this,n);return!!(a&&this[a]!==void 0&&(!s||Rf(this,this[a],a,s)))}return!1}delete(n,s){const a=this;let o=!1;function c(d){if(d=Oo(d),d){const f=ce.findKey(a,d);f&&(!s||Rf(a,a[f],f,s))&&(delete a[f],o=!0)}}return ce.isArray(n)?n.forEach(c):c(n),o}clear(n){const s=Object.keys(this);let a=s.length,o=!1;for(;a--;){const c=s[a];(!n||Rf(this,this[c],c,n,!0))&&(delete this[c],o=!0)}return o}normalize(n){const s=this,a={};return ce.forEach(this,(o,c)=>{const d=ce.findKey(a,c);if(d){s[d]=Fc(o),delete s[c];return}const f=n?DC(c):String(c).trim();f!==c&&delete s[c],s[f]=Fc(o),a[f]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const s=Object.create(null);return ce.forEach(this,(a,o)=>{a!=null&&a!==!1&&(s[o]=n&&ce.isArray(a)?a.join(", "):a)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,s])=>n+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...s){const a=new this(n);return s.forEach(o=>a.set(o)),a}static accessor(n){const a=(this[Lx]=this[Lx]={accessors:{}}).accessors,o=this.prototype;function c(d){const f=Oo(d);a[f]||(RC(o,d),a[f]=!0)}return ce.isArray(n)?n.forEach(c):c(n),this}};Cs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ce.reduceDescriptors(Cs.prototype,({value:t},n)=>{let s=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(a){this[s]=a}}});ce.freezeMethods(Cs);function Af(t,n){const s=this||il,a=n||s,o=Cs.from(a.headers);let c=a.data;return ce.forEach(t,function(f){c=f.call(s,c,o.normalize(),n?n.status:void 0)}),o.normalize(),c}function t0(t){return!!(t&&t.__CANCEL__)}function Wi(t,n,s){_t.call(this,t??"canceled",_t.ERR_CANCELED,n,s),this.name="CanceledError"}ce.inherits(Wi,_t,{__CANCEL__:!0});function n0(t,n,s){const a=s.config.validateStatus;!s.status||!a||a(s.status)?t(s):n(new _t("Request failed with status code "+s.status,[_t.ERR_BAD_REQUEST,_t.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function AC(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function OC(t,n){t=t||10;const s=new Array(t),a=new Array(t);let o=0,c=0,d;return n=n!==void 0?n:1e3,function(p){const x=Date.now(),m=a[c];d||(d=x),s[o]=p,a[o]=x;let v=c,C=0;for(;v!==o;)C+=s[v++],v=v%t;if(o=(o+1)%t,o===c&&(c=(c+1)%t),x-d<n)return;const w=m&&x-m;return w?Math.round(C*1e3/w):void 0}}function MC(t,n){let s=0,a=1e3/n,o,c;const d=(x,m=Date.now())=>{s=m,o=null,c&&(clearTimeout(c),c=null),t(...x)};return[(...x)=>{const m=Date.now(),v=m-s;v>=a?d(x,m):(o=x,c||(c=setTimeout(()=>{c=null,d(o)},a-v)))},()=>o&&d(o)]}const Qc=(t,n,s=3)=>{let a=0;const o=OC(50,250);return MC(c=>{const d=c.loaded,f=c.lengthComputable?c.total:void 0,p=d-a,x=o(p),m=d<=f;a=d;const v={loaded:d,total:f,progress:f?d/f:void 0,bytes:p,rate:x||void 0,estimated:x&&f&&m?(f-d)/x:void 0,event:c,lengthComputable:f!=null,[n?"download":"upload"]:!0};t(v)},s)},$x=(t,n)=>{const s=t!=null;return[a=>n[0]({lengthComputable:s,total:t,loaded:a}),n[1]]},Bx=t=>(...n)=>ce.asap(()=>t(...n)),FC=ts.hasStandardBrowserEnv?((t,n)=>s=>(s=new URL(s,ts.origin),t.protocol===s.protocol&&t.host===s.host&&(n||t.port===s.port)))(new URL(ts.origin),ts.navigator&&/(msie|trident)/i.test(ts.navigator.userAgent)):()=>!0,IC=ts.hasStandardBrowserEnv?{write(t,n,s,a,o,c,d){if(typeof document>"u")return;const f=[`${t}=${encodeURIComponent(n)}`];ce.isNumber(s)&&f.push(`expires=${new Date(s).toUTCString()}`),ce.isString(a)&&f.push(`path=${a}`),ce.isString(o)&&f.push(`domain=${o}`),c===!0&&f.push("secure"),ce.isString(d)&&f.push(`SameSite=${d}`),document.cookie=f.join("; ")},read(t){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function LC(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function $C(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function s0(t,n,s){let a=!LC(n);return t&&(a||s==!1)?$C(t,n):n}const Ux=t=>t instanceof Cs?{...t}:t;function Ga(t,n){n=n||{};const s={};function a(x,m,v,C){return ce.isPlainObject(x)&&ce.isPlainObject(m)?ce.merge.call({caseless:C},x,m):ce.isPlainObject(m)?ce.merge({},m):ce.isArray(m)?m.slice():m}function o(x,m,v,C){if(ce.isUndefined(m)){if(!ce.isUndefined(x))return a(void 0,x,v,C)}else return a(x,m,v,C)}function c(x,m){if(!ce.isUndefined(m))return a(void 0,m)}function d(x,m){if(ce.isUndefined(m)){if(!ce.isUndefined(x))return a(void 0,x)}else return a(void 0,m)}function f(x,m,v){if(v in n)return a(x,m);if(v in t)return a(void 0,x)}const p={url:c,method:c,data:c,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:f,headers:(x,m,v)=>o(Ux(x),Ux(m),v,!0)};return ce.forEach(Object.keys({...t,...n}),function(m){const v=p[m]||o,C=v(t[m],n[m],m);ce.isUndefined(C)&&v!==f||(s[m]=C)}),s}const r0=t=>{const n=Ga({},t);let{data:s,withXSRFToken:a,xsrfHeaderName:o,xsrfCookieName:c,headers:d,auth:f}=n;if(n.headers=d=Cs.from(d),n.url=Jy(s0(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),f&&d.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):""))),ce.isFormData(s)){if(ts.hasStandardBrowserEnv||ts.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(ce.isFunction(s.getHeaders)){const p=s.getHeaders(),x=["content-type","content-length"];Object.entries(p).forEach(([m,v])=>{x.includes(m.toLowerCase())&&d.set(m,v)})}}if(ts.hasStandardBrowserEnv&&(a&&ce.isFunction(a)&&(a=a(n)),a||a!==!1&&FC(n.url))){const p=o&&c&&IC.read(c);p&&d.set(o,p)}return n},BC=typeof XMLHttpRequest<"u",UC=BC&&function(t){return new Promise(function(s,a){const o=r0(t);let c=o.data;const d=Cs.from(o.headers).normalize();let{responseType:f,onUploadProgress:p,onDownloadProgress:x}=o,m,v,C,w,_;function b(){w&&w(),_&&_(),o.cancelToken&&o.cancelToken.unsubscribe(m),o.signal&&o.signal.removeEventListener("abort",m)}let S=new XMLHttpRequest;S.open(o.method.toUpperCase(),o.url,!0),S.timeout=o.timeout;function E(){if(!S)return;const N=Cs.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),D={data:!f||f==="text"||f==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:N,config:t,request:S};n0(function(R){s(R),b()},function(R){a(R),b()},D),S=null}"onloadend"in S?S.onloadend=E:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(E)},S.onabort=function(){S&&(a(new _t("Request aborted",_t.ECONNABORTED,t,S)),S=null)},S.onerror=function(A){const D=A&&A.message?A.message:"Network Error",U=new _t(D,_t.ERR_NETWORK,t,S);U.event=A||null,a(U),S=null},S.ontimeout=function(){let A=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const D=o.transitional||Zy;o.timeoutErrorMessage&&(A=o.timeoutErrorMessage),a(new _t(A,D.clarifyTimeoutError?_t.ETIMEDOUT:_t.ECONNABORTED,t,S)),S=null},c===void 0&&d.setContentType(null),"setRequestHeader"in S&&ce.forEach(d.toJSON(),function(A,D){S.setRequestHeader(D,A)}),ce.isUndefined(o.withCredentials)||(S.withCredentials=!!o.withCredentials),f&&f!=="json"&&(S.responseType=o.responseType),x&&([C,_]=Qc(x,!0),S.addEventListener("progress",C)),p&&S.upload&&([v,w]=Qc(p),S.upload.addEventListener("progress",v),S.upload.addEventListener("loadend",w)),(o.cancelToken||o.signal)&&(m=N=>{S&&(a(!N||N.type?new Wi(null,t,S):N),S.abort(),S=null)},o.cancelToken&&o.cancelToken.subscribe(m),o.signal&&(o.signal.aborted?m():o.signal.addEventListener("abort",m)));const P=AC(o.url);if(P&&ts.protocols.indexOf(P)===-1){a(new _t("Unsupported protocol "+P+":",_t.ERR_BAD_REQUEST,t));return}S.send(c||null)})},zC=(t,n)=>{const{length:s}=t=t?t.filter(Boolean):[];if(n||s){let a=new AbortController,o;const c=function(x){if(!o){o=!0,f();const m=x instanceof Error?x:this.reason;a.abort(m instanceof _t?m:new Wi(m instanceof Error?m.message:m))}};let d=n&&setTimeout(()=>{d=null,c(new _t(`timeout ${n} of ms exceeded`,_t.ETIMEDOUT))},n);const f=()=>{t&&(d&&clearTimeout(d),d=null,t.forEach(x=>{x.unsubscribe?x.unsubscribe(c):x.removeEventListener("abort",c)}),t=null)};t.forEach(x=>x.addEventListener("abort",c));const{signal:p}=a;return p.unsubscribe=()=>ce.asap(f),p}},WC=function*(t,n){let s=t.byteLength;if(s<n){yield t;return}let a=0,o;for(;a<s;)o=a+n,yield t.slice(a,o),a=o},VC=async function*(t,n){for await(const s of HC(t))yield*WC(s,n)},HC=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:s,value:a}=await n.read();if(s)break;yield a}}finally{await n.cancel()}},zx=(t,n,s,a)=>{const o=VC(t,n);let c=0,d,f=p=>{d||(d=!0,a&&a(p))};return new ReadableStream({async pull(p){try{const{done:x,value:m}=await o.next();if(x){f(),p.close();return}let v=m.byteLength;if(s){let C=c+=v;s(C)}p.enqueue(new Uint8Array(m))}catch(x){throw f(x),x}},cancel(p){return f(p),o.return()}},{highWaterMark:2})},Wx=64*1024,{isFunction:wc}=ce,qC=(({Request:t,Response:n})=>({Request:t,Response:n}))(ce.global),{ReadableStream:Vx,TextEncoder:Hx}=ce.global,qx=(t,...n)=>{try{return!!t(...n)}catch{return!1}},YC=t=>{t=ce.merge.call({skipUndefined:!0},qC,t);const{fetch:n,Request:s,Response:a}=t,o=n?wc(n):typeof fetch=="function",c=wc(s),d=wc(a);if(!o)return!1;const f=o&&wc(Vx),p=o&&(typeof Hx=="function"?(_=>b=>_.encode(b))(new Hx):async _=>new Uint8Array(await new s(_).arrayBuffer())),x=c&&f&&qx(()=>{let _=!1;const b=new s(ts.origin,{body:new Vx,method:"POST",get duplex(){return _=!0,"half"}}).headers.has("Content-Type");return _&&!b}),m=d&&f&&qx(()=>ce.isReadableStream(new a("").body)),v={stream:m&&(_=>_.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(_=>{!v[_]&&(v[_]=(b,S)=>{let E=b&&b[_];if(E)return E.call(b);throw new _t(`Response type '${_}' is not supported`,_t.ERR_NOT_SUPPORT,S)})});const C=async _=>{if(_==null)return 0;if(ce.isBlob(_))return _.size;if(ce.isSpecCompliantForm(_))return(await new s(ts.origin,{method:"POST",body:_}).arrayBuffer()).byteLength;if(ce.isArrayBufferView(_)||ce.isArrayBuffer(_))return _.byteLength;if(ce.isURLSearchParams(_)&&(_=_+""),ce.isString(_))return(await p(_)).byteLength},w=async(_,b)=>{const S=ce.toFiniteNumber(_.getContentLength());return S??C(b)};return async _=>{let{url:b,method:S,data:E,signal:P,cancelToken:N,timeout:A,onDownloadProgress:D,onUploadProgress:U,responseType:R,headers:L,withCredentials:pe="same-origin",fetchOptions:ee}=r0(_),ve=n||fetch;R=R?(R+"").toLowerCase():"text";let ge=zC([P,N&&N.toAbortSignal()],A),V=null;const le=ge&&ge.unsubscribe&&(()=>{ge.unsubscribe()});let we;try{if(U&&x&&S!=="get"&&S!=="head"&&(we=await w(L,E))!==0){let T=new s(b,{method:"POST",body:E,duplex:"half"}),O;if(ce.isFormData(E)&&(O=T.headers.get("content-type"))&&L.setContentType(O),T.body){const[he,Y]=$x(we,Qc(Bx(U)));E=zx(T.body,Wx,he,Y)}}ce.isString(pe)||(pe=pe?"include":"omit");const fe=c&&"credentials"in s.prototype,ne={...ee,signal:ge,method:S.toUpperCase(),headers:L.normalize().toJSON(),body:E,duplex:"half",credentials:fe?pe:void 0};V=c&&new s(b,ne);let M=await(c?ve(V,ee):ve(b,ne));const K=m&&(R==="stream"||R==="response");if(m&&(D||K&&le)){const T={};["status","statusText","headers"].forEach(xe=>{T[xe]=M[xe]});const O=ce.toFiniteNumber(M.headers.get("content-length")),[he,Y]=D&&$x(O,Qc(Bx(D),!0))||[];M=new a(zx(M.body,Wx,he,()=>{Y&&Y(),le&&le()}),T)}R=R||"text";let se=await v[ce.findKey(v,R)||"text"](M,_);return!K&&le&&le(),await new Promise((T,O)=>{n0(T,O,{data:se,headers:Cs.from(M.headers),status:M.status,statusText:M.statusText,config:_,request:V})})}catch(fe){throw le&&le(),fe&&fe.name==="TypeError"&&/Load failed|fetch/i.test(fe.message)?Object.assign(new _t("Network Error",_t.ERR_NETWORK,_,V),{cause:fe.cause||fe}):_t.from(fe,fe&&fe.code,_,V)}}},KC=new Map,a0=t=>{let n=t&&t.env||{};const{fetch:s,Request:a,Response:o}=n,c=[a,o,s];let d=c.length,f=d,p,x,m=KC;for(;f--;)p=c[f],x=m.get(p),x===void 0&&m.set(p,x=f?new Map:YC(n)),m=x;return x};a0();const tm={http:uC,xhr:UC,fetch:{get:a0}};ce.forEach(tm,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const Yx=t=>`- ${t}`,QC=t=>ce.isFunction(t)||t===null||t===!1;function GC(t,n){t=ce.isArray(t)?t:[t];const{length:s}=t;let a,o;const c={};for(let d=0;d<s;d++){a=t[d];let f;if(o=a,!QC(a)&&(o=tm[(f=String(a)).toLowerCase()],o===void 0))throw new _t(`Unknown adapter '${f}'`);if(o&&(ce.isFunction(o)||(o=o.get(n))))break;c[f||"#"+d]=o}if(!o){const d=Object.entries(c).map(([p,x])=>`adapter ${p} `+(x===!1?"is not supported by the environment":"is not available in the build"));let f=s?d.length>1?`since :
`+d.map(Yx).join(`
`):" "+Yx(d[0]):"as no adapter specified";throw new _t("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return o}const i0={getAdapter:GC,adapters:tm};function Of(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Wi(null,t)}function Kx(t){return Of(t),t.headers=Cs.from(t.headers),t.data=Af.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),i0.getAdapter(t.adapter||il.adapter,t)(t).then(function(a){return Of(t),a.data=Af.call(t,t.transformResponse,a),a.headers=Cs.from(a.headers),a},function(a){return t0(a)||(Of(t),a&&a.response&&(a.response.data=Af.call(t,t.transformResponse,a.response),a.response.headers=Cs.from(a.response.headers))),Promise.reject(a)})}const o0="1.13.2",gd={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{gd[t]=function(a){return typeof a===t||"a"+(n<1?"n ":" ")+t}});const Qx={};gd.transitional=function(n,s,a){function o(c,d){return"[Axios v"+o0+"] Transitional option '"+c+"'"+d+(a?". "+a:"")}return(c,d,f)=>{if(n===!1)throw new _t(o(d," has been removed"+(s?" in "+s:"")),_t.ERR_DEPRECATED);return s&&!Qx[d]&&(Qx[d]=!0,console.warn(o(d," has been deprecated since v"+s+" and will be removed in the near future"))),n?n(c,d,f):!0}};gd.spelling=function(n){return(s,a)=>(console.warn(`${a} is likely a misspelling of ${n}`),!0)};function XC(t,n,s){if(typeof t!="object")throw new _t("options must be an object",_t.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let o=a.length;for(;o-- >0;){const c=a[o],d=n[c];if(d){const f=t[c],p=f===void 0||d(f,c,t);if(p!==!0)throw new _t("option "+c+" must be "+p,_t.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new _t("Unknown option "+c,_t.ERR_BAD_OPTION)}}const Ic={assertOptions:XC,validators:gd},xr=Ic.validators;let Ya=class{constructor(n){this.defaults=n||{},this.interceptors={request:new Ix,response:new Ix}}async request(n,s){try{return await this._request(n,s)}catch(a){if(a instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const c=o.stack?o.stack.replace(/^.+\n/,""):"";try{a.stack?c&&!String(a.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+c):a.stack=c}catch{}}throw a}}_request(n,s){typeof n=="string"?(s=s||{},s.url=n):s=n||{},s=Ga(this.defaults,s);const{transitional:a,paramsSerializer:o,headers:c}=s;a!==void 0&&Ic.assertOptions(a,{silentJSONParsing:xr.transitional(xr.boolean),forcedJSONParsing:xr.transitional(xr.boolean),clarifyTimeoutError:xr.transitional(xr.boolean)},!1),o!=null&&(ce.isFunction(o)?s.paramsSerializer={serialize:o}:Ic.assertOptions(o,{encode:xr.function,serialize:xr.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Ic.assertOptions(s,{baseUrl:xr.spelling("baseURL"),withXsrfToken:xr.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let d=c&&ce.merge(c.common,c[s.method]);c&&ce.forEach(["delete","get","head","post","put","patch","common"],_=>{delete c[_]}),s.headers=Cs.concat(d,c);const f=[];let p=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(s)===!1||(p=p&&b.synchronous,f.unshift(b.fulfilled,b.rejected))});const x=[];this.interceptors.response.forEach(function(b){x.push(b.fulfilled,b.rejected)});let m,v=0,C;if(!p){const _=[Kx.bind(this),void 0];for(_.unshift(...f),_.push(...x),C=_.length,m=Promise.resolve(s);v<C;)m=m.then(_[v++],_[v++]);return m}C=f.length;let w=s;for(;v<C;){const _=f[v++],b=f[v++];try{w=_(w)}catch(S){b.call(this,S);break}}try{m=Kx.call(this,w)}catch(_){return Promise.reject(_)}for(v=0,C=x.length;v<C;)m=m.then(x[v++],x[v++]);return m}getUri(n){n=Ga(this.defaults,n);const s=s0(n.baseURL,n.url,n.allowAbsoluteUrls);return Jy(s,n.params,n.paramsSerializer)}};ce.forEach(["delete","get","head","options"],function(n){Ya.prototype[n]=function(s,a){return this.request(Ga(a||{},{method:n,url:s,data:(a||{}).data}))}});ce.forEach(["post","put","patch"],function(n){function s(a){return function(c,d,f){return this.request(Ga(f||{},{method:n,headers:a?{"Content-Type":"multipart/form-data"}:{},url:c,data:d}))}}Ya.prototype[n]=s(),Ya.prototype[n+"Form"]=s(!0)});let JC=class l0{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(c){s=c});const a=this;this.promise.then(o=>{if(!a._listeners)return;let c=a._listeners.length;for(;c-- >0;)a._listeners[c](o);a._listeners=null}),this.promise.then=o=>{let c;const d=new Promise(f=>{a.subscribe(f),c=f}).then(o);return d.cancel=function(){a.unsubscribe(c)},d},n(function(c,d,f){a.reason||(a.reason=new Wi(c,d,f),s(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const s=this._listeners.indexOf(n);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const n=new AbortController,s=a=>{n.abort(a)};return this.subscribe(s),n.signal.unsubscribe=()=>this.unsubscribe(s),n.signal}static source(){let n;return{token:new l0(function(o){n=o}),cancel:n}}};function ZC(t){return function(s){return t.apply(null,s)}}function e2(t){return ce.isObject(t)&&t.isAxiosError===!0}const hh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(hh).forEach(([t,n])=>{hh[n]=t});function c0(t){const n=new Ya(t),s=By(Ya.prototype.request,n);return ce.extend(s,Ya.prototype,n,{allOwnKeys:!0}),ce.extend(s,n,null,{allOwnKeys:!0}),s.create=function(o){return c0(Ga(t,o))},s}const kn=c0(il);kn.Axios=Ya;kn.CanceledError=Wi;kn.CancelToken=JC;kn.isCancel=t0;kn.VERSION=o0;kn.toFormData=pd;kn.AxiosError=_t;kn.Cancel=kn.CanceledError;kn.all=function(n){return Promise.all(n)};kn.spread=ZC;kn.isAxiosError=e2;kn.mergeConfig=Ga;kn.AxiosHeaders=Cs;kn.formToJSON=t=>e0(ce.isHTMLForm(t)?new FormData(t):t);kn.getAdapter=i0.getAdapter;kn.HttpStatusCode=hh;kn.default=kn;const{Axios:$M,AxiosError:BM,CanceledError:UM,isCancel:zM,CancelToken:WM,VERSION:VM,all:HM,Cancel:qM,isAxiosError:YM,spread:KM,toFormData:QM,AxiosHeaders:GM,HttpStatusCode:XM,formToJSON:JM,getAdapter:ZM,mergeConfig:eF}=kn,_r=Object.create(null);_r.open="0";_r.close="1";_r.ping="2";_r.pong="3";_r.message="4";_r.upgrade="5";_r.noop="6";const Lc=Object.create(null);Object.keys(_r).forEach(t=>{Lc[_r[t]]=t});const mh={type:"error",data:"parser error"},d0=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",u0=typeof ArrayBuffer=="function",f0=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,nm=({type:t,data:n},s,a)=>d0&&n instanceof Blob?s?a(n):Gx(n,a):u0&&(n instanceof ArrayBuffer||f0(n))?s?a(n):Gx(new Blob([n]),a):a(_r[t]+(n||"")),Gx=(t,n)=>{const s=new FileReader;return s.onload=function(){const a=s.result.split(",")[1];n("b"+(a||""))},s.readAsDataURL(t)};function Xx(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Mf;function t2(t,n){if(d0&&t.data instanceof Blob)return t.data.arrayBuffer().then(Xx).then(n);if(u0&&(t.data instanceof ArrayBuffer||f0(t.data)))return n(Xx(t.data));nm(t,!1,s=>{Mf||(Mf=new TextEncoder),n(Mf.encode(s))})}const Jx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Jx.length;t++)Lo[Jx.charCodeAt(t)]=t;const n2=t=>{let n=t.length*.75,s=t.length,a,o=0,c,d,f,p;t[t.length-1]==="="&&(n--,t[t.length-2]==="="&&n--);const x=new ArrayBuffer(n),m=new Uint8Array(x);for(a=0;a<s;a+=4)c=Lo[t.charCodeAt(a)],d=Lo[t.charCodeAt(a+1)],f=Lo[t.charCodeAt(a+2)],p=Lo[t.charCodeAt(a+3)],m[o++]=c<<2|d>>4,m[o++]=(d&15)<<4|f>>2,m[o++]=(f&3)<<6|p&63;return x},s2=typeof ArrayBuffer=="function",sm=(t,n)=>{if(typeof t!="string")return{type:"message",data:h0(t,n)};const s=t.charAt(0);return s==="b"?{type:"message",data:r2(t.substring(1),n)}:Lc[s]?t.length>1?{type:Lc[s],data:t.substring(1)}:{type:Lc[s]}:mh},r2=(t,n)=>{if(s2){const s=n2(t);return h0(s,n)}else return{base64:!0,data:t}},h0=(t,n)=>{switch(n){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},m0="",a2=(t,n)=>{const s=t.length,a=new Array(s);let o=0;t.forEach((c,d)=>{nm(c,!1,f=>{a[d]=f,++o===s&&n(a.join(m0))})})},i2=(t,n)=>{const s=t.split(m0),a=[];for(let o=0;o<s.length;o++){const c=sm(s[o],n);if(a.push(c),c.type==="error")break}return a};function o2(){return new TransformStream({transform(t,n){t2(t,s=>{const a=s.length;let o;if(a<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,a);else if(a<65536){o=new Uint8Array(3);const c=new DataView(o.buffer);c.setUint8(0,126),c.setUint16(1,a)}else{o=new Uint8Array(9);const c=new DataView(o.buffer);c.setUint8(0,127),c.setBigUint64(1,BigInt(a))}t.data&&typeof t.data!="string"&&(o[0]|=128),n.enqueue(o),n.enqueue(s)})}})}let Ff;function jc(t){return t.reduce((n,s)=>n+s.length,0)}function bc(t,n){if(t[0].length===n)return t.shift();const s=new Uint8Array(n);let a=0;for(let o=0;o<n;o++)s[o]=t[0][a++],a===t[0].length&&(t.shift(),a=0);return t.length&&a<t[0].length&&(t[0]=t[0].slice(a)),s}function l2(t,n){Ff||(Ff=new TextDecoder);const s=[];let a=0,o=-1,c=!1;return new TransformStream({transform(d,f){for(s.push(d);;){if(a===0){if(jc(s)<1)break;const p=bc(s,1);c=(p[0]&128)===128,o=p[0]&127,o<126?a=3:o===126?a=1:a=2}else if(a===1){if(jc(s)<2)break;const p=bc(s,2);o=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),a=3}else if(a===2){if(jc(s)<8)break;const p=bc(s,8),x=new DataView(p.buffer,p.byteOffset,p.length),m=x.getUint32(0);if(m>Math.pow(2,21)-1){f.enqueue(mh);break}o=m*Math.pow(2,32)+x.getUint32(4),a=3}else{if(jc(s)<o)break;const p=bc(s,o);f.enqueue(sm(c?p:Ff.decode(p),n)),a=0}if(o===0||o>t){f.enqueue(mh);break}}}})}const p0=4;function Dn(t){if(t)return c2(t)}function c2(t){for(var n in Dn.prototype)t[n]=Dn.prototype[n];return t}Dn.prototype.on=Dn.prototype.addEventListener=function(t,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(n),this};Dn.prototype.once=function(t,n){function s(){this.off(t,s),n.apply(this,arguments)}return s.fn=n,this.on(t,s),this};Dn.prototype.off=Dn.prototype.removeListener=Dn.prototype.removeAllListeners=Dn.prototype.removeEventListener=function(t,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var a,o=0;o<s.length;o++)if(a=s[o],a===n||a.fn===n){s.splice(o,1);break}return s.length===0&&delete this._callbacks["$"+t],this};Dn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),s=this._callbacks["$"+t],a=1;a<arguments.length;a++)n[a-1]=arguments[a];if(s){s=s.slice(0);for(var a=0,o=s.length;a<o;++a)s[a].apply(this,n)}return this};Dn.prototype.emitReserved=Dn.prototype.emit;Dn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Dn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const xd=typeof Promise=="function"&&typeof Promise.resolve=="function"?n=>Promise.resolve().then(n):(n,s)=>s(n,0),Vs=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),d2="arraybuffer";function g0(t,...n){return n.reduce((s,a)=>(t.hasOwnProperty(a)&&(s[a]=t[a]),s),{})}const u2=Vs.setTimeout,f2=Vs.clearTimeout;function vd(t,n){n.useNativeTimers?(t.setTimeoutFn=u2.bind(Vs),t.clearTimeoutFn=f2.bind(Vs)):(t.setTimeoutFn=Vs.setTimeout.bind(Vs),t.clearTimeoutFn=Vs.clearTimeout.bind(Vs))}const h2=1.33;function m2(t){return typeof t=="string"?p2(t):Math.ceil((t.byteLength||t.size)*h2)}function p2(t){let n=0,s=0;for(let a=0,o=t.length;a<o;a++)n=t.charCodeAt(a),n<128?s+=1:n<2048?s+=2:n<55296||n>=57344?s+=3:(a++,s+=4);return s}function x0(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function g2(t){let n="";for(let s in t)t.hasOwnProperty(s)&&(n.length&&(n+="&"),n+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return n}function x2(t){let n={},s=t.split("&");for(let a=0,o=s.length;a<o;a++){let c=s[a].split("=");n[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return n}class v2 extends Error{constructor(n,s,a){super(n),this.description=s,this.context=a,this.type="TransportError"}}class rm extends Dn{constructor(n){super(),this.writable=!1,vd(this,n),this.opts=n,this.query=n.query,this.socket=n.socket,this.supportsBinary=!n.forceBase64}onError(n,s,a){return super.emitReserved("error",new v2(n,s,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(n){this.readyState==="open"&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const s=sm(n,this.socket.binaryType);this.onPacket(s)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}createUri(n,s={}){return n+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const n=this.opts.hostname;return n.indexOf(":")===-1?n:"["+n+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(n){const s=g2(n);return s.length?"?"+s:""}}class y2 extends rm{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(n){this.readyState="pausing";const s=()=>{this.readyState="paused",n()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||s()})),this.writable||(a++,this.once("drain",function(){--a||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){const s=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};i2(n,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const n=()=>{this.write([{type:"close"}])};this.readyState==="open"?n():this.once("open",n)}write(n){this.writable=!1,a2(n,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const n=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=x0()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(n,s)}}let v0=!1;try{v0=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const w2=v0;function j2(){}class b2 extends y2{constructor(n){if(super(n),typeof location<"u"){const s=location.protocol==="https:";let a=location.port;a||(a=s?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||a!==n.port}}doWrite(n,s){const a=this.request({method:"POST",data:n});a.on("success",s),a.on("error",(o,c)=>{this.onError("xhr post error",o,c)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(s,a)=>{this.onError("xhr poll error",s,a)}),this.pollXhr=n}}class br extends Dn{constructor(n,s,a){super(),this.createRequest=n,vd(this,a),this._opts=a,this._method=a.method||"GET",this._uri=s,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var n;const s=g0(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(s);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&a.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(n=this._opts.cookieJar)===null||n===void 0||n.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var o;a.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=br.requestsCount++,br.requests[this._index]=this)}_onError(n){this.emitReserved("error",n,this._xhr),this._cleanup(!0)}_cleanup(n){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=j2,n)try{this._xhr.abort()}catch{}typeof document<"u"&&delete br.requests[this._index],this._xhr=null}}_onLoad(){const n=this._xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}br.requestsCount=0;br.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Zx);else if(typeof addEventListener=="function"){const t="onpagehide"in Vs?"pagehide":"unload";addEventListener(t,Zx,!1)}}function Zx(){for(let t in br.requests)br.requests.hasOwnProperty(t)&&br.requests[t].abort()}const N2=(function(){const t=y0({xdomain:!1});return t&&t.responseType!==null})();class _2 extends b2{constructor(n){super(n);const s=n&&n.forceBase64;this.supportsBinary=N2&&!s}request(n={}){return Object.assign(n,{xd:this.xd},this.opts),new br(y0,this.uri(),n)}}function y0(t){const n=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||w2))return new XMLHttpRequest}catch{}if(!n)try{return new Vs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const w0=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class S2 extends rm{get name(){return"websocket"}doOpen(){const n=this.uri(),s=this.opts.protocols,a=w0?{}:g0(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(n,s,a)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let s=0;s<n.length;s++){const a=n[s],o=s===n.length-1;nm(a,this.supportsBinary,c=>{try{this.doWrite(a,c)}catch{}o&&xd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const n=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=x0()),this.supportsBinary||(s.b64=1),this.createUri(n,s)}}const If=Vs.WebSocket||Vs.MozWebSocket;class C2 extends S2{createSocket(n,s,a){return w0?new If(n,s,a):s?new If(n,s):new If(n)}doWrite(n,s){this.ws.send(s)}}class P2 extends rm{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(n){return this.emitReserved("error",n)}this._transport.closed.then(()=>{this.onClose()}).catch(n=>{this.onError("webtransport error",n)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(n=>{const s=l2(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=n.readable.pipeThrough(s).getReader(),o=o2();o.readable.pipeTo(n.writable),this._writer=o.writable.getWriter();const c=()=>{a.read().then(({done:f,value:p})=>{f||(this.onPacket(p),c())}).catch(f=>{})};c();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(n){this.writable=!1;for(let s=0;s<n.length;s++){const a=n[s],o=s===n.length-1;this._writer.write(a).then(()=>{o&&xd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var n;(n=this._transport)===null||n===void 0||n.close()}}const k2={websocket:C2,webtransport:P2,polling:_2},E2=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,T2=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ph(t){if(t.length>8e3)throw"URI too long";const n=t,s=t.indexOf("["),a=t.indexOf("]");s!=-1&&a!=-1&&(t=t.substring(0,s)+t.substring(s,a).replace(/:/g,";")+t.substring(a,t.length));let o=E2.exec(t||""),c={},d=14;for(;d--;)c[T2[d]]=o[d]||"";return s!=-1&&a!=-1&&(c.source=n,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=D2(c,c.path),c.queryKey=R2(c,c.query),c}function D2(t,n){const s=/\/{2,9}/g,a=n.replace(s,"/").split("/");return(n.slice(0,1)=="/"||n.length===0)&&a.splice(0,1),n.slice(-1)=="/"&&a.splice(a.length-1,1),a}function R2(t,n){const s={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,o,c){o&&(s[o]=c)}),s}const gh=typeof addEventListener=="function"&&typeof removeEventListener=="function",$c=[];gh&&addEventListener("offline",()=>{$c.forEach(t=>t())},!1);class wa extends Dn{constructor(n,s){if(super(),this.binaryType=d2,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,n&&typeof n=="object"&&(s=n,n=null),n){const a=ph(n);s.hostname=a.host,s.secure=a.protocol==="https"||a.protocol==="wss",s.port=a.port,a.query&&(s.query=a.query)}else s.host&&(s.hostname=ph(s.host).host);vd(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(a=>{const o=a.prototype.name;this.transports.push(o),this._transportsByName[o]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=x2(this.opts.query)),gh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},$c.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(n){const s=Object.assign({},this.opts.query);s.EIO=p0,s.transport=n,this.id&&(s.sid=this.id);const a=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new this._transportsByName[n](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const n=this.opts.rememberUpgrade&&wa.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(n);s.open(),this.setTransport(s)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",wa.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=n.data,this._onError(s);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this._pingInterval=n.pingInterval,this._pingTimeout=n.pingTimeout,this._maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const n=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+n,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},n),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this._getWritablePackets();this.transport.send(n),this._prevBufferLen=n.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let a=0;a<this.writeBuffer.length;a++){const o=this.writeBuffer[a].data;if(o&&(s+=m2(o)),a>0&&s>this._maxPayload)return this.writeBuffer.slice(0,a);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const n=Date.now()>this._pingTimeoutTime;return n&&(this._pingTimeoutTime=0,xd(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),n}write(n,s,a){return this._sendPacket("message",n,s,a),this}send(n,s,a){return this._sendPacket("message",n,s,a),this}_sendPacket(n,s,a,o){if(typeof s=="function"&&(o=s,s=void 0),typeof a=="function"&&(o=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const c={type:n,data:s,options:a};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),o&&this.once("flush",o),this.flush()}close(){const n=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),n()},a=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():n()}):this.upgrading?a():n()),this}_onError(n){if(wa.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",n),this._onClose("transport error",n)}_onClose(n,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),gh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=$c.indexOf(this._offlineEventListener);a!==-1&&$c.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",n,s),this.writeBuffer=[],this._prevBufferLen=0}}}wa.protocol=p0;class A2 extends wa{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let n=0;n<this._upgrades.length;n++)this._probe(this._upgrades[n])}_probe(n){let s=this.createTransport(n),a=!1;wa.priorWebsocketSuccess=!1;const o=()=>{a||(s.send([{type:"ping",data:"probe"}]),s.once("packet",v=>{if(!a)if(v.type==="pong"&&v.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;wa.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(m(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const C=new Error("probe error");C.transport=s.name,this.emitReserved("upgradeError",C)}}))};function c(){a||(a=!0,m(),s.close(),s=null)}const d=v=>{const C=new Error("probe error: "+v);C.transport=s.name,c(),this.emitReserved("upgradeError",C)};function f(){d("transport closed")}function p(){d("socket closed")}function x(v){s&&v.name!==s.name&&c()}const m=()=>{s.removeListener("open",o),s.removeListener("error",d),s.removeListener("close",f),this.off("close",p),this.off("upgrading",x)};s.once("open",o),s.once("error",d),s.once("close",f),this.once("close",p),this.once("upgrading",x),this._upgrades.indexOf("webtransport")!==-1&&n!=="webtransport"?this.setTimeoutFn(()=>{a||s.open()},200):s.open()}onHandshake(n){this._upgrades=this._filterUpgrades(n.upgrades),super.onHandshake(n)}_filterUpgrades(n){const s=[];for(let a=0;a<n.length;a++)~this.transports.indexOf(n[a])&&s.push(n[a]);return s}}let O2=class extends A2{constructor(n,s={}){const a=typeof n=="object"?n:s;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(o=>k2[o]).filter(o=>!!o)),super(n,a)}};function M2(t,n="",s){let a=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),a=ph(t)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const c=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+c+":"+a.port+n,a.href=a.protocol+"://"+c+(s&&s.port===a.port?"":":"+a.port),a}const F2=typeof ArrayBuffer=="function",I2=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,j0=Object.prototype.toString,L2=typeof Blob=="function"||typeof Blob<"u"&&j0.call(Blob)==="[object BlobConstructor]",$2=typeof File=="function"||typeof File<"u"&&j0.call(File)==="[object FileConstructor]";function am(t){return F2&&(t instanceof ArrayBuffer||I2(t))||L2&&t instanceof Blob||$2&&t instanceof File}function Bc(t,n){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,a=t.length;s<a;s++)if(Bc(t[s]))return!0;return!1}if(am(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Bc(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&Bc(t[s]))return!0;return!1}function B2(t){const n=[],s=t.data,a=t;return a.data=xh(s,n),a.attachments=n.length,{packet:a,buffers:n}}function xh(t,n){if(!t)return t;if(am(t)){const s={_placeholder:!0,num:n.length};return n.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let a=0;a<t.length;a++)s[a]=xh(t[a],n);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=xh(t[a],n));return s}return t}function U2(t,n){return t.data=vh(t.data,n),delete t.attachments,t}function vh(t,n){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<n.length)return n[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=vh(t[s],n);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=vh(t[s],n));return t}const z2=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],W2=5;var zt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(zt||(zt={}));class V2{constructor(n){this.replacer=n}encode(n){return(n.type===zt.EVENT||n.type===zt.ACK)&&Bc(n)?this.encodeAsBinary({type:n.type===zt.EVENT?zt.BINARY_EVENT:zt.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id}):[this.encodeAsString(n)]}encodeAsString(n){let s=""+n.type;return(n.type===zt.BINARY_EVENT||n.type===zt.BINARY_ACK)&&(s+=n.attachments+"-"),n.nsp&&n.nsp!=="/"&&(s+=n.nsp+","),n.id!=null&&(s+=n.id),n.data!=null&&(s+=JSON.stringify(n.data,this.replacer)),s}encodeAsBinary(n){const s=B2(n),a=this.encodeAsString(s.packet),o=s.buffers;return o.unshift(a),o}}function ev(t){return Object.prototype.toString.call(t)==="[object Object]"}class im extends Dn{constructor(n){super(),this.reviver=n}add(n){let s;if(typeof n=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(n);const a=s.type===zt.BINARY_EVENT;a||s.type===zt.BINARY_ACK?(s.type=a?zt.EVENT:zt.ACK,this.reconstructor=new H2(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(am(n)||n.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(n),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+n)}decodeString(n){let s=0;const a={type:Number(n.charAt(0))};if(zt[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===zt.BINARY_EVENT||a.type===zt.BINARY_ACK){const c=s+1;for(;n.charAt(++s)!=="-"&&s!=n.length;);const d=n.substring(c,s);if(d!=Number(d)||n.charAt(s)!=="-")throw new Error("Illegal attachments");a.attachments=Number(d)}if(n.charAt(s+1)==="/"){const c=s+1;for(;++s&&!(n.charAt(s)===","||s===n.length););a.nsp=n.substring(c,s)}else a.nsp="/";const o=n.charAt(s+1);if(o!==""&&Number(o)==o){const c=s+1;for(;++s;){const d=n.charAt(s);if(d==null||Number(d)!=d){--s;break}if(s===n.length)break}a.id=Number(n.substring(c,s+1))}if(n.charAt(++s)){const c=this.tryParse(n.substr(s));if(im.isPayloadValid(a.type,c))a.data=c;else throw new Error("invalid payload")}return a}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,s){switch(n){case zt.CONNECT:return ev(s);case zt.DISCONNECT:return s===void 0;case zt.CONNECT_ERROR:return typeof s=="string"||ev(s);case zt.EVENT:case zt.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&z2.indexOf(s[0])===-1);case zt.ACK:case zt.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class H2{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const s=U2(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const q2=Object.freeze(Object.defineProperty({__proto__:null,Decoder:im,Encoder:V2,get PacketType(){return zt},protocol:W2},Symbol.toStringTag,{value:"Module"}));function rr(t,n,s){return t.on(n,s),function(){t.off(n,s)}}const Y2=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class b0 extends Dn{constructor(n,s,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=s,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[rr(n,"open",this.onopen.bind(this)),rr(n,"packet",this.onpacket.bind(this)),rr(n,"error",this.onerror.bind(this)),rr(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...s){var a,o,c;if(Y2.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(s.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const d={type:zt.EVENT,data:s};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const m=this.ids++,v=s.pop();this._registerAckCallback(m,v),d.id=m}const f=(o=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||o===void 0?void 0:o.writable,p=this.connected&&!(!((c=this.io.engine)===null||c===void 0)&&c._hasPingExpired());return this.flags.volatile&&!f||(p?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(n,s){var a;const o=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(o===void 0){this.acks[n]=s;return}const c=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let f=0;f<this.sendBuffer.length;f++)this.sendBuffer[f].id===n&&this.sendBuffer.splice(f,1);s.call(this,new Error("operation has timed out"))},o),d=(...f)=>{this.io.clearTimeoutFn(c),s.apply(this,f)};d.withError=!0,this.acks[n]=d}emitWithAck(n,...s){return new Promise((a,o)=>{const c=(d,f)=>d?o(d):a(f);c.withError=!0,s.push(c),this.emit(n,...s)})}_addToQueue(n){let s;typeof n[n.length-1]=="function"&&(s=n.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((o,...c)=>a!==this._queue[0]?void 0:(o!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(o)):(this._queue.shift(),s&&s(null,...c)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!n||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){typeof this.auth=="function"?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:zt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(n=>{if(!this.sendBuffer.some(a=>String(a.id)===n)){const a=this.acks[n];delete this.acks[n],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case zt.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case zt.EVENT:case zt.BINARY_EVENT:this.onevent(n);break;case zt.ACK:case zt.BINARY_ACK:this.onack(n);break;case zt.DISCONNECT:this.ondisconnect();break;case zt.CONNECT_ERROR:this.destroy();const a=new Error(n.data.message);a.data=n.data.data,this.emitReserved("connect_error",a);break}}onevent(n){const s=n.data||[];n.id!=null&&s.push(this.ack(n.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const a of s)a.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&typeof n[n.length-1]=="string"&&(this._lastOffset=n[n.length-1])}ack(n){const s=this;let a=!1;return function(...o){a||(a=!0,s.packet({type:zt.ACK,id:n,data:o}))}}onack(n){const s=this.acks[n.id];typeof s=="function"&&(delete this.acks[n.id],s.withError&&n.data.unshift(null),s.apply(this,n.data))}onconnect(n,s){this.id=n,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:zt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const s=this._anyListeners;for(let a=0;a<s.length;a++)if(n===s[a])return s.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const s=this._anyOutgoingListeners;for(let a=0;a<s.length;a++)if(n===s[a])return s.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const a of s)a.apply(this,n.data)}}}function Vi(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Vi.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),s=Math.floor(n*this.jitter*t);t=(Math.floor(n*10)&1)==0?t-s:t+s}return Math.min(t,this.max)|0};Vi.prototype.reset=function(){this.attempts=0};Vi.prototype.setMin=function(t){this.ms=t};Vi.prototype.setMax=function(t){this.max=t};Vi.prototype.setJitter=function(t){this.jitter=t};class yh extends Dn{constructor(n,s){var a;super(),this.nsps={},this.subs=[],n&&typeof n=="object"&&(s=n,n=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,vd(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((a=s.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new Vi({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=n;const o=s.parser||q2;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,n||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(n){return n===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var s;return n===void 0?this._reconnectionDelay:(this._reconnectionDelay=n,(s=this.backoff)===null||s===void 0||s.setMin(n),this)}randomizationFactor(n){var s;return n===void 0?this._randomizationFactor:(this._randomizationFactor=n,(s=this.backoff)===null||s===void 0||s.setJitter(n),this)}reconnectionDelayMax(n){var s;return n===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,(s=this.backoff)===null||s===void 0||s.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new O2(this.uri,this.opts);const s=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const o=rr(s,"open",function(){a.onopen(),n&&n()}),c=f=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",f),n?n(f):this.maybeReconnectOnOpen()},d=rr(s,"error",c);if(this._timeout!==!1){const f=this._timeout,p=this.setTimeoutFn(()=>{o(),c(new Error("timeout")),s.close()},f);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(o),this.subs.push(d),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(rr(n,"ping",this.onping.bind(this)),rr(n,"data",this.ondata.bind(this)),rr(n,"error",this.onerror.bind(this)),rr(n,"close",this.onclose.bind(this)),rr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(s){this.onclose("parse error",s)}}ondecoded(n){xd(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,s){let a=this.nsps[n];return a?this._autoConnect&&!a.active&&a.connect():(a=new b0(this,n,s),this.nsps[n]=a),a}_destroy(n){const s=Object.keys(this.nsps);for(const a of s)if(this.nsps[a].active)return;this._close()}_packet(n){const s=this.encoder.encode(n);for(let a=0;a<s.length;a++)this.engine.write(s[a],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(n,s){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(o=>{o?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",o)):n.onreconnect()}))},s);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const Mo={};function Lf(t,n){typeof t=="object"&&(n=t,t=void 0),n=n||{};const s=M2(t,n.path||"/socket.io"),a=s.source,o=s.id,c=s.path,d=Mo[o]&&c in Mo[o].nsps,f=n.forceNew||n["force new connection"]||n.multiplex===!1||d;let p;return f?p=new yh(a,n):(Mo[o]||(Mo[o]=new yh(a,n)),p=Mo[o]),s.query&&!n.query&&(n.query=s.queryKey),p.socket(s.path,n)}Object.assign(Lf,{Manager:yh,Socket:b0,io:Lf,connect:Lf});const K2=()=>"https://hasetcompany.or.tz/api",q=kn.create({baseURL:K2(),headers:{"Content-Type":"application/json"},timeout:3e4});q.interceptors.request.use(t=>{const n=localStorage.getItem("auth_token");return n&&t.headers&&(t.headers.Authorization=`Bearer ${n}`),t});q.interceptors.response.use(t=>t,t=>(t.response?.status===401&&(localStorage.removeItem("auth_token"),window.location.href="/auth"),Promise.reject(t)));function ht(...t){return S1(ky(t))}async function Q2(){const t=Date.now(),n=Math.floor(Math.random()*1e5);return`INV-${t}-${n}`}const $o=[];let Uc=!1;async function G2(){if(!(Uc||$o.length===0)){for(Uc=!0;$o.length>0;){const t=$o.shift();if(t)try{await q.post("/activity",{action:t.action,details:t.details?JSON.stringify(t.details):null}),await new Promise(n=>setTimeout(n,100))}catch(n){n.response?.status===429?(console.warn("Activity logging rate limited, will retry"),$o.unshift(t),await new Promise(s=>setTimeout(s,2e3))):console.warn("Failed to log activity",t.action,n)}}Uc=!1}}async function Wn(t,n){$o.push({action:t,details:n}),Uc||G2().catch(s=>console.warn("Activity queue error:",s))}const X2=ES,N0=h.forwardRef(({className:t,...n},s)=>e.jsx(jy,{ref:s,className:ht("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...n}));N0.displayName=jy.displayName;const J2=cd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),_0=h.forwardRef(({className:t,variant:n,...s},a)=>e.jsx(by,{ref:a,className:ht(J2({variant:n}),t),...s}));_0.displayName=by.displayName;const Z2=h.forwardRef(({className:t,...n},s)=>e.jsx(Sy,{ref:s,className:ht("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...n}));Z2.displayName=Sy.displayName;const S0=h.forwardRef(({className:t,...n},s)=>e.jsx(Cy,{ref:s,className:ht("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...n,children:e.jsx(Gh,{className:"h-4 w-4"})}));S0.displayName=Cy.displayName;const C0=h.forwardRef(({className:t,...n},s)=>e.jsx(Ny,{ref:s,className:ht("text-sm font-semibold",t),...n}));C0.displayName=Ny.displayName;const P0=h.forwardRef(({className:t,...n},s)=>e.jsx(_y,{ref:s,className:ht("text-sm opacity-90",t),...n}));P0.displayName=_y.displayName;function eP(){const{toasts:t}=L_();return e.jsxs(X2,{children:[t.map(function({id:n,title:s,description:a,action:o,...c}){return e.jsxs(_0,{...c,children:[e.jsxs("div",{className:"grid gap-1",children:[s&&e.jsx(C0,{children:s}),a&&e.jsx(P0,{children:a})]}),o,e.jsx(S0,{})]},n)}),e.jsx(N0,{})]})}var tv=["light","dark"],tP="(prefers-color-scheme: dark)",nP=h.createContext(void 0),sP={setTheme:t=>{},themes:[]},rP=()=>{var t;return(t=h.useContext(nP))!=null?t:sP};h.memo(({forcedTheme:t,storageKey:n,attribute:s,enableSystem:a,enableColorScheme:o,defaultTheme:c,value:d,attrs:f,nonce:p})=>{let x=c==="system",m=s==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${f.map(_=>`'${_}'`).join(",")})`};`:`var d=document.documentElement,n='${s}',s='setAttribute';`,v=o?tv.includes(c)&&c?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${c}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",C=(_,b=!1,S=!0)=>{let E=d?d[_]:_,P=b?_+"|| ''":`'${E}'`,N="";return o&&S&&!b&&tv.includes(_)&&(N+=`d.style.colorScheme = '${_}';`),s==="class"?b||E?N+=`c.add(${P})`:N+="null":E&&(N+=`d[s](n,${P})`),N},w=t?`!function(){${m}${C(t)}}()`:a?`!function(){try{${m}var e=localStorage.getItem('${n}');if('system'===e||(!e&&${x})){var t='${tP}',m=window.matchMedia(t);if(m.media!==t||m.matches){${C("dark")}}else{${C("light")}}}else if(e){${d?`var x=${JSON.stringify(d)};`:""}${C(d?"x[e]":"e",!0)}}${x?"":"else{"+C(c,!1,!1)+"}"}${v}}catch(e){}}()`:`!function(){try{${m}var e=localStorage.getItem('${n}');if(e){${d?`var x=${JSON.stringify(d)};`:""}${C(d?"x[e]":"e",!0)}}else{${C(c,!1,!1)};}${v}}catch(t){}}();`;return h.createElement("script",{nonce:p,dangerouslySetInnerHTML:{__html:w}})});var aP=t=>{switch(t){case"success":return lP;case"info":return dP;case"warning":return cP;case"error":return uP;default:return null}},iP=Array(12).fill(0),oP=({visible:t,className:n})=>Le.createElement("div",{className:["sonner-loading-wrapper",n].filter(Boolean).join(" "),"data-visible":t},Le.createElement("div",{className:"sonner-spinner"},iP.map((s,a)=>Le.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),lP=Le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Le.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),cP=Le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Le.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),dP=Le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),uP=Le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),fP=Le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Le.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Le.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),hP=()=>{let[t,n]=Le.useState(document.hidden);return Le.useEffect(()=>{let s=()=>{n(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),t},wh=1,mP=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;let{message:s,...a}=t,o=typeof t?.id=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:wh++,c=this.toasts.find(f=>f.id===o),d=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),c?this.toasts=this.toasts.map(f=>f.id===o?(this.publish({...f,...t,id:o,title:s}),{...f,...t,id:o,dismissible:d,title:s}):f):this.addToast({title:s,...a,dismissible:d,id:o}),o},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:t,dismiss:!0})),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let a=t instanceof Promise?t:t(),o=s!==void 0,c,d=a.then(async p=>{if(c=["resolve",p],Le.isValidElement(p))o=!1,this.create({id:s,type:"default",message:p});else if(gP(p)&&!p.ok){o=!1;let x=typeof n.error=="function"?await n.error(`HTTP error! status: ${p.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${p.status}`):n.description;this.create({id:s,type:"error",message:x,description:m})}else if(n.success!==void 0){o=!1;let x=typeof n.success=="function"?await n.success(p):n.success,m=typeof n.description=="function"?await n.description(p):n.description;this.create({id:s,type:"success",message:x,description:m})}}).catch(async p=>{if(c=["reject",p],n.error!==void 0){o=!1;let x=typeof n.error=="function"?await n.error(p):n.error,m=typeof n.description=="function"?await n.description(p):n.description;this.create({id:s,type:"error",message:x,description:m})}}).finally(()=>{var p;o&&(this.dismiss(s),s=void 0),(p=n.finally)==null||p.call(n)}),f=()=>new Promise((p,x)=>d.then(()=>c[0]==="reject"?x(c[1]):p(c[1])).catch(x));return typeof s!="string"&&typeof s!="number"?{unwrap:f}:Object.assign(s,{unwrap:f})},this.custom=(t,n)=>{let s=n?.id||wh++;return this.create({jsx:t(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ns=new mP,pP=(t,n)=>{let s=n?.id||wh++;return Ns.addToast({title:t,...n,id:s}),s},gP=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",xP=pP,vP=()=>Ns.toasts,yP=()=>Ns.getActiveToasts(),I=Object.assign(xP,{success:Ns.success,info:Ns.info,warning:Ns.warning,error:Ns.error,custom:Ns.custom,message:Ns.message,promise:Ns.promise,dismiss:Ns.dismiss,loading:Ns.loading},{getHistory:vP,getToasts:yP});function wP(t,{insertAt:n}={}){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",n==="top"&&s.firstChild?s.insertBefore(a,s.firstChild):s.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}wP(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Nc(t){return t.label!==void 0}var jP=3,bP="32px",NP="16px",nv=4e3,_P=356,SP=14,CP=20,PP=200;function er(...t){return t.filter(Boolean).join(" ")}function kP(t){let[n,s]=t.split("-"),a=[];return n&&a.push(n),s&&a.push(s),a}var EP=t=>{var n,s,a,o,c,d,f,p,x,m,v;let{invert:C,toast:w,unstyled:_,interacting:b,setHeights:S,visibleToasts:E,heights:P,index:N,toasts:A,expanded:D,removeToast:U,defaultRichColors:R,closeButton:L,style:pe,cancelButtonStyle:ee,actionButtonStyle:ve,className:ge="",descriptionClassName:V="",duration:le,position:we,gap:fe,loadingIcon:ne,expandByDefault:M,classNames:K,icons:se,closeButtonAriaLabel:T="Close toast",pauseWhenPageIsHidden:O}=t,[he,Y]=Le.useState(null),[xe,Be]=Le.useState(null),[re,$e]=Le.useState(!1),[qe,Ge]=Le.useState(!1),[be,mt]=Le.useState(!1),[We,Et]=Le.useState(!1),[ue,ze]=Le.useState(!1),[Ee,Ke]=Le.useState(0),[J,ye]=Le.useState(0),ae=Le.useRef(w.duration||le||nv),Ze=Le.useRef(null),tt=Le.useRef(null),pt=N===0,yt=N+1<=E,Ue=w.type,Ie=w.dismissible!==!1,xt=w.className||"",Ve=w.descriptionClassName||"",ct=Le.useMemo(()=>P.findIndex(ot=>ot.toastId===w.id)||0,[P,w.id]),Ft=Le.useMemo(()=>{var ot;return(ot=w.closeButton)!=null?ot:L},[w.closeButton,L]),Me=Le.useMemo(()=>w.duration||le||nv,[w.duration,le]),Tt=Le.useRef(0),It=Le.useRef(0),ss=Le.useRef(0),rs=Le.useRef(null),[Ms,hs]=we.split("-"),En=Le.useMemo(()=>P.reduce((ot,wt,Vt)=>Vt>=ct?ot:ot+wt.height,0),[P,ct]),Ps=hP(),Dt=w.invert||C,an=Ue==="loading";It.current=Le.useMemo(()=>ct*fe+En,[ct,En]),Le.useEffect(()=>{ae.current=Me},[Me]),Le.useEffect(()=>{$e(!0)},[]),Le.useEffect(()=>{let ot=tt.current;if(ot){let wt=ot.getBoundingClientRect().height;return ye(wt),S(Vt=>[{toastId:w.id,height:wt,position:w.position},...Vt]),()=>S(Vt=>Vt.filter(on=>on.toastId!==w.id))}},[S,w.id]),Le.useLayoutEffect(()=>{if(!re)return;let ot=tt.current,wt=ot.style.height;ot.style.height="auto";let Vt=ot.getBoundingClientRect().height;ot.style.height=wt,ye(Vt),S(on=>on.find(dn=>dn.toastId===w.id)?on.map(dn=>dn.toastId===w.id?{...dn,height:Vt}:dn):[{toastId:w.id,height:Vt,position:w.position},...on])},[re,w.title,w.description,S,w.id]);let Qt=Le.useCallback(()=>{Ge(!0),Ke(It.current),S(ot=>ot.filter(wt=>wt.toastId!==w.id)),setTimeout(()=>{U(w)},PP)},[w,U,S,It]);Le.useEffect(()=>{if(w.promise&&Ue==="loading"||w.duration===1/0||w.type==="loading")return;let ot;return D||b||O&&Ps?(()=>{if(ss.current<Tt.current){let wt=new Date().getTime()-Tt.current;ae.current=ae.current-wt}ss.current=new Date().getTime()})():ae.current!==1/0&&(Tt.current=new Date().getTime(),ot=setTimeout(()=>{var wt;(wt=w.onAutoClose)==null||wt.call(w,w),Qt()},ae.current)),()=>clearTimeout(ot)},[D,b,w,Ue,O,Ps,Qt]),Le.useEffect(()=>{w.delete&&Qt()},[Qt,w.delete]);function ms(){var ot,wt,Vt;return se!=null&&se.loading?Le.createElement("div",{className:er(K?.loader,(ot=w?.classNames)==null?void 0:ot.loader,"sonner-loader"),"data-visible":Ue==="loading"},se.loading):ne?Le.createElement("div",{className:er(K?.loader,(wt=w?.classNames)==null?void 0:wt.loader,"sonner-loader"),"data-visible":Ue==="loading"},ne):Le.createElement(oP,{className:er(K?.loader,(Vt=w?.classNames)==null?void 0:Vt.loader),visible:Ue==="loading"})}return Le.createElement("li",{tabIndex:0,ref:tt,className:er(ge,xt,K?.toast,(n=w?.classNames)==null?void 0:n.toast,K?.default,K?.[Ue],(s=w?.classNames)==null?void 0:s[Ue]),"data-sonner-toast":"","data-rich-colors":(a=w.richColors)!=null?a:R,"data-styled":!(w.jsx||w.unstyled||_),"data-mounted":re,"data-promise":!!w.promise,"data-swiped":ue,"data-removed":qe,"data-visible":yt,"data-y-position":Ms,"data-x-position":hs,"data-index":N,"data-front":pt,"data-swiping":be,"data-dismissible":Ie,"data-type":Ue,"data-invert":Dt,"data-swipe-out":We,"data-swipe-direction":xe,"data-expanded":!!(D||M&&re),style:{"--index":N,"--toasts-before":N,"--z-index":A.length-N,"--offset":`${qe?Ee:It.current}px`,"--initial-height":M?"auto":`${J}px`,...pe,...w.style},onDragEnd:()=>{mt(!1),Y(null),rs.current=null},onPointerDown:ot=>{an||!Ie||(Ze.current=new Date,Ke(It.current),ot.target.setPointerCapture(ot.pointerId),ot.target.tagName!=="BUTTON"&&(mt(!0),rs.current={x:ot.clientX,y:ot.clientY}))},onPointerUp:()=>{var ot,wt,Vt,on;if(We||!Ie)return;rs.current=null;let dn=Number(((ot=tt.current)==null?void 0:ot.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),bn=Number(((wt=tt.current)==null?void 0:wt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),vn=new Date().getTime()-((Vt=Ze.current)==null?void 0:Vt.getTime()),nn=he==="x"?dn:bn,In=Math.abs(nn)/vn;if(Math.abs(nn)>=CP||In>.11){Ke(It.current),(on=w.onDismiss)==null||on.call(w,w),Be(he==="x"?dn>0?"right":"left":bn>0?"down":"up"),Qt(),Et(!0),ze(!1);return}mt(!1),Y(null)},onPointerMove:ot=>{var wt,Vt,on,dn;if(!rs.current||!Ie||((wt=window.getSelection())==null?void 0:wt.toString().length)>0)return;let bn=ot.clientY-rs.current.y,vn=ot.clientX-rs.current.x,nn=(Vt=t.swipeDirections)!=null?Vt:kP(we);!he&&(Math.abs(vn)>1||Math.abs(bn)>1)&&Y(Math.abs(vn)>Math.abs(bn)?"x":"y");let In={x:0,y:0};he==="y"?(nn.includes("top")||nn.includes("bottom"))&&(nn.includes("top")&&bn<0||nn.includes("bottom")&&bn>0)&&(In.y=bn):he==="x"&&(nn.includes("left")||nn.includes("right"))&&(nn.includes("left")&&vn<0||nn.includes("right")&&vn>0)&&(In.x=vn),(Math.abs(In.x)>0||Math.abs(In.y)>0)&&ze(!0),(on=tt.current)==null||on.style.setProperty("--swipe-amount-x",`${In.x}px`),(dn=tt.current)==null||dn.style.setProperty("--swipe-amount-y",`${In.y}px`)}},Ft&&!w.jsx?Le.createElement("button",{"aria-label":T,"data-disabled":an,"data-close-button":!0,onClick:an||!Ie?()=>{}:()=>{var ot;Qt(),(ot=w.onDismiss)==null||ot.call(w,w)},className:er(K?.closeButton,(o=w?.classNames)==null?void 0:o.closeButton)},(c=se?.close)!=null?c:fP):null,w.jsx||h.isValidElement(w.title)?w.jsx?w.jsx:typeof w.title=="function"?w.title():w.title:Le.createElement(Le.Fragment,null,Ue||w.icon||w.promise?Le.createElement("div",{"data-icon":"",className:er(K?.icon,(d=w?.classNames)==null?void 0:d.icon)},w.promise||w.type==="loading"&&!w.icon?w.icon||ms():null,w.type!=="loading"?w.icon||se?.[Ue]||aP(Ue):null):null,Le.createElement("div",{"data-content":"",className:er(K?.content,(f=w?.classNames)==null?void 0:f.content)},Le.createElement("div",{"data-title":"",className:er(K?.title,(p=w?.classNames)==null?void 0:p.title)},typeof w.title=="function"?w.title():w.title),w.description?Le.createElement("div",{"data-description":"",className:er(V,Ve,K?.description,(x=w?.classNames)==null?void 0:x.description)},typeof w.description=="function"?w.description():w.description):null),h.isValidElement(w.cancel)?w.cancel:w.cancel&&Nc(w.cancel)?Le.createElement("button",{"data-button":!0,"data-cancel":!0,style:w.cancelButtonStyle||ee,onClick:ot=>{var wt,Vt;Nc(w.cancel)&&Ie&&((Vt=(wt=w.cancel).onClick)==null||Vt.call(wt,ot),Qt())},className:er(K?.cancelButton,(m=w?.classNames)==null?void 0:m.cancelButton)},w.cancel.label):null,h.isValidElement(w.action)?w.action:w.action&&Nc(w.action)?Le.createElement("button",{"data-button":!0,"data-action":!0,style:w.actionButtonStyle||ve,onClick:ot=>{var wt,Vt;Nc(w.action)&&((Vt=(wt=w.action).onClick)==null||Vt.call(wt,ot),!ot.defaultPrevented&&Qt())},className:er(K?.actionButton,(v=w?.classNames)==null?void 0:v.actionButton)},w.action.label):null))};function sv(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function TP(t,n){let s={};return[t,n].forEach((a,o)=>{let c=o===1,d=c?"--mobile-offset":"--offset",f=c?NP:bP;function p(x){["top","right","bottom","left"].forEach(m=>{s[`${d}-${m}`]=typeof x=="number"?`${x}px`:x})}typeof a=="number"||typeof a=="string"?p(a):typeof a=="object"?["top","right","bottom","left"].forEach(x=>{a[x]===void 0?s[`${d}-${x}`]=f:s[`${d}-${x}`]=typeof a[x]=="number"?`${a[x]}px`:a[x]}):p(f)}),s}var DP=h.forwardRef(function(t,n){let{invert:s,position:a="bottom-right",hotkey:o=["altKey","KeyT"],expand:c,closeButton:d,className:f,offset:p,mobileOffset:x,theme:m="light",richColors:v,duration:C,style:w,visibleToasts:_=jP,toastOptions:b,dir:S=sv(),gap:E=SP,loadingIcon:P,icons:N,containerAriaLabel:A="Notifications",pauseWhenPageIsHidden:D}=t,[U,R]=Le.useState([]),L=Le.useMemo(()=>Array.from(new Set([a].concat(U.filter(O=>O.position).map(O=>O.position)))),[U,a]),[pe,ee]=Le.useState([]),[ve,ge]=Le.useState(!1),[V,le]=Le.useState(!1),[we,fe]=Le.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ne=Le.useRef(null),M=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),K=Le.useRef(null),se=Le.useRef(!1),T=Le.useCallback(O=>{R(he=>{var Y;return(Y=he.find(xe=>xe.id===O.id))!=null&&Y.delete||Ns.dismiss(O.id),he.filter(({id:xe})=>xe!==O.id)})},[]);return Le.useEffect(()=>Ns.subscribe(O=>{if(O.dismiss){R(he=>he.map(Y=>Y.id===O.id?{...Y,delete:!0}:Y));return}setTimeout(()=>{ey.flushSync(()=>{R(he=>{let Y=he.findIndex(xe=>xe.id===O.id);return Y!==-1?[...he.slice(0,Y),{...he[Y],...O},...he.slice(Y+1)]:[O,...he]})})})}),[]),Le.useEffect(()=>{if(m!=="system"){fe(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?fe("dark"):fe("light")),typeof window>"u")return;let O=window.matchMedia("(prefers-color-scheme: dark)");try{O.addEventListener("change",({matches:he})=>{fe(he?"dark":"light")})}catch{O.addListener(({matches:Y})=>{try{fe(Y?"dark":"light")}catch(xe){console.error(xe)}})}},[m]),Le.useEffect(()=>{U.length<=1&&ge(!1)},[U]),Le.useEffect(()=>{let O=he=>{var Y,xe;o.every(Be=>he[Be]||he.code===Be)&&(ge(!0),(Y=ne.current)==null||Y.focus()),he.code==="Escape"&&(document.activeElement===ne.current||(xe=ne.current)!=null&&xe.contains(document.activeElement))&&ge(!1)};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[o]),Le.useEffect(()=>{if(ne.current)return()=>{K.current&&(K.current.focus({preventScroll:!0}),K.current=null,se.current=!1)}},[ne.current]),Le.createElement("section",{ref:n,"aria-label":`${A} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},L.map((O,he)=>{var Y;let[xe,Be]=O.split("-");return U.length?Le.createElement("ol",{key:O,dir:S==="auto"?sv():S,tabIndex:-1,ref:ne,className:f,"data-sonner-toaster":!0,"data-theme":we,"data-y-position":xe,"data-lifted":ve&&U.length>1&&!c,"data-x-position":Be,style:{"--front-toast-height":`${((Y=pe[0])==null?void 0:Y.height)||0}px`,"--width":`${_P}px`,"--gap":`${E}px`,...w,...TP(p,x)},onBlur:re=>{se.current&&!re.currentTarget.contains(re.relatedTarget)&&(se.current=!1,K.current&&(K.current.focus({preventScroll:!0}),K.current=null))},onFocus:re=>{re.target instanceof HTMLElement&&re.target.dataset.dismissible==="false"||se.current||(se.current=!0,K.current=re.relatedTarget)},onMouseEnter:()=>ge(!0),onMouseMove:()=>ge(!0),onMouseLeave:()=>{V||ge(!1)},onDragEnd:()=>ge(!1),onPointerDown:re=>{re.target instanceof HTMLElement&&re.target.dataset.dismissible==="false"||le(!0)},onPointerUp:()=>le(!1)},U.filter(re=>!re.position&&he===0||re.position===O).map((re,$e)=>{var qe,Ge;return Le.createElement(EP,{key:re.id,icons:N,index:$e,toast:re,defaultRichColors:v,duration:(qe=b?.duration)!=null?qe:C,className:b?.className,descriptionClassName:b?.descriptionClassName,invert:s,visibleToasts:_,closeButton:(Ge=b?.closeButton)!=null?Ge:d,interacting:V,position:O,style:b?.style,unstyled:b?.unstyled,classNames:b?.classNames,cancelButtonStyle:b?.cancelButtonStyle,actionButtonStyle:b?.actionButtonStyle,removeToast:T,toasts:U.filter(be=>be.position==re.position),heights:pe.filter(be=>be.position==re.position),setHeights:ee,expandByDefault:c,gap:E,loadingIcon:P,expanded:ve,pauseWhenPageIsHidden:D,swipeDirections:t.swipeDirections})})):null}))});const RP=({...t})=>{const{theme:n="system"}=rP();return e.jsx(DP,{theme:n,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var AP=Bh[" useId ".trim().toString()]||(()=>{}),OP=0;function Ur(t){const[n,s]=h.useState(AP());return Yn(()=>{s(a=>a??String(OP++))},[t]),n?`radix-${n}`:""}const MP=["top","right","bottom","left"],Sa=Math.min,Rs=Math.max,Gc=Math.round,_c=Math.floor,Nr=t=>({x:t,y:t}),FP={left:"right",right:"left",bottom:"top",top:"bottom"},IP={start:"end",end:"start"};function jh(t,n,s){return Rs(t,Sa(n,s))}function zr(t,n){return typeof t=="function"?t(n):t}function Wr(t){return t.split("-")[0]}function Hi(t){return t.split("-")[1]}function om(t){return t==="x"?"y":"x"}function lm(t){return t==="y"?"height":"width"}const LP=new Set(["top","bottom"]);function yr(t){return LP.has(Wr(t))?"y":"x"}function cm(t){return om(yr(t))}function $P(t,n,s){s===void 0&&(s=!1);const a=Hi(t),o=cm(t),c=lm(o);let d=o==="x"?a===(s?"end":"start")?"right":"left":a==="start"?"bottom":"top";return n.reference[c]>n.floating[c]&&(d=Xc(d)),[d,Xc(d)]}function BP(t){const n=Xc(t);return[bh(t),n,bh(n)]}function bh(t){return t.replace(/start|end/g,n=>IP[n])}const rv=["left","right"],av=["right","left"],UP=["top","bottom"],zP=["bottom","top"];function WP(t,n,s){switch(t){case"top":case"bottom":return s?n?av:rv:n?rv:av;case"left":case"right":return n?UP:zP;default:return[]}}function VP(t,n,s,a){const o=Hi(t);let c=WP(Wr(t),s==="start",a);return o&&(c=c.map(d=>d+"-"+o),n&&(c=c.concat(c.map(bh)))),c}function Xc(t){return t.replace(/left|right|bottom|top/g,n=>FP[n])}function HP(t){return{top:0,right:0,bottom:0,left:0,...t}}function k0(t){return typeof t!="number"?HP(t):{top:t,right:t,bottom:t,left:t}}function Jc(t){const{x:n,y:s,width:a,height:o}=t;return{width:a,height:o,top:s,left:n,right:n+a,bottom:s+o,x:n,y:s}}function iv(t,n,s){let{reference:a,floating:o}=t;const c=yr(n),d=cm(n),f=lm(d),p=Wr(n),x=c==="y",m=a.x+a.width/2-o.width/2,v=a.y+a.height/2-o.height/2,C=a[f]/2-o[f]/2;let w;switch(p){case"top":w={x:m,y:a.y-o.height};break;case"bottom":w={x:m,y:a.y+a.height};break;case"right":w={x:a.x+a.width,y:v};break;case"left":w={x:a.x-o.width,y:v};break;default:w={x:a.x,y:a.y}}switch(Hi(n)){case"start":w[d]-=C*(s&&x?-1:1);break;case"end":w[d]+=C*(s&&x?-1:1);break}return w}const qP=async(t,n,s)=>{const{placement:a="bottom",strategy:o="absolute",middleware:c=[],platform:d}=s,f=c.filter(Boolean),p=await(d.isRTL==null?void 0:d.isRTL(n));let x=await d.getElementRects({reference:t,floating:n,strategy:o}),{x:m,y:v}=iv(x,a,p),C=a,w={},_=0;for(let b=0;b<f.length;b++){const{name:S,fn:E}=f[b],{x:P,y:N,data:A,reset:D}=await E({x:m,y:v,initialPlacement:a,placement:C,strategy:o,middlewareData:w,rects:x,platform:d,elements:{reference:t,floating:n}});m=P??m,v=N??v,w={...w,[S]:{...w[S],...A}},D&&_<=50&&(_++,typeof D=="object"&&(D.placement&&(C=D.placement),D.rects&&(x=D.rects===!0?await d.getElementRects({reference:t,floating:n,strategy:o}):D.rects),{x:m,y:v}=iv(x,C,p)),b=-1)}return{x:m,y:v,placement:C,strategy:o,middlewareData:w}};async function Vo(t,n){var s;n===void 0&&(n={});const{x:a,y:o,platform:c,rects:d,elements:f,strategy:p}=t,{boundary:x="clippingAncestors",rootBoundary:m="viewport",elementContext:v="floating",altBoundary:C=!1,padding:w=0}=zr(n,t),_=k0(w),S=f[C?v==="floating"?"reference":"floating":v],E=Jc(await c.getClippingRect({element:(s=await(c.isElement==null?void 0:c.isElement(S)))==null||s?S:S.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:x,rootBoundary:m,strategy:p})),P=v==="floating"?{x:a,y:o,width:d.floating.width,height:d.floating.height}:d.reference,N=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),A=await(c.isElement==null?void 0:c.isElement(N))?await(c.getScale==null?void 0:c.getScale(N))||{x:1,y:1}:{x:1,y:1},D=Jc(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:P,offsetParent:N,strategy:p}):P);return{top:(E.top-D.top+_.top)/A.y,bottom:(D.bottom-E.bottom+_.bottom)/A.y,left:(E.left-D.left+_.left)/A.x,right:(D.right-E.right+_.right)/A.x}}const YP=t=>({name:"arrow",options:t,async fn(n){const{x:s,y:a,placement:o,rects:c,platform:d,elements:f,middlewareData:p}=n,{element:x,padding:m=0}=zr(t,n)||{};if(x==null)return{};const v=k0(m),C={x:s,y:a},w=cm(o),_=lm(w),b=await d.getDimensions(x),S=w==="y",E=S?"top":"left",P=S?"bottom":"right",N=S?"clientHeight":"clientWidth",A=c.reference[_]+c.reference[w]-C[w]-c.floating[_],D=C[w]-c.reference[w],U=await(d.getOffsetParent==null?void 0:d.getOffsetParent(x));let R=U?U[N]:0;(!R||!await(d.isElement==null?void 0:d.isElement(U)))&&(R=f.floating[N]||c.floating[_]);const L=A/2-D/2,pe=R/2-b[_]/2-1,ee=Sa(v[E],pe),ve=Sa(v[P],pe),ge=ee,V=R-b[_]-ve,le=R/2-b[_]/2+L,we=jh(ge,le,V),fe=!p.arrow&&Hi(o)!=null&&le!==we&&c.reference[_]/2-(le<ge?ee:ve)-b[_]/2<0,ne=fe?le<ge?le-ge:le-V:0;return{[w]:C[w]+ne,data:{[w]:we,centerOffset:le-we-ne,...fe&&{alignmentOffset:ne}},reset:fe}}}),KP=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(n){var s,a;const{placement:o,middlewareData:c,rects:d,initialPlacement:f,platform:p,elements:x}=n,{mainAxis:m=!0,crossAxis:v=!0,fallbackPlacements:C,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:b=!0,...S}=zr(t,n);if((s=c.arrow)!=null&&s.alignmentOffset)return{};const E=Wr(o),P=yr(f),N=Wr(f)===f,A=await(p.isRTL==null?void 0:p.isRTL(x.floating)),D=C||(N||!b?[Xc(f)]:BP(f)),U=_!=="none";!C&&U&&D.push(...VP(f,b,_,A));const R=[f,...D],L=await Vo(n,S),pe=[];let ee=((a=c.flip)==null?void 0:a.overflows)||[];if(m&&pe.push(L[E]),v){const le=$P(o,d,A);pe.push(L[le[0]],L[le[1]])}if(ee=[...ee,{placement:o,overflows:pe}],!pe.every(le=>le<=0)){var ve,ge;const le=(((ve=c.flip)==null?void 0:ve.index)||0)+1,we=R[le];if(we&&(!(v==="alignment"?P!==yr(we):!1)||ee.every(M=>M.overflows[0]>0&&yr(M.placement)===P)))return{data:{index:le,overflows:ee},reset:{placement:we}};let fe=(ge=ee.filter(ne=>ne.overflows[0]<=0).sort((ne,M)=>ne.overflows[1]-M.overflows[1])[0])==null?void 0:ge.placement;if(!fe)switch(w){case"bestFit":{var V;const ne=(V=ee.filter(M=>{if(U){const K=yr(M.placement);return K===P||K==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(K=>K>0).reduce((K,se)=>K+se,0)]).sort((M,K)=>M[1]-K[1])[0])==null?void 0:V[0];ne&&(fe=ne);break}case"initialPlacement":fe=f;break}if(o!==fe)return{reset:{placement:fe}}}return{}}}};function ov(t,n){return{top:t.top-n.height,right:t.right-n.width,bottom:t.bottom-n.height,left:t.left-n.width}}function lv(t){return MP.some(n=>t[n]>=0)}const QP=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(n){const{rects:s}=n,{strategy:a="referenceHidden",...o}=zr(t,n);switch(a){case"referenceHidden":{const c=await Vo(n,{...o,elementContext:"reference"}),d=ov(c,s.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:lv(d)}}}case"escaped":{const c=await Vo(n,{...o,altBoundary:!0}),d=ov(c,s.floating);return{data:{escapedOffsets:d,escaped:lv(d)}}}default:return{}}}}},E0=new Set(["left","top"]);async function GP(t,n){const{placement:s,platform:a,elements:o}=t,c=await(a.isRTL==null?void 0:a.isRTL(o.floating)),d=Wr(s),f=Hi(s),p=yr(s)==="y",x=E0.has(d)?-1:1,m=c&&p?-1:1,v=zr(n,t);let{mainAxis:C,crossAxis:w,alignmentAxis:_}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return f&&typeof _=="number"&&(w=f==="end"?_*-1:_),p?{x:w*m,y:C*x}:{x:C*x,y:w*m}}const XP=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(n){var s,a;const{x:o,y:c,placement:d,middlewareData:f}=n,p=await GP(n,t);return d===((s=f.offset)==null?void 0:s.placement)&&(a=f.arrow)!=null&&a.alignmentOffset?{}:{x:o+p.x,y:c+p.y,data:{...p,placement:d}}}}},JP=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(n){const{x:s,y:a,placement:o}=n,{mainAxis:c=!0,crossAxis:d=!1,limiter:f={fn:S=>{let{x:E,y:P}=S;return{x:E,y:P}}},...p}=zr(t,n),x={x:s,y:a},m=await Vo(n,p),v=yr(Wr(o)),C=om(v);let w=x[C],_=x[v];if(c){const S=C==="y"?"top":"left",E=C==="y"?"bottom":"right",P=w+m[S],N=w-m[E];w=jh(P,w,N)}if(d){const S=v==="y"?"top":"left",E=v==="y"?"bottom":"right",P=_+m[S],N=_-m[E];_=jh(P,_,N)}const b=f.fn({...n,[C]:w,[v]:_});return{...b,data:{x:b.x-s,y:b.y-a,enabled:{[C]:c,[v]:d}}}}}},ZP=function(t){return t===void 0&&(t={}),{options:t,fn(n){const{x:s,y:a,placement:o,rects:c,middlewareData:d}=n,{offset:f=0,mainAxis:p=!0,crossAxis:x=!0}=zr(t,n),m={x:s,y:a},v=yr(o),C=om(v);let w=m[C],_=m[v];const b=zr(f,n),S=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(p){const N=C==="y"?"height":"width",A=c.reference[C]-c.floating[N]+S.mainAxis,D=c.reference[C]+c.reference[N]-S.mainAxis;w<A?w=A:w>D&&(w=D)}if(x){var E,P;const N=C==="y"?"width":"height",A=E0.has(Wr(o)),D=c.reference[v]-c.floating[N]+(A&&((E=d.offset)==null?void 0:E[v])||0)+(A?0:S.crossAxis),U=c.reference[v]+c.reference[N]+(A?0:((P=d.offset)==null?void 0:P[v])||0)-(A?S.crossAxis:0);_<D?_=D:_>U&&(_=U)}return{[C]:w,[v]:_}}}},ek=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(n){var s,a;const{placement:o,rects:c,platform:d,elements:f}=n,{apply:p=()=>{},...x}=zr(t,n),m=await Vo(n,x),v=Wr(o),C=Hi(o),w=yr(o)==="y",{width:_,height:b}=c.floating;let S,E;v==="top"||v==="bottom"?(S=v,E=C===(await(d.isRTL==null?void 0:d.isRTL(f.floating))?"start":"end")?"left":"right"):(E=v,S=C==="end"?"top":"bottom");const P=b-m.top-m.bottom,N=_-m.left-m.right,A=Sa(b-m[S],P),D=Sa(_-m[E],N),U=!n.middlewareData.shift;let R=A,L=D;if((s=n.middlewareData.shift)!=null&&s.enabled.x&&(L=N),(a=n.middlewareData.shift)!=null&&a.enabled.y&&(R=P),U&&!C){const ee=Rs(m.left,0),ve=Rs(m.right,0),ge=Rs(m.top,0),V=Rs(m.bottom,0);w?L=_-2*(ee!==0||ve!==0?ee+ve:Rs(m.left,m.right)):R=b-2*(ge!==0||V!==0?ge+V:Rs(m.top,m.bottom))}await p({...n,availableWidth:L,availableHeight:R});const pe=await d.getDimensions(f.floating);return _!==pe.width||b!==pe.height?{reset:{rects:!0}}:{}}}};function yd(){return typeof window<"u"}function qi(t){return T0(t)?(t.nodeName||"").toLowerCase():"#document"}function Os(t){var n;return(t==null||(n=t.ownerDocument)==null?void 0:n.defaultView)||window}function kr(t){var n;return(n=(T0(t)?t.ownerDocument:t.document)||window.document)==null?void 0:n.documentElement}function T0(t){return yd()?t instanceof Node||t instanceof Os(t).Node:!1}function ir(t){return yd()?t instanceof Element||t instanceof Os(t).Element:!1}function Sr(t){return yd()?t instanceof HTMLElement||t instanceof Os(t).HTMLElement:!1}function cv(t){return!yd()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Os(t).ShadowRoot}const tk=new Set(["inline","contents"]);function ol(t){const{overflow:n,overflowX:s,overflowY:a,display:o}=or(t);return/auto|scroll|overlay|hidden|clip/.test(n+a+s)&&!tk.has(o)}const nk=new Set(["table","td","th"]);function sk(t){return nk.has(qi(t))}const rk=[":popover-open",":modal"];function wd(t){return rk.some(n=>{try{return t.matches(n)}catch{return!1}})}const ak=["transform","translate","scale","rotate","perspective"],ik=["transform","translate","scale","rotate","perspective","filter"],ok=["paint","layout","strict","content"];function dm(t){const n=um(),s=ir(t)?or(t):t;return ak.some(a=>s[a]?s[a]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!n&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!n&&(s.filter?s.filter!=="none":!1)||ik.some(a=>(s.willChange||"").includes(a))||ok.some(a=>(s.contain||"").includes(a))}function lk(t){let n=Ca(t);for(;Sr(n)&&!Mi(n);){if(dm(n))return n;if(wd(n))return null;n=Ca(n)}return null}function um(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ck=new Set(["html","body","#document"]);function Mi(t){return ck.has(qi(t))}function or(t){return Os(t).getComputedStyle(t)}function jd(t){return ir(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ca(t){if(qi(t)==="html")return t;const n=t.assignedSlot||t.parentNode||cv(t)&&t.host||kr(t);return cv(n)?n.host:n}function D0(t){const n=Ca(t);return Mi(n)?t.ownerDocument?t.ownerDocument.body:t.body:Sr(n)&&ol(n)?n:D0(n)}function Ho(t,n,s){var a;n===void 0&&(n=[]),s===void 0&&(s=!0);const o=D0(t),c=o===((a=t.ownerDocument)==null?void 0:a.body),d=Os(o);if(c){const f=Nh(d);return n.concat(d,d.visualViewport||[],ol(o)?o:[],f&&s?Ho(f):[])}return n.concat(o,Ho(o,[],s))}function Nh(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function R0(t){const n=or(t);let s=parseFloat(n.width)||0,a=parseFloat(n.height)||0;const o=Sr(t),c=o?t.offsetWidth:s,d=o?t.offsetHeight:a,f=Gc(s)!==c||Gc(a)!==d;return f&&(s=c,a=d),{width:s,height:a,$:f}}function fm(t){return ir(t)?t:t.contextElement}function Ri(t){const n=fm(t);if(!Sr(n))return Nr(1);const s=n.getBoundingClientRect(),{width:a,height:o,$:c}=R0(n);let d=(c?Gc(s.width):s.width)/a,f=(c?Gc(s.height):s.height)/o;return(!d||!Number.isFinite(d))&&(d=1),(!f||!Number.isFinite(f))&&(f=1),{x:d,y:f}}const dk=Nr(0);function A0(t){const n=Os(t);return!um()||!n.visualViewport?dk:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function uk(t,n,s){return n===void 0&&(n=!1),!s||n&&s!==Os(t)?!1:n}function Xa(t,n,s,a){n===void 0&&(n=!1),s===void 0&&(s=!1);const o=t.getBoundingClientRect(),c=fm(t);let d=Nr(1);n&&(a?ir(a)&&(d=Ri(a)):d=Ri(t));const f=uk(c,s,a)?A0(c):Nr(0);let p=(o.left+f.x)/d.x,x=(o.top+f.y)/d.y,m=o.width/d.x,v=o.height/d.y;if(c){const C=Os(c),w=a&&ir(a)?Os(a):a;let _=C,b=Nh(_);for(;b&&a&&w!==_;){const S=Ri(b),E=b.getBoundingClientRect(),P=or(b),N=E.left+(b.clientLeft+parseFloat(P.paddingLeft))*S.x,A=E.top+(b.clientTop+parseFloat(P.paddingTop))*S.y;p*=S.x,x*=S.y,m*=S.x,v*=S.y,p+=N,x+=A,_=Os(b),b=Nh(_)}}return Jc({width:m,height:v,x:p,y:x})}function hm(t,n){const s=jd(t).scrollLeft;return n?n.left+s:Xa(kr(t)).left+s}function O0(t,n,s){s===void 0&&(s=!1);const a=t.getBoundingClientRect(),o=a.left+n.scrollLeft-(s?0:hm(t,a)),c=a.top+n.scrollTop;return{x:o,y:c}}function fk(t){let{elements:n,rect:s,offsetParent:a,strategy:o}=t;const c=o==="fixed",d=kr(a),f=n?wd(n.floating):!1;if(a===d||f&&c)return s;let p={scrollLeft:0,scrollTop:0},x=Nr(1);const m=Nr(0),v=Sr(a);if((v||!v&&!c)&&((qi(a)!=="body"||ol(d))&&(p=jd(a)),Sr(a))){const w=Xa(a);x=Ri(a),m.x=w.x+a.clientLeft,m.y=w.y+a.clientTop}const C=d&&!v&&!c?O0(d,p,!0):Nr(0);return{width:s.width*x.x,height:s.height*x.y,x:s.x*x.x-p.scrollLeft*x.x+m.x+C.x,y:s.y*x.y-p.scrollTop*x.y+m.y+C.y}}function hk(t){return Array.from(t.getClientRects())}function mk(t){const n=kr(t),s=jd(t),a=t.ownerDocument.body,o=Rs(n.scrollWidth,n.clientWidth,a.scrollWidth,a.clientWidth),c=Rs(n.scrollHeight,n.clientHeight,a.scrollHeight,a.clientHeight);let d=-s.scrollLeft+hm(t);const f=-s.scrollTop;return or(a).direction==="rtl"&&(d+=Rs(n.clientWidth,a.clientWidth)-o),{width:o,height:c,x:d,y:f}}function pk(t,n){const s=Os(t),a=kr(t),o=s.visualViewport;let c=a.clientWidth,d=a.clientHeight,f=0,p=0;if(o){c=o.width,d=o.height;const x=um();(!x||x&&n==="fixed")&&(f=o.offsetLeft,p=o.offsetTop)}return{width:c,height:d,x:f,y:p}}const gk=new Set(["absolute","fixed"]);function xk(t,n){const s=Xa(t,!0,n==="fixed"),a=s.top+t.clientTop,o=s.left+t.clientLeft,c=Sr(t)?Ri(t):Nr(1),d=t.clientWidth*c.x,f=t.clientHeight*c.y,p=o*c.x,x=a*c.y;return{width:d,height:f,x:p,y:x}}function dv(t,n,s){let a;if(n==="viewport")a=pk(t,s);else if(n==="document")a=mk(kr(t));else if(ir(n))a=xk(n,s);else{const o=A0(t);a={x:n.x-o.x,y:n.y-o.y,width:n.width,height:n.height}}return Jc(a)}function M0(t,n){const s=Ca(t);return s===n||!ir(s)||Mi(s)?!1:or(s).position==="fixed"||M0(s,n)}function vk(t,n){const s=n.get(t);if(s)return s;let a=Ho(t,[],!1).filter(f=>ir(f)&&qi(f)!=="body"),o=null;const c=or(t).position==="fixed";let d=c?Ca(t):t;for(;ir(d)&&!Mi(d);){const f=or(d),p=dm(d);!p&&f.position==="fixed"&&(o=null),(c?!p&&!o:!p&&f.position==="static"&&!!o&&gk.has(o.position)||ol(d)&&!p&&M0(t,d))?a=a.filter(m=>m!==d):o=f,d=Ca(d)}return n.set(t,a),a}function yk(t){let{element:n,boundary:s,rootBoundary:a,strategy:o}=t;const d=[...s==="clippingAncestors"?wd(n)?[]:vk(n,this._c):[].concat(s),a],f=d[0],p=d.reduce((x,m)=>{const v=dv(n,m,o);return x.top=Rs(v.top,x.top),x.right=Sa(v.right,x.right),x.bottom=Sa(v.bottom,x.bottom),x.left=Rs(v.left,x.left),x},dv(n,f,o));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function wk(t){const{width:n,height:s}=R0(t);return{width:n,height:s}}function jk(t,n,s){const a=Sr(n),o=kr(n),c=s==="fixed",d=Xa(t,!0,c,n);let f={scrollLeft:0,scrollTop:0};const p=Nr(0);function x(){p.x=hm(o)}if(a||!a&&!c)if((qi(n)!=="body"||ol(o))&&(f=jd(n)),a){const w=Xa(n,!0,c,n);p.x=w.x+n.clientLeft,p.y=w.y+n.clientTop}else o&&x();c&&!a&&o&&x();const m=o&&!a&&!c?O0(o,f):Nr(0),v=d.left+f.scrollLeft-p.x-m.x,C=d.top+f.scrollTop-p.y-m.y;return{x:v,y:C,width:d.width,height:d.height}}function $f(t){return or(t).position==="static"}function uv(t,n){if(!Sr(t)||or(t).position==="fixed")return null;if(n)return n(t);let s=t.offsetParent;return kr(t)===s&&(s=s.ownerDocument.body),s}function F0(t,n){const s=Os(t);if(wd(t))return s;if(!Sr(t)){let o=Ca(t);for(;o&&!Mi(o);){if(ir(o)&&!$f(o))return o;o=Ca(o)}return s}let a=uv(t,n);for(;a&&sk(a)&&$f(a);)a=uv(a,n);return a&&Mi(a)&&$f(a)&&!dm(a)?s:a||lk(t)||s}const bk=async function(t){const n=this.getOffsetParent||F0,s=this.getDimensions,a=await s(t.floating);return{reference:jk(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function Nk(t){return or(t).direction==="rtl"}const _k={convertOffsetParentRelativeRectToViewportRelativeRect:fk,getDocumentElement:kr,getClippingRect:yk,getOffsetParent:F0,getElementRects:bk,getClientRects:hk,getDimensions:wk,getScale:Ri,isElement:ir,isRTL:Nk};function I0(t,n){return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height}function Sk(t,n){let s=null,a;const o=kr(t);function c(){var f;clearTimeout(a),(f=s)==null||f.disconnect(),s=null}function d(f,p){f===void 0&&(f=!1),p===void 0&&(p=1),c();const x=t.getBoundingClientRect(),{left:m,top:v,width:C,height:w}=x;if(f||n(),!C||!w)return;const _=_c(v),b=_c(o.clientWidth-(m+C)),S=_c(o.clientHeight-(v+w)),E=_c(m),N={rootMargin:-_+"px "+-b+"px "+-S+"px "+-E+"px",threshold:Rs(0,Sa(1,p))||1};let A=!0;function D(U){const R=U[0].intersectionRatio;if(R!==p){if(!A)return d();R?d(!1,R):a=setTimeout(()=>{d(!1,1e-7)},1e3)}R===1&&!I0(x,t.getBoundingClientRect())&&d(),A=!1}try{s=new IntersectionObserver(D,{...N,root:o.ownerDocument})}catch{s=new IntersectionObserver(D,N)}s.observe(t)}return d(!0),c}function Ck(t,n,s,a){a===void 0&&(a={});const{ancestorScroll:o=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:p=!1}=a,x=fm(t),m=o||c?[...x?Ho(x):[],...Ho(n)]:[];m.forEach(E=>{o&&E.addEventListener("scroll",s,{passive:!0}),c&&E.addEventListener("resize",s)});const v=x&&f?Sk(x,s):null;let C=-1,w=null;d&&(w=new ResizeObserver(E=>{let[P]=E;P&&P.target===x&&w&&(w.unobserve(n),cancelAnimationFrame(C),C=requestAnimationFrame(()=>{var N;(N=w)==null||N.observe(n)})),s()}),x&&!p&&w.observe(x),w.observe(n));let _,b=p?Xa(t):null;p&&S();function S(){const E=Xa(t);b&&!I0(b,E)&&s(),b=E,_=requestAnimationFrame(S)}return s(),()=>{var E;m.forEach(P=>{o&&P.removeEventListener("scroll",s),c&&P.removeEventListener("resize",s)}),v?.(),(E=w)==null||E.disconnect(),w=null,p&&cancelAnimationFrame(_)}}const Pk=XP,kk=JP,Ek=KP,Tk=ek,Dk=QP,fv=YP,Rk=ZP,Ak=(t,n,s)=>{const a=new Map,o={platform:_k,...s},c={...o.platform,_c:a};return qP(t,n,{...o,platform:c})};var Ok=typeof document<"u",Mk=function(){},zc=Ok?h.useLayoutEffect:Mk;function Zc(t,n){if(t===n)return!0;if(typeof t!=typeof n)return!1;if(typeof t=="function"&&t.toString()===n.toString())return!0;let s,a,o;if(t&&n&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==n.length)return!1;for(a=s;a--!==0;)if(!Zc(t[a],n[a]))return!1;return!0}if(o=Object.keys(t),s=o.length,s!==Object.keys(n).length)return!1;for(a=s;a--!==0;)if(!{}.hasOwnProperty.call(n,o[a]))return!1;for(a=s;a--!==0;){const c=o[a];if(!(c==="_owner"&&t.$$typeof)&&!Zc(t[c],n[c]))return!1}return!0}return t!==t&&n!==n}function L0(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function hv(t,n){const s=L0(t);return Math.round(n*s)/s}function Bf(t){const n=h.useRef(t);return zc(()=>{n.current=t}),n}function Fk(t){t===void 0&&(t={});const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:o,elements:{reference:c,floating:d}={},transform:f=!0,whileElementsMounted:p,open:x}=t,[m,v]=h.useState({x:0,y:0,strategy:s,placement:n,middlewareData:{},isPositioned:!1}),[C,w]=h.useState(a);Zc(C,a)||w(a);const[_,b]=h.useState(null),[S,E]=h.useState(null),P=h.useCallback(M=>{M!==U.current&&(U.current=M,b(M))},[]),N=h.useCallback(M=>{M!==R.current&&(R.current=M,E(M))},[]),A=c||_,D=d||S,U=h.useRef(null),R=h.useRef(null),L=h.useRef(m),pe=p!=null,ee=Bf(p),ve=Bf(o),ge=Bf(x),V=h.useCallback(()=>{if(!U.current||!R.current)return;const M={placement:n,strategy:s,middleware:C};ve.current&&(M.platform=ve.current),Ak(U.current,R.current,M).then(K=>{const se={...K,isPositioned:ge.current!==!1};le.current&&!Zc(L.current,se)&&(L.current=se,$i.flushSync(()=>{v(se)}))})},[C,n,s,ve,ge]);zc(()=>{x===!1&&L.current.isPositioned&&(L.current.isPositioned=!1,v(M=>({...M,isPositioned:!1})))},[x]);const le=h.useRef(!1);zc(()=>(le.current=!0,()=>{le.current=!1}),[]),zc(()=>{if(A&&(U.current=A),D&&(R.current=D),A&&D){if(ee.current)return ee.current(A,D,V);V()}},[A,D,V,ee,pe]);const we=h.useMemo(()=>({reference:U,floating:R,setReference:P,setFloating:N}),[P,N]),fe=h.useMemo(()=>({reference:A,floating:D}),[A,D]),ne=h.useMemo(()=>{const M={position:s,left:0,top:0};if(!fe.floating)return M;const K=hv(fe.floating,m.x),se=hv(fe.floating,m.y);return f?{...M,transform:"translate("+K+"px, "+se+"px)",...L0(fe.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:K,top:se}},[s,f,fe.floating,m.x,m.y]);return h.useMemo(()=>({...m,update:V,refs:we,elements:fe,floatingStyles:ne}),[m,V,we,fe,ne])}const Ik=t=>{function n(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:a,padding:o}=typeof t=="function"?t(s):t;return a&&n(a)?a.current!=null?fv({element:a.current,padding:o}).fn(s):{}:a?fv({element:a,padding:o}).fn(s):{}}}},Lk=(t,n)=>({...Pk(t),options:[t,n]}),$k=(t,n)=>({...kk(t),options:[t,n]}),Bk=(t,n)=>({...Rk(t),options:[t,n]}),Uk=(t,n)=>({...Ek(t),options:[t,n]}),zk=(t,n)=>({...Tk(t),options:[t,n]}),Wk=(t,n)=>({...Dk(t),options:[t,n]}),Vk=(t,n)=>({...Ik(t),options:[t,n]});var Hk="Arrow",$0=h.forwardRef((t,n)=>{const{children:s,width:a=10,height:o=5,...c}=t;return e.jsx(jt.svg,{...c,ref:n,width:a,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});$0.displayName=Hk;var qk=$0;function B0(t){const[n,s]=h.useState(void 0);return Yn(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const a=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const c=o[0];let d,f;if("borderBoxSize"in c){const p=c.borderBoxSize,x=Array.isArray(p)?p[0]:p;d=x.inlineSize,f=x.blockSize}else d=t.offsetWidth,f=t.offsetHeight;s({width:d,height:f})});return a.observe(t,{box:"border-box"}),()=>a.unobserve(t)}else s(void 0)},[t]),n}var mm="Popper",[U0,Yi]=Cr(mm),[Yk,z0]=U0(mm),W0=t=>{const{__scopePopper:n,children:s}=t,[a,o]=h.useState(null);return e.jsx(Yk,{scope:n,anchor:a,onAnchorChange:o,children:s})};W0.displayName=mm;var V0="PopperAnchor",H0=h.forwardRef((t,n)=>{const{__scopePopper:s,virtualRef:a,...o}=t,c=z0(V0,s),d=h.useRef(null),f=Gt(n,d);return h.useEffect(()=>{c.onAnchorChange(a?.current||d.current)}),a?null:e.jsx(jt.div,{...o,ref:f})});H0.displayName=V0;var pm="PopperContent",[Kk,Qk]=U0(pm),q0=h.forwardRef((t,n)=>{const{__scopePopper:s,side:a="bottom",sideOffset:o=0,align:c="center",alignOffset:d=0,arrowPadding:f=0,avoidCollisions:p=!0,collisionBoundary:x=[],collisionPadding:m=0,sticky:v="partial",hideWhenDetached:C=!1,updatePositionStrategy:w="optimized",onPlaced:_,...b}=t,S=z0(pm,s),[E,P]=h.useState(null),N=Gt(n,re=>P(re)),[A,D]=h.useState(null),U=B0(A),R=U?.width??0,L=U?.height??0,pe=a+(c!=="center"?"-"+c:""),ee=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},ve=Array.isArray(x)?x:[x],ge=ve.length>0,V={padding:ee,boundary:ve.filter(Xk),altBoundary:ge},{refs:le,floatingStyles:we,placement:fe,isPositioned:ne,middlewareData:M}=Fk({strategy:"fixed",placement:pe,whileElementsMounted:(...re)=>Ck(...re,{animationFrame:w==="always"}),elements:{reference:S.anchor},middleware:[Lk({mainAxis:o+L,alignmentAxis:d}),p&&$k({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?Bk():void 0,...V}),p&&Uk({...V}),zk({...V,apply:({elements:re,rects:$e,availableWidth:qe,availableHeight:Ge})=>{const{width:be,height:mt}=$e.reference,We=re.floating.style;We.setProperty("--radix-popper-available-width",`${qe}px`),We.setProperty("--radix-popper-available-height",`${Ge}px`),We.setProperty("--radix-popper-anchor-width",`${be}px`),We.setProperty("--radix-popper-anchor-height",`${mt}px`)}}),A&&Vk({element:A,padding:f}),Jk({arrowWidth:R,arrowHeight:L}),C&&Wk({strategy:"referenceHidden",...V})]}),[K,se]=Q0(fe),T=qs(_);Yn(()=>{ne&&T?.()},[ne,T]);const O=M.arrow?.x,he=M.arrow?.y,Y=M.arrow?.centerOffset!==0,[xe,Be]=h.useState();return Yn(()=>{E&&Be(window.getComputedStyle(E).zIndex)},[E]),e.jsx("div",{ref:le.setFloating,"data-radix-popper-content-wrapper":"",style:{...we,transform:ne?we.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[M.transformOrigin?.x,M.transformOrigin?.y].join(" "),...M.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(Kk,{scope:s,placedSide:K,onArrowChange:D,arrowX:O,arrowY:he,shouldHideArrow:Y,children:e.jsx(jt.div,{"data-side":K,"data-align":se,...b,ref:N,style:{...b.style,animation:ne?void 0:"none"}})})})});q0.displayName=pm;var Y0="PopperArrow",Gk={top:"bottom",right:"left",bottom:"top",left:"right"},K0=h.forwardRef(function(n,s){const{__scopePopper:a,...o}=n,c=Qk(Y0,a),d=Gk[c.placedSide];return e.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:e.jsx(qk,{...o,ref:s,style:{...o.style,display:"block"}})})});K0.displayName=Y0;function Xk(t){return t!==null}var Jk=t=>({name:"transformOrigin",options:t,fn(n){const{placement:s,rects:a,middlewareData:o}=n,d=o.arrow?.centerOffset!==0,f=d?0:t.arrowWidth,p=d?0:t.arrowHeight,[x,m]=Q0(s),v={start:"0%",center:"50%",end:"100%"}[m],C=(o.arrow?.x??0)+f/2,w=(o.arrow?.y??0)+p/2;let _="",b="";return x==="bottom"?(_=d?v:`${C}px`,b=`${-p}px`):x==="top"?(_=d?v:`${C}px`,b=`${a.floating.height+p}px`):x==="right"?(_=`${-p}px`,b=d?v:`${w}px`):x==="left"&&(_=`${a.floating.width+p}px`,b=d?v:`${w}px`),{data:{x:_,y:b}}}});function Q0(t){const[n,s="center"]=t.split("-");return[n,s]}var G0=W0,bd=H0,gm=q0,xm=K0,[Nd]=Cr("Tooltip",[Yi]),vm=Yi(),X0="TooltipProvider",Zk=700,mv="tooltip.open",[eE,J0]=Nd(X0),Z0=t=>{const{__scopeTooltip:n,delayDuration:s=Zk,skipDelayDuration:a=300,disableHoverableContent:o=!1,children:c}=t,d=h.useRef(!0),f=h.useRef(!1),p=h.useRef(0);return h.useEffect(()=>{const x=p.current;return()=>window.clearTimeout(x)},[]),e.jsx(eE,{scope:n,isOpenDelayedRef:d,delayDuration:s,onOpen:h.useCallback(()=>{window.clearTimeout(p.current),d.current=!1},[]),onClose:h.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>d.current=!0,a)},[a]),isPointerInTransitRef:f,onPointerInTransitChange:h.useCallback(x=>{f.current=x},[]),disableHoverableContent:o,children:c})};Z0.displayName=X0;var ew="Tooltip",[nF,_d]=Nd(ew),_h="TooltipTrigger",tE=h.forwardRef((t,n)=>{const{__scopeTooltip:s,...a}=t,o=_d(_h,s),c=J0(_h,s),d=vm(s),f=h.useRef(null),p=Gt(n,f,o.onTriggerChange),x=h.useRef(!1),m=h.useRef(!1),v=h.useCallback(()=>x.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),e.jsx(bd,{asChild:!0,...d,children:e.jsx(jt.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...a,ref:p,onPointerMove:at(t.onPointerMove,C=>{C.pointerType!=="touch"&&!m.current&&!c.isPointerInTransitRef.current&&(o.onTriggerEnter(),m.current=!0)}),onPointerLeave:at(t.onPointerLeave,()=>{o.onTriggerLeave(),m.current=!1}),onPointerDown:at(t.onPointerDown,()=>{o.open&&o.onClose(),x.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:at(t.onFocus,()=>{x.current||o.onOpen()}),onBlur:at(t.onBlur,o.onClose),onClick:at(t.onClick,o.onClose)})})});tE.displayName=_h;var nE="TooltipPortal",[sF,sE]=Nd(nE,{forceMount:void 0}),Fi="TooltipContent",tw=h.forwardRef((t,n)=>{const s=sE(Fi,t.__scopeTooltip),{forceMount:a=s.forceMount,side:o="top",...c}=t,d=_d(Fi,t.__scopeTooltip);return e.jsx(Pr,{present:a||d.open,children:d.disableHoverableContent?e.jsx(nw,{side:o,...c,ref:n}):e.jsx(rE,{side:o,...c,ref:n})})}),rE=h.forwardRef((t,n)=>{const s=_d(Fi,t.__scopeTooltip),a=J0(Fi,t.__scopeTooltip),o=h.useRef(null),c=Gt(n,o),[d,f]=h.useState(null),{trigger:p,onClose:x}=s,m=o.current,{onPointerInTransitChange:v}=a,C=h.useCallback(()=>{f(null),v(!1)},[v]),w=h.useCallback((_,b)=>{const S=_.currentTarget,E={x:_.clientX,y:_.clientY},P=cE(E,S.getBoundingClientRect()),N=dE(E,P),A=uE(b.getBoundingClientRect()),D=hE([...N,...A]);f(D),v(!0)},[v]);return h.useEffect(()=>()=>C(),[C]),h.useEffect(()=>{if(p&&m){const _=S=>w(S,m),b=S=>w(S,p);return p.addEventListener("pointerleave",_),m.addEventListener("pointerleave",b),()=>{p.removeEventListener("pointerleave",_),m.removeEventListener("pointerleave",b)}}},[p,m,w,C]),h.useEffect(()=>{if(d){const _=b=>{const S=b.target,E={x:b.clientX,y:b.clientY},P=p?.contains(S)||m?.contains(S),N=!fE(E,d);P?C():N&&(C(),x())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[p,m,d,x,C]),e.jsx(nw,{...t,ref:c})}),[aE,iE]=Nd(ew,{isInside:!1}),oE=W_("TooltipContent"),nw=h.forwardRef((t,n)=>{const{__scopeTooltip:s,children:a,"aria-label":o,onEscapeKeyDown:c,onPointerDownOutside:d,...f}=t,p=_d(Fi,s),x=vm(s),{onClose:m}=p;return h.useEffect(()=>(document.addEventListener(mv,m),()=>document.removeEventListener(mv,m)),[m]),h.useEffect(()=>{if(p.trigger){const v=C=>{C.target?.contains(p.trigger)&&m()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[p.trigger,m]),e.jsx(Bi,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:v=>v.preventDefault(),onDismiss:m,children:e.jsxs(gm,{"data-state":p.stateAttribute,...x,...f,ref:n,style:{...f.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(oE,{children:a}),e.jsx(aE,{scope:s,isInside:!0,children:e.jsx(uS,{id:p.contentId,role:"tooltip",children:o||a})})]})})});tw.displayName=Fi;var sw="TooltipArrow",lE=h.forwardRef((t,n)=>{const{__scopeTooltip:s,...a}=t,o=vm(s);return iE(sw,s).isInside?null:e.jsx(xm,{...o,...a,ref:n})});lE.displayName=sw;function cE(t,n){const s=Math.abs(n.top-t.y),a=Math.abs(n.bottom-t.y),o=Math.abs(n.right-t.x),c=Math.abs(n.left-t.x);switch(Math.min(s,a,o,c)){case c:return"left";case o:return"right";case s:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function dE(t,n,s=5){const a=[];switch(n){case"top":a.push({x:t.x-s,y:t.y+s},{x:t.x+s,y:t.y+s});break;case"bottom":a.push({x:t.x-s,y:t.y-s},{x:t.x+s,y:t.y-s});break;case"left":a.push({x:t.x+s,y:t.y-s},{x:t.x+s,y:t.y+s});break;case"right":a.push({x:t.x-s,y:t.y-s},{x:t.x-s,y:t.y+s});break}return a}function uE(t){const{top:n,right:s,bottom:a,left:o}=t;return[{x:o,y:n},{x:s,y:n},{x:s,y:a},{x:o,y:a}]}function fE(t,n){const{x:s,y:a}=t;let o=!1;for(let c=0,d=n.length-1;c<n.length;d=c++){const f=n[c],p=n[d],x=f.x,m=f.y,v=p.x,C=p.y;m>a!=C>a&&s<(v-x)*(a-m)/(C-m)+x&&(o=!o)}return o}function hE(t){const n=t.slice();return n.sort((s,a)=>s.x<a.x?-1:s.x>a.x?1:s.y<a.y?-1:s.y>a.y?1:0),mE(n)}function mE(t){if(t.length<=1)return t.slice();const n=[];for(let a=0;a<t.length;a++){const o=t[a];for(;n.length>=2;){const c=n[n.length-1],d=n[n.length-2];if((c.x-d.x)*(o.y-d.y)>=(c.y-d.y)*(o.x-d.x))n.pop();else break}n.push(o)}n.pop();const s=[];for(let a=t.length-1;a>=0;a--){const o=t[a];for(;s.length>=2;){const c=s[s.length-1],d=s[s.length-2];if((c.x-d.x)*(o.y-d.y)>=(c.y-d.y)*(o.x-d.x))s.pop();else break}s.push(o)}return s.pop(),n.length===1&&s.length===1&&n[0].x===s[0].x&&n[0].y===s[0].y?n:n.concat(s)}var pE=Z0,rw=tw;const gE=pE,xE=h.forwardRef(({className:t,sideOffset:n=4,...s},a)=>e.jsx(rw,{ref:a,sideOffset:n,className:ht("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));xE.displayName=rw.displayName;var Sd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Cd=typeof window>"u"||"Deno"in globalThis;function sr(){}function vE(t,n){return typeof t=="function"?t(n):t}function yE(t){return typeof t=="number"&&t>=0&&t!==1/0}function wE(t,n){return Math.max(t+(n||0)-Date.now(),0)}function Sh(t,n){return typeof t=="function"?t(n):t}function jE(t,n){return typeof t=="function"?t(n):t}function pv(t,n){const{type:s="all",exact:a,fetchStatus:o,predicate:c,queryKey:d,stale:f}=t;if(d){if(a){if(n.queryHash!==ym(d,n.options))return!1}else if(!Yo(n.queryKey,d))return!1}if(s!=="all"){const p=n.isActive();if(s==="active"&&!p||s==="inactive"&&p)return!1}return!(typeof f=="boolean"&&n.isStale()!==f||o&&o!==n.state.fetchStatus||c&&!c(n))}function gv(t,n){const{exact:s,status:a,predicate:o,mutationKey:c}=t;if(c){if(!n.options.mutationKey)return!1;if(s){if(qo(n.options.mutationKey)!==qo(c))return!1}else if(!Yo(n.options.mutationKey,c))return!1}return!(a&&n.state.status!==a||o&&!o(n))}function ym(t,n){return(n?.queryKeyHashFn||qo)(t)}function qo(t){return JSON.stringify(t,(n,s)=>Ch(s)?Object.keys(s).sort().reduce((a,o)=>(a[o]=s[o],a),{}):s)}function Yo(t,n){return t===n?!0:typeof t!=typeof n?!1:t&&n&&typeof t=="object"&&typeof n=="object"?Object.keys(n).every(s=>Yo(t[s],n[s])):!1}function aw(t,n){if(t===n)return t;const s=xv(t)&&xv(n);if(s||Ch(t)&&Ch(n)){const a=s?t:Object.keys(t),o=a.length,c=s?n:Object.keys(n),d=c.length,f=s?[]:{},p=new Set(a);let x=0;for(let m=0;m<d;m++){const v=s?m:c[m];(!s&&p.has(v)||s)&&t[v]===void 0&&n[v]===void 0?(f[v]=void 0,x++):(f[v]=aw(t[v],n[v]),f[v]===t[v]&&t[v]!==void 0&&x++)}return o===d&&x===o?t:f}return n}function xv(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ch(t){if(!vv(t))return!1;const n=t.constructor;if(n===void 0)return!0;const s=n.prototype;return!(!vv(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function vv(t){return Object.prototype.toString.call(t)==="[object Object]"}function bE(t){return new Promise(n=>{setTimeout(n,t)})}function NE(t,n,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,n):s.structuralSharing!==!1?aw(t,n):n}function _E(t,n,s=0){const a=[...t,n];return s&&a.length>s?a.slice(1):a}function SE(t,n,s=0){const a=[n,...t];return s&&a.length>s?a.slice(0,-1):a}var wm=Symbol();function iw(t,n){return!t.queryFn&&n?.initialPromise?()=>n.initialPromise:!t.queryFn||t.queryFn===wm?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var CE=class extends Sd{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Cd&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},ow=new CE,PE=class extends Sd{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Cd&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(s=>{s(t)}))}isOnline(){return this.#e}},ed=new PE;function kE(){let t,n;const s=new Promise((o,c)=>{t=o,n=c});s.status="pending",s.catch(()=>{});function a(o){Object.assign(s,o),delete s.resolve,delete s.reject}return s.resolve=o=>{a({status:"fulfilled",value:o}),t(o)},s.reject=o=>{a({status:"rejected",reason:o}),n(o)},s}function EE(t){return Math.min(1e3*2**t,3e4)}function lw(t){return(t??"online")==="online"?ed.isOnline():!0}var cw=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Uf(t){return t instanceof cw}function dw(t){let n=!1,s=0,a=!1,o;const c=kE(),d=b=>{a||(C(new cw(b)),t.abort?.())},f=()=>{n=!0},p=()=>{n=!1},x=()=>ow.isFocused()&&(t.networkMode==="always"||ed.isOnline())&&t.canRun(),m=()=>lw(t.networkMode)&&t.canRun(),v=b=>{a||(a=!0,t.onSuccess?.(b),o?.(),c.resolve(b))},C=b=>{a||(a=!0,t.onError?.(b),o?.(),c.reject(b))},w=()=>new Promise(b=>{o=S=>{(a||x())&&b(S)},t.onPause?.()}).then(()=>{o=void 0,a||t.onContinue?.()}),_=()=>{if(a)return;let b;const S=s===0?t.initialPromise:void 0;try{b=S??t.fn()}catch(E){b=Promise.reject(E)}Promise.resolve(b).then(v).catch(E=>{if(a)return;const P=t.retry??(Cd?0:3),N=t.retryDelay??EE,A=typeof N=="function"?N(s,E):N,D=P===!0||typeof P=="number"&&s<P||typeof P=="function"&&P(s,E);if(n||!D){C(E);return}s++,t.onFail?.(s,E),bE(A).then(()=>x()?void 0:w()).then(()=>{n?C(E):_()})})};return{promise:c,cancel:d,continue:()=>(o?.(),c),cancelRetry:f,continueRetry:p,canStart:m,start:()=>(m()?_():w().then(_),c)}}var TE=t=>setTimeout(t,0);function DE(){let t=[],n=0,s=f=>{f()},a=f=>{f()},o=TE;const c=f=>{n?t.push(f):o(()=>{s(f)})},d=()=>{const f=t;t=[],f.length&&o(()=>{a(()=>{f.forEach(p=>{s(p)})})})};return{batch:f=>{let p;n++;try{p=f()}finally{n--,n||d()}return p},batchCalls:f=>(...p)=>{c(()=>{f(...p)})},schedule:c,setNotifyFunction:f=>{s=f},setBatchNotifyFunction:f=>{a=f},setScheduler:f=>{o=f}}}var cs=DE(),uw=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),yE(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Cd?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},RE=class extends uw{#e;#t;#n;#r;#s;#i;#o;constructor(t){super(),this.#o=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=OE(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,n){const s=NE(this.state.data,t,this.options);return this.#a({data:s,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),s}setState(t,n){this.#a({type:"setState",state:t,setStateOptions:n})}cancel(t){const n=this.#s?.promise;return this.#s?.cancel(t),n?n.then(sr).catch(sr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>jE(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===wm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Sh(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!wE(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(this.#s&&(this.#o?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(t,n){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(x=>x.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,a=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(this.#o=!0,s.signal)})},o=()=>{const p=iw(this.options,n),m=(()=>{const v={client:this.#r,queryKey:this.queryKey,meta:this.meta};return a(v),v})();return this.#o=!1,this.options.persister?this.options.persister(p,m,this):p(m)},d=(()=>{const p={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:o};return a(p),p})();this.options.behavior?.onFetch(d,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#a({type:"fetch",meta:d.fetchOptions?.meta});const f=p=>{Uf(p)&&p.silent||this.#a({type:"error",error:p}),Uf(p)||(this.#n.config.onError?.(p,this),this.#n.config.onSettled?.(this.state.data,p,this)),this.scheduleGc()};return this.#s=dw({initialPromise:n?.initialPromise,fn:d.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{if(p===void 0){f(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(x){f(x);return}this.#n.config.onSuccess?.(p,this),this.#n.config.onSettled?.(p,this.state.error,this),this.scheduleGc()},onError:f,onFail:(p,x)=>{this.#a({type:"failed",failureCount:p,error:x})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}),this.#s.start()}#a(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...AE(s.data,this.options),fetchMeta:t.meta??null};case"success":return this.#t=void 0,{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Uf(a)&&a.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),cs.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function AE(t,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:lw(n.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function OE(t){const n=typeof t.initialData=="function"?t.initialData():t.initialData,s=n!==void 0,a=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var ME=class extends Sd{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,n,s){const a=n.queryKey,o=n.queryHash??ym(a,n);let c=this.get(o);return c||(c=new RE({client:t,queryKey:a,queryHash:o,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(c)),c}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=this.#e.get(t.queryHash);n&&(t.destroy(),n===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){cs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>pv(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>pv(t,s)):n}notify(t){cs.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){cs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){cs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},FE=class extends uw{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||IE(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(n=>n!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){const n=()=>{this.#r({type:"continue"})};this.#n=dw({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(o,c)=>{this.#r({type:"failed",failureCount:o,error:c})},onPause:()=>{this.#r({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const s=this.state.status==="pending",a=!this.#n.canStart();try{if(s)n();else{this.#r({type:"pending",variables:t,isPaused:a}),await this.#t.config.onMutate?.(t,this);const c=await this.options.onMutate?.(t);c!==this.state.context&&this.#r({type:"pending",context:c,variables:t,isPaused:a})}const o=await this.#n.start();return await this.#t.config.onSuccess?.(o,t,this.state.context,this),await this.options.onSuccess?.(o,t,this.state.context),await this.#t.config.onSettled?.(o,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(o,null,t,this.state.context),this.#r({type:"success",data:o}),o}catch(o){try{throw await this.#t.config.onError?.(o,t,this.state.context,this),await this.options.onError?.(o,t,this.state.context),await this.#t.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,o,t,this.state.context),o}finally{this.#r({type:"error",error:o})}}finally{this.#t.runNext(this)}}#r(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),cs.batch(()=>{this.#e.forEach(s=>{s.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function IE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var LE=class extends Sd{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,n,s){const a=new FE({mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(n),state:s});return this.add(a),a}add(t){this.#e.add(t);const n=Sc(t);if(typeof n=="string"){const s=this.#t.get(n);s?s.push(t):this.#t.set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const n=Sc(t);if(typeof n=="string"){const s=this.#t.get(n);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&this.#t.delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Sc(t);if(typeof n=="string"){const a=this.#t.get(n)?.find(o=>o.state.status==="pending");return!a||a===t}else return!0}runNext(t){const n=Sc(t);return typeof n=="string"?this.#t.get(n)?.find(a=>a!==t&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){cs.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const n={exact:!0,...t};return this.getAll().find(s=>gv(n,s))}findAll(t={}){return this.getAll().filter(n=>gv(t,n))}notify(t){cs.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return cs.batch(()=>Promise.all(t.map(n=>n.continue().catch(sr))))}};function Sc(t){return t.options.scope?.id}function yv(t){return{onFetch:(n,s)=>{const a=n.options,o=n.fetchOptions?.meta?.fetchMore?.direction,c=n.state.data?.pages||[],d=n.state.data?.pageParams||[];let f={pages:[],pageParams:[]},p=0;const x=async()=>{let m=!1;const v=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(n.signal.aborted?m=!0:n.signal.addEventListener("abort",()=>{m=!0}),n.signal)})},C=iw(n.options,n.fetchOptions),w=async(_,b,S)=>{if(m)return Promise.reject();if(b==null&&_.pages.length)return Promise.resolve(_);const P=(()=>{const U={client:n.client,queryKey:n.queryKey,pageParam:b,direction:S?"backward":"forward",meta:n.options.meta};return v(U),U})(),N=await C(P),{maxPages:A}=n.options,D=S?SE:_E;return{pages:D(_.pages,N,A),pageParams:D(_.pageParams,b,A)}};if(o&&c.length){const _=o==="backward",b=_?$E:wv,S={pages:c,pageParams:d},E=b(a,S);f=await w(S,E,_)}else{const _=t??c.length;do{const b=p===0?d[0]??a.initialPageParam:wv(a,f);if(p>0&&b==null)break;f=await w(f,b),p++}while(p<_)}return f};n.options.persister?n.fetchFn=()=>n.options.persister?.(x,{client:n.client,queryKey:n.queryKey,meta:n.options.meta,signal:n.signal},s):n.fetchFn=x}}}function wv(t,{pages:n,pageParams:s}){const a=n.length-1;return n.length>0?t.getNextPageParam(n[a],n,s[a],s):void 0}function $E(t,{pages:n,pageParams:s}){return n.length>0?t.getPreviousPageParam?.(n[0],n,s[0],s):void 0}var BE=class{#e;#t;#n;#r;#s;#i;#o;#a;constructor(t={}){this.#e=t.queryCache||new ME,this.#t=t.mutationCache||new LE,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=ow.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=ed.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const n=this.defaultQueryOptions({queryKey:t});return this.#e.get(n.queryHash)?.state.data}ensureQueryData(t){const n=this.defaultQueryOptions(t),s=this.#e.build(this,n),a=s.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(Sh(n.staleTime,s))&&this.prefetchQuery(n),Promise.resolve(a))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:n,state:s})=>{const a=s.data;return[n,a]})}setQueryData(t,n,s){const a=this.defaultQueryOptions({queryKey:t}),c=this.#e.get(a.queryHash)?.state.data,d=vE(n,c);if(d!==void 0)return this.#e.build(this,a).setData(d,{...s,manual:!0})}setQueriesData(t,n,s){return cs.batch(()=>this.#e.findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,n,s)]))}getQueryState(t){const n=this.defaultQueryOptions({queryKey:t});return this.#e.get(n.queryHash)?.state}removeQueries(t){const n=this.#e;cs.batch(()=>{n.findAll(t).forEach(s=>{n.remove(s)})})}resetQueries(t,n){const s=this.#e;return cs.batch(()=>(s.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},n)))}cancelQueries(t,n={}){const s={revert:!0,...n},a=cs.batch(()=>this.#e.findAll(t).map(o=>o.cancel(s)));return Promise.all(a).then(sr).catch(sr)}invalidateQueries(t,n={}){return cs.batch(()=>(this.#e.findAll(t).forEach(s=>{s.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},n)))}refetchQueries(t,n={}){const s={...n,cancelRefetch:n.cancelRefetch??!0},a=cs.batch(()=>this.#e.findAll(t).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let c=o.fetch(void 0,s);return s.throwOnError||(c=c.catch(sr)),o.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(a).then(sr)}fetchQuery(t){const n=this.defaultQueryOptions(t);n.retry===void 0&&(n.retry=!1);const s=this.#e.build(this,n);return s.isStaleByTime(Sh(n.staleTime,s))?s.fetch(n):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(sr).catch(sr)}fetchInfiniteQuery(t){return t.behavior=yv(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(sr).catch(sr)}ensureInfiniteQueryData(t){return t.behavior=yv(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ed.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,n){this.#r.set(qo(t),{queryKey:t,defaultOptions:n})}getQueryDefaults(t){const n=[...this.#r.values()],s={};return n.forEach(a=>{Yo(t,a.queryKey)&&Object.assign(s,a.defaultOptions)}),s}setMutationDefaults(t,n){this.#s.set(qo(t),{mutationKey:t,defaultOptions:n})}getMutationDefaults(t){const n=[...this.#s.values()],s={};return n.forEach(a=>{Yo(t,a.mutationKey)&&Object.assign(s,a.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const n={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return n.queryHash||(n.queryHash=ym(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===wm&&(n.enabled=!1),n}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},UE=h.createContext(void 0),zE=({client:t,children:n})=>(h.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(UE.Provider,{value:t,children:n}));function Ko(){return Ko=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},Ko.apply(this,arguments)}var va;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(va||(va={}));const jv="popstate";function WE(t){t===void 0&&(t={});function n(a,o){let{pathname:c,search:d,hash:f}=a.location;return Ph("",{pathname:c,search:d,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(a,o){return typeof o=="string"?o:hw(o)}return HE(n,s,null,t)}function Rn(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function fw(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function VE(){return Math.random().toString(36).substr(2,8)}function bv(t,n){return{usr:t.state,key:t.key,idx:n}}function Ph(t,n,s,a){return s===void 0&&(s=null),Ko({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof n=="string"?Ki(n):n,{state:s,key:n&&n.key||a||VE()})}function hw(t){let{pathname:n="/",search:s="",hash:a=""}=t;return s&&s!=="?"&&(n+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(n+=a.charAt(0)==="#"?a:"#"+a),n}function Ki(t){let n={};if(t){let s=t.indexOf("#");s>=0&&(n.hash=t.substr(s),t=t.substr(0,s));let a=t.indexOf("?");a>=0&&(n.search=t.substr(a),t=t.substr(0,a)),t&&(n.pathname=t)}return n}function HE(t,n,s,a){a===void 0&&(a={});let{window:o=document.defaultView,v5Compat:c=!1}=a,d=o.history,f=va.Pop,p=null,x=m();x==null&&(x=0,d.replaceState(Ko({},d.state,{idx:x}),""));function m(){return(d.state||{idx:null}).idx}function v(){f=va.Pop;let S=m(),E=S==null?null:S-x;x=S,p&&p({action:f,location:b.location,delta:E})}function C(S,E){f=va.Push;let P=Ph(b.location,S,E);x=m()+1;let N=bv(P,x),A=b.createHref(P);try{d.pushState(N,"",A)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;o.location.assign(A)}c&&p&&p({action:f,location:b.location,delta:1})}function w(S,E){f=va.Replace;let P=Ph(b.location,S,E);x=m();let N=bv(P,x),A=b.createHref(P);d.replaceState(N,"",A),c&&p&&p({action:f,location:b.location,delta:0})}function _(S){let E=o.location.origin!=="null"?o.location.origin:o.location.href,P=typeof S=="string"?S:hw(S);return P=P.replace(/ $/,"%20"),Rn(E,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,E)}let b={get action(){return f},get location(){return t(o,d)},listen(S){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(jv,v),p=S,()=>{o.removeEventListener(jv,v),p=null}},createHref(S){return n(o,S)},createURL:_,encodeLocation(S){let E=_(S);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:C,replace:w,go(S){return d.go(S)}};return b}var Nv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Nv||(Nv={}));function qE(t,n,s){return s===void 0&&(s="/"),YE(t,n,s)}function YE(t,n,s,a){let o=typeof n=="string"?Ki(n):n,c=gw(o.pathname||"/",s);if(c==null)return null;let d=mw(t);KE(d);let f=null;for(let p=0;f==null&&p<d.length;++p){let x=iT(c);f=sT(d[p],x)}return f}function mw(t,n,s,a){n===void 0&&(n=[]),s===void 0&&(s=[]),a===void 0&&(a="");let o=(c,d,f)=>{let p={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};p.relativePath.startsWith("/")&&(Rn(p.relativePath.startsWith(a),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(a.length));let x=Ka([a,p.relativePath]),m=s.concat(p);c.children&&c.children.length>0&&(Rn(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),mw(c.children,n,m,x)),!(c.path==null&&!c.index)&&n.push({path:x,score:tT(x,c.index),routesMeta:m})};return t.forEach((c,d)=>{var f;if(c.path===""||!((f=c.path)!=null&&f.includes("?")))o(c,d);else for(let p of pw(c.path))o(c,d,p)}),n}function pw(t){let n=t.split("/");if(n.length===0)return[];let[s,...a]=n,o=s.endsWith("?"),c=s.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let d=pw(a.join("/")),f=[];return f.push(...d.map(p=>p===""?c:[c,p].join("/"))),o&&f.push(...d),f.map(p=>t.startsWith("/")&&p===""?"/":p)}function KE(t){t.sort((n,s)=>n.score!==s.score?s.score-n.score:nT(n.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const QE=/^:[\w-]+$/,GE=3,XE=2,JE=1,ZE=10,eT=-2,_v=t=>t==="*";function tT(t,n){let s=t.split("/"),a=s.length;return s.some(_v)&&(a+=eT),n&&(a+=XE),s.filter(o=>!_v(o)).reduce((o,c)=>o+(QE.test(c)?GE:c===""?JE:ZE),a)}function nT(t,n){return t.length===n.length&&t.slice(0,-1).every((a,o)=>a===n[o])?t[t.length-1]-n[n.length-1]:0}function sT(t,n,s){let{routesMeta:a}=t,o={},c="/",d=[];for(let f=0;f<a.length;++f){let p=a[f],x=f===a.length-1,m=c==="/"?n:n.slice(c.length)||"/",v=rT({path:p.relativePath,caseSensitive:p.caseSensitive,end:x},m),C=p.route;if(!v)return null;Object.assign(o,v.params),d.push({params:o,pathname:Ka([c,v.pathname]),pathnameBase:dT(Ka([c,v.pathnameBase])),route:C}),v.pathnameBase!=="/"&&(c=Ka([c,v.pathnameBase]))}return d}function rT(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,a]=aT(t.path,t.caseSensitive,t.end),o=n.match(s);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:a.reduce((x,m,v)=>{let{paramName:C,isOptional:w}=m;if(C==="*"){let b=f[v]||"";d=c.slice(0,c.length-b.length).replace(/(.)\/+$/,"$1")}const _=f[v];return w&&!_?x[C]=void 0:x[C]=(_||"").replace(/%2F/g,"/"),x},{}),pathname:c,pathnameBase:d,pattern:t}}function aT(t,n,s){n===void 0&&(n=!1),s===void 0&&(s=!0),fw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,p)=>(a.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,n?void 0:"i"),a]}function iT(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return fw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),t}}function gw(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,a=t.charAt(s);return a&&a!=="/"?null:t.slice(s)||"/"}function oT(t,n){n===void 0&&(n="/");let{pathname:s,search:a="",hash:o=""}=typeof t=="string"?Ki(t):t;return{pathname:s?s.startsWith("/")?s:lT(s,n):n,search:uT(a),hash:fT(o)}}function lT(t,n){let s=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function zf(t,n,s,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cT(t){return t.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function xw(t,n){let s=cT(t);return n?s.map((a,o)=>o===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function vw(t,n,s,a){a===void 0&&(a=!1);let o;typeof t=="string"?o=Ki(t):(o=Ko({},t),Rn(!o.pathname||!o.pathname.includes("?"),zf("?","pathname","search",o)),Rn(!o.pathname||!o.pathname.includes("#"),zf("#","pathname","hash",o)),Rn(!o.search||!o.search.includes("#"),zf("#","search","hash",o)));let c=t===""||o.pathname==="",d=c?"/":o.pathname,f;if(d==null)f=s;else{let v=n.length-1;if(!a&&d.startsWith("..")){let C=d.split("/");for(;C[0]==="..";)C.shift(),v-=1;o.pathname=C.join("/")}f=v>=0?n[v]:"/"}let p=oT(o,f),x=d&&d!=="/"&&d.endsWith("/"),m=(c||d===".")&&s.endsWith("/");return!p.pathname.endsWith("/")&&(x||m)&&(p.pathname+="/"),p}const Ka=t=>t.join("/").replace(/\/\/+/g,"/"),dT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yw=["post","put","patch","delete"];new Set(yw);const mT=["get",...yw];new Set(mT);function Qo(){return Qo=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},Qo.apply(this,arguments)}const jm=h.createContext(null),pT=h.createContext(null),ll=h.createContext(null),Pd=h.createContext(null),ni=h.createContext({outlet:null,matches:[],isDataRoute:!1}),ww=h.createContext(null);function cl(){return h.useContext(Pd)!=null}function Qi(){return cl()||Rn(!1),h.useContext(Pd).location}function jw(t){h.useContext(ll).static||h.useLayoutEffect(t)}function si(){let{isDataRoute:t}=h.useContext(ni);return t?kT():gT()}function gT(){cl()||Rn(!1);let t=h.useContext(jm),{basename:n,future:s,navigator:a}=h.useContext(ll),{matches:o}=h.useContext(ni),{pathname:c}=Qi(),d=JSON.stringify(xw(o,s.v7_relativeSplatPath)),f=h.useRef(!1);return jw(()=>{f.current=!0}),h.useCallback(function(x,m){if(m===void 0&&(m={}),!f.current)return;if(typeof x=="number"){a.go(x);return}let v=vw(x,JSON.parse(d),c,m.relative==="path");t==null&&n!=="/"&&(v.pathname=v.pathname==="/"?n:Ka([n,v.pathname])),(m.replace?a.replace:a.push)(v,m.state,m)},[n,a,d,c,t])}function xT(t,n){return vT(t,n)}function vT(t,n,s,a){cl()||Rn(!1);let{navigator:o}=h.useContext(ll),{matches:c}=h.useContext(ni),d=c[c.length-1],f=d?d.params:{};d&&d.pathname;let p=d?d.pathnameBase:"/";d&&d.route;let x=Qi(),m;if(n){var v;let S=typeof n=="string"?Ki(n):n;p==="/"||(v=S.pathname)!=null&&v.startsWith(p)||Rn(!1),m=S}else m=x;let C=m.pathname||"/",w=C;if(p!=="/"){let S=p.replace(/^\//,"").split("/");w="/"+C.replace(/^\//,"").split("/").slice(S.length).join("/")}let _=qE(t,{pathname:w}),b=NT(_&&_.map(S=>Object.assign({},S,{params:Object.assign({},f,S.params),pathname:Ka([p,o.encodeLocation?o.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?p:Ka([p,o.encodeLocation?o.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),c,s,a);return n&&b?h.createElement(Pd.Provider,{value:{location:Qo({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:va.Pop}},b):b}function yT(){let t=PT(),n=hT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},n),s?h.createElement("pre",{style:o},s):null,null)}const wT=h.createElement(yT,null);class jT extends h.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,s){return s.location!==n.location||s.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:s.error,location:s.location,revalidation:n.revalidation||s.revalidation}}componentDidCatch(n,s){console.error("React Router caught the following error during render",n,s)}render(){return this.state.error!==void 0?h.createElement(ni.Provider,{value:this.props.routeContext},h.createElement(ww.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bT(t){let{routeContext:n,match:s,children:a}=t,o=h.useContext(jm);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),h.createElement(ni.Provider,{value:n},a)}function NT(t,n,s,a){var o;if(n===void 0&&(n=[]),s===void 0&&(s=null),a===void 0&&(a=null),t==null){var c;if(!s)return null;if(s.errors)t=s.matches;else if((c=a)!=null&&c.v7_partialHydration&&n.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let d=t,f=(o=s)==null?void 0:o.errors;if(f!=null){let m=d.findIndex(v=>v.route.id&&f?.[v.route.id]!==void 0);m>=0||Rn(!1),d=d.slice(0,Math.min(d.length,m+1))}let p=!1,x=-1;if(s&&a&&a.v7_partialHydration)for(let m=0;m<d.length;m++){let v=d[m];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(x=m),v.route.id){let{loaderData:C,errors:w}=s,_=v.route.loader&&C[v.route.id]===void 0&&(!w||w[v.route.id]===void 0);if(v.route.lazy||_){p=!0,x>=0?d=d.slice(0,x+1):d=[d[0]];break}}}return d.reduceRight((m,v,C)=>{let w,_=!1,b=null,S=null;s&&(w=f&&v.route.id?f[v.route.id]:void 0,b=v.route.errorElement||wT,p&&(x<0&&C===0?(ET("route-fallback"),_=!0,S=null):x===C&&(_=!0,S=v.route.hydrateFallbackElement||null)));let E=n.concat(d.slice(0,C+1)),P=()=>{let N;return w?N=b:_?N=S:v.route.Component?N=h.createElement(v.route.Component,null):v.route.element?N=v.route.element:N=m,h.createElement(bT,{match:v,routeContext:{outlet:m,matches:E,isDataRoute:s!=null},children:N})};return s&&(v.route.ErrorBoundary||v.route.errorElement||C===0)?h.createElement(jT,{location:s.location,revalidation:s.revalidation,component:b,error:w,children:P(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):P()},null)}var bw=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(bw||{}),Nw=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(Nw||{});function _T(t){let n=h.useContext(jm);return n||Rn(!1),n}function ST(t){let n=h.useContext(pT);return n||Rn(!1),n}function CT(t){let n=h.useContext(ni);return n||Rn(!1),n}function _w(t){let n=CT(),s=n.matches[n.matches.length-1];return s.route.id||Rn(!1),s.route.id}function PT(){var t;let n=h.useContext(ww),s=ST(),a=_w();return n!==void 0?n:(t=s.errors)==null?void 0:t[a]}function kT(){let{router:t}=_T(bw.UseNavigateStable),n=_w(Nw.UseNavigateStable),s=h.useRef(!1);return jw(()=>{s.current=!0}),h.useCallback(function(o,c){c===void 0&&(c={}),s.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,Qo({fromRouteId:n},c)))},[t,n])}const Sv={};function ET(t,n,s){Sv[t]||(Sv[t]=!0)}function TT(t,n){t?.v7_startTransition,t?.v7_relativeSplatPath}function Cv(t){let{to:n,replace:s,state:a,relative:o}=t;cl()||Rn(!1);let{future:c,static:d}=h.useContext(ll),{matches:f}=h.useContext(ni),{pathname:p}=Qi(),x=si(),m=vw(n,xw(f,c.v7_relativeSplatPath),p,o==="path"),v=JSON.stringify(m);return h.useEffect(()=>x(JSON.parse(v),{replace:s,state:a,relative:o}),[x,v,o,s,a]),null}function ls(t){Rn(!1)}function DT(t){let{basename:n="/",children:s=null,location:a,navigationType:o=va.Pop,navigator:c,static:d=!1,future:f}=t;cl()&&Rn(!1);let p=n.replace(/^\/*/,"/"),x=h.useMemo(()=>({basename:p,navigator:c,static:d,future:Qo({v7_relativeSplatPath:!1},f)}),[p,f,c,d]);typeof a=="string"&&(a=Ki(a));let{pathname:m="/",search:v="",hash:C="",state:w=null,key:_="default"}=a,b=h.useMemo(()=>{let S=gw(m,p);return S==null?null:{location:{pathname:S,search:v,hash:C,state:w,key:_},navigationType:o}},[p,m,v,C,w,_,o]);return b==null?null:h.createElement(ll.Provider,{value:x},h.createElement(Pd.Provider,{children:s,value:b}))}function RT(t){let{children:n,location:s}=t;return xT(kh(n),s)}new Promise(()=>{});function kh(t,n){n===void 0&&(n=[]);let s=[];return h.Children.forEach(t,(a,o)=>{if(!h.isValidElement(a))return;let c=[...n,o];if(a.type===h.Fragment){s.push.apply(s,kh(a.props.children,c));return}a.type!==ls&&Rn(!1),!a.props.index||!a.props.children||Rn(!1);let d={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=kh(a.props.children,c)),s.push(d)}),s}function Eh(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((n,s)=>{let a=t[s];return n.concat(Array.isArray(a)?a.map(o=>[s,o]):[[s,a]])},[]))}function AT(t,n){let s=Eh(t);return n&&n.forEach((a,o)=>{s.has(o)||n.getAll(o).forEach(c=>{s.append(o,c)})}),s}const OT="6";try{window.__reactRouterVersion=OT}catch{}const MT="startTransition",Pv=Bh[MT];function FT(t){let{basename:n,children:s,future:a,window:o}=t,c=h.useRef();c.current==null&&(c.current=WE({window:o,v5Compat:!0}));let d=c.current,[f,p]=h.useState({action:d.action,location:d.location}),{v7_startTransition:x}=a||{},m=h.useCallback(v=>{x&&Pv?Pv(()=>p(v)):p(v)},[p,x]);return h.useLayoutEffect(()=>d.listen(m),[d,m]),h.useEffect(()=>TT(a),[a]),h.createElement(DT,{basename:n,children:s,location:f.location,navigationType:f.action,navigator:d,future:a})}var kv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kv||(kv={}));var Ev;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ev||(Ev={}));function IT(t){let n=h.useRef(Eh(t)),s=h.useRef(!1),a=Qi(),o=h.useMemo(()=>AT(a.search,s.current?null:n.current),[a.search]),c=si(),d=h.useCallback((f,p)=>{const x=Eh(typeof f=="function"?f(o):f);s.current=!0,c("?"+x,p)},[c,o]);return[o,d]}const Sw=h.createContext(void 0),LT=({children:t})=>{const[n,s]=h.useState(null),[a,o]=h.useState(null),[c,d]=h.useState([]),[f,p]=h.useState(null),[x,m]=h.useState(!0),[v,C]=h.useState(!1),w=si();h.useEffect(()=>{(async()=>{try{console.log("Checking for existing session...");const A=localStorage.getItem("auth_token");if(console.log("Auth token found:",!!A),A)try{console.log("Verifying token and fetching user profile...");const{data:D}=await Promise.race([q.get("/auth/me"),new Promise((U,R)=>setTimeout(()=>R(new Error("Request timeout - backend not responding")),3e3))]);if(console.log("User profile data received:",D),D&&D.user){const U=D.user.role,R={id:D.user.id,email:D.user.email,user_metadata:{full_name:D.user.name,role:U}},L={access_token:A,user:R};s(R),o(L),d([U]),p(U),C(!0)}else console.log("Invalid token, removing from localStorage"),localStorage.removeItem("auth_token"),C(!0)}catch(D){console.error("Session check failed:",D),console.error("Error message:",D.message),localStorage.removeItem("auth_token"),s(null),o(null),d([]),p(null),C(!0)}else console.log("No auth token found, setting rolesLoaded to true"),C(!0)}catch(A){console.error("Unexpected error in checkSession:",A),C(!0)}finally{console.log("Setting loading to false"),m(!1)}})()},[]);const _=async(N,A)=>{try{console.log("Attempting login with email:",N);const{data:D}=await q.post("/auth/login",{email:N,password:A});if(console.log("Login response:",D),D&&D.token){localStorage.setItem("auth_token",D.token);const U=D.user.role,R={id:D.user.id,email:D.user.email,user_metadata:{full_name:D.user.name,role:U}},L={access_token:D.token,user:R};return s(R),o(L),d([U]),p(U),C(!0),console.log("Login successful, user:",R),{error:null}}return console.log("Login failed: no token in response"),{error:{message:"Login failed"}}}catch(D){return console.error("Sign in error:",D),console.error("Error response:",D.response?.data),console.error("Error status:",D.response?.status),C(!0),{error:{message:D.response?.data?.error||"Invalid email or password"}}}},b=async(N,A,D,U)=>{try{const{data:R}=await q.post("/auth/register",{email:N,password:A,full_name:D,phone:U});return R&&R.success?{error:null}:{error:{message:"Registration failed"}}}catch(R){return console.error("Sign up error:",R),{error:{message:R.response?.data?.message||"Registration failed"}}}},S=async()=>{localStorage.removeItem("auth_token"),s(null),o(null),d([]),p(null),w("/auth")},E=async()=>{if(n)try{const{data:N}=await q.get("/auth/me");if(N&&N.user){const A=N.user.role;d([A]),p(A)}}catch(N){console.error("Failed to refresh roles:",N)}},P=N=>c.includes(N);return e.jsx(Sw.Provider,{value:{user:n,session:a,roles:c,primaryRole:f,loading:x,rolesLoaded:v,signIn:_,signUp:b,signOut:S,hasRole:P,refreshRoles:E},children:t})},Ys=()=>{const t=h.useContext(Sw);return t===void 0?{user:null,session:null,roles:[],primaryRole:null,loading:!0,rolesLoaded:!1,signIn:async()=>({error:null}),signUp:async()=>({error:null}),signOut:async()=>{},hasRole:()=>!1,refreshRoles:async()=>{}}:t},tr=({children:t,requiredRole:n})=>{const{user:s,loading:a,rolesLoaded:o,hasRole:c}=Ys();return a||!o?e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary"})}):s?n&&!c(n)?e.jsx(Cv,{to:"/",replace:!0}):e.jsx(e.Fragment,{children:t}):e.jsx(Cv,{to:"/auth",replace:!0})},$T=()=>{const{user:t,primaryRole:n,roles:s,loading:a,rolesLoaded:o}=Ys(),c=si(),[d,f]=h.useState(0);return h.useEffect(()=>{if(!a){if(d>3){c(t?"/patient":"/auth");return}if(!t){c("/auth");return}if(!o){const p=setTimeout(()=>{console.log(`Roles still loading, retry attempt ${d+1}...`),f(x=>x+1)},500);return()=>clearTimeout(p)}n?c({admin:"/admin",doctor:"/doctor",nurse:"/nurse",receptionist:"/receptionist",lab_tech:"/lab",pharmacist:"/pharmacy",billing:"/billing",patient:"/patient"}[n]||"/patient"):s&&s.length>0?s.includes("admin")?c("/admin"):s.includes("doctor")?c("/doctor"):s.includes("nurse")?c("/nurse"):s.includes("receptionist")?c("/receptionist"):s.includes("lab_tech")?c("/lab"):s.includes("pharmacist")?c("/pharmacy"):s.includes("billing")?c("/billing"):c("/patient"):c("/patient")}},[t,n,s,a,o,c,d]),e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-primary/5 via-background to-secondary/5",children:e.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary"})})},Th=cd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),G=h.forwardRef(({className:t,variant:n,size:s,asChild:a=!1,...o},c)=>{const d=a?U_:"button";return e.jsx(d,{className:ht(Th({variant:n,size:s,className:t})),ref:c,...o})});G.displayName="Button";const ke=h.forwardRef(({className:t,type:n,...s},a)=>e.jsx("input",{type:n,className:ht("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...s}));ke.displayName="Input";var BT="Label",Cw=h.forwardRef((t,n)=>e.jsx(jt.label,{...t,ref:n,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(t.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));Cw.displayName=BT;var Pw=Cw;const UT=cd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Z=h.forwardRef(({className:t,...n},s)=>e.jsx(Pw,{ref:s,className:ht(UT(),t),...n}));Z.displayName=Pw.displayName;const Ce=h.forwardRef(({className:t,...n},s)=>e.jsx("div",{ref:s,className:ht("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n}));Ce.displayName="Card";const Re=h.forwardRef(({className:t,...n},s)=>e.jsx("div",{ref:s,className:ht("flex flex-col space-y-1.5 p-6",t),...n}));Re.displayName="CardHeader";const Oe=h.forwardRef(({className:t,...n},s)=>e.jsx("h3",{ref:s,className:ht("text-2xl font-semibold leading-none tracking-tight",t),...n}));Oe.displayName="CardTitle";const kt=h.forwardRef(({className:t,...n},s)=>e.jsx("p",{ref:s,className:ht("text-sm text-muted-foreground",t),...n}));kt.displayName="CardDescription";const De=h.forwardRef(({className:t,...n},s)=>e.jsx("div",{ref:s,className:ht("p-6 pt-0",t),...n}));De.displayName="CardContent";const zT=h.forwardRef(({className:t,...n},s)=>e.jsx("div",{ref:s,className:ht("flex items-center p-6 pt-0",t),...n}));zT.displayName="CardFooter";var WT=h.createContext(void 0);function bm(t){const n=h.useContext(WT);return t||n||"ltr"}var Wf="rovingFocusGroup.onEntryFocus",VT={bubbles:!1,cancelable:!0},dl="RovingFocusGroup",[Dh,kw,HT]=Uh(dl),[qT,Ew]=Cr(dl,[HT]),[YT,KT]=qT(dl),Tw=h.forwardRef((t,n)=>e.jsx(Dh.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Dh.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(QT,{...t,ref:n})})}));Tw.displayName=dl;var QT=h.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:s,orientation:a,loop:o=!1,dir:c,currentTabStopId:d,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:p,onEntryFocus:x,preventScrollOnEntryFocus:m=!1,...v}=t,C=h.useRef(null),w=Gt(n,C),_=bm(c),[b,S]=_a({prop:d,defaultProp:f??null,onChange:p,caller:dl}),[E,P]=h.useState(!1),N=qs(x),A=kw(s),D=h.useRef(!1),[U,R]=h.useState(0);return h.useEffect(()=>{const L=C.current;if(L)return L.addEventListener(Wf,N),()=>L.removeEventListener(Wf,N)},[N]),e.jsx(YT,{scope:s,orientation:a,dir:_,loop:o,currentTabStopId:b,onItemFocus:h.useCallback(L=>S(L),[S]),onItemShiftTab:h.useCallback(()=>P(!0),[]),onFocusableItemAdd:h.useCallback(()=>R(L=>L+1),[]),onFocusableItemRemove:h.useCallback(()=>R(L=>L-1),[]),children:e.jsx(jt.div,{tabIndex:E||U===0?-1:0,"data-orientation":a,...v,ref:w,style:{outline:"none",...t.style},onMouseDown:at(t.onMouseDown,()=>{D.current=!0}),onFocus:at(t.onFocus,L=>{const pe=!D.current;if(L.target===L.currentTarget&&pe&&!E){const ee=new CustomEvent(Wf,VT);if(L.currentTarget.dispatchEvent(ee),!ee.defaultPrevented){const ve=A().filter(fe=>fe.focusable),ge=ve.find(fe=>fe.active),V=ve.find(fe=>fe.id===b),we=[ge,V,...ve].filter(Boolean).map(fe=>fe.ref.current);Aw(we,m)}}D.current=!1}),onBlur:at(t.onBlur,()=>P(!1))})})}),Dw="RovingFocusGroupItem",Rw=h.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:s,focusable:a=!0,active:o=!1,tabStopId:c,children:d,...f}=t,p=Ur(),x=c||p,m=KT(Dw,s),v=m.currentTabStopId===x,C=kw(s),{onFocusableItemAdd:w,onFocusableItemRemove:_,currentTabStopId:b}=m;return h.useEffect(()=>{if(a)return w(),()=>_()},[a,w,_]),e.jsx(Dh.ItemSlot,{scope:s,id:x,focusable:a,active:o,children:e.jsx(jt.span,{tabIndex:v?0:-1,"data-orientation":m.orientation,...f,ref:n,onMouseDown:at(t.onMouseDown,S=>{a?m.onItemFocus(x):S.preventDefault()}),onFocus:at(t.onFocus,()=>m.onItemFocus(x)),onKeyDown:at(t.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){m.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const E=JT(S,m.orientation,m.dir);if(E!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let N=C().filter(A=>A.focusable).map(A=>A.ref.current);if(E==="last")N.reverse();else if(E==="prev"||E==="next"){E==="prev"&&N.reverse();const A=N.indexOf(S.currentTarget);N=m.loop?ZT(N,A+1):N.slice(A+1)}setTimeout(()=>Aw(N))}}),children:typeof d=="function"?d({isCurrentTabStop:v,hasTabStop:b!=null}):d})})});Rw.displayName=Dw;var GT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function XT(t,n){return n!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function JT(t,n,s){const a=XT(t.key,s);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return GT[a]}function Aw(t,n=!1){const s=document.activeElement;for(const a of t)if(a===s||(a.focus({preventScroll:n}),document.activeElement!==s))return}function ZT(t,n){return t.map((s,a)=>t[(n+a)%t.length])}var eD=Tw,tD=Rw,kd="Tabs",[nD]=Cr(kd,[Ew]),Ow=Ew(),[sD,Nm]=nD(kd),Mw=h.forwardRef((t,n)=>{const{__scopeTabs:s,value:a,onValueChange:o,defaultValue:c,orientation:d="horizontal",dir:f,activationMode:p="automatic",...x}=t,m=bm(f),[v,C]=_a({prop:a,onChange:o,defaultProp:c??"",caller:kd});return e.jsx(sD,{scope:s,baseId:Ur(),value:v,onValueChange:C,orientation:d,dir:m,activationMode:p,children:e.jsx(jt.div,{dir:m,"data-orientation":d,...x,ref:n})})});Mw.displayName=kd;var Fw="TabsList",Iw=h.forwardRef((t,n)=>{const{__scopeTabs:s,loop:a=!0,...o}=t,c=Nm(Fw,s),d=Ow(s);return e.jsx(eD,{asChild:!0,...d,orientation:c.orientation,dir:c.dir,loop:a,children:e.jsx(jt.div,{role:"tablist","aria-orientation":c.orientation,...o,ref:n})})});Iw.displayName=Fw;var Lw="TabsTrigger",$w=h.forwardRef((t,n)=>{const{__scopeTabs:s,value:a,disabled:o=!1,...c}=t,d=Nm(Lw,s),f=Ow(s),p=zw(d.baseId,a),x=Ww(d.baseId,a),m=a===d.value;return e.jsx(tD,{asChild:!0,...f,focusable:!o,active:m,children:e.jsx(jt.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":x,"data-state":m?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:p,...c,ref:n,onMouseDown:at(t.onMouseDown,v=>{!o&&v.button===0&&v.ctrlKey===!1?d.onValueChange(a):v.preventDefault()}),onKeyDown:at(t.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&d.onValueChange(a)}),onFocus:at(t.onFocus,()=>{const v=d.activationMode!=="manual";!m&&!o&&v&&d.onValueChange(a)})})})});$w.displayName=Lw;var Bw="TabsContent",Uw=h.forwardRef((t,n)=>{const{__scopeTabs:s,value:a,forceMount:o,children:c,...d}=t,f=Nm(Bw,s),p=zw(f.baseId,a),x=Ww(f.baseId,a),m=a===f.value,v=h.useRef(m);return h.useEffect(()=>{const C=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(C)},[]),e.jsx(Pr,{present:o||m,children:({present:C})=>e.jsx(jt.div,{"data-state":m?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":p,hidden:!C,id:x,tabIndex:0,...d,ref:n,style:{...t.style,animationDuration:v.current?"0s":void 0},children:C&&c})})});Uw.displayName=Bw;function zw(t,n){return`${t}-trigger-${n}`}function Ww(t,n){return`${t}-content-${n}`}var rD=Mw,Vw=Iw,Hw=$w,qw=Uw;const Va=rD,ya=h.forwardRef(({className:t,...n},s)=>e.jsx(Vw,{ref:s,className:ht("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...n}));ya.displayName=Vw.displayName;const Un=h.forwardRef(({className:t,...n},s)=>e.jsx(Hw,{ref:s,className:ht("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...n}));Un.displayName=Hw.displayName;const zn=h.forwardRef(({className:t,...n},s)=>e.jsx(qw,{ref:s,className:ht("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n}));zn.displayName=qw.displayName;const _m=({size:t="md",showText:n=!0,className:s=""})=>{const a={sm:"h-8 w-8",md:"h-12 w-12",lg:"h-16 w-16",xl:"h-24 w-24"},o={sm:"text-lg",md:"text-2xl",lg:"text-3xl",xl:"text-4xl"};return e.jsxs("div",{className:`flex items-center gap-3 ${s}`,children:[e.jsx("div",{className:`${a[t]} flex-shrink-0`,children:e.jsxs("svg",{viewBox:"0 0 1024 1024",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[e.jsx("circle",{cx:"512",cy:"512",r:"450",stroke:"#2D7A5F",strokeWidth:"40",fill:"none"}),e.jsx("path",{d:"M314 226H490V402H666V578H490V754H314V578H138V402H314V226Z",fill:"#1A5A42"}),e.jsx("path",{d:"M320 240C320 240 380 340 420 440C460 540 480 640 520 740",stroke:"#EF4444",strokeWidth:"30",strokeLinecap:"round",fill:"none"}),e.jsx("path",{d:"M612 440L662 340L712 540L762 240L812 440L862 440",stroke:"#EF4444",strokeWidth:"35",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),e.jsx("rect",{x:"180",y:"700",width:"664",height:"140",rx:"70",fill:"#EF4444"}),e.jsx("text",{x:"512",y:"800",fontFamily:"Arial, sans-serif",fontSize:"120",fontWeight:"bold",fill:"white",textAnchor:"middle",dominantBaseline:"middle",children:"HASET"})]})}),n&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-bold text-gray-900 ${o[t]} leading-tight`,children:"HASET"}),e.jsx("span",{className:"text-xs text-gray-600 uppercase tracking-wide",children:"Hospital Management"})]})]})};function aD(){const[t,n]=h.useState(!1),{signIn:s,signUp:a,user:o,loading:c}=Ys(),d=si(),f=Qi();h.useEffect(()=>{if(o){const m=f.state?.from?.pathname||"/";d(m,{replace:!0})}},[o,d,f]);const p=async m=>{m.preventDefault(),n(!0);const v=new FormData(m.currentTarget),C=v.get("email"),w=v.get("password"),{error:_}=await s(C,w);_?(I.error(_.message||"Failed to sign in"),n(!1)):I.success("Welcome back!")},x=async m=>{m.preventDefault(),n(!0);const v=new FormData(m.currentTarget),C=v.get("email"),w=v.get("password"),_=v.get("fullName"),b=v.get("phone"),{error:S}=await a(C,w,_,b);S?(I.error(S.message||"Failed to sign up"),n(!1)):I.success("Account created successfully!")};return c?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-primary/5 via-background to-secondary/5",children:e.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-primary/5 via-background to-secondary/5 p-4",children:e.jsxs(Ce,{className:"w-full max-w-md shadow-xl border-primary/10",children:[e.jsxs(Re,{className:"space-y-1 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(_m,{size:"lg",showText:!0,className:"justify-center"})}),e.jsx(kt,{className:"text-base",children:"Professional healthcare management system"})]}),e.jsx(De,{children:e.jsxs(Va,{defaultValue:"signin",className:"w-full",children:[e.jsxs(ya,{className:"grid w-full grid-cols-2",children:[e.jsx(Un,{value:"signin",children:"Sign In"}),e.jsx(Un,{value:"signup",children:"Sign Up"})]}),e.jsx(zn,{value:"signin",children:e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"signin-email",children:"Email"}),e.jsx(ke,{id:"signin-email",name:"email",type:"email",placeholder:"doctor@hospital.com",required:!0,disabled:t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"signin-password",children:"Password"}),e.jsx(ke,{id:"signin-password",name:"password",type:"password",required:!0,disabled:t})]}),e.jsx(G,{type:"submit",className:"w-full",disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})}),e.jsx(zn,{value:"signup",children:e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"signup-name",children:"Full Name"}),e.jsx(ke,{id:"signup-name",name:"fullName",type:"text",placeholder:"Dr. John Smith",required:!0,disabled:t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"signup-email",children:"Email"}),e.jsx(ke,{id:"signup-email",name:"email",type:"email",placeholder:"doctor@hospital.com",required:!0,disabled:t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"signup-phone",children:"Phone (Optional)"}),e.jsx(ke,{id:"signup-phone",name:"phone",type:"tel",placeholder:"+1 (555) 000-0000",disabled:t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"signup-password",children:"Password"}),e.jsx(ke,{id:"signup-password",name:"password",type:"password",required:!0,disabled:t})]}),e.jsx(G,{type:"submit",className:"w-full",disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Sign Up"})]})})]})})]})})}const iD="modulepreload",oD=function(t){return"/"+t},Tv={},lD=function(n,s,a){let o=Promise.resolve();if(s&&s.length>0){let p=function(x){return Promise.all(x.map(m=>Promise.resolve(m).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=d?.nonce||d?.getAttribute("nonce");o=p(s.map(x=>{if(x=oD(x),x in Tv)return;Tv[x]=!0;const m=x.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${v}`))return;const C=document.createElement("link");if(C.rel=m?"stylesheet":iD,m||(C.as="script"),C.crossOrigin="",C.href=x,f&&C.setAttribute("nonce",f),document.head.appendChild(C),m)return new Promise((w,_)=>{C.addEventListener("load",w),C.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${x}`)))})}))}function c(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return o.then(d=>{for(const f of d||[])f.status==="rejected"&&c(f.reason);return n().catch(c)})};function Wt(t){const n=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&n==="[object Date]"?new t.constructor(+t):typeof t=="number"||n==="[object Number]"||typeof t=="string"||n==="[object String]"?new Date(t):new Date(NaN)}function fs(t,n){return t instanceof Date?new t.constructor(n):new Date(n)}function Zn(t,n){const s=Wt(t);return isNaN(n)?fs(t,NaN):(n&&s.setDate(s.getDate()+n),s)}function lr(t,n){const s=Wt(t);if(isNaN(n))return fs(t,NaN);if(!n)return s;const a=s.getDate(),o=fs(t,s.getTime());o.setMonth(s.getMonth()+n+1,0);const c=o.getDate();return a>=c?o:(s.setFullYear(o.getFullYear(),o.getMonth(),a),s)}function cD(t,n){const s=+Wt(t);return fs(t,s+n)}const Sm=6048e5,dD=864e5,uD=6e4;let fD={};function ul(){return fD}function us(t,n){const s=ul(),a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,o=Wt(t),c=o.getDay(),d=(c<a?7:0)+c-a;return o.setDate(o.getDate()-d),o.setHours(0,0,0,0),o}function Ja(t){return us(t,{weekStartsOn:1})}function Yw(t){const n=Wt(t),s=n.getFullYear(),a=fs(t,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const o=Ja(a),c=fs(t,0);c.setFullYear(s,0,4),c.setHours(0,0,0,0);const d=Ja(c);return n.getTime()>=o.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function As(t){const n=Wt(t);return n.setHours(0,0,0,0),n}function td(t){const n=Wt(t),s=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return s.setUTCFullYear(n.getFullYear()),+t-+s}function wr(t,n){const s=As(t),a=As(n),o=+s-td(s),c=+a-td(a);return Math.round((o-c)/dD)}function hD(t){const n=Yw(t),s=fs(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),Ja(s)}function Dv(t,n){return cD(t,n*uD)}function Rh(t,n){const s=n*7;return Zn(t,s)}function mD(t,n){return lr(t,n*12)}function pD(t){let n;return t.forEach(function(s){const a=Wt(s);(n===void 0||n<a||isNaN(Number(a)))&&(n=a)}),n||new Date(NaN)}function gD(t){let n;return t.forEach(s=>{const a=Wt(s);(!n||n>a||isNaN(+a))&&(n=a)}),n||new Date(NaN)}function xD(t){return fs(t,Date.now())}function ds(t,n){const s=As(t),a=As(n);return+s==+a}function Cm(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function vD(t){if(!Cm(t)&&typeof t!="number")return!1;const n=Wt(t);return!isNaN(Number(n))}function Go(t,n){const s=Wt(t),a=Wt(n),o=s.getFullYear()-a.getFullYear(),c=s.getMonth()-a.getMonth();return o*12+c}function yD(t,n,s){const a=us(t,s),o=us(n,s),c=+a-td(a),d=+o-td(o);return Math.round((c-d)/Sm)}function Ha(t){const n=Wt(t);return n.setHours(23,59,59,999),n}function ja(t){const n=Wt(t),s=n.getMonth();return n.setFullYear(n.getFullYear(),s+1,0),n.setHours(23,59,59,999),n}function Fn(t){const n=Wt(t);return n.setDate(1),n.setHours(0,0,0,0),n}function Kw(t){const n=Wt(t),s=fs(t,0);return s.setFullYear(n.getFullYear(),0,1),s.setHours(0,0,0,0),s}function ba(t,n){const s=ul(),a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,o=Wt(t),c=o.getDay(),d=(c<a?-7:0)+6-(c-a);return o.setDate(o.getDate()+d),o.setHours(23,59,59,999),o}function Qw(t){return ba(t,{weekStartsOn:1})}const wD={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jD=(t,n,s)=>{let a;const o=wD[t];return typeof o=="string"?a=o:n===1?a=o.one:a=o.other.replace("{{count}}",n.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"in "+a:a+" ago":a};function Vf(t){return(n={})=>{const s=n.width?String(n.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const bD={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ND={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_D={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},SD={date:Vf({formats:bD,defaultWidth:"full"}),time:Vf({formats:ND,defaultWidth:"full"}),dateTime:Vf({formats:_D,defaultWidth:"full"})},CD={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},PD=(t,n,s,a)=>CD[t];function Fo(t){return(n,s)=>{const a=s?.context?String(s.context):"standalone";let o;if(a==="formatting"&&t.formattingValues){const d=t.defaultFormattingWidth||t.defaultWidth,f=s?.width?String(s.width):d;o=t.formattingValues[f]||t.formattingValues[d]}else{const d=t.defaultWidth,f=s?.width?String(s.width):t.defaultWidth;o=t.values[f]||t.values[d]}const c=t.argumentCallback?t.argumentCallback(n):n;return o[c]}}const kD={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ED={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},TD={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},DD={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},RD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},AD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},OD=(t,n)=>{const s=Number(t),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},MD={ordinalNumber:OD,era:Fo({values:kD,defaultWidth:"wide"}),quarter:Fo({values:ED,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Fo({values:TD,defaultWidth:"wide"}),day:Fo({values:DD,defaultWidth:"wide"}),dayPeriod:Fo({values:RD,defaultWidth:"wide",formattingValues:AD,defaultFormattingWidth:"wide"})};function Io(t){return(n,s={})=>{const a=s.width,o=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],c=n.match(o);if(!c)return null;const d=c[0],f=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(f)?ID(f,v=>v.test(d)):FD(f,v=>v.test(d));let x;x=t.valueCallback?t.valueCallback(p):p,x=s.valueCallback?s.valueCallback(x):x;const m=n.slice(d.length);return{value:x,rest:m}}}function FD(t,n){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&n(t[s]))return s}function ID(t,n){for(let s=0;s<t.length;s++)if(n(t[s]))return s}function LD(t){return(n,s={})=>{const a=n.match(t.matchPattern);if(!a)return null;const o=a[0],c=n.match(t.parsePattern);if(!c)return null;let d=t.valueCallback?t.valueCallback(c[0]):c[0];d=s.valueCallback?s.valueCallback(d):d;const f=n.slice(o.length);return{value:d,rest:f}}}const $D=/^(\d+)(th|st|nd|rd)?/i,BD=/\d+/i,UD={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},zD={any:[/^b/i,/^(a|c)/i]},WD={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},VD={any:[/1/i,/2/i,/3/i,/4/i]},HD={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qD={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},YD={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},KD={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},QD={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},GD={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},XD={ordinalNumber:LD({matchPattern:$D,parsePattern:BD,valueCallback:t=>parseInt(t,10)}),era:Io({matchPatterns:UD,defaultMatchWidth:"wide",parsePatterns:zD,defaultParseWidth:"any"}),quarter:Io({matchPatterns:WD,defaultMatchWidth:"wide",parsePatterns:VD,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Io({matchPatterns:HD,defaultMatchWidth:"wide",parsePatterns:qD,defaultParseWidth:"any"}),day:Io({matchPatterns:YD,defaultMatchWidth:"wide",parsePatterns:KD,defaultParseWidth:"any"}),dayPeriod:Io({matchPatterns:QD,defaultMatchWidth:"any",parsePatterns:GD,defaultParseWidth:"any"})},Gw={code:"en-US",formatDistance:jD,formatLong:SD,formatRelative:PD,localize:MD,match:XD,options:{weekStartsOn:0,firstWeekContainsDate:1}};function JD(t){const n=Wt(t);return wr(n,Kw(n))+1}function Xw(t){const n=Wt(t),s=+Ja(n)-+hD(n);return Math.round(s/Sm)+1}function Jw(t,n){const s=Wt(t),a=s.getFullYear(),o=ul(),c=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,d=fs(t,0);d.setFullYear(a+1,0,c),d.setHours(0,0,0,0);const f=us(d,n),p=fs(t,0);p.setFullYear(a,0,c),p.setHours(0,0,0,0);const x=us(p,n);return s.getTime()>=f.getTime()?a+1:s.getTime()>=x.getTime()?a:a-1}function ZD(t,n){const s=ul(),a=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=Jw(t,n),c=fs(t,0);return c.setFullYear(o,0,a),c.setHours(0,0,0,0),us(c,n)}function Zw(t,n){const s=Wt(t),a=+us(s,n)-+ZD(s,n);return Math.round(a/Sm)+1}function Zt(t,n){const s=t<0?"-":"",a=Math.abs(t).toString().padStart(n,"0");return s+a}const ma={y(t,n){const s=t.getFullYear(),a=s>0?s:1-s;return Zt(n==="yy"?a%100:a,n.length)},M(t,n){const s=t.getMonth();return n==="M"?String(s+1):Zt(s+1,2)},d(t,n){return Zt(t.getDate(),n.length)},a(t,n){const s=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(t,n){return Zt(t.getHours()%12||12,n.length)},H(t,n){return Zt(t.getHours(),n.length)},m(t,n){return Zt(t.getMinutes(),n.length)},s(t,n){return Zt(t.getSeconds(),n.length)},S(t,n){const s=n.length,a=t.getMilliseconds(),o=Math.trunc(a*Math.pow(10,s-3));return Zt(o,n.length)}},Ci={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Rv={G:function(t,n,s){const a=t.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});case"GGGG":default:return s.era(a,{width:"wide"})}},y:function(t,n,s){if(n==="yo"){const a=t.getFullYear(),o=a>0?a:1-a;return s.ordinalNumber(o,{unit:"year"})}return ma.y(t,n)},Y:function(t,n,s,a){const o=Jw(t,a),c=o>0?o:1-o;if(n==="YY"){const d=c%100;return Zt(d,2)}return n==="Yo"?s.ordinalNumber(c,{unit:"year"}):Zt(c,n.length)},R:function(t,n){const s=Yw(t);return Zt(s,n.length)},u:function(t,n){const s=t.getFullYear();return Zt(s,n.length)},Q:function(t,n,s){const a=Math.ceil((t.getMonth()+1)/3);switch(n){case"Q":return String(a);case"QQ":return Zt(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,n,s){const a=Math.ceil((t.getMonth()+1)/3);switch(n){case"q":return String(a);case"qq":return Zt(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,n,s){const a=t.getMonth();switch(n){case"M":case"MM":return ma.M(t,n);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(t,n,s){const a=t.getMonth();switch(n){case"L":return String(a+1);case"LL":return Zt(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(t,n,s,a){const o=Zw(t,a);return n==="wo"?s.ordinalNumber(o,{unit:"week"}):Zt(o,n.length)},I:function(t,n,s){const a=Xw(t);return n==="Io"?s.ordinalNumber(a,{unit:"week"}):Zt(a,n.length)},d:function(t,n,s){return n==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):ma.d(t,n)},D:function(t,n,s){const a=JD(t);return n==="Do"?s.ordinalNumber(a,{unit:"dayOfYear"}):Zt(a,n.length)},E:function(t,n,s){const a=t.getDay();switch(n){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});case"EEEE":default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(t,n,s,a){const o=t.getDay(),c=(o-a.weekStartsOn+8)%7||7;switch(n){case"e":return String(c);case"ee":return Zt(c,2);case"eo":return s.ordinalNumber(c,{unit:"day"});case"eee":return s.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(o,{width:"short",context:"formatting"});case"eeee":default:return s.day(o,{width:"wide",context:"formatting"})}},c:function(t,n,s,a){const o=t.getDay(),c=(o-a.weekStartsOn+8)%7||7;switch(n){case"c":return String(c);case"cc":return Zt(c,n.length);case"co":return s.ordinalNumber(c,{unit:"day"});case"ccc":return s.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(o,{width:"narrow",context:"standalone"});case"cccccc":return s.day(o,{width:"short",context:"standalone"});case"cccc":default:return s.day(o,{width:"wide",context:"standalone"})}},i:function(t,n,s){const a=t.getDay(),o=a===0?7:a;switch(n){case"i":return String(o);case"ii":return Zt(o,n.length);case"io":return s.ordinalNumber(o,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});case"iiii":default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(t,n,s){const o=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,n,s){const a=t.getHours();let o;switch(a===12?o=Ci.noon:a===0?o=Ci.midnight:o=a/12>=1?"pm":"am",n){case"b":case"bb":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,n,s){const a=t.getHours();let o;switch(a>=17?o=Ci.evening:a>=12?o=Ci.afternoon:a>=4?o=Ci.morning:o=Ci.night,n){case"B":case"BB":case"BBB":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,n,s){if(n==="ho"){let a=t.getHours()%12;return a===0&&(a=12),s.ordinalNumber(a,{unit:"hour"})}return ma.h(t,n)},H:function(t,n,s){return n==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):ma.H(t,n)},K:function(t,n,s){const a=t.getHours()%12;return n==="Ko"?s.ordinalNumber(a,{unit:"hour"}):Zt(a,n.length)},k:function(t,n,s){let a=t.getHours();return a===0&&(a=24),n==="ko"?s.ordinalNumber(a,{unit:"hour"}):Zt(a,n.length)},m:function(t,n,s){return n==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):ma.m(t,n)},s:function(t,n,s){return n==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):ma.s(t,n)},S:function(t,n){return ma.S(t,n)},X:function(t,n,s){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(n){case"X":return Ov(a);case"XXXX":case"XX":return za(a);case"XXXXX":case"XXX":default:return za(a,":")}},x:function(t,n,s){const a=t.getTimezoneOffset();switch(n){case"x":return Ov(a);case"xxxx":case"xx":return za(a);case"xxxxx":case"xxx":default:return za(a,":")}},O:function(t,n,s){const a=t.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Av(a,":");case"OOOO":default:return"GMT"+za(a,":")}},z:function(t,n,s){const a=t.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Av(a,":");case"zzzz":default:return"GMT"+za(a,":")}},t:function(t,n,s){const a=Math.trunc(t.getTime()/1e3);return Zt(a,n.length)},T:function(t,n,s){const a=t.getTime();return Zt(a,n.length)}};function Av(t,n=""){const s=t>0?"-":"+",a=Math.abs(t),o=Math.trunc(a/60),c=a%60;return c===0?s+String(o):s+String(o)+n+Zt(c,2)}function Ov(t,n){return t%60===0?(t>0?"-":"+")+Zt(Math.abs(t)/60,2):za(t,n)}function za(t,n=""){const s=t>0?"-":"+",a=Math.abs(t),o=Zt(Math.trunc(a/60),2),c=Zt(a%60,2);return s+o+n+c}const Mv=(t,n)=>{switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},ej=(t,n)=>{switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},eR=(t,n)=>{const s=t.match(/(P+)(p+)?/)||[],a=s[1],o=s[2];if(!o)return Mv(t,n);let c;switch(a){case"P":c=n.dateTime({width:"short"});break;case"PP":c=n.dateTime({width:"medium"});break;case"PPP":c=n.dateTime({width:"long"});break;case"PPPP":default:c=n.dateTime({width:"full"});break}return c.replace("{{date}}",Mv(a,n)).replace("{{time}}",ej(o,n))},tR={p:ej,P:eR},nR=/^D+$/,sR=/^Y+$/,rR=["D","DD","YY","YYYY"];function aR(t){return nR.test(t)}function iR(t){return sR.test(t)}function oR(t,n,s){const a=lR(t,n,s);if(console.warn(a),rR.includes(t))throw new RangeError(a)}function lR(t,n,s){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${n}\`) for formatting ${a} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const cR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,uR=/^'([^]*?)'?$/,fR=/''/g,hR=/[a-zA-Z]/;function Fe(t,n,s){const a=ul(),o=s?.locale??a.locale??Gw,c=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,d=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,f=Wt(t);if(!vD(f))throw new RangeError("Invalid time value");let p=n.match(dR).map(m=>{const v=m[0];if(v==="p"||v==="P"){const C=tR[v];return C(m,o.formatLong)}return m}).join("").match(cR).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const v=m[0];if(v==="'")return{isToken:!1,value:mR(m)};if(Rv[v])return{isToken:!0,value:m};if(v.match(hR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:m}});o.localize.preprocessor&&(p=o.localize.preprocessor(f,p));const x={firstWeekContainsDate:c,weekStartsOn:d,locale:o};return p.map(m=>{if(!m.isToken)return m.value;const v=m.value;(!s?.useAdditionalWeekYearTokens&&iR(v)||!s?.useAdditionalDayOfYearTokens&&aR(v))&&oR(v,n,String(t));const C=Rv[v[0]];return C(f,v,o.localize,x)}).join("")}function mR(t){const n=t.match(uR);return n?n[1].replace(fR,"'"):t}function pR(t){const n=Wt(t),s=n.getFullYear(),a=n.getMonth(),o=fs(t,0);return o.setFullYear(s,a+1,0),o.setHours(0,0,0,0),o.getDate()}function gR(t){return Math.trunc(+Wt(t)/1e3)}function xR(t){const n=Wt(t),s=n.getMonth();return n.setFullYear(n.getFullYear(),s+1,0),n.setHours(0,0,0,0),n}function vR(t,n){return yD(xR(t),Fn(t),n)+1}function nd(t,n){const s=Wt(t),a=Wt(n);return s.getTime()>a.getTime()}function Ti(t,n){const s=Wt(t),a=Wt(n);return+s<+a}function Pm(t,n){const s=Wt(t),a=Wt(n);return s.getFullYear()===a.getFullYear()&&s.getMonth()===a.getMonth()}function yR(t,n){const s=Wt(t),a=Wt(n);return s.getFullYear()===a.getFullYear()}function Cc(t){return ds(t,xD(t))}function Hf(t,n){return Zn(t,-n)}function qf(t,n){const s=Wt(t),a=s.getFullYear(),o=s.getDate(),c=fs(t,0);c.setFullYear(a,n,15),c.setHours(0,0,0,0);const d=pR(c);return s.setMonth(n,Math.min(o,d)),s}function Fv(t,n){const s=Wt(t);return isNaN(+s)?fs(t,NaN):(s.setFullYear(n),s)}var Yf=0;function km(){h.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Iv()),document.body.insertAdjacentElement("beforeend",t[1]??Iv()),Yf++,()=>{Yf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),Yf--}},[])}function Iv(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Kf="focusScope.autoFocusOnMount",Qf="focusScope.autoFocusOnUnmount",Lv={bubbles:!1,cancelable:!0},wR="FocusScope",Ed=h.forwardRef((t,n)=>{const{loop:s=!1,trapped:a=!1,onMountAutoFocus:o,onUnmountAutoFocus:c,...d}=t,[f,p]=h.useState(null),x=qs(o),m=qs(c),v=h.useRef(null),C=Gt(n,b=>p(b)),w=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(a){let b=function(N){if(w.paused||!f)return;const A=N.target;f.contains(A)?v.current=A:pa(v.current,{select:!0})},S=function(N){if(w.paused||!f)return;const A=N.relatedTarget;A!==null&&(f.contains(A)||pa(v.current,{select:!0}))},E=function(N){if(document.activeElement===document.body)for(const D of N)D.removedNodes.length>0&&pa(f)};document.addEventListener("focusin",b),document.addEventListener("focusout",S);const P=new MutationObserver(E);return f&&P.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",S),P.disconnect()}}},[a,f,w.paused]),h.useEffect(()=>{if(f){Bv.add(w);const b=document.activeElement;if(!f.contains(b)){const E=new CustomEvent(Kf,Lv);f.addEventListener(Kf,x),f.dispatchEvent(E),E.defaultPrevented||(jR(CR(tj(f)),{select:!0}),document.activeElement===b&&pa(f))}return()=>{f.removeEventListener(Kf,x),setTimeout(()=>{const E=new CustomEvent(Qf,Lv);f.addEventListener(Qf,m),f.dispatchEvent(E),E.defaultPrevented||pa(b??document.body,{select:!0}),f.removeEventListener(Qf,m),Bv.remove(w)},0)}}},[f,x,m,w]);const _=h.useCallback(b=>{if(!s&&!a||w.paused)return;const S=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,E=document.activeElement;if(S&&E){const P=b.currentTarget,[N,A]=bR(P);N&&A?!b.shiftKey&&E===A?(b.preventDefault(),s&&pa(N,{select:!0})):b.shiftKey&&E===N&&(b.preventDefault(),s&&pa(A,{select:!0})):E===P&&b.preventDefault()}},[s,a,w.paused]);return e.jsx(jt.div,{tabIndex:-1,...d,ref:C,onKeyDown:_})});Ed.displayName=wR;function jR(t,{select:n=!1}={}){const s=document.activeElement;for(const a of t)if(pa(a,{select:n}),document.activeElement!==s)return}function bR(t){const n=tj(t),s=$v(n,t),a=$v(n.reverse(),t);return[s,a]}function tj(t){const n=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const o=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||o?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)n.push(s.currentNode);return n}function $v(t,n){for(const s of t)if(!NR(s,{upTo:n}))return s}function NR(t,{upTo:n}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(n!==void 0&&t===n)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function _R(t){return t instanceof HTMLInputElement&&"select"in t}function pa(t,{select:n=!1}={}){if(t&&t.focus){const s=document.activeElement;t.focus({preventScroll:!0}),t!==s&&_R(t)&&n&&t.select()}}var Bv=SR();function SR(){let t=[];return{add(n){const s=t[0];n!==s&&s?.pause(),t=Uv(t,n),t.unshift(n)},remove(n){t=Uv(t,n),t[0]?.resume()}}}function Uv(t,n){const s=[...t],a=s.indexOf(n);return a!==-1&&s.splice(a,1),s}function CR(t){return t.filter(n=>n.tagName!=="A")}var PR=function(t){if(typeof document>"u")return null;var n=Array.isArray(t)?t[0]:t;return n.ownerDocument.body},Pi=new WeakMap,Pc=new WeakMap,kc={},Gf=0,nj=function(t){return t&&(t.host||nj(t.parentNode))},kR=function(t,n){return n.map(function(s){if(t.contains(s))return s;var a=nj(s);return a&&t.contains(a)?a:(console.error("aria-hidden",s,"in not contained inside",t,". Doing nothing"),null)}).filter(function(s){return!!s})},ER=function(t,n,s,a){var o=kR(n,Array.isArray(t)?t:[t]);kc[s]||(kc[s]=new WeakMap);var c=kc[s],d=[],f=new Set,p=new Set(o),x=function(v){!v||f.has(v)||(f.add(v),x(v.parentNode))};o.forEach(x);var m=function(v){!v||p.has(v)||Array.prototype.forEach.call(v.children,function(C){if(f.has(C))m(C);else try{var w=C.getAttribute(a),_=w!==null&&w!=="false",b=(Pi.get(C)||0)+1,S=(c.get(C)||0)+1;Pi.set(C,b),c.set(C,S),d.push(C),b===1&&_&&Pc.set(C,!0),S===1&&C.setAttribute(s,"true"),_||C.setAttribute(a,"true")}catch(E){console.error("aria-hidden: cannot operate on ",C,E)}})};return m(n),f.clear(),Gf++,function(){d.forEach(function(v){var C=Pi.get(v)-1,w=c.get(v)-1;Pi.set(v,C),c.set(v,w),C||(Pc.has(v)||v.removeAttribute(a),Pc.delete(v)),w||v.removeAttribute(s)}),Gf--,Gf||(Pi=new WeakMap,Pi=new WeakMap,Pc=new WeakMap,kc={})}},Em=function(t,n,s){s===void 0&&(s="data-aria-hidden");var a=Array.from(Array.isArray(t)?t:[t]),o=PR(t);return o?(a.push.apply(a,Array.from(o.querySelectorAll("[aria-live]"))),ER(a,o,s,"aria-hidden")):function(){return null}},vr=function(){return vr=Object.assign||function(n){for(var s,a=1,o=arguments.length;a<o;a++){s=arguments[a];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c])}return n},vr.apply(this,arguments)};function sj(t,n){var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(s[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(t);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(t,a[o])&&(s[a[o]]=t[a[o]]);return s}function TR(t,n,s){if(s||arguments.length===2)for(var a=0,o=n.length,c;a<o;a++)(c||!(a in n))&&(c||(c=Array.prototype.slice.call(n,0,a)),c[a]=n[a]);return t.concat(c||Array.prototype.slice.call(n))}var Wc="right-scroll-bar-position",Vc="width-before-scroll-bar",DR="with-scroll-bars-hidden",RR="--removed-body-scroll-bar-size";function Xf(t,n){return typeof t=="function"?t(n):t&&(t.current=n),t}function AR(t,n){var s=h.useState(function(){return{value:t,callback:n,facade:{get current(){return s.value},set current(a){var o=s.value;o!==a&&(s.value=a,s.callback(a,o))}}}})[0];return s.callback=n,s.facade}var OR=typeof window<"u"?h.useLayoutEffect:h.useEffect,zv=new WeakMap;function MR(t,n){var s=AR(null,function(a){return t.forEach(function(o){return Xf(o,a)})});return OR(function(){var a=zv.get(s);if(a){var o=new Set(a),c=new Set(t),d=s.current;o.forEach(function(f){c.has(f)||Xf(f,null)}),c.forEach(function(f){o.has(f)||Xf(f,d)})}zv.set(s,t)},[t]),s}function FR(t){return t}function IR(t,n){n===void 0&&(n=FR);var s=[],a=!1,o={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:t},useMedium:function(c){var d=n(c,a);return s.push(d),function(){s=s.filter(function(f){return f!==d})}},assignSyncMedium:function(c){for(a=!0;s.length;){var d=s;s=[],d.forEach(c)}s={push:function(f){return c(f)},filter:function(){return s}}},assignMedium:function(c){a=!0;var d=[];if(s.length){var f=s;s=[],f.forEach(c),d=s}var p=function(){var m=d;d=[],m.forEach(c)},x=function(){return Promise.resolve().then(p)};x(),s={push:function(m){d.push(m),x()},filter:function(m){return d=d.filter(m),s}}}};return o}function LR(t){t===void 0&&(t={});var n=IR(null);return n.options=vr({async:!0,ssr:!1},t),n}var rj=function(t){var n=t.sideCar,s=sj(t,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=n.read();if(!a)throw new Error("Sidecar medium not found");return h.createElement(a,vr({},s))};rj.isSideCarExport=!0;function $R(t,n){return t.useMedium(n),rj}var aj=LR(),Jf=function(){},Td=h.forwardRef(function(t,n){var s=h.useRef(null),a=h.useState({onScrollCapture:Jf,onWheelCapture:Jf,onTouchMoveCapture:Jf}),o=a[0],c=a[1],d=t.forwardProps,f=t.children,p=t.className,x=t.removeScrollBar,m=t.enabled,v=t.shards,C=t.sideCar,w=t.noRelative,_=t.noIsolation,b=t.inert,S=t.allowPinchZoom,E=t.as,P=E===void 0?"div":E,N=t.gapMode,A=sj(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=C,U=MR([s,n]),R=vr(vr({},A),o);return h.createElement(h.Fragment,null,m&&h.createElement(D,{sideCar:aj,removeScrollBar:x,shards:v,noRelative:w,noIsolation:_,inert:b,setCallbacks:c,allowPinchZoom:!!S,lockRef:s,gapMode:N}),d?h.cloneElement(h.Children.only(f),vr(vr({},R),{ref:U})):h.createElement(P,vr({},R,{className:p,ref:U}),f))});Td.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Td.classNames={fullWidth:Vc,zeroRight:Wc};var BR=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function UR(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var n=BR();return n&&t.setAttribute("nonce",n),t}function zR(t,n){t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}function WR(t){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(t)}var VR=function(){var t=0,n=null;return{add:function(s){t==0&&(n=UR())&&(zR(n,s),WR(n)),t++},remove:function(){t--,!t&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},HR=function(){var t=VR();return function(n,s){h.useEffect(function(){return t.add(n),function(){t.remove()}},[n&&s])}},ij=function(){var t=HR(),n=function(s){var a=s.styles,o=s.dynamic;return t(a,o),null};return n},qR={left:0,top:0,right:0,gap:0},Zf=function(t){return parseInt(t||"",10)||0},YR=function(t){var n=window.getComputedStyle(document.body),s=n[t==="padding"?"paddingLeft":"marginLeft"],a=n[t==="padding"?"paddingTop":"marginTop"],o=n[t==="padding"?"paddingRight":"marginRight"];return[Zf(s),Zf(a),Zf(o)]},KR=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return qR;var n=YR(t),s=document.documentElement.clientWidth,a=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,a-s+n[2]-n[0])}},QR=ij(),Ai="data-scroll-locked",GR=function(t,n,s,a){var o=t.left,c=t.top,d=t.right,f=t.gap;return s===void 0&&(s="margin"),`
  .`.concat(DR,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(f,"px ").concat(a,`;
  }
  body[`).concat(Ai,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(a,";"),s==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(a,`;
    `),s==="padding"&&"padding-right: ".concat(f,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Wc,` {
    right: `).concat(f,"px ").concat(a,`;
  }
  
  .`).concat(Vc,` {
    margin-right: `).concat(f,"px ").concat(a,`;
  }
  
  .`).concat(Wc," .").concat(Wc,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(Vc," .").concat(Vc,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(Ai,`] {
    `).concat(RR,": ").concat(f,`px;
  }
`)},Wv=function(){var t=parseInt(document.body.getAttribute(Ai)||"0",10);return isFinite(t)?t:0},XR=function(){h.useEffect(function(){return document.body.setAttribute(Ai,(Wv()+1).toString()),function(){var t=Wv()-1;t<=0?document.body.removeAttribute(Ai):document.body.setAttribute(Ai,t.toString())}},[])},JR=function(t){var n=t.noRelative,s=t.noImportant,a=t.gapMode,o=a===void 0?"margin":a;XR();var c=h.useMemo(function(){return KR(o)},[o]);return h.createElement(QR,{styles:GR(c,!n,o,s?"":"!important")})},Ah=!1;if(typeof window<"u")try{var Ec=Object.defineProperty({},"passive",{get:function(){return Ah=!0,!0}});window.addEventListener("test",Ec,Ec),window.removeEventListener("test",Ec,Ec)}catch{Ah=!1}var ki=Ah?{passive:!1}:!1,ZR=function(t){return t.tagName==="TEXTAREA"},oj=function(t,n){if(!(t instanceof Element))return!1;var s=window.getComputedStyle(t);return s[n]!=="hidden"&&!(s.overflowY===s.overflowX&&!ZR(t)&&s[n]==="visible")},eA=function(t){return oj(t,"overflowY")},tA=function(t){return oj(t,"overflowX")},Vv=function(t,n){var s=n.ownerDocument,a=n;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var o=lj(t,a);if(o){var c=cj(t,a),d=c[1],f=c[2];if(d>f)return!0}a=a.parentNode}while(a&&a!==s.body);return!1},nA=function(t){var n=t.scrollTop,s=t.scrollHeight,a=t.clientHeight;return[n,s,a]},sA=function(t){var n=t.scrollLeft,s=t.scrollWidth,a=t.clientWidth;return[n,s,a]},lj=function(t,n){return t==="v"?eA(n):tA(n)},cj=function(t,n){return t==="v"?nA(n):sA(n)},rA=function(t,n){return t==="h"&&n==="rtl"?-1:1},aA=function(t,n,s,a,o){var c=rA(t,window.getComputedStyle(n).direction),d=c*a,f=s.target,p=n.contains(f),x=!1,m=d>0,v=0,C=0;do{if(!f)break;var w=cj(t,f),_=w[0],b=w[1],S=w[2],E=b-S-c*_;(_||E)&&lj(t,f)&&(v+=E,C+=_);var P=f.parentNode;f=P&&P.nodeType===Node.DOCUMENT_FRAGMENT_NODE?P.host:P}while(!p&&f!==document.body||p&&(n.contains(f)||n===f));return(m&&Math.abs(v)<1||!m&&Math.abs(C)<1)&&(x=!0),x},Tc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Hv=function(t){return[t.deltaX,t.deltaY]},qv=function(t){return t&&"current"in t?t.current:t},iA=function(t,n){return t[0]===n[0]&&t[1]===n[1]},oA=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},lA=0,Ei=[];function cA(t){var n=h.useRef([]),s=h.useRef([0,0]),a=h.useRef(),o=h.useState(lA++)[0],c=h.useState(ij)[0],d=h.useRef(t);h.useEffect(function(){d.current=t},[t]),h.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var b=TR([t.lockRef.current],(t.shards||[]).map(qv),!0).filter(Boolean);return b.forEach(function(S){return S.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),b.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var f=h.useCallback(function(b,S){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!d.current.allowPinchZoom;var E=Tc(b),P=s.current,N="deltaX"in b?b.deltaX:P[0]-E[0],A="deltaY"in b?b.deltaY:P[1]-E[1],D,U=b.target,R=Math.abs(N)>Math.abs(A)?"h":"v";if("touches"in b&&R==="h"&&U.type==="range")return!1;var L=Vv(R,U);if(!L)return!0;if(L?D=R:(D=R==="v"?"h":"v",L=Vv(R,U)),!L)return!1;if(!a.current&&"changedTouches"in b&&(N||A)&&(a.current=D),!D)return!0;var pe=a.current||D;return aA(pe,S,b,pe==="h"?N:A)},[]),p=h.useCallback(function(b){var S=b;if(!(!Ei.length||Ei[Ei.length-1]!==c)){var E="deltaY"in S?Hv(S):Tc(S),P=n.current.filter(function(D){return D.name===S.type&&(D.target===S.target||S.target===D.shadowParent)&&iA(D.delta,E)})[0];if(P&&P.should){S.cancelable&&S.preventDefault();return}if(!P){var N=(d.current.shards||[]).map(qv).filter(Boolean).filter(function(D){return D.contains(S.target)}),A=N.length>0?f(S,N[0]):!d.current.noIsolation;A&&S.cancelable&&S.preventDefault()}}},[]),x=h.useCallback(function(b,S,E,P){var N={name:b,delta:S,target:E,should:P,shadowParent:dA(E)};n.current.push(N),setTimeout(function(){n.current=n.current.filter(function(A){return A!==N})},1)},[]),m=h.useCallback(function(b){s.current=Tc(b),a.current=void 0},[]),v=h.useCallback(function(b){x(b.type,Hv(b),b.target,f(b,t.lockRef.current))},[]),C=h.useCallback(function(b){x(b.type,Tc(b),b.target,f(b,t.lockRef.current))},[]);h.useEffect(function(){return Ei.push(c),t.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:C}),document.addEventListener("wheel",p,ki),document.addEventListener("touchmove",p,ki),document.addEventListener("touchstart",m,ki),function(){Ei=Ei.filter(function(b){return b!==c}),document.removeEventListener("wheel",p,ki),document.removeEventListener("touchmove",p,ki),document.removeEventListener("touchstart",m,ki)}},[]);var w=t.removeScrollBar,_=t.inert;return h.createElement(h.Fragment,null,_?h.createElement(c,{styles:oA(o)}):null,w?h.createElement(JR,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function dA(t){for(var n=null;t!==null;)t instanceof ShadowRoot&&(n=t.host,t=t.host),t=t.parentNode;return n}const uA=$R(aj,cA);var Dd=h.forwardRef(function(t,n){return h.createElement(Td,vr({},t,{ref:n,sideCar:uA}))});Dd.classNames=Td.classNames;var Rd="Popover",[dj]=Cr(Rd,[Yi]),fl=Yi(),[fA,Pa]=dj(Rd),uj=t=>{const{__scopePopover:n,children:s,open:a,defaultOpen:o,onOpenChange:c,modal:d=!1}=t,f=fl(n),p=h.useRef(null),[x,m]=h.useState(!1),[v,C]=_a({prop:a,defaultProp:o??!1,onChange:c,caller:Rd});return e.jsx(G0,{...f,children:e.jsx(fA,{scope:n,contentId:Ur(),triggerRef:p,open:v,onOpenChange:C,onOpenToggle:h.useCallback(()=>C(w=>!w),[C]),hasCustomAnchor:x,onCustomAnchorAdd:h.useCallback(()=>m(!0),[]),onCustomAnchorRemove:h.useCallback(()=>m(!1),[]),modal:d,children:s})})};uj.displayName=Rd;var fj="PopoverAnchor",hA=h.forwardRef((t,n)=>{const{__scopePopover:s,...a}=t,o=Pa(fj,s),c=fl(s),{onCustomAnchorAdd:d,onCustomAnchorRemove:f}=o;return h.useEffect(()=>(d(),()=>f()),[d,f]),e.jsx(bd,{...c,...a,ref:n})});hA.displayName=fj;var hj="PopoverTrigger",mj=h.forwardRef((t,n)=>{const{__scopePopover:s,...a}=t,o=Pa(hj,s),c=fl(s),d=Gt(n,o.triggerRef),f=e.jsx(jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":yj(o.open),...a,ref:d,onClick:at(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?f:e.jsx(bd,{asChild:!0,...c,children:f})});mj.displayName=hj;var Tm="PopoverPortal",[mA,pA]=dj(Tm,{forceMount:void 0}),pj=t=>{const{__scopePopover:n,forceMount:s,children:a,container:o}=t,c=Pa(Tm,n);return e.jsx(mA,{scope:n,forceMount:s,children:e.jsx(Pr,{present:s||c.open,children:e.jsx(el,{asChild:!0,container:o,children:a})})})};pj.displayName=Tm;var Ii="PopoverContent",gj=h.forwardRef((t,n)=>{const s=pA(Ii,t.__scopePopover),{forceMount:a=s.forceMount,...o}=t,c=Pa(Ii,t.__scopePopover);return e.jsx(Pr,{present:a||c.open,children:c.modal?e.jsx(xA,{...o,ref:n}):e.jsx(vA,{...o,ref:n})})});gj.displayName=Ii;var gA=Qa("PopoverContent.RemoveScroll"),xA=h.forwardRef((t,n)=>{const s=Pa(Ii,t.__scopePopover),a=h.useRef(null),o=Gt(n,a),c=h.useRef(!1);return h.useEffect(()=>{const d=a.current;if(d)return Em(d)},[]),e.jsx(Dd,{as:gA,allowPinchZoom:!0,children:e.jsx(xj,{...t,ref:o,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:at(t.onCloseAutoFocus,d=>{d.preventDefault(),c.current||s.triggerRef.current?.focus()}),onPointerDownOutside:at(t.onPointerDownOutside,d=>{const f=d.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0,x=f.button===2||p;c.current=x},{checkForDefaultPrevented:!1}),onFocusOutside:at(t.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1})})})}),vA=h.forwardRef((t,n)=>{const s=Pa(Ii,t.__scopePopover),a=h.useRef(!1),o=h.useRef(!1);return e.jsx(xj,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{t.onCloseAutoFocus?.(c),c.defaultPrevented||(a.current||s.triggerRef.current?.focus(),c.preventDefault()),a.current=!1,o.current=!1},onInteractOutside:c=>{t.onInteractOutside?.(c),c.defaultPrevented||(a.current=!0,c.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const d=c.target;s.triggerRef.current?.contains(d)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&o.current&&c.preventDefault()}})}),xj=h.forwardRef((t,n)=>{const{__scopePopover:s,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:c,disableOutsidePointerEvents:d,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:x,onInteractOutside:m,...v}=t,C=Pa(Ii,s),w=fl(s);return km(),e.jsx(Ed,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:o,onUnmountAutoFocus:c,children:e.jsx(Bi,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:m,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:x,onDismiss:()=>C.onOpenChange(!1),children:e.jsx(gm,{"data-state":yj(C.open),role:"dialog",id:C.contentId,...w,...v,ref:n,style:{...v.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),vj="PopoverClose",yA=h.forwardRef((t,n)=>{const{__scopePopover:s,...a}=t,o=Pa(vj,s);return e.jsx(jt.button,{type:"button",...a,ref:n,onClick:at(t.onClick,()=>o.onOpenChange(!1))})});yA.displayName=vj;var wA="PopoverArrow",jA=h.forwardRef((t,n)=>{const{__scopePopover:s,...a}=t,o=fl(s);return e.jsx(xm,{...o,...a,ref:n})});jA.displayName=wA;function yj(t){return t?"open":"closed"}var bA=uj,NA=mj,_A=pj,wj=gj;const Xo=bA,Jo=NA,Li=h.forwardRef(({className:t,align:n="center",sideOffset:s=4,...a},o)=>e.jsx(_A,{children:e.jsx(wj,{ref:o,align:n,sideOffset:s,className:ht("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})}));Li.displayName=wj.displayName;const Sn=({children:t,title:n})=>{const{user:s,signOut:a,hasRole:o,primaryRole:c}=Ys(),d=si(),f=Qi(),[p,x]=h.useState(!1),[m,v]=h.useState("");h.useEffect(()=>{s?.user_metadata?.full_name?v(s.user_metadata.full_name):s?.email&&v(s.email.split("@")[0])},[s]);const C=async()=>{await a(),d("/auth")},_=[{label:"Dashboard",path:c==="admin"?"/admin":c==="doctor"?"/doctor":c==="nurse"?"/nurse":c==="receptionist"?"/receptionist":c==="lab_tech"?"/lab":c==="pharmacist"?"/pharmacy":c==="billing"?"/billing":"/patient",roles:["admin","doctor","nurse","receptionist","lab_tech","pharmacist","billing","patient"]},{label:"Medical Services",path:"/services",roles:["admin"]}].filter(b=>b.roles.some(S=>o(S)));return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-primary/5 to-secondary/5",children:[e.jsxs("header",{className:"border-b bg-card/50 backdrop-blur-sm sticky top-0 z-50",children:[e.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_m,{size:"sm",showText:!1}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-bold text-foreground",style:{contentVisibility:"auto"},children:n})})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[e.jsx("nav",{className:"flex items-center gap-2 mr-4",children:_.map(b=>e.jsx(G,{variant:f.pathname===b.path?"default":"ghost",size:"sm",onClick:()=>d(b.path),children:b.label},b.path))}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:m||s?.user_metadata?.full_name||s?.email?.split("@")[0]})})}),e.jsxs(G,{variant:"outline",size:"sm",onClick:C,children:[e.jsx(Ex,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]}),e.jsx("div",{className:"md:hidden",children:e.jsx(G,{variant:"ghost",size:"sm",onClick:()=>x(!p),children:p?e.jsx(Gh,{className:"h-5 w-5"}):e.jsx(zS,{className:"h-5 w-5"})})})]}),p&&e.jsx("div",{className:"md:hidden border-t bg-card/95 backdrop-blur-sm",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 space-y-2",children:[e.jsx("nav",{className:"flex flex-col gap-2",children:_.map(b=>e.jsx(G,{variant:f.pathname===b.path?"default":"ghost",size:"sm",onClick:()=>{d(b.path),x(!1)},className:"justify-start",children:b.label},b.path))}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsx("div",{className:"flex flex-col gap-1",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:m||s?.user_metadata?.full_name||s?.email?.split("@")[0]})}),e.jsxs(G,{variant:"outline",size:"sm",onClick:C,children:[e.jsx(Ex,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})]}),e.jsx("main",{className:"container mx-auto py-8 px-4",children:t})]})};function Dc({title:t,value:n,icon:s,color:a,sub:o}){const c={green:"border-green-200 shadow-lg bg-green-50",blue:"border-blue-200 shadow-lg bg-blue-50",purple:"border-purple-200 shadow-lg bg-purple-50",orange:"border-orange-200 shadow-lg bg-orange-50"},d={green:"text-green-600",blue:"text-blue-600",purple:"text-purple-600",orange:"text-orange-600"};return e.jsxs(Ce,{className:c[a],children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:t}),e.jsx(s,{className:`h-4 w-4 ${d[a]}`})]}),e.jsxs(De,{children:[e.jsx("div",{className:`text-2xl font-bold ${d[a]}`,children:n}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o})]})]})}const Mn=h.forwardRef(({className:t,...n},s)=>e.jsx("textarea",{className:ht("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n}));Mn.displayName="Textarea";function Yv(t,[n,s]){return Math.min(s,Math.max(n,t))}function jj(t){const n=h.useRef({value:t,previous:t});return h.useMemo(()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous),[t])}var SA=[" ","Enter","ArrowUp","ArrowDown"],CA=[" ","Enter"],Za="Select",[Ad,Od,PA]=Uh(Za),[Gi]=Cr(Za,[PA,Yi]),Md=Yi(),[kA,ka]=Gi(Za),[EA,TA]=Gi(Za),bj=t=>{const{__scopeSelect:n,children:s,open:a,defaultOpen:o,onOpenChange:c,value:d,defaultValue:f,onValueChange:p,dir:x,name:m,autoComplete:v,disabled:C,required:w,form:_}=t,b=Md(n),[S,E]=h.useState(null),[P,N]=h.useState(null),[A,D]=h.useState(!1),U=bm(x),[R,L]=_a({prop:a,defaultProp:o??!1,onChange:c,caller:Za}),[pe,ee]=_a({prop:d,defaultProp:f,onChange:p,caller:Za}),ve=h.useRef(null),ge=S?_||!!S.closest("form"):!0,[V,le]=h.useState(new Set),we=Array.from(V).map(fe=>fe.props.value).join(";");return e.jsx(G0,{...b,children:e.jsxs(kA,{required:w,scope:n,trigger:S,onTriggerChange:E,valueNode:P,onValueNodeChange:N,valueNodeHasChildren:A,onValueNodeHasChildrenChange:D,contentId:Ur(),value:pe,onValueChange:ee,open:R,onOpenChange:L,dir:U,triggerPointerDownPosRef:ve,disabled:C,children:[e.jsx(Ad.Provider,{scope:n,children:e.jsx(EA,{scope:t.__scopeSelect,onNativeOptionAdd:h.useCallback(fe=>{le(ne=>new Set(ne).add(fe))},[]),onNativeOptionRemove:h.useCallback(fe=>{le(ne=>{const M=new Set(ne);return M.delete(fe),M})},[]),children:s})}),ge?e.jsxs(qj,{"aria-hidden":!0,required:w,tabIndex:-1,name:m,autoComplete:v,value:pe,onChange:fe=>ee(fe.target.value),disabled:C,form:_,children:[pe===void 0?e.jsx("option",{value:""}):null,Array.from(V)]},we):null]})})};bj.displayName=Za;var Nj="SelectTrigger",_j=h.forwardRef((t,n)=>{const{__scopeSelect:s,disabled:a=!1,...o}=t,c=Md(s),d=ka(Nj,s),f=d.disabled||a,p=Gt(n,d.onTriggerChange),x=Od(s),m=h.useRef("touch"),[v,C,w]=Kj(b=>{const S=x().filter(N=>!N.disabled),E=S.find(N=>N.value===d.value),P=Qj(S,b,E);P!==void 0&&d.onValueChange(P.value)}),_=b=>{f||(d.onOpenChange(!0),w()),b&&(d.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return e.jsx(bd,{asChild:!0,...c,children:e.jsx(jt.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:f,"data-disabled":f?"":void 0,"data-placeholder":Yj(d.value)?"":void 0,...o,ref:p,onClick:at(o.onClick,b=>{b.currentTarget.focus(),m.current!=="mouse"&&_(b)}),onPointerDown:at(o.onPointerDown,b=>{m.current=b.pointerType;const S=b.target;S.hasPointerCapture(b.pointerId)&&S.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(_(b),b.preventDefault())}),onKeyDown:at(o.onKeyDown,b=>{const S=v.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&C(b.key),!(S&&b.key===" ")&&SA.includes(b.key)&&(_(),b.preventDefault())})})})});_j.displayName=Nj;var Sj="SelectValue",Cj=h.forwardRef((t,n)=>{const{__scopeSelect:s,className:a,style:o,children:c,placeholder:d="",...f}=t,p=ka(Sj,s),{onValueNodeHasChildrenChange:x}=p,m=c!==void 0,v=Gt(n,p.onValueNodeChange);return Yn(()=>{x(m)},[x,m]),e.jsx(jt.span,{...f,ref:v,style:{pointerEvents:"none"},children:Yj(p.value)?e.jsx(e.Fragment,{children:d}):c})});Cj.displayName=Sj;var DA="SelectIcon",Pj=h.forwardRef((t,n)=>{const{__scopeSelect:s,children:a,...o}=t;return e.jsx(jt.span,{"aria-hidden":!0,...o,ref:n,children:a||""})});Pj.displayName=DA;var RA="SelectPortal",kj=t=>e.jsx(el,{asChild:!0,...t});kj.displayName=RA;var ei="SelectContent",Ej=h.forwardRef((t,n)=>{const s=ka(ei,t.__scopeSelect),[a,o]=h.useState();if(Yn(()=>{o(new DocumentFragment)},[]),!s.open){const c=a;return c?$i.createPortal(e.jsx(Tj,{scope:t.__scopeSelect,children:e.jsx(Ad.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),c):null}return e.jsx(Dj,{...t,ref:n})});Ej.displayName=ei;var nr=10,[Tj,Ea]=Gi(ei),AA="SelectContentImpl",OA=Qa("SelectContent.RemoveScroll"),Dj=h.forwardRef((t,n)=>{const{__scopeSelect:s,position:a="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:c,onPointerDownOutside:d,side:f,sideOffset:p,align:x,alignOffset:m,arrowPadding:v,collisionBoundary:C,collisionPadding:w,sticky:_,hideWhenDetached:b,avoidCollisions:S,...E}=t,P=ka(ei,s),[N,A]=h.useState(null),[D,U]=h.useState(null),R=Gt(n,re=>A(re)),[L,pe]=h.useState(null),[ee,ve]=h.useState(null),ge=Od(s),[V,le]=h.useState(!1),we=h.useRef(!1);h.useEffect(()=>{if(N)return Em(N)},[N]),km();const fe=h.useCallback(re=>{const[$e,...qe]=ge().map(mt=>mt.ref.current),[Ge]=qe.slice(-1),be=document.activeElement;for(const mt of re)if(mt===be||(mt?.scrollIntoView({block:"nearest"}),mt===$e&&D&&(D.scrollTop=0),mt===Ge&&D&&(D.scrollTop=D.scrollHeight),mt?.focus(),document.activeElement!==be))return},[ge,D]),ne=h.useCallback(()=>fe([L,N]),[fe,L,N]);h.useEffect(()=>{V&&ne()},[V,ne]);const{onOpenChange:M,triggerPointerDownPosRef:K}=P;h.useEffect(()=>{if(N){let re={x:0,y:0};const $e=Ge=>{re={x:Math.abs(Math.round(Ge.pageX)-(K.current?.x??0)),y:Math.abs(Math.round(Ge.pageY)-(K.current?.y??0))}},qe=Ge=>{re.x<=10&&re.y<=10?Ge.preventDefault():N.contains(Ge.target)||M(!1),document.removeEventListener("pointermove",$e),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",$e),document.addEventListener("pointerup",qe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",$e),document.removeEventListener("pointerup",qe,{capture:!0})}}},[N,M,K]),h.useEffect(()=>{const re=()=>M(!1);return window.addEventListener("blur",re),window.addEventListener("resize",re),()=>{window.removeEventListener("blur",re),window.removeEventListener("resize",re)}},[M]);const[se,T]=Kj(re=>{const $e=ge().filter(be=>!be.disabled),qe=$e.find(be=>be.ref.current===document.activeElement),Ge=Qj($e,re,qe);Ge&&setTimeout(()=>Ge.ref.current.focus())}),O=h.useCallback((re,$e,qe)=>{const Ge=!we.current&&!qe;(P.value!==void 0&&P.value===$e||Ge)&&(pe(re),Ge&&(we.current=!0))},[P.value]),he=h.useCallback(()=>N?.focus(),[N]),Y=h.useCallback((re,$e,qe)=>{const Ge=!we.current&&!qe;(P.value!==void 0&&P.value===$e||Ge)&&ve(re)},[P.value]),xe=a==="popper"?Oh:Rj,Be=xe===Oh?{side:f,sideOffset:p,align:x,alignOffset:m,arrowPadding:v,collisionBoundary:C,collisionPadding:w,sticky:_,hideWhenDetached:b,avoidCollisions:S}:{};return e.jsx(Tj,{scope:s,content:N,viewport:D,onViewportChange:U,itemRefCallback:O,selectedItem:L,onItemLeave:he,itemTextRefCallback:Y,focusSelectedItem:ne,selectedItemText:ee,position:a,isPositioned:V,searchRef:se,children:e.jsx(Dd,{as:OA,allowPinchZoom:!0,children:e.jsx(Ed,{asChild:!0,trapped:P.open,onMountAutoFocus:re=>{re.preventDefault()},onUnmountAutoFocus:at(o,re=>{P.trigger?.focus({preventScroll:!0}),re.preventDefault()}),children:e.jsx(Bi,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:re=>re.preventDefault(),onDismiss:()=>P.onOpenChange(!1),children:e.jsx(xe,{role:"listbox",id:P.contentId,"data-state":P.open?"open":"closed",dir:P.dir,onContextMenu:re=>re.preventDefault(),...E,...Be,onPlaced:()=>le(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:at(E.onKeyDown,re=>{const $e=re.ctrlKey||re.altKey||re.metaKey;if(re.key==="Tab"&&re.preventDefault(),!$e&&re.key.length===1&&T(re.key),["ArrowUp","ArrowDown","Home","End"].includes(re.key)){let Ge=ge().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(re.key)&&(Ge=Ge.slice().reverse()),["ArrowUp","ArrowDown"].includes(re.key)){const be=re.target,mt=Ge.indexOf(be);Ge=Ge.slice(mt+1)}setTimeout(()=>fe(Ge)),re.preventDefault()}})})})})})})});Dj.displayName=AA;var MA="SelectItemAlignedPosition",Rj=h.forwardRef((t,n)=>{const{__scopeSelect:s,onPlaced:a,...o}=t,c=ka(ei,s),d=Ea(ei,s),[f,p]=h.useState(null),[x,m]=h.useState(null),v=Gt(n,R=>m(R)),C=Od(s),w=h.useRef(!1),_=h.useRef(!0),{viewport:b,selectedItem:S,selectedItemText:E,focusSelectedItem:P}=d,N=h.useCallback(()=>{if(c.trigger&&c.valueNode&&f&&x&&b&&S&&E){const R=c.trigger.getBoundingClientRect(),L=x.getBoundingClientRect(),pe=c.valueNode.getBoundingClientRect(),ee=E.getBoundingClientRect();if(c.dir!=="rtl"){const be=ee.left-L.left,mt=pe.left-be,We=R.left-mt,Et=R.width+We,ue=Math.max(Et,L.width),ze=window.innerWidth-nr,Ee=Yv(mt,[nr,Math.max(nr,ze-ue)]);f.style.minWidth=Et+"px",f.style.left=Ee+"px"}else{const be=L.right-ee.right,mt=window.innerWidth-pe.right-be,We=window.innerWidth-R.right-mt,Et=R.width+We,ue=Math.max(Et,L.width),ze=window.innerWidth-nr,Ee=Yv(mt,[nr,Math.max(nr,ze-ue)]);f.style.minWidth=Et+"px",f.style.right=Ee+"px"}const ve=C(),ge=window.innerHeight-nr*2,V=b.scrollHeight,le=window.getComputedStyle(x),we=parseInt(le.borderTopWidth,10),fe=parseInt(le.paddingTop,10),ne=parseInt(le.borderBottomWidth,10),M=parseInt(le.paddingBottom,10),K=we+fe+V+M+ne,se=Math.min(S.offsetHeight*5,K),T=window.getComputedStyle(b),O=parseInt(T.paddingTop,10),he=parseInt(T.paddingBottom,10),Y=R.top+R.height/2-nr,xe=ge-Y,Be=S.offsetHeight/2,re=S.offsetTop+Be,$e=we+fe+re,qe=K-$e;if($e<=Y){const be=ve.length>0&&S===ve[ve.length-1].ref.current;f.style.bottom="0px";const mt=x.clientHeight-b.offsetTop-b.offsetHeight,We=Math.max(xe,Be+(be?he:0)+mt+ne),Et=$e+We;f.style.height=Et+"px"}else{const be=ve.length>0&&S===ve[0].ref.current;f.style.top="0px";const We=Math.max(Y,we+b.offsetTop+(be?O:0)+Be)+qe;f.style.height=We+"px",b.scrollTop=$e-Y+b.offsetTop}f.style.margin=`${nr}px 0`,f.style.minHeight=se+"px",f.style.maxHeight=ge+"px",a?.(),requestAnimationFrame(()=>w.current=!0)}},[C,c.trigger,c.valueNode,f,x,b,S,E,c.dir,a]);Yn(()=>N(),[N]);const[A,D]=h.useState();Yn(()=>{x&&D(window.getComputedStyle(x).zIndex)},[x]);const U=h.useCallback(R=>{R&&_.current===!0&&(N(),P?.(),_.current=!1)},[N,P]);return e.jsx(IA,{scope:s,contentWrapper:f,shouldExpandOnScrollRef:w,onScrollButtonChange:U,children:e.jsx("div",{ref:p,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:e.jsx(jt.div,{...o,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});Rj.displayName=MA;var FA="SelectPopperPosition",Oh=h.forwardRef((t,n)=>{const{__scopeSelect:s,align:a="start",collisionPadding:o=nr,...c}=t,d=Md(s);return e.jsx(gm,{...d,...c,ref:n,align:a,collisionPadding:o,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Oh.displayName=FA;var[IA,Dm]=Gi(ei,{}),Mh="SelectViewport",Aj=h.forwardRef((t,n)=>{const{__scopeSelect:s,nonce:a,...o}=t,c=Ea(Mh,s),d=Dm(Mh,s),f=Gt(n,c.onViewportChange),p=h.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(Ad.Slot,{scope:s,children:e.jsx(jt.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:f,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:at(o.onScroll,x=>{const m=x.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:C}=d;if(C?.current&&v){const w=Math.abs(p.current-m.scrollTop);if(w>0){const _=window.innerHeight-nr*2,b=parseFloat(v.style.minHeight),S=parseFloat(v.style.height),E=Math.max(b,S);if(E<_){const P=E+w,N=Math.min(_,P),A=P-N;v.style.height=N+"px",v.style.bottom==="0px"&&(m.scrollTop=A>0?A:0,v.style.justifyContent="flex-end")}}}p.current=m.scrollTop})})})]})});Aj.displayName=Mh;var Oj="SelectGroup",[LA,$A]=Gi(Oj),BA=h.forwardRef((t,n)=>{const{__scopeSelect:s,...a}=t,o=Ur();return e.jsx(LA,{scope:s,id:o,children:e.jsx(jt.div,{role:"group","aria-labelledby":o,...a,ref:n})})});BA.displayName=Oj;var Mj="SelectLabel",Fj=h.forwardRef((t,n)=>{const{__scopeSelect:s,...a}=t,o=$A(Mj,s);return e.jsx(jt.div,{id:o.id,...a,ref:n})});Fj.displayName=Mj;var sd="SelectItem",[UA,Ij]=Gi(sd),Lj=h.forwardRef((t,n)=>{const{__scopeSelect:s,value:a,disabled:o=!1,textValue:c,...d}=t,f=ka(sd,s),p=Ea(sd,s),x=f.value===a,[m,v]=h.useState(c??""),[C,w]=h.useState(!1),_=Gt(n,P=>p.itemRefCallback?.(P,a,o)),b=Ur(),S=h.useRef("touch"),E=()=>{o||(f.onValueChange(a),f.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(UA,{scope:s,value:a,disabled:o,textId:b,isSelected:x,onItemTextChange:h.useCallback(P=>{v(N=>N||(P?.textContent??"").trim())},[]),children:e.jsx(Ad.ItemSlot,{scope:s,value:a,disabled:o,textValue:m,children:e.jsx(jt.div,{role:"option","aria-labelledby":b,"data-highlighted":C?"":void 0,"aria-selected":x&&C,"data-state":x?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...d,ref:_,onFocus:at(d.onFocus,()=>w(!0)),onBlur:at(d.onBlur,()=>w(!1)),onClick:at(d.onClick,()=>{S.current!=="mouse"&&E()}),onPointerUp:at(d.onPointerUp,()=>{S.current==="mouse"&&E()}),onPointerDown:at(d.onPointerDown,P=>{S.current=P.pointerType}),onPointerMove:at(d.onPointerMove,P=>{S.current=P.pointerType,o?p.onItemLeave?.():S.current==="mouse"&&P.currentTarget.focus({preventScroll:!0})}),onPointerLeave:at(d.onPointerLeave,P=>{P.currentTarget===document.activeElement&&p.onItemLeave?.()}),onKeyDown:at(d.onKeyDown,P=>{p.searchRef?.current!==""&&P.key===" "||(CA.includes(P.key)&&E(),P.key===" "&&P.preventDefault())})})})})});Lj.displayName=sd;var Bo="SelectItemText",$j=h.forwardRef((t,n)=>{const{__scopeSelect:s,className:a,style:o,...c}=t,d=ka(Bo,s),f=Ea(Bo,s),p=Ij(Bo,s),x=TA(Bo,s),[m,v]=h.useState(null),C=Gt(n,E=>v(E),p.onItemTextChange,E=>f.itemTextRefCallback?.(E,p.value,p.disabled)),w=m?.textContent,_=h.useMemo(()=>e.jsx("option",{value:p.value,disabled:p.disabled,children:w},p.value),[p.disabled,p.value,w]),{onNativeOptionAdd:b,onNativeOptionRemove:S}=x;return Yn(()=>(b(_),()=>S(_)),[b,S,_]),e.jsxs(e.Fragment,{children:[e.jsx(jt.span,{id:p.textId,...c,ref:C}),p.isSelected&&d.valueNode&&!d.valueNodeHasChildren?$i.createPortal(c.children,d.valueNode):null]})});$j.displayName=Bo;var Bj="SelectItemIndicator",Uj=h.forwardRef((t,n)=>{const{__scopeSelect:s,...a}=t;return Ij(Bj,s).isSelected?e.jsx(jt.span,{"aria-hidden":!0,...a,ref:n}):null});Uj.displayName=Bj;var Fh="SelectScrollUpButton",zj=h.forwardRef((t,n)=>{const s=Ea(Fh,t.__scopeSelect),a=Dm(Fh,t.__scopeSelect),[o,c]=h.useState(!1),d=Gt(n,a.onScrollButtonChange);return Yn(()=>{if(s.viewport&&s.isPositioned){let f=function(){const x=p.scrollTop>0;c(x)};const p=s.viewport;return f(),p.addEventListener("scroll",f),()=>p.removeEventListener("scroll",f)}},[s.viewport,s.isPositioned]),o?e.jsx(Vj,{...t,ref:d,onAutoScroll:()=>{const{viewport:f,selectedItem:p}=s;f&&p&&(f.scrollTop=f.scrollTop-p.offsetHeight)}}):null});zj.displayName=Fh;var Ih="SelectScrollDownButton",Wj=h.forwardRef((t,n)=>{const s=Ea(Ih,t.__scopeSelect),a=Dm(Ih,t.__scopeSelect),[o,c]=h.useState(!1),d=Gt(n,a.onScrollButtonChange);return Yn(()=>{if(s.viewport&&s.isPositioned){let f=function(){const x=p.scrollHeight-p.clientHeight,m=Math.ceil(p.scrollTop)<x;c(m)};const p=s.viewport;return f(),p.addEventListener("scroll",f),()=>p.removeEventListener("scroll",f)}},[s.viewport,s.isPositioned]),o?e.jsx(Vj,{...t,ref:d,onAutoScroll:()=>{const{viewport:f,selectedItem:p}=s;f&&p&&(f.scrollTop=f.scrollTop+p.offsetHeight)}}):null});Wj.displayName=Ih;var Vj=h.forwardRef((t,n)=>{const{__scopeSelect:s,onAutoScroll:a,...o}=t,c=Ea("SelectScrollButton",s),d=h.useRef(null),f=Od(s),p=h.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return h.useEffect(()=>()=>p(),[p]),Yn(()=>{f().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[f]),e.jsx(jt.div,{"aria-hidden":!0,...o,ref:n,style:{flexShrink:0,...o.style},onPointerDown:at(o.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(a,50))}),onPointerMove:at(o.onPointerMove,()=>{c.onItemLeave?.(),d.current===null&&(d.current=window.setInterval(a,50))}),onPointerLeave:at(o.onPointerLeave,()=>{p()})})}),zA="SelectSeparator",Hj=h.forwardRef((t,n)=>{const{__scopeSelect:s,...a}=t;return e.jsx(jt.div,{"aria-hidden":!0,...a,ref:n})});Hj.displayName=zA;var Lh="SelectArrow",WA=h.forwardRef((t,n)=>{const{__scopeSelect:s,...a}=t,o=Md(s),c=ka(Lh,s),d=Ea(Lh,s);return c.open&&d.position==="popper"?e.jsx(xm,{...o,...a,ref:n}):null});WA.displayName=Lh;var VA="SelectBubbleInput",qj=h.forwardRef(({__scopeSelect:t,value:n,...s},a)=>{const o=h.useRef(null),c=Gt(a,o),d=jj(n);return h.useEffect(()=>{const f=o.current;if(!f)return;const p=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(p,"value").set;if(d!==n&&m){const v=new Event("change",{bubbles:!0});m.call(f,n),f.dispatchEvent(v)}},[d,n]),e.jsx(jt.select,{...s,style:{...oy,...s.style},ref:c,defaultValue:n})});qj.displayName=VA;function Yj(t){return t===""||t===void 0}function Kj(t){const n=qs(t),s=h.useRef(""),a=h.useRef(0),o=h.useCallback(d=>{const f=s.current+d;n(f),(function p(x){s.current=x,window.clearTimeout(a.current),x!==""&&(a.current=window.setTimeout(()=>p(""),1e3))})(f)},[n]),c=h.useCallback(()=>{s.current="",window.clearTimeout(a.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(a.current),[]),[s,o,c]}function Qj(t,n,s){const o=n.length>1&&Array.from(n).every(x=>x===n[0])?n[0]:n,c=s?t.indexOf(s):-1;let d=HA(t,Math.max(c,0));o.length===1&&(d=d.filter(x=>x!==s));const p=d.find(x=>x.textValue.toLowerCase().startsWith(o.toLowerCase()));return p!==s?p:void 0}function HA(t,n){return t.map((s,a)=>t[(n+a)%t.length])}var qA=bj,Gj=_j,YA=Cj,KA=Pj,QA=kj,Xj=Ej,GA=Aj,Jj=Fj,Zj=Lj,XA=$j,JA=Uj,eb=zj,tb=Wj,nb=Hj;const sn=qA,rn=YA,en=h.forwardRef(({className:t,children:n,...s},a)=>e.jsxs(Gj,{ref:a,className:ht("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[n,e.jsx(KA,{asChild:!0,children:e.jsx(Dy,{className:"h-4 w-4 opacity-50"})})]}));en.displayName=Gj.displayName;const sb=h.forwardRef(({className:t,...n},s)=>e.jsx(eb,{ref:s,className:ht("flex cursor-default items-center justify-center py-1",t),...n,children:e.jsx(FS,{className:"h-4 w-4"})}));sb.displayName=eb.displayName;const rb=h.forwardRef(({className:t,...n},s)=>e.jsx(tb,{ref:s,className:ht("flex cursor-default items-center justify-center py-1",t),...n,children:e.jsx(Dy,{className:"h-4 w-4"})}));rb.displayName=tb.displayName;const tn=h.forwardRef(({className:t,children:n,position:s="popper",...a},o)=>e.jsx(QA,{children:e.jsxs(Xj,{ref:o,className:ht("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...a,children:[e.jsx(sb,{}),e.jsx(GA,{className:ht("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),e.jsx(rb,{})]})}));tn.displayName=Xj.displayName;const ZA=h.forwardRef(({className:t,...n},s)=>e.jsx(Jj,{ref:s,className:ht("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...n}));ZA.displayName=Jj.displayName;const _e=h.forwardRef(({className:t,children:n,...s},a)=>e.jsxs(Zj,{ref:a,className:ht("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(JA,{children:e.jsx(Ty,{className:"h-4 w-4"})})}),e.jsx(XA,{children:n})]}));_e.displayName=Zj.displayName;const e4=h.forwardRef(({className:t,...n},s)=>e.jsx(nb,{ref:s,className:ht("-mx-1 my-1 h-px bg-muted",t),...n}));e4.displayName=nb.displayName;var Fd="Dialog",[ab]=Cr(Fd),[t4,ur]=ab(Fd),ib=t=>{const{__scopeDialog:n,children:s,open:a,defaultOpen:o,onOpenChange:c,modal:d=!0}=t,f=h.useRef(null),p=h.useRef(null),[x,m]=_a({prop:a,defaultProp:o??!1,onChange:c,caller:Fd});return e.jsx(t4,{scope:n,triggerRef:f,contentRef:p,contentId:Ur(),titleId:Ur(),descriptionId:Ur(),open:x,onOpenChange:m,onOpenToggle:h.useCallback(()=>m(v=>!v),[m]),modal:d,children:s})};ib.displayName=Fd;var ob="DialogTrigger",lb=h.forwardRef((t,n)=>{const{__scopeDialog:s,...a}=t,o=ur(ob,s),c=Gt(n,o.triggerRef);return e.jsx(jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Om(o.open),...a,ref:c,onClick:at(t.onClick,o.onOpenToggle)})});lb.displayName=ob;var Rm="DialogPortal",[n4,cb]=ab(Rm,{forceMount:void 0}),db=t=>{const{__scopeDialog:n,forceMount:s,children:a,container:o}=t,c=ur(Rm,n);return e.jsx(n4,{scope:n,forceMount:s,children:h.Children.map(a,d=>e.jsx(Pr,{present:s||c.open,children:e.jsx(el,{asChild:!0,container:o,children:d})}))})};db.displayName=Rm;var rd="DialogOverlay",ub=h.forwardRef((t,n)=>{const s=cb(rd,t.__scopeDialog),{forceMount:a=s.forceMount,...o}=t,c=ur(rd,t.__scopeDialog);return c.modal?e.jsx(Pr,{present:a||c.open,children:e.jsx(r4,{...o,ref:n})}):null});ub.displayName=rd;var s4=Qa("DialogOverlay.RemoveScroll"),r4=h.forwardRef((t,n)=>{const{__scopeDialog:s,...a}=t,o=ur(rd,s);return e.jsx(Dd,{as:s4,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx(jt.div,{"data-state":Om(o.open),...a,ref:n,style:{pointerEvents:"auto",...a.style}})})}),ti="DialogContent",fb=h.forwardRef((t,n)=>{const s=cb(ti,t.__scopeDialog),{forceMount:a=s.forceMount,...o}=t,c=ur(ti,t.__scopeDialog);return e.jsx(Pr,{present:a||c.open,children:c.modal?e.jsx(a4,{...o,ref:n}):e.jsx(i4,{...o,ref:n})})});fb.displayName=ti;var a4=h.forwardRef((t,n)=>{const s=ur(ti,t.__scopeDialog),a=h.useRef(null),o=Gt(n,s.contentRef,a);return h.useEffect(()=>{const c=a.current;if(c)return Em(c)},[]),e.jsx(hb,{...t,ref:o,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:at(t.onCloseAutoFocus,c=>{c.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:at(t.onPointerDownOutside,c=>{const d=c.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0;(d.button===2||f)&&c.preventDefault()}),onFocusOutside:at(t.onFocusOutside,c=>c.preventDefault())})}),i4=h.forwardRef((t,n)=>{const s=ur(ti,t.__scopeDialog),a=h.useRef(!1),o=h.useRef(!1);return e.jsx(hb,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{t.onCloseAutoFocus?.(c),c.defaultPrevented||(a.current||s.triggerRef.current?.focus(),c.preventDefault()),a.current=!1,o.current=!1},onInteractOutside:c=>{t.onInteractOutside?.(c),c.defaultPrevented||(a.current=!0,c.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const d=c.target;s.triggerRef.current?.contains(d)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&o.current&&c.preventDefault()}})}),hb=h.forwardRef((t,n)=>{const{__scopeDialog:s,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:c,...d}=t,f=ur(ti,s),p=h.useRef(null),x=Gt(n,p);return km(),e.jsxs(e.Fragment,{children:[e.jsx(Ed,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:o,onUnmountAutoFocus:c,children:e.jsx(Bi,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":Om(f.open),...d,ref:x,onDismiss:()=>f.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(o4,{titleId:f.titleId}),e.jsx(c4,{contentRef:p,descriptionId:f.descriptionId})]})]})}),Am="DialogTitle",mb=h.forwardRef((t,n)=>{const{__scopeDialog:s,...a}=t,o=ur(Am,s);return e.jsx(jt.h2,{id:o.titleId,...a,ref:n})});mb.displayName=Am;var pb="DialogDescription",gb=h.forwardRef((t,n)=>{const{__scopeDialog:s,...a}=t,o=ur(pb,s);return e.jsx(jt.p,{id:o.descriptionId,...a,ref:n})});gb.displayName=pb;var xb="DialogClose",vb=h.forwardRef((t,n)=>{const{__scopeDialog:s,...a}=t,o=ur(xb,s);return e.jsx(jt.button,{type:"button",...a,ref:n,onClick:at(t.onClick,()=>o.onOpenChange(!1))})});vb.displayName=xb;function Om(t){return t?"open":"closed"}var yb="DialogTitleWarning",[rF,wb]=$_(yb,{contentName:ti,titleName:Am,docsSlug:"dialog"}),o4=({titleId:t})=>{const n=wb(yb),s=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return h.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},l4="DialogDescriptionWarning",c4=({contentRef:t,descriptionId:n})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wb(l4).contentName}}.`;return h.useEffect(()=>{const o=t.current?.getAttribute("aria-describedby");n&&o&&(document.getElementById(n)||console.warn(a))},[a,t,n]),null},d4=ib,u4=lb,f4=db,jb=ub,bb=fb,Nb=mb,_b=gb,h4=vb;const At=d4,m4=u4,p4=f4,Sb=h.forwardRef(({className:t,...n},s)=>e.jsx(jb,{ref:s,className:ht("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n}));Sb.displayName=jb.displayName;const St=h.forwardRef(({className:t,children:n,...s},a)=>e.jsxs(p4,{children:[e.jsx(Sb,{}),e.jsxs(bb,{ref:a,className:ht("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[n,e.jsxs(h4,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(Gh,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));St.displayName=bb.displayName;const Ct=({className:t,...n})=>e.jsx("div",{className:ht("flex flex-col space-y-1.5 text-center sm:text-left",t),...n});Ct.displayName="DialogHeader";const Cb=({className:t,...n})=>e.jsx("div",{className:ht("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n});Cb.displayName="DialogFooter";const Pt=h.forwardRef(({className:t,...n},s)=>e.jsx(Nb,{ref:s,className:ht("text-lg font-semibold leading-none tracking-tight",t),...n}));Pt.displayName=Nb.displayName;const Ot=h.forwardRef(({className:t,...n},s)=>e.jsx(_b,{ref:s,className:ht("text-sm text-muted-foreground",t),...n}));Ot.displayName=_b.displayName;const mn=h.forwardRef(({className:t,...n},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:ht("w-full caption-bottom text-sm",t),...n})}));mn.displayName="Table";const pn=h.forwardRef(({className:t,...n},s)=>e.jsx("thead",{ref:s,className:ht("[&_tr]:border-b",t),...n}));pn.displayName="TableHeader";const gn=h.forwardRef(({className:t,...n},s)=>e.jsx("tbody",{ref:s,className:ht("[&_tr:last-child]:border-0",t),...n}));gn.displayName="TableBody";const g4=h.forwardRef(({className:t,...n},s)=>e.jsx("tfoot",{ref:s,className:ht("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n}));g4.displayName="TableFooter";const lt=h.forwardRef(({className:t,...n},s)=>e.jsx("tr",{ref:s,className:ht("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...n}));lt.displayName="TableRow";const de=h.forwardRef(({className:t,...n},s)=>e.jsx("th",{ref:s,className:ht("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...n}));de.displayName="TableHead";const oe=h.forwardRef(({className:t,...n},s)=>e.jsx("td",{ref:s,className:ht("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...n}));oe.displayName="TableCell";const x4=h.forwardRef(({className:t,...n},s)=>e.jsx("caption",{ref:s,className:ht("mt-4 text-sm text-muted-foreground",t),...n}));x4.displayName="TableCaption";const v4=cd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600",info:"border-transparent bg-blue-500 text-white hover:bg-blue-600"}},defaultVariants:{variant:"default"}});function He({className:t,variant:n,...s}){return e.jsx("div",{className:ht(v4({variant:n}),t),...s})}var Id="Checkbox",[y4]=Cr(Id),[w4,Mm]=y4(Id);function j4(t){const{__scopeCheckbox:n,checked:s,children:a,defaultChecked:o,disabled:c,form:d,name:f,onCheckedChange:p,required:x,value:m="on",internal_do_not_use_render:v}=t,[C,w]=_a({prop:s,defaultProp:o??!1,onChange:p,caller:Id}),[_,b]=h.useState(null),[S,E]=h.useState(null),P=h.useRef(!1),N=_?!!d||!!_.closest("form"):!0,A={checked:C,disabled:c,setChecked:w,control:_,setControl:b,name:f,form:d,value:m,hasConsumerStoppedPropagationRef:P,required:x,defaultChecked:Na(o)?!1:o,isFormControl:N,bubbleInput:S,setBubbleInput:E};return e.jsx(w4,{scope:n,...A,children:b4(v)?v(A):a})}var Pb="CheckboxTrigger",kb=h.forwardRef(({__scopeCheckbox:t,onKeyDown:n,onClick:s,...a},o)=>{const{control:c,value:d,disabled:f,checked:p,required:x,setControl:m,setChecked:v,hasConsumerStoppedPropagationRef:C,isFormControl:w,bubbleInput:_}=Mm(Pb,t),b=Gt(o,m),S=h.useRef(p);return h.useEffect(()=>{const E=c?.form;if(E){const P=()=>v(S.current);return E.addEventListener("reset",P),()=>E.removeEventListener("reset",P)}},[c,v]),e.jsx(jt.button,{type:"button",role:"checkbox","aria-checked":Na(p)?"mixed":p,"aria-required":x,"data-state":Ab(p),"data-disabled":f?"":void 0,disabled:f,value:d,...a,ref:b,onKeyDown:at(n,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:at(s,E=>{v(P=>Na(P)?!0:!P),_&&w&&(C.current=E.isPropagationStopped(),C.current||E.stopPropagation())})})});kb.displayName=Pb;var Fm=h.forwardRef((t,n)=>{const{__scopeCheckbox:s,name:a,checked:o,defaultChecked:c,required:d,disabled:f,value:p,onCheckedChange:x,form:m,...v}=t;return e.jsx(j4,{__scopeCheckbox:s,checked:o,defaultChecked:c,disabled:f,required:d,onCheckedChange:x,name:a,form:m,value:p,internal_do_not_use_render:({isFormControl:C})=>e.jsxs(e.Fragment,{children:[e.jsx(kb,{...v,ref:n,__scopeCheckbox:s}),C&&e.jsx(Rb,{__scopeCheckbox:s})]})})});Fm.displayName=Id;var Eb="CheckboxIndicator",Tb=h.forwardRef((t,n)=>{const{__scopeCheckbox:s,forceMount:a,...o}=t,c=Mm(Eb,s);return e.jsx(Pr,{present:a||Na(c.checked)||c.checked===!0,children:e.jsx(jt.span,{"data-state":Ab(c.checked),"data-disabled":c.disabled?"":void 0,...o,ref:n,style:{pointerEvents:"none",...t.style}})})});Tb.displayName=Eb;var Db="CheckboxBubbleInput",Rb=h.forwardRef(({__scopeCheckbox:t,...n},s)=>{const{control:a,hasConsumerStoppedPropagationRef:o,checked:c,defaultChecked:d,required:f,disabled:p,name:x,value:m,form:v,bubbleInput:C,setBubbleInput:w}=Mm(Db,t),_=Gt(s,w),b=jj(c),S=B0(a);h.useEffect(()=>{const P=C;if(!P)return;const N=window.HTMLInputElement.prototype,D=Object.getOwnPropertyDescriptor(N,"checked").set,U=!o.current;if(b!==c&&D){const R=new Event("click",{bubbles:U});P.indeterminate=Na(c),D.call(P,Na(c)?!1:c),P.dispatchEvent(R)}},[C,b,c,o]);const E=h.useRef(Na(c)?!1:c);return e.jsx(jt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??E.current,required:f,disabled:p,name:x,value:m,form:v,...n,tabIndex:-1,ref:_,style:{...n.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Rb.displayName=Db;function b4(t){return typeof t=="function"}function Na(t){return t==="indeterminate"}function Ab(t){return Na(t)?"indeterminate":t?"checked":"unchecked"}const ad=h.forwardRef(({className:t,...n},s)=>e.jsx(Fm,{ref:s,className:ht("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:e.jsx(Tb,{className:ht("flex items-center justify-center text-current"),children:e.jsx(Ty,{className:"h-4 w-4"})})}));ad.displayName=Fm.displayName;function N4(){const[t,n]=h.useState("today"),[s,a]=h.useState({patients:[],appointments:[],visits:[],prescriptions:[],labTests:[],invoices:[]}),[o,c]=h.useState({totalPatients:0,totalAppointments:0,totalVisits:0,totalPrescriptions:0,totalLabTests:0,totalInvoices:0,totalRevenue:0}),[d,f]=h.useState(!1),[p,x]=h.useState({hospitalName:"Medical Center",reportHeader:"Healthcare Management System Report",consultationFee:2e3,includePatientDetails:!0,includeAppointments:!0,includeVisits:!0,includePrescriptions:!0,includeLabTests:!0,includeInvoices:!0});h.useEffect(()=>{C(),m()},[t]);const m=async()=>{try{const{data:E}=await q.get("/settings"),P=E.settings||[];if(P.length>0){const N={};P.forEach(A=>{N[A.key]=A.value}),x(A=>({...A,consultationFee:Number(N.consultation_fee||A.consultationFee),hospitalName:N.hospital_name||A.hospitalName,reportHeader:N.report_header||A.reportHeader}))}}catch{console.log("Using default settings")}},v=()=>{const E=new Date;switch(t){case"today":return{start:As(E),end:Ha(E)};case"week":return{start:us(E),end:ba(E)};case"month":return{start:Fn(E),end:ja(E)};case"all":return{start:new Date("2000-01-01"),end:E};default:return{start:As(E),end:Ha(E)}}},C=async()=>{f(!0);try{const{start:E,end:P}=v(),N=E.toISOString(),A=P.toISOString(),[D,U,R,L,pe,ee]=await Promise.allSettled([q.get(`/patients?from=${N}&to=${A}`),q.get(`/appointments?from=${N}&to=${A}`),q.get(`/visits?from=${N}&to=${A}`),q.get(`/prescriptions?from=${N}&to=${A}`),q.get(`/lab-tests?from=${N}&to=${A}`),q.get(`/billing/invoices?from=${N}&to=${A}&limit=1000`)]),ve=D.status==="fulfilled"?D.value.data.patients||[]:[],ge=U.status==="fulfilled"?U.value.data.appointments||[]:[],V=R.status==="fulfilled"?R.value.data.visits||[]:[],le=L.status==="fulfilled"?L.value.data.prescriptions||[]:[],we=pe.status==="fulfilled"?pe.value.data.tests||[]:[],fe=ee.status==="fulfilled"?ee.value.data.invoices||[]:[];console.log("Prescriptions Data:",le),console.log("Lab Tests Data:",we),console.log("Invoices Data:",fe);const ne=fe.reduce((se,T)=>se+(Number(T.total_amount)||0),0),M=fe.reduce((se,T)=>se+(Number(T.total_amount)||0),0),K=we.length;console.log("Total Prescriptions:",le.length),console.log("Total Revenue:",ne),console.log("Total Invoice Amount:",M),console.log("Total Lab Tests:",K),a({patients:ve,appointments:ge,visits:V,prescriptions:le,labTests:we,invoices:fe}),c({totalPatients:ve.length,totalAppointments:ge.length,totalVisits:V.length,totalPrescriptions:le.length,totalLabTests:K,totalInvoices:M,totalRevenue:ne}),D.status==="rejected"&&console.warn("Failed to fetch patients:",D.reason),U.status==="rejected"&&console.warn("Failed to fetch appointments:",U.reason),R.status==="rejected"&&console.warn("Failed to fetch visits:",R.reason),L.status==="rejected"&&console.warn("Failed to fetch prescriptions:",L.reason),pe.status==="rejected"&&console.warn("Failed to fetch lab tests:",pe.reason),ee.status==="rejected"&&console.warn("Failed to fetch invoices:",ee.reason)}catch(E){console.error("Error fetching report data:",E),I.error("Failed to load report data")}finally{f(!1)}},w=()=>{window.print()},_=()=>{const E=b(),P=new Blob([E],{type:"text/csv"}),N=window.URL.createObjectURL(P),A=document.createElement("a");A.href=N,A.download=`report_${t}_${Fe(new Date,"yyyy-MM-dd")}.csv`,A.click(),window.URL.revokeObjectURL(N),I.success("Report exported successfully")},b=()=>{let E=`${p.reportHeader}
`;return E+=`Generated: ${Fe(new Date,"MMM dd, yyyy HH:mm")}
`,E+=`Period: ${t.toUpperCase()}

`,E+=`SUMMARY
`,E+=`Total Patients,${o.totalPatients}
`,E+=`Total Appointments,${o.totalAppointments}
`,E+=`Total Visits,${o.totalVisits}
`,E+=`Total Prescriptions,${o.totalPrescriptions}
`,E+=`Total Lab Tests,${o.totalLabTests}

`,p.includePatientDetails&&s.patients.length>0&&(E+=`PATIENTS
`,E+=`Name,Phone,Gender,Blood Group,Date of Birth,Status
`,s.patients.forEach(P=>{E+=`${P.full_name},${P.phone},${P.gender},${P.blood_group||"N/A"},${P.date_of_birth},${P.status}
`}),E+=`
`),p.includeAppointments&&s.appointments.length>0&&(E+=`APPOINTMENTS
`,E+=`Patient,Doctor,Date,Time,Status,Reason
`,s.appointments.forEach(P=>{E+=`${P.patient?.full_name||"N/A"},${P.doctor?.full_name||"N/A"},${P.appointment_date},${P.appointment_time},${P.status},${P.reason||"N/A"}
`}),E+=`
`),E},S=()=>{switch(t){case"today":return"Today";case"week":return"This Week";case"month":return"This Month";case"all":return"All Time";default:return"Today"}};return d?e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"h-20 bg-gray-200 animate-pulse rounded-lg"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:[1,2,3,4].map(E=>e.jsx("div",{className:"h-24 bg-gray-200 animate-pulse rounded-lg"},E))})]}):e.jsxs("div",{className:"space-y-8 print:space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between print:hidden",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Admin Reports"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate and export system reports"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(sn,{value:t,onValueChange:E=>n(E),children:[e.jsx(en,{className:"w-40",children:e.jsx(rn,{})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"today",children:"Today"}),e.jsx(_e,{value:"week",children:"This Week"}),e.jsx(_e,{value:"month",children:"This Month"}),e.jsx(_e,{value:"all",children:"All Time"})]})]}),e.jsxs(G,{variant:"outline",size:"sm",onClick:_,children:[e.jsx(dd,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),e.jsxs(G,{size:"sm",onClick:w,children:[e.jsx(Oy,{className:"h-4 w-4 mr-2"}),"Print"]})]})]}),e.jsxs("div",{className:"hidden print:block",style:{padding:"20px",fontFamily:"monospace"},children:[e.jsxs("div",{style:{textAlign:"center",borderTop:"3px double #000",borderBottom:"3px double #000",padding:"20px 0",marginBottom:"30px"},children:[e.jsx("div",{style:{width:"120px",height:"120px",margin:"0 auto 15px auto"},children:e.jsx(_m,{size:"xl",showText:!1})}),e.jsx("h1",{style:{fontSize:"28px",fontWeight:"bold",margin:"10px 0",letterSpacing:"3px",color:"#1A5A42"},children:"HASET"}),e.jsx("h2",{style:{fontSize:"18px",margin:"5px 0",fontWeight:"600",color:"#2D7A5F"},children:"Hospital Management System"}),e.jsx("h3",{style:{fontSize:"16px",margin:"5px 0",fontWeight:"normal",color:"#666"},children:"Healthcare Management System Report"}),e.jsxs("div",{style:{marginTop:"15px",fontSize:"14px",color:"#333"},children:[e.jsxs("p",{style:{margin:"5px 0"},children:[e.jsx("strong",{children:"Generated:"})," ",Fe(new Date,"MMMM dd, yyyy - HH:mm")]}),e.jsxs("p",{style:{margin:"5px 0"},children:[e.jsx("strong",{children:"Period:"})," ",S()]})]})]}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold",textAlign:"center",borderBottom:"2px solid #000",paddingBottom:"10px",marginBottom:"30px"},children:"SUMMARY REPORT"}),e.jsxs("div",{style:{lineHeight:"1.8",maxWidth:"700px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"25px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"10px"},children:"PATIENT STATISTICS"}),e.jsx("div",{style:{paddingLeft:"20px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Total Patients:"}),e.jsx("span",{style:{fontWeight:"bold",minWidth:"100px",textAlign:"right"},children:o.totalPatients})]})})]}),e.jsxs("div",{style:{marginBottom:"25px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"10px"},children:"APPOINTMENT STATISTICS"}),e.jsx("div",{style:{paddingLeft:"20px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Total Appointments:"}),e.jsx("span",{style:{fontWeight:"bold",minWidth:"100px",textAlign:"right"},children:o.totalAppointments})]})})]}),e.jsxs("div",{style:{marginBottom:"25px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"10px"},children:"VISIT STATISTICS"}),e.jsx("div",{style:{paddingLeft:"20px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Total Visits:"}),e.jsx("span",{style:{fontWeight:"bold",minWidth:"100px",textAlign:"right"},children:o.totalVisits})]})})]}),e.jsxs("div",{style:{marginBottom:"25px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"10px"},children:"PRESCRIPTION STATISTICS"}),e.jsx("div",{style:{paddingLeft:"20px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Total Prescriptions:"}),e.jsx("span",{style:{fontWeight:"bold",minWidth:"100px",textAlign:"right"},children:o.totalPrescriptions})]})})]}),e.jsxs("div",{style:{marginBottom:"25px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"10px"},children:"LAB TEST STATISTICS"}),e.jsx("div",{style:{paddingLeft:"20px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Total Lab Tests:"}),e.jsx("span",{style:{fontWeight:"bold",minWidth:"100px",textAlign:"right"},children:o.totalLabTests})]})})]}),s.invoices.length>0&&e.jsxs("div",{style:{marginBottom:"25px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"10px"},children:"BILLING STATISTICS"}),e.jsxs("div",{style:{paddingLeft:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{children:"Total Invoices:"}),e.jsx("span",{style:{fontWeight:"bold",minWidth:"150px",textAlign:"right"},children:s.invoices.length})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{children:"Paid Invoices:"}),e.jsx("span",{style:{fontWeight:"bold",minWidth:"150px",textAlign:"right"},children:s.invoices.filter(E=>E.status==="Paid").length})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"15px"},children:[e.jsx("span",{children:"Pending Invoices:"}),e.jsx("span",{style:{fontWeight:"bold",minWidth:"150px",textAlign:"right"},children:s.invoices.filter(E=>E.status!=="Paid").length})]}),e.jsxs("div",{style:{borderTop:"1px solid #000",paddingTop:"10px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:"Total Revenue:"}),e.jsxs("span",{style:{fontWeight:"bold",minWidth:"150px",textAlign:"right"},children:["TSh ",s.invoices.filter(E=>E.status==="Paid").reduce((E,P)=>E+Number(P.total_amount||0),0).toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Outstanding Amount:"}),e.jsxs("span",{style:{fontWeight:"bold",minWidth:"150px",textAlign:"right"},children:["TSh ",s.invoices.filter(E=>E.status!=="Paid").reduce((E,P)=>E+(Number(P.total_amount||0)-Number(P.paid_amount||0)),0).toLocaleString()]})]})]})]})]})]}),e.jsxs("div",{style:{textAlign:"center",borderTop:"3px double #000",borderBottom:"3px double #000",padding:"15px 0",marginTop:"50px"},children:[e.jsx("p",{style:{margin:"5px 0",fontWeight:"bold"},children:"End of Report"}),e.jsx("p",{style:{margin:"5px 0",fontSize:"12px"},children:"Generated by Hospital Management System"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-5 print:hidden",children:[e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium",children:"Patients"})}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold",children:o.totalPatients})})]}),e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium",children:"Appointments"})}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold",children:o.totalAppointments})})]}),e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium",children:"Visits"})}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold",children:o.totalVisits})})]}),e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium",children:"Prescriptions"})}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold",children:o.totalPrescriptions})})]}),e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium",children:"Lab Tests"})}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold",children:o.totalLabTests})})]})]}),e.jsx("style",{children:`
        @media print {
          /* Hide ALL elements first */
          * {
            visibility: hidden;
          }
          
          /* Show ONLY the print report */
          .hidden.print\\:block,
          .hidden.print\\:block * {
            visibility: visible !important;
          }
          
          /* Position print report at top of page */
          .hidden.print\\:block {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
          }
          
          /* Remove height from hidden elements to prevent extra pages */
          .space-y-8 > *:not(.hidden) {
            height: 0 !important;
            overflow: hidden !important;
          }
          
          /* Prevent page breaks */
          .hidden.print\\:block {
            page-break-after: avoid !important;
          }
          
          @page {
            margin: 1cm;
            /* Remove browser default headers and footers */
            size: auto;
          }
          
          /* Hide browser print headers/footers */
          @page {
            margin-top: 0;
            margin-bottom: 0;
          }
          
          /* Ensure body doesn't create extra pages */
          body {
            height: auto !important;
          }
        }
      `})]})}var gt=function(){return gt=Object.assign||function(n){for(var s,a=1,o=arguments.length;a<o;a++){s=arguments[a];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c])}return n},gt.apply(this,arguments)};function _4(t,n){var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(s[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(t);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(t,a[o])&&(s[a[o]]=t[a[o]]);return s}function Ob(t,n,s){for(var a=0,o=n.length,c;a<o;a++)(c||!(a in n))&&(c||(c=Array.prototype.slice.call(n,0,a)),c[a]=n[a]);return t.concat(c||Array.prototype.slice.call(n))}function hl(t){return t.mode==="multiple"}function ml(t){return t.mode==="range"}function Ld(t){return t.mode==="single"}var S4={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function C4(t,n){return Fe(t,"LLLL y",n)}function P4(t,n){return Fe(t,"d",n)}function k4(t,n){return Fe(t,"LLLL",n)}function E4(t){return"".concat(t)}function T4(t,n){return Fe(t,"cccccc",n)}function D4(t,n){return Fe(t,"yyyy",n)}var R4=Object.freeze({__proto__:null,formatCaption:C4,formatDay:P4,formatMonthCaption:k4,formatWeekNumber:E4,formatWeekdayName:T4,formatYearCaption:D4}),A4=function(t,n,s){return Fe(t,"do MMMM (EEEE)",s)},O4=function(){return"Month: "},M4=function(){return"Go to next month"},F4=function(){return"Go to previous month"},I4=function(t,n){return Fe(t,"cccc",n)},L4=function(t){return"Week n. ".concat(t)},$4=function(){return"Year: "},B4=Object.freeze({__proto__:null,labelDay:A4,labelMonthDropdown:O4,labelNext:M4,labelPrevious:F4,labelWeekNumber:L4,labelWeekday:I4,labelYearDropdown:$4});function U4(){var t="buttons",n=S4,s=Gw,a={},o={},c=1,d={},f=new Date;return{captionLayout:t,classNames:n,formatters:R4,labels:B4,locale:s,modifiersClassNames:a,modifiers:o,numberOfMonths:c,styles:d,today:f,mode:"default"}}function z4(t){var n=t.fromYear,s=t.toYear,a=t.fromMonth,o=t.toMonth,c=t.fromDate,d=t.toDate;return a?c=Fn(a):n&&(c=new Date(n,0,1)),o?d=ja(o):s&&(d=new Date(s,11,31)),{fromDate:c?As(c):void 0,toDate:d?As(d):void 0}}var Mb=h.createContext(void 0);function W4(t){var n,s=t.initialProps,a=U4(),o=z4(s),c=o.fromDate,d=o.toDate,f=(n=s.captionLayout)!==null&&n!==void 0?n:a.captionLayout;f!=="buttons"&&(!c||!d)&&(f="buttons");var p;(Ld(s)||hl(s)||ml(s))&&(p=s.onSelect);var x=gt(gt(gt({},a),s),{captionLayout:f,classNames:gt(gt({},a.classNames),s.classNames),components:gt({},s.components),formatters:gt(gt({},a.formatters),s.formatters),fromDate:c,labels:gt(gt({},a.labels),s.labels),mode:s.mode||a.mode,modifiers:gt(gt({},a.modifiers),s.modifiers),modifiersClassNames:gt(gt({},a.modifiersClassNames),s.modifiersClassNames),onSelect:p,styles:gt(gt({},a.styles),s.styles),toDate:d});return e.jsx(Mb.Provider,{value:x,children:t.children})}function cn(){var t=h.useContext(Mb);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function Fb(t){var n=cn(),s=n.locale,a=n.classNames,o=n.styles,c=n.formatters.formatCaption;return e.jsx("div",{className:a.caption_label,style:o.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:c(t.displayMonth,{locale:s})})}function V4(t){return e.jsx("svg",gt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Ib(t){var n,s,a=t.onChange,o=t.value,c=t.children,d=t.caption,f=t.className,p=t.style,x=cn(),m=(s=(n=x.components)===null||n===void 0?void 0:n.IconDropdown)!==null&&s!==void 0?s:V4;return e.jsxs("div",{className:f,style:p,children:[e.jsx("span",{className:x.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:x.classNames.dropdown,style:x.styles.dropdown,value:o,onChange:a,children:c}),e.jsxs("div",{className:x.classNames.caption_label,style:x.styles.caption_label,"aria-hidden":"true",children:[d,e.jsx(m,{className:x.classNames.dropdown_icon,style:x.styles.dropdown_icon})]})]})}function H4(t){var n,s=cn(),a=s.fromDate,o=s.toDate,c=s.styles,d=s.locale,f=s.formatters.formatMonthCaption,p=s.classNames,x=s.components,m=s.labels.labelMonthDropdown;if(!a)return e.jsx(e.Fragment,{});if(!o)return e.jsx(e.Fragment,{});var v=[];if(yR(a,o))for(var C=Fn(a),w=a.getMonth();w<=o.getMonth();w++)v.push(qf(C,w));else for(var C=Fn(new Date),w=0;w<=11;w++)v.push(qf(C,w));var _=function(S){var E=Number(S.target.value),P=qf(Fn(t.displayMonth),E);t.onChange(P)},b=(n=x?.Dropdown)!==null&&n!==void 0?n:Ib;return e.jsx(b,{name:"months","aria-label":m(),className:p.dropdown_month,style:c.dropdown_month,onChange:_,value:t.displayMonth.getMonth(),caption:f(t.displayMonth,{locale:d}),children:v.map(function(S){return e.jsx("option",{value:S.getMonth(),children:f(S,{locale:d})},S.getMonth())})})}function q4(t){var n,s=t.displayMonth,a=cn(),o=a.fromDate,c=a.toDate,d=a.locale,f=a.styles,p=a.classNames,x=a.components,m=a.formatters.formatYearCaption,v=a.labels.labelYearDropdown,C=[];if(!o)return e.jsx(e.Fragment,{});if(!c)return e.jsx(e.Fragment,{});for(var w=o.getFullYear(),_=c.getFullYear(),b=w;b<=_;b++)C.push(Fv(Kw(new Date),b));var S=function(P){var N=Fv(Fn(s),Number(P.target.value));t.onChange(N)},E=(n=x?.Dropdown)!==null&&n!==void 0?n:Ib;return e.jsx(E,{name:"years","aria-label":v(),className:p.dropdown_year,style:f.dropdown_year,onChange:S,value:s.getFullYear(),caption:m(s,{locale:d}),children:C.map(function(P){return e.jsx("option",{value:P.getFullYear(),children:m(P,{locale:d})},P.getFullYear())})})}function Y4(t,n){var s=h.useState(t),a=s[0],o=s[1],c=n===void 0?a:n;return[c,o]}function K4(t){var n=t.month,s=t.defaultMonth,a=t.today,o=n||s||a||new Date,c=t.toDate,d=t.fromDate,f=t.numberOfMonths,p=f===void 0?1:f;if(c&&Go(c,o)<0){var x=-1*(p-1);o=lr(c,x)}return d&&Go(o,d)<0&&(o=d),Fn(o)}function Q4(){var t=cn(),n=K4(t),s=Y4(n,t.month),a=s[0],o=s[1],c=function(d){var f;if(!t.disableNavigation){var p=Fn(d);o(p),(f=t.onMonthChange)===null||f===void 0||f.call(t,p)}};return[a,c]}function G4(t,n){for(var s=n.reverseMonths,a=n.numberOfMonths,o=Fn(t),c=Fn(lr(o,a)),d=Go(c,o),f=[],p=0;p<d;p++){var x=lr(o,p);f.push(x)}return s&&(f=f.reverse()),f}function X4(t,n){if(!n.disableNavigation){var s=n.toDate,a=n.pagedNavigation,o=n.numberOfMonths,c=o===void 0?1:o,d=a?c:1,f=Fn(t);if(!s)return lr(f,d);var p=Go(s,t);if(!(p<c))return lr(f,d)}}function J4(t,n){if(!n.disableNavigation){var s=n.fromDate,a=n.pagedNavigation,o=n.numberOfMonths,c=o===void 0?1:o,d=a?c:1,f=Fn(t);if(!s)return lr(f,-d);var p=Go(f,s);if(!(p<=0))return lr(f,-d)}}var Lb=h.createContext(void 0);function Z4(t){var n=cn(),s=Q4(),a=s[0],o=s[1],c=G4(a,n),d=X4(a,n),f=J4(a,n),p=function(v){return c.some(function(C){return Pm(v,C)})},x=function(v,C){p(v)||(C&&Ti(v,C)?o(lr(v,1+n.numberOfMonths*-1)):o(v))},m={currentMonth:a,displayMonths:c,goToMonth:o,goToDate:x,previousMonth:f,nextMonth:d,isDateDisplayed:p};return e.jsx(Lb.Provider,{value:m,children:t.children})}function pl(){var t=h.useContext(Lb);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function Kv(t){var n,s=cn(),a=s.classNames,o=s.styles,c=s.components,d=pl().goToMonth,f=function(m){d(lr(m,t.displayIndex?-t.displayIndex:0))},p=(n=c?.CaptionLabel)!==null&&n!==void 0?n:Fb,x=e.jsx(p,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:a.caption_dropdowns,style:o.caption_dropdowns,children:[e.jsx("div",{className:a.vhidden,children:x}),e.jsx(H4,{onChange:f,displayMonth:t.displayMonth}),e.jsx(q4,{onChange:f,displayMonth:t.displayMonth})]})}function eO(t){return e.jsx("svg",gt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function tO(t){return e.jsx("svg",gt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var id=h.forwardRef(function(t,n){var s=cn(),a=s.classNames,o=s.styles,c=[a.button_reset,a.button];t.className&&c.push(t.className);var d=c.join(" "),f=gt(gt({},o.button_reset),o.button);return t.style&&Object.assign(f,t.style),e.jsx("button",gt({},t,{ref:n,type:"button",className:d,style:f}))});function nO(t){var n,s,a=cn(),o=a.dir,c=a.locale,d=a.classNames,f=a.styles,p=a.labels,x=p.labelPrevious,m=p.labelNext,v=a.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var C=x(t.previousMonth,{locale:c}),w=[d.nav_button,d.nav_button_previous].join(" "),_=m(t.nextMonth,{locale:c}),b=[d.nav_button,d.nav_button_next].join(" "),S=(n=v?.IconRight)!==null&&n!==void 0?n:tO,E=(s=v?.IconLeft)!==null&&s!==void 0?s:eO;return e.jsxs("div",{className:d.nav,style:f.nav,children:[!t.hidePrevious&&e.jsx(id,{name:"previous-month","aria-label":C,className:w,style:f.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:o==="rtl"?e.jsx(S,{className:d.nav_icon,style:f.nav_icon}):e.jsx(E,{className:d.nav_icon,style:f.nav_icon})}),!t.hideNext&&e.jsx(id,{name:"next-month","aria-label":_,className:b,style:f.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:o==="rtl"?e.jsx(E,{className:d.nav_icon,style:f.nav_icon}):e.jsx(S,{className:d.nav_icon,style:f.nav_icon})})]})}function Qv(t){var n=cn().numberOfMonths,s=pl(),a=s.previousMonth,o=s.nextMonth,c=s.goToMonth,d=s.displayMonths,f=d.findIndex(function(_){return Pm(t.displayMonth,_)}),p=f===0,x=f===d.length-1,m=n>1&&(p||!x),v=n>1&&(x||!p),C=function(){a&&c(a)},w=function(){o&&c(o)};return e.jsx(nO,{displayMonth:t.displayMonth,hideNext:m,hidePrevious:v,nextMonth:o,previousMonth:a,onPreviousClick:C,onNextClick:w})}function sO(t){var n,s=cn(),a=s.classNames,o=s.disableNavigation,c=s.styles,d=s.captionLayout,f=s.components,p=(n=f?.CaptionLabel)!==null&&n!==void 0?n:Fb,x;return o?x=e.jsx(p,{id:t.id,displayMonth:t.displayMonth}):d==="dropdown"?x=e.jsx(Kv,{displayMonth:t.displayMonth,id:t.id}):d==="dropdown-buttons"?x=e.jsxs(e.Fragment,{children:[e.jsx(Kv,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx(Qv,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):x=e.jsxs(e.Fragment,{children:[e.jsx(p,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(Qv,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:a.caption,style:c.caption,children:x})}function rO(t){var n=cn(),s=n.footer,a=n.styles,o=n.classNames.tfoot;return s?e.jsx("tfoot",{className:o,style:a.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:s})})}):e.jsx(e.Fragment,{})}function aO(t,n,s){for(var a=s?Ja(new Date):us(new Date,{locale:t,weekStartsOn:n}),o=[],c=0;c<7;c++){var d=Zn(a,c);o.push(d)}return o}function iO(){var t=cn(),n=t.classNames,s=t.styles,a=t.showWeekNumber,o=t.locale,c=t.weekStartsOn,d=t.ISOWeek,f=t.formatters.formatWeekdayName,p=t.labels.labelWeekday,x=aO(o,c,d);return e.jsxs("tr",{style:s.head_row,className:n.head_row,children:[a&&e.jsx("td",{style:s.head_cell,className:n.head_cell}),x.map(function(m,v){return e.jsx("th",{scope:"col",className:n.head_cell,style:s.head_cell,"aria-label":p(m,{locale:o}),children:f(m,{locale:o})},v)})]})}function oO(){var t,n=cn(),s=n.classNames,a=n.styles,o=n.components,c=(t=o?.HeadRow)!==null&&t!==void 0?t:iO;return e.jsx("thead",{style:a.head,className:s.head,children:e.jsx(c,{})})}function lO(t){var n=cn(),s=n.locale,a=n.formatters.formatDay;return e.jsx(e.Fragment,{children:a(t.date,{locale:s})})}var Im=h.createContext(void 0);function cO(t){if(!hl(t.initialProps)){var n={selected:void 0,modifiers:{disabled:[]}};return e.jsx(Im.Provider,{value:n,children:t.children})}return e.jsx(dO,{initialProps:t.initialProps,children:t.children})}function dO(t){var n=t.initialProps,s=t.children,a=n.selected,o=n.min,c=n.max,d=function(x,m,v){var C,w;(C=n.onDayClick)===null||C===void 0||C.call(n,x,m,v);var _=!!(m.selected&&o&&a?.length===o);if(!_){var b=!!(!m.selected&&c&&a?.length===c);if(!b){var S=a?Ob([],a):[];if(m.selected){var E=S.findIndex(function(P){return ds(x,P)});S.splice(E,1)}else S.push(x);(w=n.onSelect)===null||w===void 0||w.call(n,S,x,m,v)}}},f={disabled:[]};a&&f.disabled.push(function(x){var m=c&&a.length>c-1,v=a.some(function(C){return ds(C,x)});return!!(m&&!v)});var p={selected:a,onDayClick:d,modifiers:f};return e.jsx(Im.Provider,{value:p,children:s})}function Lm(){var t=h.useContext(Im);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function uO(t,n){var s=n||{},a=s.from,o=s.to;return a&&o?ds(o,t)&&ds(a,t)?void 0:ds(o,t)?{from:o,to:void 0}:ds(a,t)?void 0:nd(a,t)?{from:t,to:o}:{from:a,to:t}:o?nd(t,o)?{from:o,to:t}:{from:t,to:o}:a?Ti(t,a)?{from:t,to:a}:{from:a,to:t}:{from:t,to:void 0}}var $m=h.createContext(void 0);function fO(t){if(!ml(t.initialProps)){var n={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx($m.Provider,{value:n,children:t.children})}return e.jsx(hO,{initialProps:t.initialProps,children:t.children})}function hO(t){var n=t.initialProps,s=t.children,a=n.selected,o=a||{},c=o.from,d=o.to,f=n.min,p=n.max,x=function(w,_,b){var S,E;(S=n.onDayClick)===null||S===void 0||S.call(n,w,_,b);var P=uO(w,a);(E=n.onSelect)===null||E===void 0||E.call(n,P,w,_,b)},m={range_start:[],range_end:[],range_middle:[],disabled:[]};if(c?(m.range_start=[c],d?(m.range_end=[d],ds(c,d)||(m.range_middle=[{after:c,before:d}])):m.range_end=[c]):d&&(m.range_start=[d],m.range_end=[d]),f&&(c&&!d&&m.disabled.push({after:Hf(c,f-1),before:Zn(c,f-1)}),c&&d&&m.disabled.push({after:c,before:Zn(c,f-1)}),!c&&d&&m.disabled.push({after:Hf(d,f-1),before:Zn(d,f-1)})),p){if(c&&!d&&(m.disabled.push({before:Zn(c,-p+1)}),m.disabled.push({after:Zn(c,p-1)})),c&&d){var v=wr(d,c)+1,C=p-v;m.disabled.push({before:Hf(c,C)}),m.disabled.push({after:Zn(d,C)})}!c&&d&&(m.disabled.push({before:Zn(d,-p+1)}),m.disabled.push({after:Zn(d,p-1)}))}return e.jsx($m.Provider,{value:{selected:a,onDayClick:x,modifiers:m},children:s})}function Bm(){var t=h.useContext($m);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Hc(t){return Array.isArray(t)?Ob([],t):t!==void 0?[t]:[]}function mO(t){var n={};return Object.entries(t).forEach(function(s){var a=s[0],o=s[1];n[a]=Hc(o)}),n}var cr;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(cr||(cr={}));var pO=cr.Selected,$r=cr.Disabled,gO=cr.Hidden,xO=cr.Today,eh=cr.RangeEnd,th=cr.RangeMiddle,nh=cr.RangeStart,vO=cr.Outside;function yO(t,n,s){var a,o=(a={},a[pO]=Hc(t.selected),a[$r]=Hc(t.disabled),a[gO]=Hc(t.hidden),a[xO]=[t.today],a[eh]=[],a[th]=[],a[nh]=[],a[vO]=[],a);return t.fromDate&&o[$r].push({before:t.fromDate}),t.toDate&&o[$r].push({after:t.toDate}),hl(t)?o[$r]=o[$r].concat(n.modifiers[$r]):ml(t)&&(o[$r]=o[$r].concat(s.modifiers[$r]),o[nh]=s.modifiers[nh],o[th]=s.modifiers[th],o[eh]=s.modifiers[eh]),o}var $b=h.createContext(void 0);function wO(t){var n=cn(),s=Lm(),a=Bm(),o=yO(n,s,a),c=mO(n.modifiers),d=gt(gt({},o),c);return e.jsx($b.Provider,{value:d,children:t.children})}function Bb(){var t=h.useContext($b);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function jO(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function bO(t){return!!(t&&typeof t=="object"&&"from"in t)}function NO(t){return!!(t&&typeof t=="object"&&"after"in t)}function _O(t){return!!(t&&typeof t=="object"&&"before"in t)}function SO(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function CO(t,n){var s,a=n.from,o=n.to;if(a&&o){var c=wr(o,a)<0;c&&(s=[o,a],a=s[0],o=s[1]);var d=wr(t,a)>=0&&wr(o,t)>=0;return d}return o?ds(o,t):a?ds(a,t):!1}function PO(t){return Cm(t)}function kO(t){return Array.isArray(t)&&t.every(Cm)}function EO(t,n){return n.some(function(s){if(typeof s=="boolean")return s;if(PO(s))return ds(t,s);if(kO(s))return s.includes(t);if(bO(s))return CO(t,s);if(SO(s))return s.dayOfWeek.includes(t.getDay());if(jO(s)){var a=wr(s.before,t),o=wr(s.after,t),c=a>0,d=o<0,f=nd(s.before,s.after);return f?d&&c:c||d}return NO(s)?wr(t,s.after)>0:_O(s)?wr(s.before,t)>0:typeof s=="function"?s(t):!1})}function Um(t,n,s){var a=Object.keys(n).reduce(function(c,d){var f=n[d];return EO(t,f)&&c.push(d),c},[]),o={};return a.forEach(function(c){return o[c]=!0}),s&&!Pm(t,s)&&(o.outside=!0),o}function TO(t,n){for(var s=Fn(t[0]),a=ja(t[t.length-1]),o,c,d=s;d<=a;){var f=Um(d,n),p=!f.disabled&&!f.hidden;if(!p){d=Zn(d,1);continue}if(f.selected)return d;f.today&&!c&&(c=d),o||(o=d),d=Zn(d,1)}return c||o}var DO=365;function Ub(t,n){var s=n.moveBy,a=n.direction,o=n.context,c=n.modifiers,d=n.retry,f=d===void 0?{count:0,lastFocused:t}:d,p=o.weekStartsOn,x=o.fromDate,m=o.toDate,v=o.locale,C={day:Zn,week:Rh,month:lr,year:mD,startOfWeek:function(S){return o.ISOWeek?Ja(S):us(S,{locale:v,weekStartsOn:p})},endOfWeek:function(S){return o.ISOWeek?Qw(S):ba(S,{locale:v,weekStartsOn:p})}},w=C[s](t,a==="after"?1:-1);a==="before"&&x?w=pD([x,w]):a==="after"&&m&&(w=gD([m,w]));var _=!0;if(c){var b=Um(w,c);_=!b.disabled&&!b.hidden}return _?w:f.count>DO?f.lastFocused:Ub(w,{moveBy:s,direction:a,context:o,modifiers:c,retry:gt(gt({},f),{count:f.count+1})})}var zb=h.createContext(void 0);function RO(t){var n=pl(),s=Bb(),a=h.useState(),o=a[0],c=a[1],d=h.useState(),f=d[0],p=d[1],x=TO(n.displayMonths,s),m=o??(f&&n.isDateDisplayed(f))?f:x,v=function(){p(o),c(void 0)},C=function(S){c(S)},w=cn(),_=function(S,E){if(o){var P=Ub(o,{moveBy:S,direction:E,context:w,modifiers:s});ds(o,P)||(n.goToDate(P,o),C(P))}},b={focusedDay:o,focusTarget:m,blur:v,focus:C,focusDayAfter:function(){return _("day","after")},focusDayBefore:function(){return _("day","before")},focusWeekAfter:function(){return _("week","after")},focusWeekBefore:function(){return _("week","before")},focusMonthBefore:function(){return _("month","before")},focusMonthAfter:function(){return _("month","after")},focusYearBefore:function(){return _("year","before")},focusYearAfter:function(){return _("year","after")},focusStartOfWeek:function(){return _("startOfWeek","before")},focusEndOfWeek:function(){return _("endOfWeek","after")}};return e.jsx(zb.Provider,{value:b,children:t.children})}function zm(){var t=h.useContext(zb);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function AO(t,n){var s=Bb(),a=Um(t,s,n);return a}var Wm=h.createContext(void 0);function OO(t){if(!Ld(t.initialProps)){var n={selected:void 0};return e.jsx(Wm.Provider,{value:n,children:t.children})}return e.jsx(MO,{initialProps:t.initialProps,children:t.children})}function MO(t){var n=t.initialProps,s=t.children,a=function(c,d,f){var p,x,m;if((p=n.onDayClick)===null||p===void 0||p.call(n,c,d,f),d.selected&&!n.required){(x=n.onSelect)===null||x===void 0||x.call(n,void 0,c,d,f);return}(m=n.onSelect)===null||m===void 0||m.call(n,c,c,d,f)},o={selected:n.selected,onDayClick:a};return e.jsx(Wm.Provider,{value:o,children:s})}function Wb(){var t=h.useContext(Wm);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function FO(t,n){var s=cn(),a=Wb(),o=Lm(),c=Bm(),d=zm(),f=d.focusDayAfter,p=d.focusDayBefore,x=d.focusWeekAfter,m=d.focusWeekBefore,v=d.blur,C=d.focus,w=d.focusMonthBefore,_=d.focusMonthAfter,b=d.focusYearBefore,S=d.focusYearAfter,E=d.focusStartOfWeek,P=d.focusEndOfWeek,N=function(ne){var M,K,se,T;Ld(s)?(M=a.onDayClick)===null||M===void 0||M.call(a,t,n,ne):hl(s)?(K=o.onDayClick)===null||K===void 0||K.call(o,t,n,ne):ml(s)?(se=c.onDayClick)===null||se===void 0||se.call(c,t,n,ne):(T=s.onDayClick)===null||T===void 0||T.call(s,t,n,ne)},A=function(ne){var M;C(t),(M=s.onDayFocus)===null||M===void 0||M.call(s,t,n,ne)},D=function(ne){var M;v(),(M=s.onDayBlur)===null||M===void 0||M.call(s,t,n,ne)},U=function(ne){var M;(M=s.onDayMouseEnter)===null||M===void 0||M.call(s,t,n,ne)},R=function(ne){var M;(M=s.onDayMouseLeave)===null||M===void 0||M.call(s,t,n,ne)},L=function(ne){var M;(M=s.onDayPointerEnter)===null||M===void 0||M.call(s,t,n,ne)},pe=function(ne){var M;(M=s.onDayPointerLeave)===null||M===void 0||M.call(s,t,n,ne)},ee=function(ne){var M;(M=s.onDayTouchCancel)===null||M===void 0||M.call(s,t,n,ne)},ve=function(ne){var M;(M=s.onDayTouchEnd)===null||M===void 0||M.call(s,t,n,ne)},ge=function(ne){var M;(M=s.onDayTouchMove)===null||M===void 0||M.call(s,t,n,ne)},V=function(ne){var M;(M=s.onDayTouchStart)===null||M===void 0||M.call(s,t,n,ne)},le=function(ne){var M;(M=s.onDayKeyUp)===null||M===void 0||M.call(s,t,n,ne)},we=function(ne){var M;switch(ne.key){case"ArrowLeft":ne.preventDefault(),ne.stopPropagation(),s.dir==="rtl"?f():p();break;case"ArrowRight":ne.preventDefault(),ne.stopPropagation(),s.dir==="rtl"?p():f();break;case"ArrowDown":ne.preventDefault(),ne.stopPropagation(),x();break;case"ArrowUp":ne.preventDefault(),ne.stopPropagation(),m();break;case"PageUp":ne.preventDefault(),ne.stopPropagation(),ne.shiftKey?b():w();break;case"PageDown":ne.preventDefault(),ne.stopPropagation(),ne.shiftKey?S():_();break;case"Home":ne.preventDefault(),ne.stopPropagation(),E();break;case"End":ne.preventDefault(),ne.stopPropagation(),P();break}(M=s.onDayKeyDown)===null||M===void 0||M.call(s,t,n,ne)},fe={onClick:N,onFocus:A,onBlur:D,onKeyDown:we,onKeyUp:le,onMouseEnter:U,onMouseLeave:R,onPointerEnter:L,onPointerLeave:pe,onTouchCancel:ee,onTouchEnd:ve,onTouchMove:ge,onTouchStart:V};return fe}function IO(){var t=cn(),n=Wb(),s=Lm(),a=Bm(),o=Ld(t)?n.selected:hl(t)?s.selected:ml(t)?a.selected:void 0;return o}function LO(t){return Object.values(cr).includes(t)}function $O(t,n){var s=[t.classNames.day];return Object.keys(n).forEach(function(a){var o=t.modifiersClassNames[a];if(o)s.push(o);else if(LO(a)){var c=t.classNames["day_".concat(a)];c&&s.push(c)}}),s}function BO(t,n){var s=gt({},t.styles.day);return Object.keys(n).forEach(function(a){var o;s=gt(gt({},s),(o=t.modifiersStyles)===null||o===void 0?void 0:o[a])}),s}function UO(t,n,s){var a,o,c,d=cn(),f=zm(),p=AO(t,n),x=FO(t,p),m=IO(),v=!!(d.onDayClick||d.mode!=="default");h.useEffect(function(){var U;p.outside||f.focusedDay&&v&&ds(f.focusedDay,t)&&((U=s.current)===null||U===void 0||U.focus())},[f.focusedDay,t,s,v,p.outside]);var C=$O(d,p).join(" "),w=BO(d,p),_=!!(p.outside&&!d.showOutsideDays||p.hidden),b=(c=(o=d.components)===null||o===void 0?void 0:o.DayContent)!==null&&c!==void 0?c:lO,S=e.jsx(b,{date:t,displayMonth:n,activeModifiers:p}),E={style:w,className:C,children:S,role:"gridcell"},P=f.focusTarget&&ds(f.focusTarget,t)&&!p.outside,N=f.focusedDay&&ds(f.focusedDay,t),A=gt(gt(gt({},E),(a={disabled:p.disabled,role:"gridcell"},a["aria-selected"]=p.selected,a.tabIndex=N||P?0:-1,a)),x),D={isButton:v,isHidden:_,activeModifiers:p,selectedDays:m,buttonProps:A,divProps:E};return D}function zO(t){var n=h.useRef(null),s=UO(t.date,t.displayMonth,n);return s.isHidden?e.jsx("div",{role:"gridcell"}):s.isButton?e.jsx(id,gt({name:"day",ref:n},s.buttonProps)):e.jsx("div",gt({},s.divProps))}function WO(t){var n=t.number,s=t.dates,a=cn(),o=a.onWeekNumberClick,c=a.styles,d=a.classNames,f=a.locale,p=a.labels.labelWeekNumber,x=a.formatters.formatWeekNumber,m=x(Number(n),{locale:f});if(!o)return e.jsx("span",{className:d.weeknumber,style:c.weeknumber,children:m});var v=p(Number(n),{locale:f}),C=function(w){o(n,s,w)};return e.jsx(id,{name:"week-number","aria-label":v,className:d.weeknumber,style:c.weeknumber,onClick:C,children:m})}function VO(t){var n,s,a=cn(),o=a.styles,c=a.classNames,d=a.showWeekNumber,f=a.components,p=(n=f?.Day)!==null&&n!==void 0?n:zO,x=(s=f?.WeekNumber)!==null&&s!==void 0?s:WO,m;return d&&(m=e.jsx("td",{className:c.cell,style:o.cell,children:e.jsx(x,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:c.row,style:o.row,children:[m,t.dates.map(function(v){return e.jsx("td",{className:c.cell,style:o.cell,role:"presentation",children:e.jsx(p,{displayMonth:t.displayMonth,date:v})},gR(v))})]})}function Gv(t,n,s){for(var a=s?.ISOWeek?Qw(n):ba(n,s),o=s?.ISOWeek?Ja(t):us(t,s),c=wr(a,o),d=[],f=0;f<=c;f++)d.push(Zn(o,f));var p=d.reduce(function(x,m){var v=s?.ISOWeek?Xw(m):Zw(m,s),C=x.find(function(w){return w.weekNumber===v});return C?(C.dates.push(m),x):(x.push({weekNumber:v,dates:[m]}),x)},[]);return p}function HO(t,n){var s=Gv(Fn(t),ja(t),n);if(n?.useFixedWeeks){var a=vR(t,n);if(a<6){var o=s[s.length-1],c=o.dates[o.dates.length-1],d=Rh(c,6-a),f=Gv(Rh(c,1),d,n);s.push.apply(s,f)}}return s}function qO(t){var n,s,a,o=cn(),c=o.locale,d=o.classNames,f=o.styles,p=o.hideHead,x=o.fixedWeeks,m=o.components,v=o.weekStartsOn,C=o.firstWeekContainsDate,w=o.ISOWeek,_=HO(t.displayMonth,{useFixedWeeks:!!x,ISOWeek:w,locale:c,weekStartsOn:v,firstWeekContainsDate:C}),b=(n=m?.Head)!==null&&n!==void 0?n:oO,S=(s=m?.Row)!==null&&s!==void 0?s:VO,E=(a=m?.Footer)!==null&&a!==void 0?a:rO;return e.jsxs("table",{id:t.id,className:d.table,style:f.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!p&&e.jsx(b,{}),e.jsx("tbody",{className:d.tbody,style:f.tbody,children:_.map(function(P){return e.jsx(S,{displayMonth:t.displayMonth,dates:P.dates,weekNumber:P.weekNumber},P.weekNumber)})}),e.jsx(E,{displayMonth:t.displayMonth})]})}function YO(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var KO=YO()?h.useLayoutEffect:h.useEffect,sh=!1,QO=0;function Xv(){return"react-day-picker-".concat(++QO)}function GO(t){var n,s=t??(sh?Xv():null),a=h.useState(s),o=a[0],c=a[1];return KO(function(){o===null&&c(Xv())},[]),h.useEffect(function(){sh===!1&&(sh=!0)},[]),(n=t??o)!==null&&n!==void 0?n:void 0}function XO(t){var n,s,a=cn(),o=a.dir,c=a.classNames,d=a.styles,f=a.components,p=pl().displayMonths,x=GO(a.id?"".concat(a.id,"-").concat(t.displayIndex):void 0),m=a.id?"".concat(a.id,"-grid-").concat(t.displayIndex):void 0,v=[c.month],C=d.month,w=t.displayIndex===0,_=t.displayIndex===p.length-1,b=!w&&!_;o==="rtl"&&(n=[w,_],_=n[0],w=n[1]),w&&(v.push(c.caption_start),C=gt(gt({},C),d.caption_start)),_&&(v.push(c.caption_end),C=gt(gt({},C),d.caption_end)),b&&(v.push(c.caption_between),C=gt(gt({},C),d.caption_between));var S=(s=f?.Caption)!==null&&s!==void 0?s:sO;return e.jsxs("div",{className:v.join(" "),style:C,children:[e.jsx(S,{id:x,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(qO,{id:m,"aria-labelledby":x,displayMonth:t.displayMonth})]},t.displayIndex)}function JO(t){var n=cn(),s=n.classNames,a=n.styles;return e.jsx("div",{className:s.months,style:a.months,children:t.children})}function ZO(t){var n,s,a=t.initialProps,o=cn(),c=zm(),d=pl(),f=h.useState(!1),p=f[0],x=f[1];h.useEffect(function(){o.initialFocus&&c.focusTarget&&(p||(c.focus(c.focusTarget),x(!0)))},[o.initialFocus,p,c.focus,c.focusTarget,c]);var m=[o.classNames.root,o.className];o.numberOfMonths>1&&m.push(o.classNames.multiple_months),o.showWeekNumber&&m.push(o.classNames.with_weeknumber);var v=gt(gt({},o.styles.root),o.style),C=Object.keys(a).filter(function(_){return _.startsWith("data-")}).reduce(function(_,b){var S;return gt(gt({},_),(S={},S[b]=a[b],S))},{}),w=(s=(n=a.components)===null||n===void 0?void 0:n.Months)!==null&&s!==void 0?s:JO;return e.jsx("div",gt({className:m.join(" "),style:v,dir:o.dir,id:o.id,nonce:a.nonce,title:a.title,lang:a.lang},C,{children:e.jsx(w,{children:d.displayMonths.map(function(_,b){return e.jsx(XO,{displayIndex:b,displayMonth:_},b)})})}))}function eM(t){var n=t.children,s=_4(t,["children"]);return e.jsx(W4,{initialProps:s,children:e.jsx(Z4,{children:e.jsx(OO,{initialProps:s,children:e.jsx(cO,{initialProps:s,children:e.jsx(fO,{initialProps:s,children:e.jsx(wO,{children:e.jsx(RO,{children:n})})})})})})})}function tM(t){return e.jsx(eM,gt({},t,{children:e.jsx(ZO,{initialProps:t})}))}function Zo({className:t,classNames:n,showOutsideDays:s=!0,...a}){return e.jsx(tM,{showOutsideDays:s,className:ht("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ht(Th({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ht(Th({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...n},components:{IconLeft:({...o})=>e.jsx(OS,{className:"h-4 w-4"}),IconRight:({...o})=>e.jsx(MS,{className:"h-4 w-4"})},...a})}Zo.displayName="Calendar";function Vb(){console.log(" ActivityLogsView component mounted");const[t,n]=h.useState([]),[s,a]=h.useState(!1),[o,c]=h.useState("today"),[d,f]=h.useState(""),[p,x]=h.useState("all"),[m,v]=h.useState("all"),[C,w]=h.useState("all"),[_,b]=h.useState({from:void 0,to:void 0}),[S,E]=h.useState([]),[P,N]=h.useState({total:0,today:0,thisWeek:0,thisMonth:0});h.useEffect(()=>{console.log(" useEffect triggered, dateFilter:",o),U(),A()},[o]);const A=async()=>{try{const{data:V}=await q.get("/users");E(V.users||[])}catch(V){console.error("Error fetching users:",V),I.error("Failed to load users")}},D=()=>{const V=new Date;switch(o){case"today":return{start:As(V),end:Ha(V)};case"week":return{start:us(V),end:ba(V)};case"month":return{start:Fn(V),end:ja(V)};case"all":return{start:new Date("2000-01-01"),end:V};default:return{start:As(V),end:Ha(V)}}},U=async()=>{a(!0),n([]);try{const{start:V,end:le}=D();console.log(" Fetching logs with date range:",{filter:o,start:V.toISOString(),end:le.toISOString(),startLocal:V.toString(),endLocal:le.toString()});const we={limit:1e3,offset:0};o!=="all"&&(we.from=V.toISOString(),we.to=le.toISOString()),console.log(" API Request params:",we);const{data:fe}=await q.get("/activity",{params:we});console.log(" API Response - Total logs received:",fe.logs?.length||0),fe.logs&&fe.logs.length>0&&(console.log(" First log date:",fe.logs[0].created_at),console.log(" Last log date:",fe.logs[fe.logs.length-1].created_at));const ne=fe.logs||[];console.log("Fetched logs count:",ne.length),console.log("First log:",ne[0]);const M=ne.map(be=>({...be,user:{full_name:be.full_name,email:be.email}}));n(M);const K=new Date,se={start:As(K),end:Ha(K)},T={start:us(K),end:ba(K)},O={start:Fn(K),end:ja(K)},[he,Y,xe,Be]=await Promise.allSettled([q.get("/activity",{params:{from:se.start.toISOString(),to:se.end.toISOString(),limit:1e4}}),q.get("/activity",{params:{from:T.start.toISOString(),to:T.end.toISOString(),limit:1e4}}),q.get("/activity",{params:{from:O.start.toISOString(),to:O.end.toISOString(),limit:1e4}}),q.get("/activity",{params:{limit:1e4}})]),re=he.status==="fulfilled"&&he.value.data.logs?.length||0,$e=Y.status==="fulfilled"&&Y.value.data.logs?.length||0,qe=xe.status==="fulfilled"&&xe.value.data.logs?.length||0,Ge=Be.status==="fulfilled"&&Be.value.data.logs?.length||0;console.log(" Stats calculated:",{todayCount:re,weekCount:$e,monthCount:qe,totalCount:Ge}),N({today:re,thisWeek:$e,thisMonth:qe,total:Ge})}catch(V){console.error(" Error fetching logs:",V),I.error("Failed to load activity logs"),n([])}finally{a(!1),console.log(" Fetch complete, loading set to false")}},R=V=>V.includes("error")||V.includes("failed")?"destructive":V.includes("warn")||V.includes("warning")?"warning":V.includes("create")||V.includes("add")||V.includes("register")?"success":V.includes("update")||V.includes("edit")?"info":V.includes("delete")||V.includes("remove")?"destructive":V.includes("login")||V.includes("auth")?"outline":"secondary",L=V=>V.includes("patient")?"":V.includes("appointment")?"":V.includes("prescription")?"":V.includes("lab")?"":V.includes("payment")?"":V.includes("vitals")?"":V.includes("login")||V.includes("logout")||V.includes("auth")?"":V.includes("user.created")||V.includes("user.updated")||V.includes("user.deleted")?"":"",pe=()=>{const V=[["Timestamp","Action","User","Details"].join(","),...ee.map(ne=>[Fe(new Date(ne.created_at),"yyyy-MM-dd HH:mm:ss"),ne.action,ne.user?.full_name||ne.user_email||"Unknown",JSON.stringify(ne.details||{})].join(","))].join(`
`),le=new Blob([V],{type:"text/csv"}),we=window.URL.createObjectURL(le),fe=document.createElement("a");fe.href=we,fe.download=`activity_logs_${o}_${Fe(new Date,"yyyy-MM-dd")}.csv`,fe.click(),window.URL.revokeObjectURL(we),I.success("Logs exported successfully")},ee=t.filter(V=>{const le=d===""||V.action.toLowerCase().includes(d.toLowerCase())||(V.user?.full_name?.toLowerCase().includes(d.toLowerCase())??!1)||(V.user_email?.toLowerCase().includes(d.toLowerCase())??!1)||typeof V.details=="string"&&V.details.toLowerCase().includes(d.toLowerCase()),we=p==="all"||V.action.includes(p),fe=m==="all"||V.user_id===m,M=C==="all"||(se=>se.includes("error")||se.includes("failed")?"error":se.includes("warn")||se.includes("warning")?"warning":se.includes("create")||se.includes("add")||se.includes("register")?"success":se.includes("update")||se.includes("edit")?"info":se.includes("delete")||se.includes("remove")?"destructive":"info")(V.action)===C,K=!_.from||!_.to||(()=>{const se=new Date(V.created_at);return se>=_.from&&se<=_.to})();return le&&we&&fe&&M&&K}),ve=()=>{if(_.from&&_.to)return`${Fe(_.from,"MMM d, yyyy")} - ${Fe(_.to,"MMM d, yyyy")}`;switch(o){case"today":return"Today";case"week":return"This Week";case"month":return"This Month";case"all":return"All Time";default:return"Custom Range"}},ge=V=>{V?.from&&V?.to?(b(V),c("custom")):V?.from&&(b({from:V.from,to:V.from}),c("custom"))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium",children:"Today"})}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold",children:P.today}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Activities today"})]})]}),e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium",children:"This Week"})}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold",children:P.thisWeek}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Activities this week"})]})]}),e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium",children:"This Month"})}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold",children:P.thisMonth}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Activities this month"})]})]}),e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium",children:"All Time"})}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold",children:P.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total activities"})]})]})]}),e.jsxs(Ce,{children:[e.jsx(Re,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(nl,{className:"h-5 w-5"}),"Activity Logs"]}),e.jsxs(kt,{children:["Viewing ",ee.length," activities for ",ve().toLowerCase()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(G,{variant:"outline",size:"sm",onClick:U,disabled:s,children:[e.jsx(VS,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),e.jsxs(G,{variant:"outline",size:"sm",onClick:pe,children:[e.jsx(dd,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]})}),e.jsxs(De,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Kh,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ke,{placeholder:"Search logs...",value:d,onChange:V=>f(V.target.value),className:"pl-8"})]})}),e.jsxs(sn,{value:o,onValueChange:V=>c(V),children:[e.jsx(en,{className:"w-[150px]",children:e.jsx(rn,{})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"today",children:"Today"}),e.jsx(_e,{value:"week",children:"This Week"}),e.jsx(_e,{value:"month",children:"This Month"}),e.jsx(_e,{value:"all",children:"All Time"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("div",{className:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary/10 text-primary hover:bg-primary/20",children:e.jsxs(sn,{value:p,onValueChange:x,children:[e.jsx(en,{className:"h-6 border-0 p-0 text-xs font-semibold text-primary [&>span]:line-clamp-1 [&>span]:flex [&>span]:items-center [&>span]:gap-1",children:e.jsx(rn,{placeholder:"All Actions"})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"all",children:"All Actions"}),e.jsx(_e,{value:"patient",children:"Patient Actions"}),e.jsx(_e,{value:"appointment",children:"Appointments"}),e.jsx(_e,{value:"prescription",children:"Prescriptions"}),e.jsx(_e,{value:"lab",children:"Lab Tests"}),e.jsx(_e,{value:"payment",children:"Payments"}),e.jsx(_e,{value:"vitals",children:"Vitals"}),e.jsx(_e,{value:"login",children:"Login/Logout"}),e.jsx(_e,{value:"logout",children:"Logout"}),e.jsx(_e,{value:"user",children:"User Management"}),e.jsx(_e,{value:"create",children:"Create"}),e.jsx(_e,{value:"update",children:"Update"}),e.jsx(_e,{value:"delete",children:"Delete"})]})]})}),e.jsx("div",{className:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary/10 text-primary hover:bg-primary/20",children:e.jsxs(sn,{value:m,onValueChange:v,children:[e.jsx(en,{className:"h-6 border-0 p-0 text-xs font-semibold text-primary [&>span]:line-clamp-1 [&>span]:flex [&>span]:items-center [&>span]:gap-1",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ud,{className:"h-3 w-3"}),e.jsx(rn,{placeholder:"All Users"})]})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"all",children:"All Users"}),S.map(V=>e.jsx(_e,{value:V.id,children:V.full_name||V.email},V.id))]})]})}),e.jsx("div",{className:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary/10 text-primary hover:bg-primary/20",children:e.jsxs(sn,{value:C,onValueChange:w,children:[e.jsx(en,{className:"h-6 border-0 p-0 text-xs font-semibold text-primary [&>span]:line-clamp-1 [&>span]:flex [&>span]:items-center [&>span]:gap-1",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Hh,{className:"h-3 w-3"}),e.jsx(rn,{placeholder:"All Severities"})]})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"all",children:"All Severities"}),e.jsx(_e,{value:"error",children:"Error"}),e.jsx(_e,{value:"warning",children:"Warning"}),e.jsx(_e,{value:"success",children:"Success"}),e.jsx(_e,{value:"info",children:"Info"})]})]})}),e.jsxs(Xo,{children:[e.jsx(Jo,{asChild:!0,children:e.jsxs("div",{className:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary/10 text-primary hover:bg-primary/20 cursor-pointer",children:[e.jsx(ns,{className:"mr-1 h-3 w-3"}),_?.from?_.to?e.jsxs("span",{children:[Fe(_.from,"MMM d")," - ",Fe(_.to,"MMM d")]}):e.jsx("span",{children:Fe(_.from,"MMM d, y")}):e.jsx("span",{children:"Date Range"})]})}),e.jsx(Li,{className:"w-auto p-0",align:"start",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 px-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Select Date Range"}),e.jsx(G,{variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>{b({from:void 0,to:void 0}),c("all")},children:"Clear"})]}),e.jsx(Zo,{initialFocus:!0,mode:"range",defaultMonth:_?.from,selected:_,onSelect:ge,numberOfMonths:2,className:"rounded-md border"}),e.jsxs("div",{className:"flex justify-between p-2 border-t",children:[e.jsx(G,{variant:o==="today"?"default":"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>{c("today"),b({from:As(new Date),to:Ha(new Date)})},children:"Today"}),e.jsx(G,{variant:o==="week"?"default":"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>{c("week"),b({from:us(new Date),to:ba(new Date)})},children:"This Week"}),e.jsx(G,{variant:o==="month"?"default":"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>{c("month"),b({from:Fn(new Date),to:ja(new Date)})},children:"This Month"}),e.jsx(G,{variant:o==="all"?"default":"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>{c("all"),b({from:void 0,to:void 0})},children:"All Time"})]})]})})]})]})]}),s?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary"})}):ee.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qa,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No activity logs found"}),e.jsx("p",{className:"text-muted-foreground",children:d||p!=="all"?"Try adjusting your filters":"Activity logs will appear here as users interact with the system"})]}):e.jsx("div",{className:"space-y-3",children:ee.map(V=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-3xl flex-shrink-0 mt-1",children:L(V.action)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(He,{variant:R(V.action),className:"mb-2",children:V.action}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-medium text-foreground",children:V.user?.full_name||"Unknown User"}),e.jsx("span",{className:"text-xs",children:""}),e.jsx("span",{children:Fe(new Date(V.created_at),"MMM dd, yyyy")}),e.jsx("span",{className:"text-xs",children:""}),e.jsx("span",{children:Fe(new Date(V.created_at),"HH:mm:ss")})]})})]}),e.jsxs(At,{children:[e.jsx(m4,{asChild:!0,children:e.jsxs(G,{variant:"outline",size:"sm",className:"flex-shrink-0",children:[e.jsx(qa,{className:"h-3 w-3 mr-1"}),"View Details"]})}),e.jsxs(St,{className:"max-w-2xl",children:[e.jsxs(Ct,{children:[e.jsxs(Pt,{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:L(V.action)}),"Activity Details"]}),e.jsx(Ot,{children:Fe(new Date(V.created_at),"MMMM dd, yyyy HH:mm:ss")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-xs text-muted-foreground",children:"Action"}),e.jsx("div",{className:"mt-1",children:e.jsx(He,{variant:R(V.action),children:V.action})})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-xs text-muted-foreground",children:"User"}),e.jsx("div",{className:"mt-1 font-medium",children:V.user?.full_name||"Unknown User"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:V.user?.email||V.user_email||"No email"})]})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-xs text-muted-foreground",children:"Details (JSON)"}),e.jsx("div",{className:"mt-2 p-4 bg-slate-950 rounded-lg border border-slate-700 shadow-inner max-w-full overflow-hidden",children:V.details?e.jsx("pre",{className:"text-xs max-h-96 font-mono leading-relaxed whitespace-pre-wrap overflow-x-auto",style:{wordBreak:"break-word",overflowWrap:"anywhere"},children:e.jsx("code",{dangerouslySetInnerHTML:{__html:JSON.stringify(V.details,null,2).replace(/"([^"]+)":/g,'<span style="color: #60A5FA">"$1"</span>:').replace(/: "([^"]*)"/g,': <span style="color: #34D399">"$1"</span>').replace(/: (\d+)/g,': <span style="color: #F59E0B">$1</span>').replace(/: (true|false)/g,': <span style="color: #A78BFA">$1</span>').replace(/: (null)/g,': <span style="color: #EF4444">$1</span>').replace(/([{}[\],])/g,'<span style="color: #9CA3AF">$1</span>')},style:{color:"#E5E7EB"}})}):e.jsx("pre",{className:"text-xs font-mono leading-relaxed whitespace-pre-wrap overflow-x-auto",style:{wordBreak:"break-word",overflowWrap:"anywhere"},children:e.jsx("code",{dangerouslySetInnerHTML:{__html:JSON.stringify({message:"No details available"},null,2).replace(/"([^"]+)":/g,'<span style="color: #60A5FA">"$1"</span>:').replace(/: "([^"]*)"/g,': <span style="color: #34D399">"$1"</span>')},style:{color:"#E5E7EB"}})})})]})]})]})]})]})})]})},V.id))})]})]})]})}function nM(){const[t,n]=h.useState([]),[s,a]=h.useState(null),[o,c]=h.useState(""),[d,f]=h.useState(!1),[p,x]=h.useState(!1),[m,v]=h.useState(null),[C,w]=h.useState({}),[_,b]=h.useState({hospital_name:"HASET Medical Center",hospital_address:"Dar es Salaam, Tanzania",hospital_phone:"+255 XXX XXX XXX",hospital_email:"info@hasetmedical.com"});h.useEffect(()=>{E(),S()},[]);const S=async()=>{try{const{data:R}=await q.get("/settings");console.log(" Settings API Response:",R);let L={};R.settingsArray&&Array.isArray(R.settingsArray)?R.settingsArray.forEach(pe=>{L[pe.key]=pe.value}):R.settings&&(L=R.settings),console.log(" Hospital Settings:",{name:L.hospital_name,address:L.hospital_address,phone:L.hospital_phone,email:L.hospital_email}),b({hospital_name:L.hospital_name||"HASET Medical Center",hospital_address:L.hospital_address||"Dar es Salaam, Tanzania",hospital_phone:L.hospital_phone||"+255 XXX XXX XXX",hospital_email:L.hospital_email||"info@hasetmedical.com"})}catch(R){console.error("Error fetching settings:",R)}};h.useEffect(()=>{m&&console.log(" PRINT VIEW DATA UPDATED:",{prescriptions:m.prescriptions?.length||0,labTests:m.labTests?.length||0,prescriptionsData:m.prescriptions,labTestsData:m.labTests})},[m]);const E=async()=>{f(!0);try{const{data:R}=await q.get("/patients",{params:{limit:1e3}});n(R.patients||[])}catch(R){console.error("Error fetching patients:",R),I.error("Failed to load patients")}finally{f(!1)}},P=async R=>{x(!0);try{const L={};C.from&&(L.from=C.from.toISOString()),C.to&&(L.to=C.to.toISOString());const[pe,ee,ve,ge]=await Promise.all([q.get("/appointments",{params:{...L,patient_id:R}}).catch(M=>(console.error("Appointments fetch error:",M),{data:{appointments:[]}})),q.get("/prescriptions",{params:{...L,patient_id:R}}).catch(M=>(console.error("Prescriptions fetch error:",M),{data:{prescriptions:[]}})),q.get("/labs",{params:{...L,patient_id:R}}).catch(M=>(console.error("Lab tests fetch error:",M),{data:{labTests:[]}})),q.get("/billing/invoices",{params:{...L,patient_id:R}}).catch(M=>(console.error("Invoices fetch error:",M),{data:{invoices:[]}}))]),V=ge.data.invoices||[],le=V.filter(M=>M.status==="Paid").reduce((M,K)=>M+Number(K.total_amount||0),0);console.log("=== PATIENT HISTORY DEBUG ==="),console.log("Appointments Response:",pe.data),console.log("Prescriptions Response:",ee.data),console.log("Lab Tests Response:",ve.data),console.log("Invoices Response:",ge.data);const we=pe.data.appointments||[],fe=ee.data.prescriptions||[],ne=ve.data.labTests||[];console.log("Processed Data:",{appointments:we.length,prescriptions:fe.length,prescriptionsWithMeds:fe.filter(M=>M.medications?.length>0).length,totalMedications:fe.reduce((M,K)=>M+(K.medications?.length||0),0),labTests:ne.length,invoices:V.length,totalSpent:le}),fe.length>0&&(console.log(" Prescription Details:"),fe.forEach((M,K)=>{console.log(`  Prescription ${K+1}:`,{id:M.id,date:M.prescription_date,doctor:M.doctor?.full_name,status:M.status,medicationsCount:M.medications?.length||0,medications:M.medications})})),ne.length>0&&(console.log(" Lab Test Details:"),ne.forEach((M,K)=>{console.log(`  Lab Test ${K+1}:`,{id:M.id,name:M.test_name,type:M.test_type,result:M.result_value,status:M.status})})),v({appointments:we,prescriptions:fe,labTests:ne,invoices:V,totalSpent:le})}catch(L){console.error("Error fetching patient history:",L),I.error("Failed to load patient history")}finally{x(!1)}},N=R=>{a(R),P(R.id)},A=()=>{window.print()},D=t.filter(R=>(R.full_name||`${R.first_name} ${R.last_name}`).toLowerCase().includes(o.toLowerCase())||R.phone.includes(o)),U=R=>{const L=new Date(R),pe=new Date;let ee=pe.getFullYear()-L.getFullYear();const ve=pe.getMonth()-L.getMonth();return(ve<0||ve===0&&pe.getDate()<L.getDate())&&ee--,ee};return e.jsxs(e.Fragment,{children:[s&&m&&e.jsx("style",{"data-print-style":"patient-report",children:`
          @media print {
            /* When patient report exists, hide everything else */
            body * { 
              visibility: hidden;
            }
            
            /* FORCE HIDE admin reports specifically */
            .hidden.print\\:block,
            .hidden.print\\:block *,
            .print-report,
            .print-report * {
              visibility: hidden !important;
              display: none !important;
              position: absolute !important;
              left: -99999px !important;
            }
            
            /* Show ONLY patient report */
            #patient-report-print {
              visibility: visible !important;
              display: block !important;
              position: absolute !important;
              left: 0 !important;
              top: 0 !important;
              width: 100% !important;
              height: auto !important;
              overflow: visible !important;
            }
            
            #patient-report-print * { 
              visibility: visible !important;
              height: auto !important;
              overflow: visible !important;
            }
          
          /* Ensure proper display for elements */
          #patient-report-print div {
            display: block !important;
          }
          
          #patient-report-print span,
          #patient-report-print strong,
          #patient-report-print em {
            display: inline !important;
          }
          
          #patient-report-print table {
            display: table !important;
          }
          
          #patient-report-print thead {
            display: table-header-group !important;
          }
          
          #patient-report-print tbody {
            display: table-row-group !important;
          }
          
          #patient-report-print tr {
            display: table-row !important;
          }
          
          #patient-report-print td,
          #patient-report-print th {
            display: table-cell !important;
          }
          
          #patient-report-print p,
          #patient-report-print h1,
          #patient-report-print h2,
          #patient-report-print h3 {
            display: block !important;
          }
          
          /* Support flex layouts */
          #patient-report-print div[style*="display: flex"],
          #patient-report-print div[style*="display:flex"] {
            display: flex !important;
          }
          
          /* Page settings */
          @page {
            margin: 1cm;
            size: A4;
          }
          
          /* Position and style patient report */
          #patient-report-print { 
            display: block !important;
            position: absolute !important; 
            left: 0 !important; 
            top: 0 !important; 
            width: 100% !important;
            max-width: 210mm !important;
            padding: 0 !important;
            margin: 0 !important;
            font-family: Arial, sans-serif !important;
            font-size: 12pt !important;
            line-height: 1.4 !important;
            color: #000 !important;
          }
          
          /* Headers */
          #patient-report-print h1 {
            font-size: 20pt !important;
            font-weight: bold !important;
            margin: 0 0 10px 0 !important;
            color: #000 !important;
          }
          
          #patient-report-print h2 {
            font-size: 14pt !important;
            font-weight: bold !important;
            margin: 20px 0 10px 0 !important;
            padding-bottom: 5px !important;
            border-bottom: 1px solid #333 !important;
            color: #000 !important;
          }
          
          /* Paragraphs */
          #patient-report-print p {
            margin: 5px 0 !important;
            line-height: 1.4 !important;
          }
          
          /* Tables */
          #patient-report-print table {
            width: 100% !important;
            border-collapse: collapse !important;
            margin: 10px 0 !important;
            page-break-inside: avoid !important;
          }
          
          #patient-report-print th {
            background-color: #f0f0f0 !important;
            font-weight: bold !important;
            text-align: left !important;
            padding: 8px !important;
            border: 1px solid #999 !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
          
          #patient-report-print td {
            padding: 6px 8px !important;
            border: 1px solid #ccc !important;
            vertical-align: top !important;
          }
          
          #patient-report-print tbody tr:nth-child(even) {
            background-color: #fafafa !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
          
          /* Divs and sections */
          #patient-report-print > div {
            page-break-inside: avoid !important;
          }
          
          /* Summary boxes */
          #patient-report-print div[style*="border: 1px solid"] {
            border: 1px solid #999 !important;
            padding: 10px !important;
            margin: 5px !important;
            background-color: #f9f9f9 !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
          
          /* Prescription boxes */
          #patient-report-print div[style*="backgroundColor: '#f9f9f9'"] {
            background-color: #f0f0f0 !important;
            padding: 10px !important;
            margin-bottom: 10px !important;
            border-radius: 0 !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
          
          /* Status badges */
          #patient-report-print span[style*="padding: '2px 6px'"] {
            padding: 2px 6px !important;
            border: 1px solid #999 !important;
            border-radius: 3px !important;
            font-size: 10pt !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
          
          /* Footer */
          #patient-report-print div[style*="borderTop: '1px solid #ddd'"] {
            margin-top: 30px !important;
            padding-top: 15px !important;
            border-top: 1px solid #999 !important;
            font-size: 9pt !important;
            color: #666 !important;
            text-align: center !important;
          }
          
          /* Avoid page breaks */
          #patient-report-print h2,
          #patient-report-print table {
            page-break-after: avoid !important;
          }
          
          #patient-report-print tr {
            page-break-inside: avoid !important;
          }
        }
      `}),e.jsxs(Ce,{className:"no-print",children:[e.jsx(Re,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(qa,{className:"h-5 w-5"}),"Patient Reports"]}),e.jsx(kt,{children:"Search and print patient medical history reports"})]})})}),e.jsxs(De,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx(Z,{children:"Search Patient"}),e.jsxs("div",{className:"relative",children:[e.jsx(Kh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ke,{placeholder:"Search by name or phone...",value:o,onChange:R=>c(R.target.value),className:"pl-9"})]})]})}),o&&e.jsx("div",{className:"border rounded-lg max-h-60 overflow-y-auto",children:d?e.jsx("div",{className:"p-4 text-center",children:e.jsx(Kt,{className:"h-6 w-6 animate-spin mx-auto"})}):D.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No patients found"}):e.jsx("div",{className:"divide-y",children:D.slice(0,10).map(R=>e.jsxs("button",{onClick:()=>N(R),className:"w-full p-3 text-left hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:"font-medium",children:R.full_name||`${R.first_name} ${R.last_name}`}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[R.phone,"  ",R.gender,"  ",U(R.date_of_birth)," years"]})]},R.id))})})]}),s&&e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.full_name||`${s.first_name} ${s.last_name}`}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Patient ID: ",s.id]})]}),e.jsxs(G,{onClick:A,className:"gap-2",children:[e.jsx(Oy,{className:"h-4 w-4"}),"Print Report"]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Z,{children:"From Date (Optional)"}),e.jsxs(Xo,{children:[e.jsx(Jo,{asChild:!0,children:e.jsxs(G,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(ns,{className:"mr-2 h-4 w-4"}),C.from?Fe(C.from,"PPP"):"Select date"]})}),e.jsx(Li,{className:"w-auto p-0",children:e.jsx(Zo,{mode:"single",selected:C.from,onSelect:R=>{w(L=>({...L,from:R})),s&&P(s.id)}})})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Z,{children:"To Date (Optional)"}),e.jsxs(Xo,{children:[e.jsx(Jo,{asChild:!0,children:e.jsxs(G,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(ns,{className:"mr-2 h-4 w-4"}),C.to?Fe(C.to,"PPP"):"Select date"]})}),e.jsx(Li,{className:"w-auto p-0",children:e.jsx(Zo,{mode:"single",selected:C.to,onSelect:R=>{w(L=>({...L,to:R})),s&&P(s.id)}})})]})]})]}),p?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Kt,{className:"h-8 w-8 animate-spin"})}):m?e.jsxs(e.Fragment,{children:[console.log(" Rendering summary cards with:",{appointments:m.appointments?.length||0,prescriptions:m.prescriptions?.length||0,medications:m.prescriptions?.reduce((R,L)=>R+(L.medications?.length||0),0)||0,labTests:m.labTests?.length||0}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-5",children:[e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium",children:"Appointments"})}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold",children:m.appointments?.length||0})})]}),e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium",children:"Prescriptions"})}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold",children:m.prescriptions?.length||0})})]}),e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium",children:"Medications"})}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold",children:m.prescriptions?.reduce((R,L)=>R+(L.medications?.length||0),0)||0})})]}),e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium",children:"Lab Tests"})}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold",children:m.labTests?.length||0})})]}),e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium",children:"Total Spent"})}),e.jsx(De,{children:e.jsxs("div",{className:"text-2xl font-bold",children:["TSh ",(m.totalSpent||0).toLocaleString()]})})]})]})]}):null]})]})]}),s&&m&&e.jsx("div",{id:"patient-report-print",style:{display:"none"},children:e.jsxs("div",{style:{fontFamily:"Arial, sans-serif",padding:"30px 40px",lineHeight:"1.6"},children:[e.jsxs("div",{style:{marginBottom:"40px",borderBottom:"3px solid #2563eb",paddingBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",flexShrink:0},children:e.jsxs("svg",{viewBox:"0 0 1024 1024",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"100%",height:"100%"},children:[e.jsx("circle",{cx:"512",cy:"512",r:"450",stroke:"#2D7A5F",strokeWidth:"40",fill:"none"}),e.jsx("path",{d:"M314 226H490V402H666V578H490V754H314V578H138V402H314V226Z",fill:"#1A5A42"}),e.jsx("path",{d:"M320 240C320 240 380 340 420 440C460 540 480 640 520 740",stroke:"#EF4444",strokeWidth:"30",strokeLinecap:"round",fill:"none"}),e.jsx("path",{d:"M612 440L662 340L712 540L762 240L812 440L862 440",stroke:"#EF4444",strokeWidth:"35",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),e.jsx("rect",{x:"180",y:"700",width:"664",height:"140",rx:"70",fill:"#EF4444"}),e.jsx("text",{x:"512",y:"800",fontFamily:"Arial, sans-serif",fontSize:"120",fontWeight:"bold",fill:"white",textAnchor:"middle",dominantBaseline:"middle",children:"HASET"})]})}),e.jsxs("div",{style:{flex:1,textAlign:"center",paddingLeft:"20px"},children:[e.jsx("h1",{style:{margin:"0 0 8px 0",fontSize:"32px",color:"#1e40af",fontWeight:"bold",letterSpacing:"1.5px"},children:_.hospital_name.toUpperCase()}),e.jsx("p",{style:{margin:"0",fontSize:"13px",color:"#6b7280",lineHeight:"1.5"},children:"Excellence in Healthcare | Comprehensive Medical Services"})]}),e.jsxs("div",{style:{width:"80px",textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginBottom:"4px"},children:"Report ID"}),e.jsx("div",{style:{fontSize:"11px",fontWeight:"bold",color:"#1e40af",fontFamily:"monospace"},children:s.id.substring(0,8).toUpperCase()})]})]}),e.jsxs("div",{style:{textAlign:"center",paddingTop:"15px",borderTop:"1px solid #e2e8f0"},children:[e.jsx("p",{style:{margin:"0 0 6px 0",fontSize:"18px",color:"#374151",fontWeight:"600"},children:"PATIENT MEDICAL HISTORY REPORT"}),e.jsxs("p",{style:{margin:"0",fontSize:"12px",color:"#6b7280"},children:["Generated on ",Fe(new Date,"PPP")," at ",Fe(new Date,"p")]})]})]}),e.jsxs("div",{style:{marginBottom:"35px",backgroundColor:"#f8fafc",padding:"25px 30px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h2",{style:{fontSize:"18px",color:"#1e40af",fontWeight:"bold",marginBottom:"20px",marginTop:"0"},children:"PATIENT INFORMATION"}),e.jsx("table",{style:{width:"100%",fontSize:"14px",lineHeight:"2"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",fontWeight:"600",width:"35%",color:"#475569"},children:"Name:"}),e.jsx("td",{style:{padding:"8px 0",color:"#1e293b",fontSize:"15px"},children:s.full_name||`${s.first_name} ${s.last_name}`})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",fontWeight:"600",color:"#475569"},children:"Patient ID:"}),e.jsx("td",{style:{padding:"8px 0",color:"#1e293b",fontFamily:"monospace",fontSize:"13px"},children:s.id})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",fontWeight:"600",color:"#475569"},children:"Date of Birth:"}),e.jsxs("td",{style:{padding:"8px 0",color:"#1e293b"},children:[Fe(new Date(s.date_of_birth),"PPP")," (",U(s.date_of_birth)," years old)"]})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",fontWeight:"600",color:"#475569"},children:"Gender:"}),e.jsx("td",{style:{padding:"8px 0",color:"#1e293b"},children:s.gender})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",fontWeight:"600",color:"#475569"},children:"Phone:"}),e.jsx("td",{style:{padding:"8px 0",color:"#1e293b"},children:s.phone})]}),s.email&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",fontWeight:"600",color:"#475569"},children:"Email:"}),e.jsx("td",{style:{padding:"8px 0",color:"#1e293b"},children:s.email})]}),s.blood_group&&e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",fontWeight:"600",color:"#475569"},children:"Blood Group:"}),e.jsx("td",{style:{padding:"8px 0",color:"#dc2626",fontWeight:"bold",fontSize:"16px"},children:s.blood_group})]})]})})]}),m.appointments.length>0&&e.jsxs("div",{style:{marginBottom:"35px",pageBreakInside:"avoid"},children:[e.jsx("h2",{style:{fontSize:"18px",color:"#1e40af",fontWeight:"bold",marginBottom:"18px",marginTop:"0",paddingBottom:"10px",borderBottom:"2px solid #3b82f6"},children:"APPOINTMENT HISTORY"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Date"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Time"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Doctor"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Reason"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Status"})]})}),e.jsx("tbody",{children:m.appointments.map((R,L)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:Fe(new Date(R.appointment_date),"MMM dd, yyyy")}),e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:R.appointment_time||"N/A"}),e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:R.doctor?.full_name||"N/A"}),e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:R.reason||"N/A"}),e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:R.status||"N/A"})]},L))})]})]}),e.jsxs("div",{style:{marginBottom:"35px",pageBreakInside:"avoid"},children:[e.jsx("h2",{style:{fontSize:"18px",color:"#1e40af",fontWeight:"bold",marginBottom:"18px",marginTop:"0",paddingBottom:"10px",borderBottom:"2px solid #3b82f6"},children:"PRESCRIPTIONS & MEDICATIONS PROVIDED"}),(()=>{const R=m.prescriptions&&m.prescriptions.length>0;return console.log(" Print: Prescriptions check:",{exists:!!m.prescriptions,length:m.prescriptions?.length,hasData:R,data:m.prescriptions}),null})(),m.prescriptions&&m.prescriptions.length>0?e.jsx(e.Fragment,{children:m.prescriptions.map((R,L)=>e.jsxs("div",{style:{marginBottom:"25px",border:"1px solid #e2e8f0",borderRadius:"6px",overflow:"hidden"},children:[e.jsxs("div",{style:{backgroundColor:"#eff6ff",padding:"15px 20px",borderBottom:"1px solid #bfdbfe"},children:[e.jsx("strong",{style:{color:"#1e40af"},children:" Prescription Date:"})," ",e.jsx("span",{style:{color:"#1e293b"},children:Fe(new Date(R.prescription_date||R.created_at),"MMM dd, yyyy")}),R.doctor?.full_name&&e.jsxs("span",{style:{marginLeft:"20px"},children:[e.jsx("strong",{style:{color:"#1e40af"},children:"Doctor:"})," ",e.jsx("span",{style:{color:"#1e293b"},children:R.doctor.full_name})]}),R.status&&e.jsxs("span",{style:{marginLeft:"20px"},children:[e.jsx("strong",{style:{color:"#1e40af"},children:"Status:"})," ",e.jsx("span",{style:{color:R.status==="Active"?"#059669":"#6b7280",fontWeight:"600"},children:R.status})]})]}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#dbeafe"},children:[e.jsx("th",{style:{border:"1px solid #93c5fd",padding:"12px 15px",textAlign:"left",color:"#1e40af",fontWeight:"600"},children:"Medication"}),e.jsx("th",{style:{border:"1px solid #93c5fd",padding:"12px 15px",textAlign:"left",color:"#1e40af",fontWeight:"600"},children:"Dosage"}),e.jsx("th",{style:{border:"1px solid #93c5fd",padding:"12px 15px",textAlign:"left",color:"#1e40af",fontWeight:"600"},children:"Frequency"}),e.jsx("th",{style:{border:"1px solid #93c5fd",padding:"12px 15px",textAlign:"left",color:"#1e40af",fontWeight:"600"},children:"Duration"}),e.jsx("th",{style:{border:"1px solid #93c5fd",padding:"12px 15px",textAlign:"center",color:"#1e40af",fontWeight:"600"},children:"Qty"})]})}),e.jsx("tbody",{children:(R.medications||[]).map((pe,ee)=>e.jsxs("tr",{style:{backgroundColor:ee%2===0?"#ffffff":"#f8fafc"},children:[e.jsx("td",{style:{border:"1px solid #e2e8f0",padding:"12px 15px",color:"#1e293b",fontWeight:"500"},children:pe.medication_name||"N/A"}),e.jsx("td",{style:{border:"1px solid #e2e8f0",padding:"12px 15px",color:"#475569"},children:pe.dosage||"N/A"}),e.jsx("td",{style:{border:"1px solid #e2e8f0",padding:"12px 15px",color:"#475569"},children:pe.frequency||"N/A"}),e.jsx("td",{style:{border:"1px solid #e2e8f0",padding:"12px 15px",color:"#475569"},children:pe.duration||"N/A"}),e.jsx("td",{style:{border:"1px solid #e2e8f0",padding:"12px 15px",textAlign:"center",color:"#1e293b",fontWeight:"600"},children:pe.quantity||"N/A"})]},ee))})]}),R.instructions&&e.jsxs("div",{style:{fontSize:"13px",color:"#475569",backgroundColor:"#fef3c7",padding:"15px 20px",borderTop:"1px solid #fde047",lineHeight:"1.6"},children:[e.jsx("strong",{style:{color:"#92400e"},children:" Instructions:"})," ",e.jsx("span",{style:{color:"#78350f"},children:R.instructions})]})]},L))}):e.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"No prescriptions found for this patient."})]}),e.jsxs("div",{style:{marginBottom:"35px",pageBreakInside:"avoid"},children:[e.jsx("h2",{style:{fontSize:"18px",color:"#1e40af",fontWeight:"bold",marginBottom:"18px",marginTop:"0",paddingBottom:"10px",borderBottom:"2px solid #3b82f6"},children:"LABORATORY TESTS & RESULTS"}),(()=>{const R=m.labTests&&m.labTests.length>0;return console.log(" Print: Lab Tests check:",{exists:!!m.labTests,length:m.labTests?.length,hasData:R,data:m.labTests}),null})(),m.labTests&&m.labTests.length>0?e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Date Ordered"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Test Name"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Test Type"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Result"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Status"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Completed"})]})}),e.jsx("tbody",{children:m.labTests.map((R,L)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:Fe(new Date(R.test_date||R.created_at),"MMM dd, yyyy")}),e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:R.test_name||"N/A"}),e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:R.test_type||"N/A"}),e.jsxs("td",{style:{border:"1px solid #ddd",padding:"8px"},children:[R.result_value||R.result||"Pending",R.result_unit&&` ${R.result_unit}`,R.reference_range&&e.jsxs("div",{style:{fontSize:"10px",color:"#666"},children:["Normal: ",R.reference_range]})]}),e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:"3px",backgroundColor:R.status==="Completed"?"#d4edda":R.status==="Pending"?"#fff3cd":"#f8d7da",color:R.status==="Completed"?"#155724":R.status==="Pending"?"#856404":"#721c24",fontSize:"11px"},children:R.status||"N/A"})}),e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:R.completed_at?Fe(new Date(R.completed_at),"MMM dd, yyyy"):"-"})]},L))})]}):e.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"No lab tests found for this patient."})]}),m.invoices.length>0&&e.jsxs("div",{style:{marginBottom:"35px",pageBreakInside:"avoid"},children:[e.jsx("h2",{style:{fontSize:"18px",color:"#1e40af",fontWeight:"bold",marginBottom:"18px",marginTop:"0",paddingBottom:"10px",borderBottom:"2px solid #3b82f6"},children:"BILLING SUMMARY"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Invoice #"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Date"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"right"},children:"Amount"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Status"})]})}),e.jsxs("tbody",{children:[m.invoices.map((R,L)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:R.invoice_number}),e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:Fe(new Date(R.invoice_date),"MMM dd, yyyy")}),e.jsxs("td",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"right"},children:["TSh ",Number(R.total_amount).toLocaleString()]}),e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:R.status})]},L)),e.jsxs("tr",{style:{fontWeight:"bold",backgroundColor:"#f5f5f5"},children:[e.jsx("td",{colSpan:2,style:{border:"1px solid #ddd",padding:"8px",textAlign:"right"},children:"Total Spent:"}),e.jsxs("td",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"right"},children:["TSh ",m.totalSpent.toLocaleString()]}),e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"}})]})]})]})]}),e.jsxs("div",{style:{marginTop:"50px",paddingTop:"25px",borderTop:"2px solid #cbd5e1"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"15px",fontSize:"11px",color:"#64748b"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("p",{style:{margin:"0 0 4px 0",fontWeight:"600",color:"#475569"},children:_.hospital_name}),e.jsxs("p",{style:{margin:"0 0 2px 0"},children:[" ",_.hospital_address]}),e.jsxs("p",{style:{margin:"0 0 2px 0"},children:[" ",_.hospital_phone]}),e.jsxs("p",{style:{margin:"0"},children:[" ",_.hospital_email]})]}),e.jsxs("div",{style:{flex:1,textAlign:"right"},children:[e.jsx("p",{style:{margin:"0 0 4px 0",fontWeight:"600",color:"#475569"},children:"Report Information"}),e.jsxs("p",{style:{margin:"0 0 2px 0"},children:["Patient ID: ",s.id]}),e.jsxs("p",{style:{margin:"0 0 2px 0"},children:["Generated: ",Fe(new Date,"PPP")]}),e.jsxs("p",{style:{margin:"0"},children:["Time: ",Fe(new Date,"p")]})]})]}),e.jsx("div",{style:{textAlign:"center",paddingTop:"15px",borderTop:"1px solid #e2e8f0",fontSize:"10px",color:"#9ca3af"},children:e.jsx("p",{style:{margin:"0"},children:"This is a confidential computer-generated medical report. Unauthorized disclosure is prohibited."})})]})]})})]})}Le.lazy(()=>lD(()=>import("./EnhancedAppointmentBooking-obHEencX.js"),[]));const sM=({patient:t,records:n=[],appointments:s=[],activeTab:a="overview",onTabChange:o,onClose:c,loading:d=!1,isLoadingRecords:f=!1})=>{if(!t)return e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No patient selected"})});const{full_name:p="",first_name:x="",last_name:m="",date_of_birth:v="",gender:C="",phone:w="",email:_="",address:b="",blood_group:S=null,medical_history:E="",allergies:P="",medications:N="",insurance_provider:A="",insurance_policy_number:D=""}=t,U=L=>L?Fe(new Date(L),"MMM d, yyyy"):"N/A",R=L=>{if(!L)return"N/A";const pe=new Date(L),ee=new Date;let ve=ee.getFullYear()-pe.getFullYear();const ge=ee.getMonth()-pe.getMonth();return(ge<0||ge===0&&ee.getDate()<pe.getDate())&&ve--,ve};return e.jsx(At,{open:!!t,onOpenChange:L=>!L&&c(),children:e.jsxs(St,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ct,{children:[e.jsxs(Pt,{className:"text-2xl",children:[p||`${x} ${m}`.trim(),e.jsxs("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:[C,"  ",R(v)," years  ",S||"N/A"]})]}),e.jsxs(Ot,{children:["Patient ID: ",t.id]})]}),e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"flex space-x-4",children:["overview","records","appointments"].map(L=>e.jsx("button",{type:"button",className:`py-2 px-4 border-b-2 font-medium text-sm ${a===L?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"}`,onClick:()=>o(L),children:L.charAt(0).toUpperCase()+L.slice(1)},L))})}),e.jsxs("div",{className:"mt-4",children:[d&&e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("p",{children:"Loading patient data..."})}),!d&&a==="overview"&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ud,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(Oe,{children:"Personal Information"})]})}),e.jsxs(De,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Date of Birth"}),e.jsx("p",{children:U(v)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Age"}),e.jsxs("p",{children:[R(v)," years"]})]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center",children:[e.jsx(US,{className:"h-4 w-4 mr-1"})," Email"]}),e.jsx("p",{children:_||"N/A"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center",children:[e.jsx(Ay,{className:"h-4 w-4 mr-1"})," Phone"]}),e.jsx("p",{children:w||"N/A"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center",children:[e.jsx(BS,{className:"h-4 w-4 mr-1"})," Address"]}),e.jsx("p",{children:b||"N/A"})]})]})]}),e.jsxs(Ce,{children:[e.jsx(Re,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_s,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(Oe,{children:"Medical Information"})]})}),e.jsxs(De,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center",children:[e.jsx(qa,{className:"h-4 w-4 mr-1"})," Medical History"]}),e.jsx("p",{className:"whitespace-pre-line mt-1",children:E||"No medical history recorded"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center",children:[e.jsx(Kc,{className:"h-4 w-4 mr-1 text-amber-500"})," Allergies"]}),e.jsx("p",{className:"whitespace-pre-line mt-1",children:P||"No known allergies"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center",children:[e.jsx(Yc,{className:"h-4 w-4 mr-1 text-blue-500"})," Current Medications"]}),e.jsx("p",{className:"whitespace-pre-line mt-1",children:N||"No current medications"})]})]})]}),e.jsxs(Ce,{className:"md:col-span-2",children:[e.jsx(Re,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qh,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(Oe,{children:"Insurance Information"})]}),e.jsxs(G,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(LS,{className:"h-4 w-4 mr-2"}),"Update Insurance"]})]})}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Provider"}),e.jsx("p",{className:"font-medium",children:t.insurance_provider||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Policy Number"}),e.jsx("p",{className:"font-mono",children:t.insurance_policy_number||"N/A"})]})]})})})]})]}),a==="records"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center",children:[e.jsx(qa,{className:"h-5 w-5 mr-2"}),"Medical Records"]}),e.jsxs(G,{size:"sm",children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Add Record"]})]}),f?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Kt,{className:"h-8 w-8 animate-spin"})}):n.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(qa,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),e.jsx("p",{children:"No medical records found for this patient."})]}):e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Date"}),e.jsx(de,{children:"Type"}),e.jsx(de,{children:"Title"}),e.jsx(de,{children:"Description"}),e.jsx(de,{children:"Created By"}),e.jsx(de,{className:"w-12"})]})}),e.jsx(gn,{children:n.map(L=>e.jsxs(lt,{children:[e.jsx(oe,{children:Fe(new Date(L.date),"MMM d, yyyy")}),e.jsx(oe,{children:e.jsx(He,{variant:"outline",children:L.record_type})}),e.jsx(oe,{className:"font-medium",children:L.title}),e.jsxs(oe,{className:"max-w-xs truncate",children:[L.description.substring(0,50),L.description.length>50?"...":""]}),e.jsx(oe,{children:L.created_by}),e.jsx(oe,{children:e.jsx(G,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(zo,{className:"h-4 w-4"})})})]},L.id))})]})})]}),a==="appointments"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center",children:[e.jsx(ns,{className:"h-5 w-5 mr-2"}),"Appointments"]}),e.jsxs(G,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Schedule Appointment"]})]}),s.length===0?e.jsxs("div",{className:"text-center py-12 border rounded-lg bg-muted/20",children:[e.jsx(ns,{className:"h-10 w-10 mx-auto text-muted-foreground"}),e.jsx("h4",{className:"mt-3 font-medium text-muted-foreground",children:"No appointments scheduled"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Schedule a new appointment to get started"}),e.jsxs(G,{variant:"outline",size:"sm",className:"mt-4",children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Schedule Appointment"]})]}):e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Date"}),e.jsx(de,{children:"Time"}),e.jsx(de,{children:"Doctor"}),e.jsx(de,{children:"Reason"}),e.jsx(de,{children:"Status"}),e.jsx(de,{className:"w-[100px]",children:"Actions"})]})}),e.jsx(gn,{children:s.map(L=>e.jsxs(lt,{children:[e.jsx(oe,{children:Fe(new Date(L.appointment_date),"MMM d, yyyy")}),e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(qc,{className:"h-4 w-4 mr-1 text-muted-foreground"}),L.appointment_time]})}),e.jsxs(oe,{children:[e.jsx("div",{className:"font-medium",children:L.doctor?.full_name||"N/A"}),L.doctor?.specialization&&e.jsx("p",{className:"text-xs text-muted-foreground",children:L.doctor.specialization})]}),e.jsx(oe,{className:"max-w-xs truncate",children:L.reason}),e.jsx(oe,{children:e.jsx(He,{variant:L.status==="Completed"?"default":L.status==="Scheduled"?"secondary":L.status==="Cancelled"?"destructive":"outline",children:L.status})}),e.jsx(oe,{children:e.jsxs(Xo,{children:[e.jsx(Jo,{asChild:!0,children:e.jsx(G,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(zo,{className:"h-4 w-4"})})}),e.jsx(Li,{className:"max-w-sm",children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Doctor:"})," ",L.doctor?.full_name||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"})," ",L.status]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Reason:"})," ",L.reason||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Time:"})," ",L.appointment_time]})]})})]})})]},L.id))})]})})]})]})]})})},rM=({patients:t,view:n,onViewChange:s,loading:a,onViewPatient:o,selectedPatient:c,patientRecords:d,patientAppointments:f,activeTab:p,onTabChange:x,onClosePatientView:m,isLoadingRecords:v})=>{const C=h.useMemo(()=>{const _=new Date;return t.filter(b=>{const S=new Date(b.created_at);switch(n){case"day":return S.toDateString()===_.toDateString();case"week":{const E=new Date;return E.setDate(_.getDate()-7),S>=E}case"all":default:return!0}})},[t,n]),w={day:"Today",week:"This Week",all:"All Patients"};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Oe,{children:"Patients Overview"}),e.jsx("div",{className:"flex items-center gap-2",children:["day","week","all"].map(_=>e.jsx(G,{variant:n===_?"default":"ghost",size:"sm",onClick:()=>s(_),className:"h-8",children:w[_]},_))})]}),e.jsxs(kt,{children:["Viewing ",C.length," ",n!=="all"?w[n].toLowerCase():"total"," patients"]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Name"}),e.jsx(de,{children:"Date of Birth"}),e.jsx(de,{children:"Gender"}),e.jsx(de,{children:"Phone"}),e.jsx(de,{children:"Status"}),e.jsx(de,{children:"Last Visit"}),e.jsx(de,{className:"w-[100px]",children:"Actions"})]})}),e.jsx(gn,{children:a?e.jsx(lt,{children:e.jsxs(oe,{colSpan:7,className:"text-center py-8",children:[e.jsx(Kt,{className:"h-6 w-6 animate-spin mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading patients..."})]})}):C.length===0?e.jsx(lt,{children:e.jsx(oe,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No patients found"})}):C.map(_=>e.jsxs(lt,{className:"hover:bg-muted/50",children:[e.jsx(oe,{className:"font-medium",children:e.jsxs("div",{children:[_.full_name||`${_.first_name} ${_.last_name}`,_.email&&e.jsx("p",{className:"text-xs text-muted-foreground",children:_.email})]})}),e.jsx(oe,{children:Fe(new Date(_.date_of_birth),"MMM d, yyyy")}),e.jsx(oe,{children:_.gender}),e.jsx(oe,{children:_.phone}),e.jsx(oe,{children:e.jsx(He,{variant:_.status==="Active"?"default":_.status==="Inactive"?"secondary":"outline",children:_.status})}),e.jsx(oe,{children:_.updated_at?Fe(new Date(_.updated_at),"MMM d, yyyy"):"N/A"}),e.jsx(oe,{children:e.jsx(G,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>o(_),children:e.jsx(zo,{className:"h-4 w-4"})})})]},_.id))})]})}),e.jsx(sM,{patient:c,records:d,appointments:f,activeTab:p,onTabChange:x,onClose:m,loading:v})]})},aM=()=>{const[t,n]=h.useState({totalRevenue:0,unpaidAmount:0,paidToday:0,invoiceCount:0,paidCount:0,unpaidCount:0}),[s,a]=h.useState([]),[o,c]=h.useState(!0),[d,f]=h.useState("day");h.useEffect(()=>{p()},[d]);const p=async()=>{try{const m=new Date;let v,C;switch(d){case"day":v=As(m),C=Ha(m);break;case"week":v=us(m),C=ba(m);break;case"month":v=Fn(m),C=ja(m);break}const{data:w}=await q.get("/billing/invoices",{params:{from:v.toISOString(),to:C.toISOString(),limit:1e3}}),_=w.invoices||[];if(_.length>0){const b=_.filter(P=>P.status==="Paid").reduce((P,N)=>P+Number(N.total_amount),0),S=_.filter(P=>P.status!=="Paid").reduce((P,N)=>P+(Number(N.total_amount)-Number(N.paid_amount||0)),0),E=_.filter(P=>P.status==="Paid").reduce((P,N)=>P+Number(N.total_amount),0);n({totalRevenue:b,unpaidAmount:S,paidToday:E,invoiceCount:_.length,paidCount:_.filter(P=>P.status==="Paid").length,unpaidCount:_.filter(P=>P.status==="Unpaid"||P.status==="Pending").length})}else n({totalRevenue:0,unpaidAmount:0,paidToday:0,invoiceCount:0,paidCount:0,unpaidCount:0});a(_||[])}catch(m){console.error("Error fetching billing data:",m)}finally{c(!1)}};if(o)return e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary"})});const x=()=>{switch(d){case"day":return"Today";case"week":return"This Week";case"month":return"This Month"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Showing:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{variant:d==="day"?"default":"outline",size:"sm",onClick:()=>f("day"),children:"Today"}),e.jsx(G,{variant:d==="week"?"default":"outline",size:"sm",onClick:()=>f("week"),children:"This Week"}),e.jsx(G,{variant:d==="month"?"default":"outline",size:"sm",onClick:()=>f("month"),children:"This Month"})]})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(Ce,{className:"border-green-200",children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium text-green-700",children:"Total Revenue"})}),e.jsxs(De,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["TSh ",t.totalRevenue.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t.paidCount," paid invoices"]})]})]}),e.jsxs(Ce,{className:"border-red-200",children:[e.jsx(Re,{className:"pb-2",children:e.jsx(Oe,{className:"text-sm font-medium text-red-700",children:"Unpaid Amount"})}),e.jsxs(De,{children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["TSh ",t.unpaidAmount.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t.unpaidCount," unpaid invoices"]})]})]}),e.jsxs(Ce,{className:"border-blue-200",children:[e.jsx(Re,{className:"pb-2",children:e.jsxs(Oe,{className:"text-sm font-medium text-blue-700",children:["Paid (",x(),")"]})}),e.jsxs(De,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["TSh ",t.paidToday.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Collections for ",x().toLowerCase()]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-3",children:"Recent Invoices"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Invoice #"}),e.jsx(de,{children:"Patient"}),e.jsx(de,{children:"Amount"}),e.jsx(de,{children:"Paid"}),e.jsx(de,{children:"Status"}),e.jsx(de,{children:"Date"})]})}),e.jsx(gn,{children:s.map(m=>e.jsxs(lt,{children:[e.jsx(oe,{className:"font-mono text-sm",children:m.invoice_number}),e.jsx(oe,{children:m.patient?.full_name||"Unknown"}),e.jsxs(oe,{children:["TSh ",Number(m.total_amount).toLocaleString()]}),e.jsxs(oe,{children:["TSh ",Number(m.paid_amount||0).toLocaleString()]}),e.jsx(oe,{children:e.jsx(He,{variant:m.status==="Paid"?"success":m.status==="Partially Paid"?"warning":"destructive",children:m.status})}),e.jsx(oe,{className:"text-sm",children:Fe(new Date(m.invoice_date),"MMM dd, yyyy")})]},m.id))})]})})]})]})};function iM(){const[t,n]=h.useState([]),[s,a]=h.useState([]),[o,c]=h.useState(null),[d,f]=h.useState([]),[p,x]=h.useState([]),[m,v]=h.useState("overview"),[C,w]=h.useState(!1),[_,b]=h.useState([]),[S,E]=h.useState([]),[P,N]=h.useState(!1),[A,D]=h.useState(""),[U,R]=h.useState(null),[L,pe]=h.useState("all"),[ee,ve]=h.useState("all"),[ge,V]=h.useState(""),[le,we]=h.useState({}),[fe,ne]=h.useState("all"),[M,K]=h.useState(null),[se,T]=h.useState(!1),[O,he]=h.useState({full_name:"",email:"",phone:"",password:"",role:"receptionist"}),[Y,xe]=h.useState({totalPatients:0,activeAppointments:0,totalUsers:0,totalServices:0}),[Be,re]=h.useState(!1),[$e,qe]=h.useState([]),[Ge,be]=h.useState({service_code:"",service_name:"",service_type:"",description:"",base_price:0,currency:"TSh",is_active:!0}),[mt,We]=h.useState(null),[Et,ue]=h.useState(!1),[ze,Ee]=h.useState(!1),[Ke,J]=h.useState(!1),[ye,ae]=h.useState(null),[Ze,tt]=h.useState(!1),[pt,yt]=h.useState(null),[Ue,Ie]=h.useState(!1),[xt,Ve]=h.useState([]),[ct,Ft]=h.useState(null),{user:Me}=Ys(),[Tt,It]=h.useState("day"),[ss,rs]=h.useState(null),[Ms,hs]=h.useState(!1),[En,Ps]=h.useState([]),[Dt,an]=h.useState({consultation_fee:"50000",currency:"TSh",hospital_name:"Medical Center",hospital_address:"",hospital_phone:"",hospital_email:"",report_header:"Healthcare Management System Report",enable_appointment_fees:"true"}),[Qt,ms]=h.useState({}),[ot,wt]=h.useState(!1),[Vt,on]=h.useState(!1),[dn,bn]=h.useState(null),[vn,nn]=h.useState({name:"",description:""}),[In,$]=h.useState(!1),[Pe,nt]=h.useState(null),[it,bt]=h.useState([]),[j,z]=h.useState([]);h.useEffect(()=>{ps(),H()},[Me]),h.useCallback((X,st)=>{const Bt=new Date;return X.filter(Ut=>{const Nt=new Date(Ut.created_at);switch(st){case"day":return Nt.toDateString()===Bt.toDateString();case"week":{const Ht=new Date;return Ht.setDate(Bt.getDate()-7),Nt>=Ht}case"all":default:return!0}})},[]),h.useEffect(()=>{t.length>0},[t,Tt]);const H=async()=>{try{const{data:X}=await q.get("/departments");Ps(X.departments||[]);try{const st=await q.get("/settings"),Bt=st.data.settings||{},Ut=st.data.settingsArray||[],Nt={consultation_fee:"50000",currency:"TSh",hospital_name:"Hospital Management System",hospital_address:"",hospital_phone:"",hospital_email:"",report_header:"",enable_appointment_fees:"true"};Ut.length>0?Ut.forEach(Ht=>{Nt[Ht.key]=Ht.value}):Object.keys(Bt).length>0&&Object.assign(Nt,Bt),an(Nt),console.log(" Settings loaded:",Nt)}catch{console.warn("Settings not found, using defaults"),an({consultation_fee:"50000",currency:"TSh",hospital_name:"Hospital Management System",hospital_address:"",hospital_phone:"",hospital_email:"",report_header:"",enable_appointment_fees:"true"})}try{const Bt=(await q.get("/departments/fees")).data.fees||[],Ut={};Bt.forEach(Nt=>{Ut[Nt.department_id]=Nt.fee_amount.toString()}),ms(Ut),console.log(" Department fees loaded:",Ut)}catch{console.warn("No department fees found"),ms({})}}catch(X){console.error("Error fetching settings:",X),I.error("Failed to load settings")}},me=async()=>{wt(!0);try{const X=Object.keys(Dt).filter(Nt=>isNaN(Number(Nt))).map(Nt=>({key:Nt,value:Dt[Nt]}));console.log(" Saving settings:",X);let st=0,Bt=0;for(const Nt of X)try{console.log(`Updating ${Nt.key}:`,Nt.value),await q.put(`/settings/${Nt.key}`,{value:Nt.value}),Bt++}catch(Ht){if(Ht.response?.status===404)console.log(`Creating ${Nt.key}:`,Nt.value),await q.post("/settings",{key:Nt.key,value:Nt.value}),st++;else throw console.error(`Error saving ${Nt.key}:`,Ht),Ht}console.log(` Settings saved: ${Bt} updated, ${st} created`);let Ut=0;for(const[Nt,Ht]of Object.entries(Qt))if(Ht&&Ht.trim()!=="")try{console.log(`Saving department fee for ${Nt}:`,Ht),await q.post("/departments/fees",{department_id:Nt,fee_amount:parseFloat(Ht)}),Ut++}catch(fr){console.error(`Error saving department fee for ${Nt}:`,fr)}Ut>0&&console.log(` Department fees saved: ${Ut}`),I.success(`Settings saved successfully (${Bt} updated, ${st} created, ${Ut} dept fees)`),hs(!1),await Wn("settings.update",{settings:Dt,departmentFees:Qt}),H()}catch(X){console.error("Error saving settings:",X),I.error("Failed to save settings")}finally{wt(!1)}},Xe=()=>{bn(null),nn({name:"",description:""}),on(!0)},Lt=X=>{bn(X),nn({name:X.name,description:X.description||""}),on(!0)},Xt=async()=>{if(!vn.name.trim()){I.error("Department name is required");return}try{dn?(await q.put(`/departments/${dn.id}`,vn),I.success("Department updated successfully")):(await q.post("/departments",vn),I.success("Department created successfully")),on(!1),H()}catch(X){console.error("Error saving department:",X),I.error(X.response?.data?.error||"Failed to save department")}},$t=async X=>{if(confirm("Are you sure you want to delete this department? This action cannot be undone."))try{await q.delete(`/departments/${X}`),I.success("Department deleted successfully"),H()}catch(st){console.error("Error deleting department:",st),I.error(st.response?.data?.error||"Failed to delete department")}},Cn=async X=>{nt(X),$(!0);try{const{data:st}=await q.get("/users"),Bt=st.users.filter(Ht=>Ht.roles?.includes("doctor")),{data:Ut}=await q.get(`/departments/${X.id}/doctors`),Nt=Ut.doctors.filter(Ht=>Ht.assignment_id).map(Ht=>Ht.id);bt(Ut.doctors.filter(Ht=>Ht.assignment_id)),z(Bt.filter(Ht=>!Nt.includes(Ht.id)))}catch(st){console.error("Error fetching doctors:",st),I.error("Failed to load doctors")}},Fs=async X=>{if(Pe)try{await q.post(`/departments/${Pe.id}/doctors`,{doctor_id:X}),I.success("Doctor assigned successfully"),Cn(Pe)}catch(st){console.error("Error assigning doctor:",st),I.error(st.response?.data?.error||"Failed to assign doctor")}},as=async X=>{if(Pe)try{await q.delete(`/departments/${Pe.id}/doctors`,{data:{doctor_id:X}}),I.success("Doctor removed successfully"),Cn(Pe)}catch(st){console.error("Error removing doctor:",st),I.error(st.response?.data?.error||"Failed to remove doctor")}},ps=async()=>{if(!Me){I.error("User not authenticated");return}try{const{data:X}=await q.get("/patients",{params:{limit:10}}),st=X.patients||[],{data:Bt}=await q.get("/users"),Ut=Bt.users||[];console.log("Fetched users data:",Ut);const Nt=Ut.map(gs=>({...gs,roles:gs.roles||[],activeRole:gs.primaryRole||gs.roles?.[0]||"No role assigned"}));console.log("Users with roles:",Nt);const{data:Ht}=await q.get("/appointments"),fr=Ht.appointments||[];let qr=[];try{const{data:gs}=await q.get("/services");qr=gs.services||[]}catch(gs){console.warn("Could not fetch medical services:",gs)}const Bd=st.length,Ud=fr.filter(gs=>gs.status!=="Cancelled"&&gs.status!=="Completed").length,Xi=qr.length;n(st),b(Nt),a(fr),qe(qr),xe({totalPatients:Bd,activeAppointments:Ud,totalUsers:Ut.length,totalServices:Xi})}catch(X){console.error("Error fetching admin data:",X),console.error("Error details:",{message:X.message,response:X.response?.data}),n([]),b([]),xe({totalPatients:0,activeAppointments:0,totalUsers:0,totalServices:0}),I.error(`Failed to load dashboard data: ${X.message}`)}finally{re(!1)}},Se=async X=>{X.preventDefault();try{const st=O.email.trim().toLowerCase(),Bt=O.password.trim(),Ut=O.full_name.trim();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(st)){I.error("Please enter a valid email address (e.g., user@example.com)");return}if(Bt.length<6){I.error("Password must be at least 6 characters long");return}if(!Ut){I.error("Please enter the user's full name");return}console.log("Creating user with email:",st);const{data:Ht}=await q.post("/users",{email:st,password:Bt,full_name:Ut,phone:O.phone,role:O.role});Ht&&Ht.userId&&(I.success(`User created successfully with ${O.role} role.`),T(!1),he({full_name:"",email:"",phone:"",password:"",role:"receptionist"}),setTimeout(()=>ps(),500))}catch(st){console.error("Error creating user:",st);const Bt=st.response?.data?.error||st.message;Bt?.includes("already")?I.error("A user with this email already exists"):Bt?.includes("Password")?I.error("Password must be at least 6 characters"):Bt?.includes("Email")?I.error("Please provide a valid email address"):I.error(`Failed to create user: ${Bt}`)}},yn=X=>{K(X),he({full_name:X.full_name||"",email:X.email||"",phone:X.phone||"",password:"",role:X.activeRole||"receptionist"})},Nn=async X=>{if(X.preventDefault(),!!M)try{const{data:st}=await q.put(`/users/${M.id}`,{email:O.email,full_name:O.full_name,phone:O.phone,role:O.role});st&&(I.success("User updated successfully"),K(null),b(Bt=>Bt.map(Ut=>Ut.id===M.id?{...Ut,full_name:O.full_name,phone:O.phone,email:O.email}:Ut)),ps())}catch(st){console.error("Error updating user:",st),I.error(st.response?.data?.error||"Failed to update user")}},Kn=async X=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await q.delete(`/users/${X}`),I.success("User deleted successfully"),b(st=>st.filter(Bt=>Bt.id!==X)),ps()}catch(st){console.error("Error deleting user:",st),I.error(st.response?.data?.error||"Failed to delete user")}},Vn=X=>{ae(X.id),Ee(!0)},Er=async X=>{if(X.preventDefault(),!ye){I.error("No user selected for role assignment");return}const st=new FormData(X.currentTarget),Bt=st.get("role")?.trim();if(st.get("isPrimary"),!Bt){I.error("Please select a role");return}try{await q.post("/users/roles",{user_id:ye,role:Bt}),I.success(`Role ${Bt} assigned successfully`),Ee(!1),ae(null),ps()}catch(Ut){console.error("Error assigning role:",Ut);const Nt=Ut?.message||"Failed to assign role";I.error(Nt)}},Vr=async X=>{try{w(!0),f([])}catch(st){console.error("Error fetching patient records:",st),I.error("Failed to load patient records")}finally{w(!1)}},Hr=async X=>{try{const{data:st}=await q.get("/appointments",{params:{patient_id:X}});x(st.appointments||[])}catch(st){console.error("Error fetching patient appointments:",st),I.error("Failed to load patient appointments")}},Is=async X=>{c(X),v("overview"),await Promise.all([Vr(X.id),Hr(X.id)])},$d=()=>{c(null),f([]),x([])};return Be?e.jsx(Sn,{title:"Admin Dashboard",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:[1,2,3,4].map(X=>e.jsx("div",{className:"h-28 bg-gray-200 animate-pulse rounded-lg"},X))}),e.jsx("div",{className:"h-96 bg-gray-200 animate-pulse rounded-lg"})]})}):(Array.from(new Set(S.map(X=>X.user_id))).filter(Boolean),Array.from(new Set(S.map(X=>X.action.split(".")[0]))).filter(Boolean),e.jsx(Sn,{title:"Admin Dashboard",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(nl,{className:"h-5 w-5"}),"Overview"]}),e.jsx(kt,{children:"Key metrics"})]}),e.jsx(De,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(Dc,{title:"Patients",value:Y.totalPatients,icon:es,color:"green",sub:"Total registered"}),e.jsx(Dc,{title:"Appointments",value:Y.activeAppointments,icon:ns,color:"blue",sub:"Active now"}),e.jsx(Dc,{title:"Users",value:Y.totalUsers,icon:ud,color:"purple",sub:"Platform users"}),e.jsx(Dc,{title:"Services",value:Y.totalServices,icon:IS,color:"orange",sub:"Active services"})]})})]}),e.jsxs(Ce,{className:"shadow-lg border-blue-200",children:[e.jsx(Re,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(ga,{className:"h-5 w-5 text-blue-600"}),"System Settings"]}),e.jsx(kt,{children:"Configure consultation fees and system preferences"})]}),e.jsxs(G,{onClick:()=>hs(!0),className:"gap-2",children:[e.jsx(Oc,{className:"h-4 w-4"}),"Manage Settings"]})]})}),e.jsx(De,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg bg-blue-50/50",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Default Consultation Fee"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Dt.currency," ",parseFloat(Dt.consultation_fee).toLocaleString()]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-green-50/50",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Hospital Name"}),e.jsx("div",{className:"text-lg font-semibold text-green-700",children:Dt.hospital_name})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-amber-50/50",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Report Header"}),e.jsx("div",{className:"text-sm font-semibold text-amber-700 line-clamp-2",children:Dt.report_header||"Not set"})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-purple-50/50",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Department Fees"}),e.jsxs("div",{className:"text-lg font-semibold text-purple-700",children:[Object.keys(Qt).length," configured"]})]})]})})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsx(Re,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-5 w-5"}),"User Management"]}),e.jsx(kt,{children:"Manage users and roles"})]}),e.jsxs(G,{onClick:()=>T(!0),children:[e.jsx(Wo,{className:"mr-2 h-4 w-4"}),"Create User"]})]})}),e.jsx(De,{children:_.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(es,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"No users found"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Users will appear here once they are registered in the system."})]}):e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Name"}),e.jsx(de,{children:"Email"}),e.jsx(de,{children:"Active Role"}),e.jsx(de,{className:"w-[160px]",children:"Actions"})]})}),e.jsx(gn,{children:_.map(X=>e.jsxs(lt,{children:[e.jsx(oe,{children:e.jsx("div",{className:"font-medium",children:X.full_name||X.user_metadata?.full_name||"Unknown"})}),e.jsx(oe,{children:X.email}),e.jsx(oe,{children:e.jsx(He,{variant:"outline",children:X.activeRole||"No role"})}),e.jsx(oe,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(G,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>yn(X),children:[e.jsx(Oc,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Edit"})]}),e.jsxs(G,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>Vn(X),children:[e.jsx(Qh,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Assign Role"})]}),e.jsxs(G,{variant:"destructive",size:"sm",className:"h-8 w-8 p-0",onClick:()=>Kn(X.id),children:[e.jsx(lh,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Delete"})]})]})})]},X.id))})]})})})]}),e.jsx(At,{open:se,onOpenChange:X=>{T(X),X||he({full_name:"",email:"",phone:"",password:"",role:"receptionist"})},children:e.jsxs(St,{className:"max-w-md",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Create New User"}),e.jsx(Ot,{children:"Add a new user to the system with a specific role"})]}),e.jsxs("form",{onSubmit:Se,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"create_full_name",children:"Full Name *"}),e.jsx(ke,{id:"create_full_name",value:O.full_name,onChange:X=>he({...O,full_name:X.target.value}),required:!0,placeholder:"John Doe"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"create_email",children:"Email *"}),e.jsx(ke,{id:"create_email",type:"email",value:O.email,onChange:X=>he({...O,email:X.target.value.trim()}),required:!0,placeholder:"user@example.com",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$",autoComplete:"off"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"create_phone",children:"Phone"}),e.jsx(ke,{id:"create_phone",value:O.phone,onChange:X=>he({...O,phone:X.target.value}),placeholder:"+255 700 000 000",autoComplete:"off"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"create_password",children:"Password *"}),e.jsx(ke,{id:"create_password",type:"password",autoComplete:"new-password",value:O.password,onChange:X=>he({...O,password:X.target.value}),required:!0,placeholder:"Minimum 6 characters",minLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"create_role",children:"Role *"}),e.jsxs(sn,{value:O.role,onValueChange:X=>he({...O,role:X}),children:[e.jsx(en,{children:e.jsx(rn,{})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"admin",children:"Admin"}),e.jsx(_e,{value:"receptionist",children:"Receptionist"}),e.jsx(_e,{value:"nurse",children:"Nurse"}),e.jsx(_e,{value:"doctor",children:"Doctor"}),e.jsx(_e,{value:"lab_technician",children:"Lab Technician"}),e.jsx(_e,{value:"pharmacist",children:"Pharmacist"}),e.jsx(_e,{value:"billing",children:"Billing Staff"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{type:"button",variant:"outline",onClick:()=>T(!1),className:"flex-1",children:"Cancel"}),e.jsxs(G,{type:"submit",className:"flex-1",children:[e.jsx(Wo,{className:"mr-2 h-4 w-4"}),"Create User"]})]})]})]})}),e.jsx(At,{open:!!M,onOpenChange:X=>!X&&K(null),children:e.jsxs(St,{children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Edit User"}),e.jsx(Ot,{children:"Update user details"})]}),e.jsxs("form",{onSubmit:Nn,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"full_name",children:"Full Name"}),e.jsx(ke,{id:"full_name",value:O.full_name,onChange:X=>he({...O,full_name:X.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",children:"Email"}),e.jsx(ke,{id:"email",type:"email",value:O.email,onChange:X=>he({...O,email:X.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"phone",children:"Phone"}),e.jsx(ke,{id:"phone",value:O.phone,onChange:X=>he({...O,phone:X.target.value})})]}),e.jsx(G,{type:"submit",className:"w-full",children:"Save Changes"})]})]})}),e.jsx(Vb,{}),e.jsxs(Ce,{className:"shadow-lg border-green-200",children:[e.jsx(Re,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(ga,{className:"h-5 w-5 text-green-600"}),"Billing Overview & Analysis"]}),e.jsx(kt,{children:"Financial summary and billing statistics"})]}),e.jsxs(G,{onClick:()=>window.location.href="/billing",variant:"outline",size:"sm",children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"View Full Billing"]})]})}),e.jsx(De,{children:e.jsx(aM,{})})]}),e.jsxs(Ce,{className:"shadow-lg border-purple-200",children:[e.jsx(Re,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-5 w-5 text-purple-600"}),"Department Management"]}),e.jsx(kt,{children:"Manage hospital departments"})]}),e.jsxs(G,{onClick:Xe,size:"sm",children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Add Department"]})]})}),e.jsx(De,{children:En.length===0?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg bg-muted/20",children:[e.jsx(_s,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"font-medium text-muted-foreground",children:"No departments found"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Create your first department to get started"}),e.jsxs(G,{onClick:Xe,variant:"outline",size:"sm",className:"mt-4",children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Add Department"]})]}):e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Name"}),e.jsx(de,{children:"Description"}),e.jsx(de,{children:"Created"}),e.jsx(de,{className:"text-right",children:"Actions"})]})}),e.jsx(gn,{children:En.map(X=>e.jsxs(lt,{children:[e.jsx(oe,{className:"font-medium",children:X.name}),e.jsx(oe,{className:"text-muted-foreground",children:X.description||"No description"}),e.jsx(oe,{className:"text-sm text-muted-foreground",children:Fe(new Date(X.created_at),"MMM dd, yyyy")}),e.jsx(oe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(G,{variant:"outline",size:"sm",onClick:()=>Cn(X),children:[e.jsx(es,{className:"h-3 w-3 mr-1"}),"Doctors"]}),e.jsxs(G,{variant:"outline",size:"sm",onClick:()=>Lt(X),children:[e.jsx(Oc,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs(G,{variant:"destructive",size:"sm",onClick:()=>$t(X.id),children:[e.jsx(lh,{className:"h-3 w-3 mr-1"}),"Delete"]})]})})]},X.id))})]})})})]}),e.jsx(At,{open:Vt,onOpenChange:on,children:e.jsxs(St,{children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:dn?"Edit Department":"Add New Department"}),e.jsx(Ot,{children:dn?"Update the department information below":"Create a new department for your hospital"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"dept_name",children:"Department Name *"}),e.jsx(ke,{id:"dept_name",value:vn.name,onChange:X=>nn({...vn,name:X.target.value}),placeholder:"e.g., Cardiology, Pediatrics"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"dept_description",children:"Description"}),e.jsx(Mn,{id:"dept_description",value:vn.description,onChange:X=>nn({...vn,description:X.target.value}),placeholder:"Brief description of the department",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(G,{variant:"outline",onClick:()=>on(!1),children:"Cancel"}),e.jsxs(G,{onClick:Xt,children:[dn?"Update":"Create"," Department"]})]})]})]})}),e.jsx(At,{open:In,onOpenChange:$,children:e.jsxs(St,{className:"max-w-2xl",children:[e.jsxs(Ct,{children:[e.jsxs(Pt,{children:["Manage Doctors - ",Pe?.name]}),e.jsx(Ot,{children:"Assign doctors to this department for appointments"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2",children:["Assigned Doctors (",it.length,")"]}),it.length===0?e.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center border rounded-lg",children:"No doctors assigned yet"}):e.jsx("div",{className:"border rounded-lg divide-y max-h-48 overflow-y-auto",children:it.map(X=>e.jsxs("div",{className:"flex items-center justify-between p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:X.full_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:X.email})]}),e.jsx(G,{variant:"destructive",size:"sm",onClick:()=>as(X.id),children:"Remove"})]},X.id))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2",children:["Available Doctors (",j.length,")"]}),j.length===0?e.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center border rounded-lg",children:"All doctors are assigned"}):e.jsx("div",{className:"border rounded-lg divide-y max-h-48 overflow-y-auto",children:j.map(X=>e.jsxs("div",{className:"flex items-center justify-between p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:X.full_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:X.email})]}),e.jsx(G,{variant:"outline",size:"sm",onClick:()=>Fs(X.id),children:"Assign"})]},X.id))})]})]})]})}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-5 w-5"}),"Patients"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ke,{value:A,onChange:X=>D(X.target.value),placeholder:"Search patients",className:"h-8 w-48"})})]}),e.jsx(kt,{children:"Quickly view and inspect patients"})]}),e.jsx(De,{children:e.jsx(rM,{patients:t.filter(X=>{const st=(X.full_name||`${X.first_name} ${X.last_name}`||"").toLowerCase(),Bt=(X.phone||"").toLowerCase(),Ut=A.toLowerCase();return st.includes(Ut)||Bt.includes(Ut)}),view:Tt,onViewChange:It,loading:Be,onViewPatient:Is,selectedPatient:o,patientRecords:d,patientAppointments:p,activeTab:m,onTabChange:v,onClosePatientView:$d,isLoadingRecords:C})})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(qa,{className:"h-5 w-5"}),"Reports"]}),e.jsx(kt,{children:"Generate and view system reports"})]}),e.jsx(De,{children:e.jsx(N4,{})})]}),e.jsx(nM,{}),e.jsx(At,{open:ze,onOpenChange:Ee,children:e.jsxs(St,{children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Assign Role"}),e.jsx(Ot,{children:"Select a role to assign to this user"})]}),e.jsxs("form",{onSubmit:Er,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"role",children:"Role"}),e.jsxs(sn,{name:"role",required:!0,children:[e.jsx(en,{children:e.jsx(rn,{placeholder:"Select role"})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"admin",children:"Admin"}),e.jsx(_e,{value:"doctor",children:"Doctor"}),e.jsx(_e,{value:"nurse",children:"Nurse"}),e.jsx(_e,{value:"receptionist",children:"Receptionist"}),e.jsx(_e,{value:"lab_tech",children:"Lab Technician"}),e.jsx(_e,{value:"pharmacist",children:"Pharmacist"}),e.jsx(_e,{value:"billing",children:"Billing"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ad,{id:"isPrimary",name:"isPrimary"}),e.jsx(Z,{htmlFor:"isPrimary",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Set as active role (determines login redirect)"})]}),e.jsx(G,{type:"submit",className:"w-full",children:"Assign Role"})]})]})}),e.jsx(At,{open:Ms,onOpenChange:hs,children:e.jsxs(St,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs(Ct,{children:[e.jsxs(Pt,{className:"flex items-center gap-2",children:[e.jsx(ga,{className:"h-5 w-5"}),"System Settings"]}),e.jsx(Ot,{children:"Configure consultation fees and system preferences"})]}),e.jsxs("div",{className:"space-y-6 py-4 overflow-y-auto flex-1 px-6 -mx-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"General Settings"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"hospital_name",children:"Hospital/Clinic Name"}),e.jsx(ke,{id:"hospital_name",value:Dt.hospital_name,onChange:X=>an({...Dt,hospital_name:X.target.value}),placeholder:"Enter hospital name"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This name will appear on reports, invoices, and system headers"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"hospital_address",children:"Hospital Address"}),e.jsx(ke,{id:"hospital_address",value:Dt.hospital_address,onChange:X=>an({...Dt,hospital_address:X.target.value}),placeholder:"e.g., 123 Main Street, Dar es Salaam, Tanzania"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Full address displayed on patient reports and documents"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"hospital_phone",children:"Hospital Phone"}),e.jsx(ke,{id:"hospital_phone",value:Dt.hospital_phone,onChange:X=>an({...Dt,hospital_phone:X.target.value}),placeholder:"e.g., +255 712 345 678"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Contact phone number for patient inquiries"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"hospital_email",children:"Hospital Email"}),e.jsx(ke,{id:"hospital_email",type:"email",value:Dt.hospital_email,onChange:X=>an({...Dt,hospital_email:X.target.value}),placeholder:"e.g., info@hasetmedical.com"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Official email address for correspondence"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"report_header",children:"Report Header"}),e.jsx(ke,{id:"report_header",value:Dt.report_header,onChange:X=>an({...Dt,report_header:X.target.value}),placeholder:"Enter report header text"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Custom header text for printed reports and documents"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"currency",children:"Currency"}),e.jsxs(sn,{value:Dt.currency,onValueChange:X=>an({...Dt,currency:X}),children:[e.jsx(en,{children:e.jsx(rn,{})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"TSh",children:"TSh (Tanzanian Shilling)"}),e.jsx(_e,{value:"USD",children:"USD (US Dollar)"}),e.jsx(_e,{value:"EUR",children:"EUR (Euro)"}),e.jsx(_e,{value:"KES",children:"KES (Kenyan Shilling)"}),e.jsx(_e,{value:"UGX",children:"UGX (Ugandan Shilling)"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Default Consultation Fee"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"consultation_fee",children:"Default Fee Amount"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:Dt.currency}),e.jsx(ke,{id:"consultation_fee",type:"number",step:"1000",value:Dt.consultation_fee,onChange:X=>an({...Dt,consultation_fee:X.target.value}),placeholder:"50000",className:"flex-1"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This is the default consultation fee when no department-specific fee is set"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(ga,{className:"h-5 w-5 text-green-600"}),"Department-Specific Consultation Fees"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:" Set custom fees per department - these override the default fee"})]}),e.jsxs(He,{variant:"secondary",className:"text-sm",children:[En.length," departments"]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"How it works:"})," Enter a fee amount for each department. Leave blank to use the default fee (",Dt.currency," ",Dt.consultation_fee,"). These fees will be automatically applied when booking appointments."]})}),En.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg bg-muted/20",children:[e.jsx(_s,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"font-medium",children:"No departments found"}),e.jsx("p",{className:"text-xs mt-1",children:"Create departments first to set department-specific fees"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Total Departments"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:En.length})]}),e.jsxs("div",{className:"p-3 bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-lg",children:[e.jsx("div",{className:"text-xs text-green-600 font-medium",children:"Custom Fees Set"}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:Object.keys(Qt).filter(X=>Qt[X]).length})]}),e.jsxs("div",{className:"p-3 bg-gradient-to-br from-amber-50 to-amber-100 border border-amber-200 rounded-lg",children:[e.jsx("div",{className:"text-xs text-amber-600 font-medium",children:"Using Default"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700",children:En.length-Object.keys(Qt).filter(X=>Qt[X]).length})]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto border-2 rounded-lg p-4 bg-gradient-to-br from-gray-50 to-gray-100",children:En.map(X=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border-2 rounded-lg bg-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:X.name}),X.description&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:X.description}),Qt[X.id]&&e.jsx(He,{variant:"outline",className:"mt-2 bg-green-50 text-green-700 border-green-300",children:"Custom fee set"})]}),e.jsxs("div",{className:"flex items-center gap-2 min-w-[220px]",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:Dt.currency}),e.jsx(ke,{type:"number",step:"1000",value:Qt[X.id]||"",onChange:st=>ms({...Qt,[X.id]:st.target.value}),placeholder:`Default: ${Dt.consultation_fee}`,className:"w-32 font-medium"})]})]},X.id))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Feature Toggles"}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Enable Department-Specific Fees"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"When enabled, appointments will use department-specific fees instead of the default"})]}),e.jsx(ad,{checked:Dt.enable_appointment_fees==="true",onCheckedChange:X=>an({...Dt,enable_appointment_fees:X?"true":"false"})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t sticky bottom-0 bg-white z-10 -mx-6 px-6 pb-2",children:[e.jsx(G,{variant:"outline",onClick:()=>hs(!1),disabled:ot,children:"Cancel"}),e.jsx(G,{onClick:me,disabled:ot,className:"min-w-32",children:ot?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})]})]})})]})}))}function oM(){const{user:t}=Ys(),[n,s]=h.useState([]),[a,o]=h.useState([]),[c,d]=h.useState([]),[f,p]=h.useState([]),[x,m]=h.useState({totalAppointments:0,todayAppointments:0,totalPatients:0,pendingConsultations:0}),[v,C]=h.useState(!0),[w,_]=h.useState(!1),[b,S]=h.useState(!1),[E,P]=h.useState(!1),[N,A]=h.useState(null),[D,U]=h.useState(),[R,L]=h.useState(""),[pe,ee]=h.useState(""),[ve,ge]=h.useState(!1),[V,le]=h.useState([]),[we,fe]=h.useState([]),[ne,M]=h.useState(new Date),[K,se]=h.useState(!1),[T,O]=h.useState(!1),[he,Y]=h.useState(!1),[xe,Be]=h.useState(null),[re,$e]=h.useState([]),[qe,Ge]=h.useState([]),[be,mt]=h.useState({diagnosis:"",notes:"",treatment_plan:""}),[We,Et]=h.useState({selectedTests:[],priority:"Normal",notes:""}),[ue,ze]=h.useState([]),[Ee,Ke]=h.useState({}),[J,ye]=h.useState({medication_id:"",medication_name:"",dosage:"",frequency:"",duration:"",quantity:"",instructions:""}),ae=h.useCallback(()=>{const j=[];for(let z=9;z<=17;z++)for(let H=0;H<60;H+=30){const me=`${z.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}`;j.push(me)}return j},[]),Ze=j=>j?j.charAt(0).toUpperCase()+j.slice(1).toLowerCase():"Scheduled",tt=j=>{switch(Ze(j)){case"In Progress":return"default";case"Completed":return"secondary";case"Scheduled":return"outline";case"Cancelled":return"destructive";default:return"default"}},pt=async j=>{try{if(C(!0),(await q.put(`/appointments/${j.id}`,{status:"Confirmed"})).status!==200)throw new Error("Failed to update appointment");s(H=>H.map(me=>me.id===j.id?{...me,status:"Confirmed"}:me)),I.success("Appointment started successfully")}catch(z){console.error("Error starting appointment:",z),I.error("Failed to start appointment")}finally{C(!1)}},[yt,Ue]=h.useState(!1),[Ie,xt]=h.useState(null),[Ve,ct]=h.useState(""),[Ft,Me]=h.useState("discharge"),[Tt,It]=h.useState(!1),ss=async j=>{xt(j),ct(""),Ue(!0)},rs=async()=>{if(Ie){if(!Ve.trim()){I.error("Please enter consultation notes before completing");return}try{if(C(!0),(await q.put(`/appointments/${Ie.id}`,{status:"Completed",notes:Ve,completed_at:new Date().toISOString()})).status!==200)throw new Error("Failed to update appointment");const H=(await q.get(`/visits?appointment_id=${Ie.id}`)).data.visits||[];if(H.length>0){const me=H[0];Ft==="discharge"?(await q.put(`/visits/${me.id}`,{doctor_status:"Completed",doctor_completed_at:new Date().toISOString(),overall_status:"Completed",current_stage:"completed",discharge_notes:Ve}),I.success("Appointment completed. Patient discharged.")):Ft==="lab"?(await q.put(`/visits/${me.id}`,{doctor_status:"Completed",doctor_completed_at:new Date().toISOString(),current_stage:"lab",lab_status:"Pending"}),I.success("Appointment completed. Patient sent to lab.")):Ft==="pharmacy"&&(await q.put(`/visits/${me.id}`,{doctor_status:"Completed",doctor_completed_at:new Date().toISOString(),current_stage:"pharmacy",pharmacy_status:"Pending"}),I.success("Appointment completed. Patient sent to pharmacy."))}else I.success("Appointment completed successfully");s(me=>me.map(Xe=>Xe.id===Ie.id?{...Xe,status:"Completed",notes:Ve}:Xe)),Ue(!1),xt(null),ct(""),Me("discharge"),bt()}catch(j){console.error("Error completing appointment:",j),I.error(j.response?.data?.error||"Failed to complete appointment")}finally{C(!1)}}},Ms=async j=>{if(window.confirm("Are you sure you want to cancel this appointment?"))try{if(C(!0),(await q.put(`/appointments/${j.id}`,{status:"cancelled",cancelled_at:new Date().toISOString()})).status!==200)throw new Error("Failed to update appointment");s(H=>H.map(me=>me.id===j.id?{...me,status:"cancelled"}:me)),I.success("Appointment cancelled successfully")}catch(z){console.error("Error cancelling appointment:",z),I.error("Failed to cancel appointment")}finally{C(!1)}},[hs,En]=h.useState(!1),Ps=j=>{A(j),En(!0)},Dt=j=>{const z=Ze(j.status),H=v&&N?.id===j.id,me=()=>{if(!j.appointment_date)return console.log("Missing appointment date"),!1;try{let Xe;if(j.appointment_date.includes("T")&&j.appointment_date.length>10)Xe=new Date(j.appointment_date);else if(j.appointment_time)Xe=new Date(`${j.appointment_date}T${j.appointment_time}`);else return console.log("Cannot determine appointment time"),!1;const Lt=ne,Xt=new Date(Xe.getTime()-300*1e3),$t=Lt>=Xt;if(!$t){const Cn=Math.ceil((Xt.getTime()-Lt.getTime())/6e4);console.log(`${j.patient?.full_name}: Cannot start yet. ${Cn} minutes until start time.`)}return $t}catch(Xe){return console.error("Error checking appointment time:",Xe,j),!1}};switch(z){case"Scheduled":const Xe=me();return e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(G,{variant:"default",size:"sm",onClick:Lt=>{Lt.stopPropagation(),A(j),pt(j)},disabled:H||!Xe,className:"min-w-[80px]",title:Xe?"Start appointment":"Appointment time has not arrived yet",children:H?e.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}):"Start"}),e.jsx(G,{variant:"outline",size:"sm",onClick:Lt=>{Lt.stopPropagation(),A(j),Ms(j)},disabled:H,className:"min-w-[80px]",children:"Cancel"})]});case"Confirmed":return e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(G,{variant:"default",size:"sm",onClick:Lt=>{Lt.stopPropagation(),A(j),ss(j)},disabled:H,className:"min-w-[100px]",children:H?e.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}):"Complete"}),e.jsx(G,{variant:"outline",size:"sm",onClick:Lt=>{Lt.stopPropagation(),A(j),Ps(j)},children:"View"})]});case"Completed":case"Cancelled":return e.jsx(G,{variant:"outline",size:"sm",onClick:Lt=>{Lt.stopPropagation(),A(j),Ps(j)},className:"w-full",children:"View Details"});default:return null}},an=j=>{const z=new Date(`${j.appointment_date}T${j.appointment_time}`),H=new Date;return j.status==="Completed"?"bg-gray-400":j.status==="Confirmed"?"bg-green-500 animate-pulse":Ti(H,z)?"bg-blue-500":"bg-amber-500"},Qt=j=>j.status==="Completed"?"opacity-60":j.status==="Confirmed"?"bg-blue-50":"",ms=()=>{const j=new Date,z=j.getDay(),H=new Date(j);H.setDate(j.getDate()-(z===0?6:z-1)),H.setHours(0,0,0,0);const me=new Date(H);return me.setDate(H.getDate()+6),me.setHours(23,59,59,999),{start:H,end:me}},ot=j=>{if(!j.appointment_date||!j.appointment_time)return null;try{const z=new Date(`${j.appointment_date}T${j.appointment_time}`);if(isNaN(z.getTime()))return null;const H=new Date;if(j.status==="Completed")return null;if(Ti(H,z)){const me=Math.ceil((z.getTime()-H.getTime())/6e4);return me<=30?e.jsxs("span",{className:"text-xs text-amber-600",children:["Starts in ",me," min"]}):e.jsx("span",{className:"text-xs text-muted-foreground",children:Fe(z,"h:mm a")})}return Ti(H,Dv(z,30))?e.jsx("span",{className:"text-xs font-medium text-green-600",children:"In progress"}):e.jsx("span",{className:"text-xs text-muted-foreground",children:Fe(z,"h:mm a")})}catch(z){return console.error("Error formatting appointment time:",z,j),null}};h.useEffect(()=>{const j=setInterval(()=>{const z=new Date;M(z),console.log("Time updated:",z.toLocaleTimeString()),n.forEach(H=>{if(!(!H.appointment_date||!H.appointment_time))try{const me=new Date(`${H.appointment_date}T${H.appointment_time}`);if(isNaN(me.getTime()))return;const Xe=Dv(me,30);nd(z,me)&&Ti(z,Xe)&&["Completed","Confirmed"].includes(H.status)}catch(me){console.error("Error processing appointment time:",me,H)}})},3e4);return()=>clearInterval(j)},[n]);const wt=h.useCallback(async()=>{if(t?.id)try{C(!0);const j=await q.get(`/appointments?doctor_id=${t.id}`);if(j.status!==200)throw new Error("Failed to fetch appointments");const z=j.data.appointments;if(!z)return;const H=[...new Set(z.map($t=>$t.patient_id))];let me=[];if(H.length>0){const $t=await q.get(`/patients?ids=${H.join(",")}`);$t.status===200&&(me=$t.data.patients||[])}const Xe=z.map($t=>{const Cn=me.find(Fs=>Fs.id===$t.patient_id)||{};return{...$t,status:Ze($t.status),patient:Cn}});s(Xe);const Lt=new Date().toISOString().split("T")[0],Xt=Xe.filter($t=>($t.appointment_date?$t.appointment_date.split("T")[0]:"")===Lt&&!["Completed","Cancelled"].includes($t.status)).length;m({totalAppointments:Xe.length,todayAppointments:Xt,totalPatients:a.length,pendingConsultations:Xe.filter($t=>$t.status==="Scheduled"||$t.status==="Confirmed").length})}catch(j){console.error("Error fetching appointments:",j),I.error("Failed to load appointments. Please refresh the page.")}finally{C(!1)}},[t?.id]),Vt=h.useCallback(async()=>{try{const j=await q.get("/labs/services");if(j.data.error)throw new Error(j.data.error);const z=(j.data.services||[]).map(H=>({id:H.id,service_id:H.id,test_name:H.service_name,test_type:H.service_type,description:H.description,price:H.price,currency:H.currency}));$e(z),console.log("Loaded lab services from medical_services:",z.length)}catch(j){console.error("Error fetching lab services:",j)}},[]),on=h.useCallback(async()=>{try{const j=await q.get("/pharmacy/medications");if(j.data.error)throw new Error(j.data.error);Ge(j.data.medications||[])}catch(j){console.error("Error fetching medications:",j)}},[]);h.useEffect(()=>{wt(),Vt(),on()},[wt,Vt,on]),h.useEffect(()=>{if(!t?.id)return;let j=!0,z;return(async()=>{try{j&&await wt(),z=setInterval(()=>{j&&wt()},3e4)}catch(me){console.error("Error setting up polling:",me),j&&I.error("Failed to set up data polling")}})(),()=>{j=!1,z&&clearInterval(z)}},[t?.id,wt]);const dn=async(j,z)=>{try{if(!j){console.error("No appointment ID provided"),I.error("Error: No appointment ID provided");return}const H=["Scheduled","Confirmed","Completed","Cancelled"];if(!H.includes(z)){console.error("Invalid status provided:",z),I.error(`Error: Invalid status. Must be one of: ${H.join(", ")}`);return}console.log("Updating appointment status:",{appointmentId:j,newStatus:z});const Xe={status:z==="Completed"?"completed":z==="Cancelled"?"cancelled":z,updated_at:new Date().toISOString()};z==="Completed"&&(Xe.completed_at=new Date().toISOString());const Lt=await q.put(`/appointments/${j}`,Xe);if(Lt.status!==200)throw new Error("Failed to update appointment");const Xt=Lt.data;if(!Xt)throw new Error("No data returned from update - appointment may not exist");console.log("Update successful, response data:",Xt),s(ps=>{const Se=ps.map(yn=>yn.id===j?{...yn,...Xt,patient:Xt.patient||yn.patient}:yn);return console.log("Updated appointments state:",Se),Se});const Cn=Xt?.patient?.full_name||"the patient",as={Scheduled:`Appointment with ${Cn} has been rescheduled`,Confirmed:`Started consultation with ${Cn}`,Completed:`Completed appointment with ${Cn}`,Cancelled:`Cancelled appointment with ${Cn}`}[z]||"Appointment updated";console.log("Showing success message:",as),I.success(as),z==="Completed"&&console.log("Appointment completed, check for pending tests/prescriptions")}catch(H){console.error("Error in updateAppointmentStatus:",H);const me=H instanceof Error?H.message:"Unknown error";console.error("Full error details:",H),I.error(`Failed to update appointment status: ${me}`)}},bn=async(j,z)=>{if(le(j),_(!0),z&&z.lab_completed_at&&!z.lab_results_reviewed)try{(await q.put(`/visits/${z.id}`,{lab_results_reviewed:!0,lab_results_reviewed_at:new Date().toISOString()})).status===200&&d(me=>me.map(Xe=>Xe.id===z.id?{...Xe,lab_results_reviewed:!0,lab_results_reviewed_at:new Date().toISOString()}:Xe))}catch(H){console.error("Error marking lab results as reviewed:",H)}},vn=async j=>{if(Be(j),mt({diagnosis:"",notes:"",treatment_plan:""}),j.lab_completed_at&&!j.lab_results_reviewed)try{(await q.put(`/visits/${j.id}`,{lab_results_reviewed:!0,lab_results_reviewed_at:new Date().toISOString()})).status===200&&d(H=>H.map(me=>me.id===j.id?{...me,lab_results_reviewed:!0,lab_results_reviewed_at:new Date().toISOString()}:me))}catch(z){console.error("Error marking lab results as reviewed:",z)}se(!0)},nn=async j=>{Be(j),Et({selectedTests:[],priority:"Normal",notes:""});try{const z=await q.get("/labs");z.data.error?(console.warn("Lab test catalog not found, using predefined list"),$e([{id:"cbc",test_name:"Complete Blood Count (CBC)",test_type:"Hematology",description:"Measures blood components"},{id:"glucose",test_name:"Blood Glucose (Fasting)",test_type:"Chemistry",description:"Measures blood sugar"},{id:"lipid",test_name:"Lipid Panel",test_type:"Chemistry",description:"Cholesterol and triglycerides"},{id:"lft",test_name:"Liver Function Test",test_type:"Chemistry",description:"Evaluates liver health"},{id:"kft",test_name:"Kidney Function Test",test_type:"Chemistry",description:"Evaluates kidney health"},{id:"urinalysis",test_name:"Urinalysis",test_type:"Urinalysis",description:"Examines urine"},{id:"thyroid",test_name:"Thyroid Function Test",test_type:"Endocrinology",description:"Thyroid hormones"},{id:"hba1c",test_name:"Hemoglobin A1C",test_type:"Chemistry",description:"3-month blood sugar average"},{id:"electrolytes",test_name:"Electrolytes Panel",test_type:"Chemistry",description:"Sodium, potassium, chloride"},{id:"malaria",test_name:"Malaria Test (RDT)",test_type:"Microbiology",description:"Rapid malaria test"},{id:"xray",test_name:"X-Ray Chest",test_type:"Radiology",description:"Chest X-ray"},{id:"ultrasound",test_name:"Ultrasound Abdomen",test_type:"Radiology",description:"Abdominal ultrasound"}])):$e(z.data.labTests||[])}catch(z){console.error("Error fetching lab tests:",z),I.error("Failed to load lab tests")}O(!0)},In=async j=>{Be(j),ze([]),Ke({}),ye({medication_id:"",medication_name:"",dosage:"",frequency:"",duration:"",quantity:"",instructions:""});try{const z=await q.get("/pharmacy/medications");z.status!==200?(console.error("Error fetching medications:",z.statusText),I.error(`Failed to load medications: ${z.statusText}`),Ge([{id:"amox",name:"Amoxicillin",strength:"500mg",dosage_form:"Capsule"},{id:"para",name:"Paracetamol",strength:"500mg",dosage_form:"Tablet"},{id:"ibu",name:"Ibuprofen",strength:"400mg",dosage_form:"Tablet"},{id:"met",name:"Metformin",strength:"500mg",dosage_form:"Tablet"},{id:"ome",name:"Omeprazole",strength:"20mg",dosage_form:"Capsule"},{id:"aml",name:"Amlodipine",strength:"5mg",dosage_form:"Tablet"},{id:"cipro",name:"Ciprofloxacin",strength:"500mg",dosage_form:"Tablet"},{id:"azith",name:"Azithromycin",strength:"250mg",dosage_form:"Tablet"}])):Ge(z.data.medications||[])}catch(z){console.error("Error fetching medications:",z),I.error(`Failed to load medications: ${z.message||"Unknown error"}`)}Y(!0)},$=async()=>{if(!xe||!be.diagnosis){I.error("Please enter a diagnosis");return}try{const j=be.treatment_plan?`${be.notes}

Treatment Plan:
${be.treatment_plan}`:be.notes;if((await q.put(`/visits/${xe.id}`,{doctor_diagnosis:be.diagnosis,doctor_notes:j,doctor_status:"In Consultation",updated_at:new Date().toISOString()})).status!==200)throw new Error("Failed to update visit");I.success("Consultation notes saved. Please order lab tests or write prescription."),se(!1);const H=c.map(me=>me.id===xe.id?{...me,doctor_diagnosis:be.diagnosis,doctor_notes:j}:me);d(H)}catch(j){console.error("Error saving consultation:",j),I.error("Failed to save consultation notes")}},Pe=async()=>{if(!xe||We.selectedTests.length===0){I.error("Please select at least one lab test");return}if(!t?.id){I.error("User not authenticated");return}try{const j=We.selectedTests.map(H=>{const me=re.find(Xe=>Xe.id===H);return{patient_id:xe.patient_id,service_id:me?.service_id||me?.id,test_name:me?.test_name||"",test_type:me?.test_type||"",status:"Pending",priority:We.priority,notes:We.notes||null,ordered_by_doctor_id:t.id,ordered_date:new Date().toISOString()}});console.log("Ordering lab tests:",j);const z=[];for(const H of j)try{const me=await q.post("/labs",{patient_id:H.patient_id,doctor_id:t.id,test_name:H.test_name,test_type:H.test_type,ordered_date:H.ordered_date,status:"Ordered",priority:H.priority,instructions:H.notes});if(me.data.error)throw new Error(me.data.error);z.push(me.data)}catch(me){throw console.error("Error creating lab test:",me),new Error(`Failed to create test "${H.test_name}": ${me.message}`)}if(console.log("Lab tests created successfully:",z.length),xe.id){const H=await q.put(`/visits/${xe.id}`,{current_stage:"lab",lab_status:"Pending",doctor_status:"Pending Review",updated_at:new Date().toISOString()});if(H.status!==200)throw console.error("Visit update error:",H.statusText),new Error(`Failed to update patient visit: ${H.statusText}`);console.log("Visit updated - patient sent to lab")}else if(xe.patient_id){console.log("Creating visit for appointment-based lab order");try{(await q.post("/visits",{patient_id:xe.patient_id,visit_date:new Date().toISOString().split("T")[0],current_stage:"lab",overall_status:"Active",reception_status:"Checked In",nurse_status:"Completed",lab_status:"Pending",doctor_status:"Pending Review",doctor_id:t?.id})).status===201&&console.log("Visit created successfully for lab workflow")}catch(H){console.error("Failed to create visit:",H)}}I.success(`${j.length} lab test(s) ordered successfully. Patient sent to lab.`),O(!1),Tt&&Ie&&(await q.put(`/appointments/${Ie.id}`,{status:"In Progress",notes:Ve}),xt(null),ct(""),Me("discharge"),It(!1),I.info("Patient sent to lab. They will return to you after lab work is completed.")),Et({selectedTests:[],priority:"Normal",notes:""}),d(H=>H.filter(me=>me.id!==xe.id))}catch(j){console.error("Error ordering lab tests:",j);const z=j.message||"Failed to order lab tests";I.error(z)}},nt=async()=>{if(!xe||ue.length===0){I.error("Please select at least one medication");return}console.log("Selected visit for prescription:",xe);for(const j of ue){const z=Ee[j],me=qe.find(Xe=>Xe.id===j)?.name||"medication";if(!z||!z.dosage||!z.frequency||!z.duration||!z.quantity){I.error(`Please fill in all required fields for ${me}`);return}}try{const j=ue.map(H=>{const me=Ee[H],Xe=qe.find(Xt=>Xt.id===H),Lt=parseInt(me.quantity);if(isNaN(Lt)||Lt<=0)throw new Error(`Invalid quantity for ${Xe?.name||"medication"}`);return{patient_id:xe.patient_id,doctor_id:t?.id,medication_id:H,medication_name:Xe?.name||"",dosage:me.dosage,frequency:me.frequency,duration:me.duration,quantity:Lt,instructions:me.instructions||null,status:"Pending",prescribed_date:new Date().toISOString()}});console.log("Creating prescriptions:",j);const z=await q.post("/prescriptions",{prescriptions:j});if(console.log("Prescription response:",z.data),z.status!==201&&z.status!==200)throw new Error(z.data?.error||"Failed to create prescriptions");if(console.log("Prescription creation logged",{doctor_id:t?.id,patient_id:xe.patient_id,visit_id:xe.id,prescription_count:ue.length,medications:j.map(H=>({medication:H.medication_name,quantity:H.quantity,dosage:H.dosage}))}),xe.id){const H=await q.put(`/visits/${xe.id}`,{doctor_status:"Completed",doctor_completed_at:new Date().toISOString(),current_stage:"pharmacy",pharmacy_status:"Pending",updated_at:new Date().toISOString()});if(H.status!==200){console.error("Error updating visit after prescription:",H.statusText),I.error("Prescription saved but failed to send patient to pharmacy");return}console.log("Visit updated - patient sent to pharmacy")}else if(xe.patient_id){console.log("Creating visit for appointment-based pharmacy order");try{await q.post("/visits",{patient_id:xe.patient_id,visit_date:new Date().toISOString().split("T")[0],current_stage:"pharmacy",overall_status:"Active",reception_status:"Checked In",nurse_status:"Completed",doctor_status:"Completed",doctor_completed_at:new Date().toISOString(),pharmacy_status:"Pending",doctor_id:t?.id}),console.log("Visit created successfully for pharmacy workflow")}catch(H){console.error("Failed to create visit:",H)}}console.log("Consultation completion logged",{doctor_id:t?.id,patient_id:xe.patient_id,visit_id:xe.id,next_stage:"pharmacy"}),I.success(`${ue.length} prescription(s) written. Patient sent to pharmacy.`),Y(!1),Tt&&Ie&&(await q.put(`/appointments/${Ie.id}`,{status:"Completed",notes:Ve||"Prescription written",completed_at:new Date().toISOString()}),xt(null),ct(""),Me("discharge"),It(!1),I.success("Appointment completed. Patient sent to pharmacy.")),ze([]),Ke({}),ye({medication_id:"",medication_name:"",dosage:"",frequency:"",duration:"",quantity:"",instructions:""}),d(H=>H.filter(me=>me.id!==xe.id))}catch(j){console.error("Error writing prescription:",j),console.error("Error details:",j.response?.data);const z=j.response?.data?.error||j.message||"Failed to write prescription";I.error(z)}},it=async()=>{if(!D||!R||!N){console.error("Missing required fields for rescheduling:",{rescheduleDate:D,rescheduleTime:R,selectedAppointment:N}),I.error("Please fill in all required fields");return}console.log("Starting reschedule with data:",{appointmentId:N.id,newDate:D,newTime:R,reason:pe}),ge(!0);try{const j=Fe(D,"yyyy-MM-dd");console.log("Formatted date for DB:",j);const z={appointment_date:j,appointment_time:R,status:"Scheduled",rescheduled_at:new Date().toISOString(),reschedule_reason:pe||"No reason provided",updated_at:new Date().toISOString()};console.log("Sending update to database:",z);const H=await q.put(`/appointments/${N.id}`,z);if(H.status!==200)throw new Error(H.statusText||"Failed to update appointment in database");const me=H.data;if(!me)throw new Error("No data returned from update - appointment may not exist");console.log("Database update successful, response:",me),s(Lt=>{const Xt=Lt.map($t=>$t.id===N.id?{...$t,...me,patient:$t.patient}:$t);return console.log("Updated appointments state:",Xt),Xt});const Xe=`Appointment rescheduled to ${Fe(D,"PPP")} at ${R}`;console.log("Success:",Xe),I.success(Xe),P(!1),U(void 0),L(""),ee(""),A(null)}catch(j){console.error("Error in handleRescheduleAppointment:",j);const z=j instanceof Error?j.message:"Unknown error occurred";console.error("Error details:",j),I.error(`Failed to reschedule appointment: ${z}`)}finally{ge(!1)}},bt=async()=>{if(!t){console.log("No user found, skipping data fetch");return}console.log("Fetching doctor dashboard data for user:",t.id),C(!0);try{const j=await q.get("/visits?current_stage=doctor&overall_status=Active&doctor_status_neq=Completed");if(j.status!==200)throw console.error("Error fetching visits:",j.statusText),new Error(j.statusText);const z=j.data.visits||[];console.log("Doctor Dashboard - Patients waiting:",{total_patients:z?.length||0,patients:z?.map(Se=>({id:Se.id,patient:Se.patient?.full_name,current_stage:Se.current_stage,doctor_status:Se.doctor_status,doctor_id:Se.doctor_id,nurse_completed:Se.nurse_completed_at?"Yes":"No",lab_status:Se.lab_status,created_at:Se.created_at}))||[]});const H=await q.get(`/appointments?doctor_id=${t.id}`);if(H.status!==200)throw console.error("Error fetching appointments:",H.statusText),new Error(H.statusText);const me=H.data.appointments||[];console.log("Fetched appointments:",me?.length||0);const Xe=await q.get("/patients?limit=10&sort=created_at&order=desc"),Lt=Xe.status===200?Xe.data.patients||[]:[],Xt=await Promise.all((z||[]).map(async Se=>{let yn=[],Nn=[],Kn=[];try{console.log("Fetching lab tests for patient:",Se.patient?.id,Se.patient?.full_name);const Vn=await q.get(`/labs?patient_id=${Se.patient?.id}`);Vn.data.error||(yn=Vn.data.labTests||[]),console.log("Lab tests found for patient:",Se.patient?.id,yn.length);const Er=await q.get(`/labs?patient_id=${Se.patient?.id}&status=Completed`);Er.data.error||(Nn=Er.data.labTests||[]),console.log("All completed lab tests for patient:",Se.patient?.id,Nn.length),console.log("Fetching prescriptions for patient:",Se.patient?.id,Se.patient?.full_name);const Vr=await q.get(`/prescriptions?patient_id=${Se.patient?.id}`);Vr.status===200&&(Kn=Vr.data.prescriptions||[]),console.log("Prescriptions found for patient:",Se.patient?.id,Kn.length)}catch(Vn){console.error("Error fetching data for patient:",Se.patient?.id,Vn)}return{...Se,labTests:yn,allCompletedLabTests:Nn,prescriptions:Kn}})),$t=new Date,Cn=`${$t.getFullYear()}-${String($t.getMonth()+1).padStart(2,"0")}-${String($t.getDate()).padStart(2,"0")}`,Fs=me?.filter(Se=>{let yn="";if(Se.appointment_date instanceof Date){const Nn=Se.appointment_date;yn=`${Nn.getFullYear()}-${String(Nn.getMonth()+1).padStart(2,"0")}-${String(Nn.getDate()).padStart(2,"0")}`}else if(typeof Se.appointment_date=="string"){const Nn=new Date(Se.appointment_date);yn=`${Nn.getFullYear()}-${String(Nn.getMonth()+1).padStart(2,"0")}-${String(Nn.getDate()).padStart(2,"0")}`}return yn===Cn}).length||0,as=Xt.filter(Se=>Se.current_stage==="doctor"&&Se.doctor_status!=="Completed"&&Se.overall_status==="Active");console.log("Filtered visits:",{total:Xt.length,active:as.length,filtered_out:Xt.length-as.length}),d(as),s(me||[]),o(Lt||[]);try{const Se=await q.get("/visits?doctor_status=Completed&limit=50");Se.status===200&&p(Se.data.visits||[])}catch(Se){console.error("Error fetching completed visits:",Se),p([])}const ps=new Set([...as.map(Se=>Se.patient_id),...me.map(Se=>Se.patient_id)]);m({totalAppointments:me?.length||0,todayAppointments:Fs,totalPatients:ps.size,pendingConsultations:as.length})}catch(j){console.error("Error fetching doctor data:",j),console.error("Error details:",{message:j.message}),d([]),s([]),o([]),m({totalAppointments:0,todayAppointments:0,totalPatients:0,pendingConsultations:0}),I.error(`Failed to load dashboard data: ${j.message}`)}finally{C(!1)}};return h.useEffect(()=>{if(!t?.id)return;bt();const j=setInterval(()=>{bt()},3e4);return()=>{j&&clearInterval(j)}},[t?.id]),v?e.jsx(Sn,{title:"Doctor Dashboard",children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary"})})}):e.jsxs(Sn,{title:"Doctor Dashboard",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(Ce,{className:"border-primary/20 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Today's Appointments"}),e.jsx(ns,{className:"h-4 w-4 text-primary"})]}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold text-primary",children:x.todayAppointments})})]}),e.jsxs(Ce,{className:"border-secondary/20 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Total Appointments"}),e.jsx(nl,{className:"h-4 w-4 text-secondary"})]}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold text-secondary",children:x.totalAppointments})})]}),e.jsxs(Ce,{className:"border-accent/20 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Pending Consultations"}),e.jsx(es,{className:"h-4 w-4 text-accent"})]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold text-accent",children:x.pendingConsultations}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Waiting for doctor"})]})]}),e.jsxs(Ce,{className:"border-green-200 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Total Patients"}),e.jsx(es,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:x.totalPatients}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total registered patients"})]})]})]}),e.jsx(At,{open:w,onOpenChange:_,children:e.jsxs(St,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Lab Test Results"}),e.jsx(Ot,{children:"Review all lab test results for your patients"})]}),e.jsxs(Va,{defaultValue:"all",className:"w-full",children:[e.jsxs(ya,{className:"grid w-full grid-cols-3 mb-4",children:[e.jsx(Un,{value:"all",children:"All Tests"}),e.jsx(Un,{value:"completed",children:"Completed"}),e.jsx(Un,{value:"pending",children:"Pending"})]}),e.jsx(zn,{value:"all",className:"space-y-4",children:V.length>0?V.map(j=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:j.test_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j.test_type})]}),e.jsx(He,{variant:j.status==="Completed"?"default":"secondary",children:j.status})]}),j.lab_results?.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("h5",{className:"text-sm font-medium",children:"Results:"}),e.jsx("div",{className:"space-y-2",children:j.lab_results.map(z=>e.jsxs("div",{className:"flex justify-between items-center text-sm p-2 bg-muted/50 rounded",children:[e.jsxs("span",{className:"font-medium",children:[z.result_value," ",z.unit]}),e.jsxs("div",{className:"flex items-center gap-2",children:[z.reference_range&&e.jsxs("span",{className:"text-muted-foreground text-xs",children:["Ref: ",z.reference_range]}),z.abnormal_flag&&e.jsx(He,{variant:"destructive",className:"text-xs",children:"Abnormal"})]})]},z.id))})]})]},j.id)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No lab test results available"})}),e.jsx(zn,{value:"completed",className:"space-y-4",children:V.filter(j=>j.status==="Completed").length>0?V.filter(j=>j.status==="Completed").map(j=>e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:j.test_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j.test_type})]}),e.jsx(He,{children:"Completed"})]})},j.id)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No completed lab tests"})}),e.jsx(zn,{value:"pending",className:"space-y-4",children:V.filter(j=>j.status!=="Completed").length>0?V.filter(j=>j.status!=="Completed").map(j=>e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:j.test_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j.test_type})]}),e.jsx(He,{variant:"secondary",children:j.status})]})},j.id)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No pending lab tests"})})]})]})}),e.jsx(At,{open:b,onOpenChange:S,children:e.jsxs(St,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Patient Prescriptions"}),e.jsx(Ot,{children:"Review all prescriptions for your patients"})]}),e.jsxs(Va,{defaultValue:"all",className:"w-full",children:[e.jsxs(ya,{className:"grid w-full grid-cols-3 mb-4",children:[e.jsx(Un,{value:"all",children:"All Prescriptions"}),e.jsx(Un,{value:"active",children:"Active"}),e.jsx(Un,{value:"completed",children:"Completed"})]}),e.jsx(zn,{value:"all",className:"space-y-4",children:we.length>0?we.map(j=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:j.medication_name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[j.medications&&e.jsxs("span",{children:[j.medications.strength," ",j.medications.dosage_form,"  "]}),e.jsxs("span",{children:["Prescribed: ",Fe(new Date(j.prescribed_date),"MMM dd, yyyy")]})]})]}),e.jsx(He,{variant:j.status==="Active"?"default":"secondary",children:j.status})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Dosage:"})," ",j.dosage]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Frequency:"})," ",j.frequency]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Duration:"})," ",j.duration]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Quantity:"})," ",j.quantity]})]}),j.instructions&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border-l-4 border-blue-400 text-sm",children:[e.jsx("strong",{children:"Instructions:"})," ",j.instructions]})]},j.id)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No prescriptions found"})}),e.jsx(zn,{value:"active",className:"space-y-4",children:we.filter(j=>j.status==="Active").length>0?we.filter(j=>j.status==="Active").map(j=>e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:j.medication_name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[j.medications&&e.jsxs("span",{children:[j.medications.strength," ",j.medications.dosage_form,"  "]}),e.jsxs("span",{children:["Prescribed: ",Fe(new Date(j.prescribed_date),"MMM dd, yyyy")]})]})]}),e.jsx(He,{children:"Active"})]})},j.id)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No active prescriptions"})}),e.jsx(zn,{value:"completed",className:"space-y-4",children:we.filter(j=>j.status==="Completed").length>0?we.filter(j=>j.status==="Completed").map(j=>e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:j.medication_name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[j.medications&&e.jsxs("span",{children:[j.medications.strength," ",j.medications.dosage_form,"  "]}),e.jsxs("span",{children:["Prescribed: ",Fe(new Date(j.prescribed_date),"MMM dd, yyyy")]})]})]}),e.jsx(He,{variant:"secondary",children:"Completed"})]})},j.id)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No completed prescriptions"})})]})]})}),c.filter(j=>j.lab_completed_at&&!j.lab_results_reviewed&&j.doctor_status!=="Completed"&&j.current_stage==="doctor"&&j.overall_status==="Active").length>0&&e.jsxs(Ce,{className:"shadow-lg border-green-300 bg-green-50/30",children:[e.jsxs(Re,{className:"bg-green-100/50",children:[e.jsxs(Oe,{className:"flex items-center gap-2 text-green-800",children:[e.jsx(xa,{className:"h-5 w-5"}),"Lab Results Queue",e.jsxs(He,{variant:"default",className:"bg-green-600",children:[c.filter(j=>j.lab_completed_at&&!j.lab_results_reviewed&&j.doctor_status!=="Completed"&&j.current_stage==="doctor"&&j.overall_status==="Active").length," patient",c.filter(j=>j.lab_completed_at&&!j.lab_results_reviewed&&j.doctor_status!=="Completed"&&j.current_stage==="doctor"&&j.overall_status==="Active").length!==1?"s":""]})]}),e.jsx(kt,{className:"text-green-700",children:"Patients with new lab results waiting for doctor review"})]}),e.jsx(De,{children:e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Patient"}),e.jsx(de,{children:"Lab Tests"}),e.jsx(de,{children:"Completed"}),e.jsx(de,{children:"Status"}),e.jsx(de,{className:"text-right",children:"Actions"})]})}),e.jsxs(gn,{children:[c.filter(j=>j.lab_completed_at&&!j.lab_results_reviewed&&j.doctor_status!=="Completed"&&j.current_stage==="doctor"&&j.overall_status==="Active").map(j=>{const z=(j.labTests?.length||0)+(j.allCompletedLabTests?.length||0),H=[...j.labTests||[],...j.allCompletedLabTests||[]].some(me=>me.lab_results?.some(Xe=>Xe.abnormal_flag));return e.jsxs(lt,{className:"hover:bg-green-50",children:[e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:j.patient?.full_name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[j.patient?.gender,"  ",j.patient?.blood_group||"N/A",j.patient?.allergies&&e.jsx("span",{className:"text-red-600 ml-2",children:" Allergies"})]})]})}),e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(He,{variant:"outline",className:"bg-green-50",children:[z," test",z!==1?"s":""]}),H&&e.jsx(He,{variant:"destructive",className:"text-xs",children:"Abnormal"})]})}),e.jsx(oe,{children:e.jsx("div",{className:"text-sm",children:Fe(new Date(j.lab_completed_at),"MMM dd, HH:mm")})}),e.jsx(oe,{children:e.jsx(He,{variant:"default",className:"bg-green-100 text-green-800",children:"Pending Review"})}),e.jsx(oe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(G,{variant:"outline",size:"sm",onClick:()=>bn([...j.labTests||[],...j.allCompletedLabTests||[]],j),className:"flex items-center gap-1",children:[e.jsx(zo,{className:"h-3 w-3"}),"View Results"]}),e.jsxs(G,{variant:"default",size:"sm",onClick:()=>In(j),className:"flex items-center gap-1",children:[e.jsx(Yc,{className:"h-3 w-3"}),"Write Prescription"]})]})})]},j.id)}),c.filter(j=>j.lab_completed_at&&!j.lab_results_reviewed&&j.doctor_status!=="Completed").length===0&&e.jsx(lt,{children:e.jsxs(oe,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:[e.jsx(xa,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),e.jsx("p",{children:"No lab results waiting for review"})]})})]})]})})})]}),c.filter(j=>(!j.lab_completed_at||j.lab_results_reviewed)&&j.doctor_status!=="Completed"&&j.current_stage==="doctor"&&j.overall_status==="Active").length>0&&e.jsxs(Ce,{className:"shadow-lg border-blue-200",children:[e.jsxs(Re,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-5 w-5 text-blue-600"}),"Patients Waiting for Consultation",e.jsxs(He,{variant:"secondary",className:"ml-auto",children:[c.filter(j=>(!j.lab_completed_at||j.lab_results_reviewed)&&j.doctor_status!=="Completed"&&j.current_stage==="doctor"&&j.overall_status==="Active").length," patient",c.filter(j=>(!j.lab_completed_at||j.lab_results_reviewed)&&j.doctor_status!=="Completed"&&j.current_stage==="doctor"&&j.overall_status==="Active").length!==1?"s":""]})]}),e.jsx(kt,{children:"Patients ready for doctor consultation (includes reviewed lab results)"})]}),e.jsx(De,{children:e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Patient"}),e.jsx(de,{children:"Age/Gender"}),e.jsx(de,{children:"Vitals"}),e.jsx(de,{children:"Lab Results"}),e.jsx(de,{children:"Arrival"}),e.jsx(de,{className:"text-right",children:"Actions"})]})}),e.jsxs(gn,{children:[c.filter(j=>(!j.lab_completed_at||j.lab_results_reviewed)&&j.doctor_status!=="Completed"&&j.current_stage==="doctor"&&j.overall_status==="Active").map(j=>{const z=j.labTests&&j.labTests.length>0||j.allCompletedLabTests&&j.allCompletedLabTests.length>0,H=z&&[...j.labTests||[],...j.allCompletedLabTests||[]].some(Xe=>Xe.lab_results?.some(Lt=>Lt.abnormal_flag)),me=j.patient?.date_of_birth?new Date().getFullYear()-new Date(j.patient.date_of_birth).getFullYear():"N/A";return e.jsxs(lt,{className:"hover:bg-blue-50/50",children:[e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:j.patient?.full_name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[j.patient?.phone,j.patient?.allergies&&e.jsx("span",{className:"text-red-600 ml-2",children:" Allergies"})]})]})}),e.jsx(oe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[me," yrs / ",j.patient?.gender]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:j.patient?.blood_group||"N/A"})]})}),e.jsx(oe,{children:j.nurse_vitals?e.jsxs("div",{className:"text-xs",children:[e.jsxs("div",{children:["BP: ",j.nurse_vitals.blood_pressure]}),e.jsxs("div",{className:"text-muted-foreground",children:["HR: ",j.nurse_vitals.heart_rate," | Temp: ",j.nurse_vitals.temperature]})]}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"No vitals"})}),e.jsx(oe,{children:z?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(He,{variant:"outline",className:"bg-green-50 text-green-700 text-xs",children:[[...j.labTests||[],...j.allCompletedLabTests||[]].length," test(s)"]}),H&&e.jsx(He,{variant:"destructive",className:"text-xs",children:"Abnormal"})]}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"No tests"})}),e.jsx(oe,{children:e.jsx("div",{className:"text-sm",children:Fe(new Date(j.arrival_time||j.created_at),"HH:mm")})}),e.jsx(oe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[z&&e.jsxs(G,{variant:"outline",size:"sm",onClick:()=>{Be(j),bn([...j.labTests||[],...j.allCompletedLabTests||[]],j)},className:"flex items-center gap-1",children:[e.jsx(zo,{className:"h-3 w-3"}),"View Results"]}),j.doctor_notes?e.jsxs(G,{variant:"outline",size:"sm",disabled:!0,className:"flex items-center gap-1 opacity-50",children:[e.jsx(ar,{className:"h-3 w-3"}),"Consultation Started"]}):e.jsxs(G,{variant:"default",size:"sm",onClick:()=>vn(j),className:"flex items-center gap-1",children:[e.jsx(_s,{className:"h-3 w-3"}),"Start Consultation"]}),e.jsxs(G,{variant:"outline",size:"sm",onClick:()=>nn(j),className:"flex items-center gap-1",disabled:!j.doctor_notes,children:[e.jsx(YS,{className:"h-3 w-3"}),"Order Lab Test"]}),e.jsxs(G,{variant:"outline",size:"sm",onClick:()=>In(j),className:"flex items-center gap-1 text-green-600 hover:text-green-700",disabled:!j.doctor_notes,children:[e.jsx(Yc,{className:"h-3 w-3"}),"Prescribe Meds"]})]})})]},j.id)}),c.filter(j=>(!j.lab_completed_at||j.lab_results_reviewed)&&j.doctor_status!=="Completed"&&j.current_stage==="doctor"&&j.overall_status==="Active").length===0&&e.jsx(lt,{children:e.jsxs(oe,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:[e.jsx(es,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),e.jsx("p",{children:"No patients waiting for consultation"})]})})]})]})})})]}),c.length===0&&!v&&e.jsx(Ce,{className:"shadow-lg",children:e.jsx(De,{className:"py-8",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(es,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No patients waiting for consultation"}),e.jsx("p",{className:"text-sm",children:"Patients will appear here when they complete lab work or are ready for doctor consultation"})]})})}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:"Appointments"}),e.jsx(kt,{children:"Your scheduled patient appointments"})]}),e.jsx(De,{children:e.jsxs(Va,{defaultValue:"today",className:"w-full",children:[e.jsxs(ya,{className:"grid w-full grid-cols-2 mb-4",children:[e.jsx(Un,{value:"today",children:"Today"}),e.jsx(Un,{value:"week",children:"This Week"})]}),e.jsx(zn,{value:"today",className:"space-y-4",children:n.filter(j=>Cc(new Date(j.appointment_date))).length>0?e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Patient"}),e.jsx(de,{children:"Time"}),e.jsx(de,{children:"Status"}),e.jsx(de,{children:"Actions"})]})}),e.jsx(gn,{children:n.filter(j=>Cc(new Date(j.appointment_date))).sort((j,z)=>{const H=new Date(`${j.appointment_date}T${j.appointment_time}`).getTime(),me=new Date(`${z.appointment_date}T${z.appointment_time}`).getTime();return H-me}).map(j=>e.jsxs(lt,{className:Qt(j),children:[e.jsx(oe,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${an(j)}`}),j.patient?.full_name||"Unknown"]})}),e.jsx(oe,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:j.appointment_time?(()=>{try{return Fe(new Date(`${j.appointment_date}T${j.appointment_time}`),"h:mm a")}catch{return j.appointment_time}})():"N/A"}),ot(j)]})}),e.jsx(oe,{children:e.jsx(He,{variant:tt(j.status),children:j.status})}),e.jsx(oe,{children:Dt(j)})]},j.id))})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No appointments scheduled for today"})}),e.jsx(zn,{value:"week",className:"space-y-4",children:n.filter(j=>{const{start:z,end:H}=ms(),me=new Date(j.appointment_date);return me>=z&&me<=H}).length>0?e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Patient"}),e.jsx(de,{children:"Date & Time"}),e.jsx(de,{children:"Department"}),e.jsx(de,{children:"Status"})]})}),e.jsx(gn,{children:n.filter(j=>{const{start:z,end:H}=ms(),me=new Date(j.appointment_date);return me>=z&&me<=H}).sort((j,z)=>{const H=new Date(`${j.appointment_date}T${j.appointment_time}`).getTime(),me=new Date(`${z.appointment_date}T${z.appointment_time}`).getTime();return H-me}).map(j=>e.jsxs(lt,{className:Qt(j),children:[e.jsx(oe,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${an(j)}`}),j.patient?.full_name||"Unknown"]})}),e.jsx(oe,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:j.appointment_time?(()=>{try{return Fe(new Date(`${j.appointment_date}T${j.appointment_time}`),"MMM d, h:mm a")}catch{return`${j.appointment_date} ${j.appointment_time}`}})():"N/A"}),ot(j)]})}),e.jsx(oe,{children:j.department?.name||"N/A"}),e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{variant:tt(j.status),children:j.status}),j.status==="Confirmed"&&e.jsx(G,{variant:"outline",size:"sm",className:"h-6 text-xs",onClick:()=>dn(j.id,"Completed"),children:"Done"})]})})]},j.id))})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No appointments scheduled for this week"})})]})})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsx(Re,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(Oe,{children:"Today's Patients"}),e.jsx(kt,{children:"Patients seen today"})]}),t?.user_metadata?.role==="admin"&&e.jsx(G,{variant:"outline",size:"sm",onClick:()=>window.location.href="/patients",children:"View All Patients"})]})}),e.jsx(De,{children:e.jsxs(Va,{defaultValue:"today",className:"w-full",children:[e.jsxs(ya,{className:"grid w-full grid-cols-3 mb-4",children:[e.jsx(Un,{value:"today",children:"Today"}),e.jsx(Un,{value:"yesterday",children:"Yesterday"}),e.jsx(Un,{value:"week",children:"This Week"})]}),e.jsx(zn,{value:"today",className:"space-y-4",children:f.filter(j=>Cc(new Date(j.created_at))).length>0?e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Name"}),e.jsx(de,{children:"Visit Time"}),e.jsx(de,{children:"Status"}),e.jsx(de,{children:"Stage"})]})}),e.jsx(gn,{children:f.filter(j=>Cc(new Date(j.created_at))).map(j=>e.jsxs(lt,{children:[e.jsx(oe,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${j.doctor_status==="Completed"?"bg-green-500":j.doctor_status==="In Progress"?"bg-blue-500":"bg-yellow-500"}`}),j.patient?.full_name||"Unknown"]})}),e.jsx(oe,{children:Fe(new Date(j.created_at),"h:mm a")}),e.jsx(oe,{children:e.jsx(He,{variant:j.doctor_status==="Completed"?"default":j.doctor_status==="In Progress"?"secondary":"outline",children:j.doctor_status||"Pending"})}),e.jsx(oe,{children:e.jsx(He,{variant:"outline",className:"text-xs",children:j.current_stage})})]},j.id))})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No patients visited today"})}),e.jsx(zn,{value:"yesterday",className:"space-y-4",children:f.filter(j=>{const z=new Date;return z.setDate(z.getDate()-1),new Date(j.created_at).toDateString()===z.toDateString()}).length>0?e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Name"}),e.jsx(de,{children:"Visit Time"}),e.jsx(de,{children:"Status"}),e.jsx(de,{children:"Stage"})]})}),e.jsx(gn,{children:f.filter(j=>{const z=new Date;return z.setDate(z.getDate()-1),new Date(j.created_at).toDateString()===z.toDateString()}).map(j=>e.jsxs(lt,{children:[e.jsx(oe,{className:"font-medium",children:j.patient?.full_name||"Unknown"}),e.jsx(oe,{children:Fe(new Date(j.created_at),"h:mm a")}),e.jsx(oe,{children:e.jsx(He,{variant:j.doctor_status==="Completed"?"default":j.doctor_status==="In Progress"?"secondary":"outline",children:j.doctor_status||"Pending"})}),e.jsx(oe,{children:e.jsx(He,{variant:"outline",className:"text-xs",children:j.current_stage})})]},j.id))})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No patients visited yesterday"})}),e.jsx(zn,{value:"week",className:"space-y-4",children:f.filter(j=>{const z=new Date;return z.setDate(z.getDate()-7),new Date(j.created_at)>z}).length>0?e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Name"}),e.jsx(de,{children:"Visit Date"}),e.jsx(de,{children:"Status"}),e.jsx(de,{children:"Stage"})]})}),e.jsx(gn,{children:f.filter(j=>{const z=new Date;return z.setDate(z.getDate()-7),new Date(j.created_at)>z}).sort((j,z)=>new Date(z.created_at).getTime()-new Date(j.created_at).getTime()).map(j=>e.jsxs(lt,{children:[e.jsx(oe,{className:"font-medium",children:j.patient?.full_name||"Unknown"}),e.jsx(oe,{children:Fe(new Date(j.created_at),"MMM d, h:mm a")}),e.jsx(oe,{children:e.jsx(He,{variant:j.doctor_status==="Completed"?"default":j.doctor_status==="In Progress"?"secondary":"outline",children:j.doctor_status||"Pending"})}),e.jsx(oe,{children:e.jsx(He,{variant:"outline",className:"text-xs",children:j.current_stage})})]},j.id))})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No patients visited this week"})})]})})]})]}),e.jsx(At,{open:E,onOpenChange:P,children:e.jsxs(St,{className:"sm:max-w-[425px]",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Reschedule Appointment"}),e.jsx(Ot,{children:"Select a new date and time for this appointment."})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium leading-none",children:"Date"}),e.jsxs(Xo,{children:[e.jsx(Jo,{asChild:!0,children:e.jsxs(G,{variant:"outline",className:ht("w-full justify-start text-left font-normal",!D&&"text-muted-foreground"),children:[e.jsx(ns,{className:"mr-2 h-4 w-4"}),D?Fe(D,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(Li,{className:"w-auto p-0",children:e.jsx(Zo,{mode:"single",selected:D,onSelect:j=>j&&U(j),defaultMonth:D||new Date,disabled:j=>j<new Date||j>Zn(new Date,30),initialFocus:!0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium leading-none",children:"Time"}),e.jsxs(sn,{value:R,onValueChange:L,children:[e.jsx(en,{children:e.jsx(rn,{placeholder:"Select a time"})}),e.jsx(tn,{children:ae().map(j=>e.jsx(_e,{value:j,children:j},j))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium leading-none",children:"Reason for Rescheduling (Optional)"}),e.jsx(Mn,{placeholder:"Enter the reason for rescheduling...",value:pe,onChange:j=>ee(j.target.value)})]})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(G,{variant:"outline",onClick:()=>{P(!1),A(null)},disabled:ve,children:"Cancel"}),e.jsx(G,{onClick:it,disabled:!D||!R||ve,children:ve?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Reschedule Appointment"})]})]})}),e.jsx(At,{open:K,onOpenChange:se,children:e.jsxs(St,{className:"max-w-2xl",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Consultation Notes"}),e.jsxs(Ot,{children:["Record consultation notes for ",xe?.patient?.full_name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"diagnosis",children:"Diagnosis *"}),e.jsx(Mn,{id:"diagnosis",placeholder:"Enter diagnosis...",value:be.diagnosis,onChange:j=>mt({...be,diagnosis:j.target.value}),rows:2})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"notes",children:"Consultation Notes"}),e.jsx(Mn,{id:"notes",placeholder:"Enter consultation notes...",value:be.notes,onChange:j=>mt({...be,notes:j.target.value}),rows:4})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"treatment_plan",children:"Treatment Plan"}),e.jsx(Mn,{id:"treatment_plan",placeholder:"Enter treatment plan...",value:be.treatment_plan,onChange:j=>mt({...be,treatment_plan:j.target.value}),rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(G,{variant:"outline",onClick:()=>se(!1),children:"Cancel"}),e.jsx(G,{onClick:$,children:"Save Consultation"})]})]})]})}),e.jsx(At,{open:T,onOpenChange:O,children:e.jsxs(St,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Order Lab Tests"}),e.jsxs(Ot,{children:["Select lab tests to order for ",xe?.patient?.full_name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Select Tests *"}),e.jsx("div",{className:"border rounded-lg p-4 max-h-96 overflow-y-auto space-y-2",children:re.length>0?re.map(j=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("input",{type:"checkbox",id:`test-${j.id}`,checked:We.selectedTests.includes(j.id),onChange:z=>{z.target.checked?Et({...We,selectedTests:[...We.selectedTests,j.id]}):Et({...We,selectedTests:We.selectedTests.filter(H=>H!==j.id)})},className:"mt-1"}),e.jsxs("label",{htmlFor:`test-${j.id}`,className:"flex-1 cursor-pointer",children:[e.jsx("div",{className:"font-medium",children:j.test_name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:j.test_type}),j.description&&e.jsx("div",{className:"text-xs text-muted-foreground",children:j.description})]})]},j.id)):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No lab tests available"})}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Selected: ",We.selectedTests.length," test(s)"]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"priority",children:"Priority"}),e.jsxs(sn,{value:We.priority,onValueChange:j=>Et({...We,priority:j}),children:[e.jsx(en,{children:e.jsx(rn,{})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"Normal",children:"Normal"}),e.jsx(_e,{value:"Urgent",children:"Urgent"}),e.jsx(_e,{value:"STAT",children:"STAT (Immediate)"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"lab_notes",children:"Notes"}),e.jsx(Mn,{id:"lab_notes",placeholder:"Additional notes for lab...",value:We.notes,onChange:j=>Et({...We,notes:j.target.value}),rows:2})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(G,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsxs(G,{onClick:Pe,disabled:We.selectedTests.length===0,children:["Order ",We.selectedTests.length," Test(s)"]})]})]})]})}),e.jsx(At,{open:he,onOpenChange:Y,children:e.jsxs(St,{className:"max-w-2xl",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Write Prescription"}),e.jsxs(Ot,{children:["Write a prescription for ",xe?.patient?.full_name]})]}),e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Select Medications * (Check only what patient needs)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Select medications to prescribe, then fill in details for each one below"}),e.jsx("div",{className:"border rounded-lg p-4 space-y-2 max-h-60 overflow-y-auto",children:qe.map(j=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("input",{type:"checkbox",id:`med-${j.id}`,checked:ue.includes(j.id),onChange:z=>{if(z.target.checked)ze([...ue,j.id]),Ke({...Ee,[j.id]:{dosage:"",frequency:"",duration:"",quantity:"",instructions:""}});else{ze(ue.filter(me=>me!==j.id));const H={...Ee};delete H[j.id],Ke(H)}},className:"mt-1"}),e.jsxs("label",{htmlFor:`med-${j.id}`,className:"flex-1 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:j.name}),j.stock_quantity===0&&e.jsx(He,{variant:"destructive",className:"text-xs",children:"Out of Stock"}),j.stock_quantity>0&&j.stock_quantity<10&&e.jsx(He,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-300",children:"Low Stock"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[j.strength&&`${j.strength} `,j.dosage_form&&`(${j.dosage_form})`,j.stock_quantity!==void 0&&`  Stock: ${j.stock_quantity}`,j.quantity_in_stock!==void 0&&`  Stock: ${j.quantity_in_stock}`]}),j.stock_quantity===0&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Pharmacy will need to substitute this medication"})]})]},j.id))})]}),ue.map(j=>{const z=qe.find(me=>me.id===j),H=Ee[j]||{};return e.jsxs(Ce,{className:"p-4 bg-blue-50/50",children:[e.jsx("h4",{className:"font-semibold mb-3 text-blue-900",children:z?.name}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:`dosage-${j}`,children:"Dosage *"}),e.jsx(ke,{id:`dosage-${j}`,placeholder:"e.g., 500mg",value:H.dosage||"",onChange:me=>Ke({...Ee,[j]:{...H,dosage:me.target.value}})})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:`frequency-${j}`,children:"Frequency *"}),e.jsx(ke,{id:`frequency-${j}`,placeholder:"e.g., Twice daily",value:H.frequency||"",onChange:me=>Ke({...Ee,[j]:{...H,frequency:me.target.value}})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:`duration-${j}`,children:"Duration *"}),e.jsx(ke,{id:`duration-${j}`,placeholder:"e.g., 7 days",value:H.duration||"",onChange:me=>Ke({...Ee,[j]:{...H,duration:me.target.value}})})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:`quantity-${j}`,children:"Quantity"}),e.jsx(ke,{id:`quantity-${j}`,placeholder:"e.g., 14",value:H.quantity||"",onChange:me=>Ke({...Ee,[j]:{...H,quantity:me.target.value}})})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:`instructions-${j}`,children:"Instructions"}),e.jsx(Mn,{id:`instructions-${j}`,placeholder:"e.g., Take with food",value:H.instructions||"",onChange:me=>Ke({...Ee,[j]:{...H,instructions:me.target.value}}),rows:2})]})]})]},j)}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t sticky bottom-0 bg-white",children:[e.jsx(G,{variant:"outline",onClick:()=>Y(!1),children:"Cancel"}),e.jsxs(G,{onClick:nt,disabled:ue.length===0,children:["Write ",ue.length," Prescription",ue.length!==1?"s":""]})]})]})]})}),e.jsx(At,{open:hs,onOpenChange:En,children:e.jsxs(St,{className:"max-w-2xl",children:[e.jsx(Ct,{children:e.jsx(Pt,{children:"Appointment Details"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Patient"}),e.jsx("p",{className:"font-medium",children:N?.patient?.full_name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Status"}),e.jsx("p",{children:e.jsx(He,{variant:tt(N?.status),children:N?.status})})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Date & Time"}),e.jsx("p",{className:"font-medium",children:N?.appointment_date&&Fe(new Date(N.appointment_date),"PPP p")})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Doctor"}),e.jsx("p",{className:"font-medium",children:N?.doctor?.full_name||"Not assigned"})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Department"}),e.jsx("p",{className:"font-medium",children:N?.department?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Type"}),e.jsx("p",{className:"font-medium",children:N?.type||"Consultation"})]})]}),N?.reason&&e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Reason for Visit"}),e.jsx("p",{className:"mt-1",children:N.reason})]}),N?.notes&&e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Notes"}),e.jsx("p",{className:"mt-1 p-3 bg-muted rounded-lg",children:N.notes})]}),e.jsx("div",{className:"flex justify-end gap-2 pt-4",children:e.jsx(G,{variant:"outline",onClick:()=>En(!1),children:"Close"})})]})]})}),e.jsx(At,{open:yt,onOpenChange:Ue,children:e.jsxs(St,{className:"max-w-2xl",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Complete Appointment"}),e.jsxs(Ot,{children:["Patient: ",Ie?.patient?.full_name||"Unknown"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Important:"})," Please enter consultation notes before completing this appointment. These notes are required for medical records."]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"completion_notes",children:"Consultation Notes *"}),e.jsx(Mn,{id:"completion_notes",value:Ve,onChange:j=>ct(j.target.value),placeholder:"Enter diagnosis, treatment plan, prescriptions given, follow-up instructions, etc.",rows:6,className:"resize-none"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum 10 characters required"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Z,{children:"What happens next?"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"discharge",name:"nextAction",value:"discharge",checked:Ft==="discharge",onChange:j=>Me(j.target.value)}),e.jsxs(Z,{htmlFor:"discharge",className:"cursor-pointer",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Discharge Patient"}),e.jsx("span",{className:"block text-xs text-muted-foreground",children:"Patient can go home - no further treatment needed"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"lab",name:"nextAction",value:"lab",checked:Ft==="lab",onChange:j=>Me(j.target.value)}),e.jsxs(Z,{htmlFor:"lab",className:"cursor-pointer",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Send to Lab"}),e.jsx("span",{className:"block text-xs text-muted-foreground",children:"Patient needs lab tests"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"pharmacy",name:"nextAction",value:"pharmacy",checked:Ft==="pharmacy",onChange:j=>Me(j.target.value)}),e.jsxs(Z,{htmlFor:"pharmacy",className:"cursor-pointer",children:[e.jsx("span",{className:"font-medium text-purple-700",children:"Send to Pharmacy"}),e.jsx("span",{className:"block text-xs text-muted-foreground",children:"Patient needs medications"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(G,{variant:"outline",onClick:()=>{Ue(!1),xt(null),ct(""),Me("discharge")},children:"Cancel"}),e.jsx(G,{onClick:async()=>{if(Ft==="lab"){It(!0),Ue(!1),await q.put(`/appointments/${Ie.id}`,{notes:Ve});const j={id:null,appointment_id:Ie?.id,patient_id:Ie?.patient_id,patient:Ie?.patient,doctor_notes:Ve};nn(j)}else if(Ft==="pharmacy"){It(!0),Ue(!1),await q.put(`/appointments/${Ie.id}`,{notes:Ve});const j={id:null,appointment_id:Ie?.id,patient_id:Ie?.patient_id,patient:Ie?.patient,doctor_notes:Ve};In(j)}else rs()},disabled:v||Ve.trim().length<10,children:v?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"h-4 w-4 mr-2 animate-spin"}),"Completing..."]}):Ft==="lab"?"Order Lab Tests":Ft==="pharmacy"?"Write Prescription":"Complete & Discharge"})]})]})]})})]})}function lM(){const{user:t,hasRole:n}=Ys(),[s,a]=h.useState(null),[o,c]=h.useState([]),[d,f]=h.useState(!0),[p,x]=h.useState("");h.useEffect(()=>{m()},[t]);const m=async()=>{if(t)try{f(!1)}catch(w){console.error("Error fetching patient dashboard data:",w),console.error("Error details:",{message:w.message,code:w.code,details:w.details,hint:w.hint}),I.error(`Failed to load dashboard data: ${w.message}`)}finally{f(!1)}},v=async()=>{if(p.trim())try{const{data:w}=await q.get(`/patients/search?query=${encodeURIComponent(p)}`),_=w.patients||[];if(_&&_.length>0){const b=_[0];a(b);const{data:S}=await q.get(`/appointments?patient_id=${b.id}`);c(S.appointments||[])}else I.error("Patient not found"),a(null),c([])}catch(w){console.error("Error searching patient:",w),I.error("Error searching for patient")}},C=async()=>{try{I.info("Sample data feature not available")}catch(w){console.error("Error creating sample data:",w),I.error("Failed to create sample data")}};return d?e.jsx(Sn,{title:"Patient Dashboard",children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary"})})}):e.jsx(Sn,{title:"Patient Dashboard",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs(Ce,{className:"shadow-lg",children:[e.jsx(Re,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Oe,{children:"Patient Lookup"}),e.jsx(kt,{children:"Search for patient records"})]}),e.jsx(G,{variant:"outline",size:"sm",onClick:C,className:"text-primary border-primary/20 hover:bg-primary/5",children:"Create Sample Data"})]})}),e.jsx(De,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ke,{placeholder:"Search by name or phone number",value:p,onChange:w=>x(w.target.value),onKeyPress:w=>w.key==="Enter"&&v()})}),e.jsxs(G,{onClick:v,children:[e.jsx(Kh,{className:"mr-2 h-4 w-4"}),"Search"]})]})})]}),s?e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{className:"shadow-lg border-primary/20",children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:"Patient Information"}),e.jsx(kt,{children:"Patient medical profile"})]}),e.jsx(De,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Full Name"}),e.jsx("p",{className:"text-lg font-semibold",children:s.full_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Date of Birth"}),e.jsx("p",{className:"text-lg font-semibold",children:Fe(new Date(s.date_of_birth),"MMM dd, yyyy")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Gender"}),e.jsx("p",{className:"text-lg font-semibold",children:s.gender})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Blood Group"}),e.jsx("p",{className:"text-lg font-semibold",children:s.blood_group||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"text-lg font-semibold",children:s.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx(He,{variant:s.status==="Active"?"default":"secondary",children:s.status})]})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(Ce,{className:"border-primary/20 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Total Appointments"}),e.jsx(ns,{className:"h-4 w-4 text-primary"})]}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold text-primary",children:o.length})})]}),e.jsxs(Ce,{className:"border-secondary/20 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Upcoming"}),e.jsx(nl,{className:"h-4 w-4 text-secondary"})]}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold text-secondary",children:o.filter(w=>["Scheduled","Confirmed"].includes(w.status)).length})})]}),e.jsxs(Ce,{className:"border-accent/20 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Medical Records"}),e.jsx(Yh,{className:"h-4 w-4 text-accent"})]}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold text-accent",children:s.medical_history?1:0})})]})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:"Patient Appointments"}),e.jsx(kt,{children:"View scheduled and past appointments"})]}),e.jsx(De,{children:o.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No appointments found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Date & Time"}),e.jsx(de,{children:"Doctor"}),e.jsx(de,{children:"Department"}),e.jsx(de,{children:"Reason"}),e.jsx(de,{children:"Status"})]})}),e.jsx(gn,{children:o.map(w=>e.jsxs(lt,{children:[e.jsxs(oe,{children:[Fe(new Date(w.appointment_date),"MMM dd, yyyy")," ",w.appointment_time]}),e.jsx(oe,{className:"font-medium",children:w.doctor?.full_name||"Unknown"}),e.jsx(oe,{children:w.department?.name||"N/A"}),e.jsx(oe,{className:"max-w-xs truncate",children:w.reason}),e.jsx(oe,{children:e.jsx(He,{variant:w.status==="Confirmed"?"default":w.status==="Scheduled"?"secondary":w.status==="Completed"?"outline":"destructive",children:w.status})})]},w.id))})]})})})]}),s.medical_history&&e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:"Medical History"}),e.jsx(kt,{children:"Patient's recorded medical history"})]}),e.jsx(De,{children:e.jsx("p",{className:"text-sm",children:s.medical_history})})]})]}):e.jsx(Ce,{className:"shadow-lg",children:e.jsx(De,{className:"py-12",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"Search for a patient to view their records"})})})]})})}function cM(){const[t,n]=h.useState([]),[s,a]=h.useState({pending:0,inProgress:0,completed:0}),[o,c]=h.useState(!1),[d,f]=h.useState([]),[p,x]=h.useState(!1),[m,v]=h.useState({}),[C,w]=h.useState({});h.useEffect(()=>{_();const N=setInterval(_,3e4);return()=>{clearInterval(N)}},[]);const _=async()=>{try{const{data:N}=await q.get("/labs?limit=50"),A=N.labTests||N.tests||[],D=A?.filter((ee,ve,ge)=>ve===ge.findIndex(V=>V.id===ee.id))||[];console.log("Lab tests data:",{raw:A?.length||0,unique:D.length,duplicates:(A?.length||0)-D.length,timestamp:new Date().toISOString(),sample:D.slice(0,3).map(ee=>({id:ee.id,name:ee.test_name,patient:ee.patient?.full_name}))}),n(D);const U=D.reduce((ee,ve)=>{const ge=ve.patient_id;return ee[ge]||(ee[ge]=[]),ee[ge].push(ve),ee},{});w(U);const R=D.filter(ee=>ee.status==="Ordered"||ee.status==="Sample Collected").length,L=D.filter(ee=>ee.status==="In Progress").length,pe=D.filter(ee=>ee.status==="Completed").length;a({pending:R,inProgress:L,completed:pe})}catch(N){console.error("Error fetching data:",N),I.error("Failed to load lab tests")}finally{c(!1)}},b=async N=>{const A=t.filter(R=>R.patient_id===N&&(R.status==="Ordered"||R.status==="Sample Collected"||R.status==="In Progress"));if(A.length===0){I.error("No pending tests for this patient");return}const D=A.filter(R=>R.status==="Ordered"||R.status==="Sample Collected");D.length>0&&(await Promise.all(D.map(R=>q.put(`/labs/${R.id}`,{status:"In Progress"}))),I.info(`Started ${D.length} test(s)`)),f(A);const U={};A.forEach(R=>{U[R.id]={result_value:"",reference_range:"",unit:"",abnormal_flag:!1,notes:""}}),v(U),x(!0)},S=(N,A,D)=>{v(U=>({...U,[N]:{...U[N],[A]:D}}))},E=async()=>{try{const N=[],A=[];for(const D of d){const U=m[D.id];U&&U.result_value&&(N.push({lab_test_id:D.id,...U}),A.push(D.id))}if(N.length===0){I.error("Please fill in at least one test result");return}if(await q.post("/labs/results/batch",{results:N,testIds:A}),d.length>0){const D=d[0].patient_id;await P(D)}I.success(`${N.length} test results submitted successfully`),x(!1),f([]),v({}),_()}catch(N){console.error("Error submitting batch results:",N),I.error("Failed to submit batch results")}},P=async N=>{try{console.log(" Starting workflow update for patient:",N);const{data:A}=await q.get(`/visits?patient_id=${N}&current_stage=lab&limit=1`),D=A.visits||[];if(console.log(" Visits found:",D.length,D),D&&D.length>0){const U=D[0].id;console.log("  Updating visit:",U);const R={lab_status:"Completed",lab_completed_at:new Date().toISOString(),current_stage:"doctor",doctor_status:"Pending"};console.log(" Sending update:",R);const L=await q.put(`/visits/${U}`,R);console.log(" Visit updated successfully!",L.data),I.success("Patient sent back to doctor for prescription")}else console.warn("  No active lab visit found for patient:",N),I.warning("Could not find active visit to update")}catch(A){console.error(" Error updating patient workflow:",A),console.error("Error details:",A.response?.data),I.error(`Failed to update workflow: ${A.response?.data?.error||A.message}`)}};return o?e.jsx(Sn,{title:"Laboratory Dashboard",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[1,2,3].map(N=>e.jsx("div",{className:"h-24 bg-gray-200 animate-pulse rounded-lg"},N))}),e.jsx("div",{className:"h-96 bg-gray-200 animate-pulse rounded-lg"})]})}):e.jsx(Sn,{title:"Laboratory Dashboard",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(Ce,{className:"border-yellow-200 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Pending Tests"}),e.jsx(qc,{className:"h-4 w-4 text-yellow-600"})]}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:s.pending})})]}),e.jsxs(Ce,{className:"border-blue-200 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"In Progress"}),e.jsx(xa,{className:"h-4 w-4 text-blue-600"})]}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.inProgress})})]}),e.jsxs(Ce,{className:"border-green-200 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Completed"}),e.jsx(ar,{className:"h-4 w-4 text-green-600"})]}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.completed})})]})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsx(Re,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(xa,{className:"h-5 w-5"}),"Lab Tests Queue",e.jsxs(He,{variant:"default",className:"bg-blue-600",children:[Object.entries(C).filter(([N,A])=>A.some(D=>D.status==="Ordered"||D.status==="Sample Collected"||D.status==="In Progress")).length," patient",Object.entries(C).filter(([N,A])=>A.some(D=>D.status==="Ordered"||D.status==="Sample Collected"||D.status==="In Progress")).length!==1?"s":""]})]}),e.jsx(kt,{children:"Manage and process laboratory tests"})]})})}),e.jsx(De,{children:e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Patient"}),e.jsx(de,{children:"Total Tests"}),e.jsx(de,{children:"Priority"}),e.jsx(de,{children:"Status"}),e.jsx(de,{children:"Ordered"}),e.jsx(de,{className:"text-right",children:"Actions"})]})}),e.jsxs(gn,{children:[Object.entries(C).filter(([N,A])=>A.some(D=>D.status==="Ordered"||D.status==="Sample Collected"||D.status==="In Progress")).map(([N,A])=>{const D=A.filter(ee=>ee.status==="Ordered"||ee.status==="Sample Collected").length,U=A.filter(ee=>ee.status==="In Progress").length;A.filter(ee=>ee.status==="Completed").length;const R=A.some(ee=>ee.priority==="STAT"),L=A.some(ee=>ee.priority==="Urgent"),pe=A.sort((ee,ve)=>new Date(ve.ordered_date).getTime()-new Date(ee.ordered_date).getTime())[0];return e.jsxs(lt,{className:"hover:bg-blue-50/50",children:[e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:pe.patient?.full_name||"Unknown"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:pe.patient?.phone})]})}),e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(He,{variant:"outline",className:"bg-blue-50",children:[A.length," test",A.length!==1?"s":""]}),D>0&&e.jsxs(He,{variant:"outline",className:"bg-yellow-50 text-yellow-700 text-xs",children:[D," pending"]}),U>0&&e.jsxs(He,{variant:"outline",className:"bg-blue-100 text-blue-700 text-xs",children:[U," in progress"]})]})}),e.jsx(oe,{children:R?e.jsx(He,{variant:"destructive",className:"text-xs",children:"STAT"}):L?e.jsx(He,{variant:"warning",className:"text-xs",children:"Urgent"}):e.jsx(He,{variant:"secondary",className:"text-xs",children:"Normal"})}),e.jsx(oe,{children:U>0?e.jsx(He,{variant:"info",className:"bg-blue-100 text-blue-800",children:"In Progress"}):e.jsx(He,{variant:"outline",className:"bg-yellow-50 text-yellow-800",children:"Pending"})}),e.jsx(oe,{children:e.jsx("div",{className:"text-sm",children:Fe(new Date(pe.ordered_date),"MMM dd, HH:mm")})}),e.jsx(oe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(G,{variant:"outline",size:"sm",onClick:()=>{const ee=A.filter(ve=>ve.status==="Ordered"||ve.status==="Sample Collected"||ve.status==="In Progress");f(ee),v({}),x(!0)},className:"flex items-center gap-1",children:[e.jsx(xa,{className:"h-3 w-3"}),"View Tests"]}),e.jsxs(G,{variant:"default",size:"sm",onClick:()=>b(N),className:"flex items-center gap-1",children:[e.jsx(ar,{className:"h-3 w-3"}),"Submit Results"]})]})})]},N)}),Object.entries(C).filter(([N,A])=>A.some(D=>D.status==="Ordered"||D.status==="Sample Collected"||D.status==="In Progress")).length===0&&e.jsx(lt,{children:e.jsxs(oe,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:[e.jsx(xa,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),e.jsx("p",{children:"No pending lab tests"})]})})]})]})})})]}),e.jsx(At,{open:p&&d.length>0&&Object.keys(m).length===0,onOpenChange:N=>{N||(x(!1),f([]))},children:e.jsxs(St,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ct,{children:[e.jsxs(Pt,{className:"flex items-center gap-2",children:[e.jsx(xa,{className:"h-5 w-5"}),"Lab Tests for ",d[0]?.patient?.full_name]}),e.jsxs(Ot,{children:["Tests to be performed: ",d.length," test(s)"]})]}),e.jsxs("div",{className:"space-y-3",children:[d.map((N,A)=>e.jsx(Ce,{className:"border-2 border-blue-100",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 text-blue-700 font-semibold text-sm",children:A+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg",children:N.test_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:N.test_type})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{variant:N.priority==="STAT"?"destructive":N.priority==="Urgent"?"default":"secondary",children:N.priority}),e.jsx(He,{variant:N.status==="Completed"?"default":N.status==="In Progress"?"secondary":"outline",children:N.status})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm bg-blue-50 p-2 rounded border border-blue-200",children:[e.jsx(qc,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Ordered:"})," ",Fe(new Date(N.ordered_date),"MMM dd, yyyy HH:mm")]})]}),N.notes&&e.jsx("div",{className:"p-3 bg-yellow-50 border-l-4 border-yellow-400 rounded",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-yellow-800 text-sm",children:"Doctor's Instructions:"}),e.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:N.notes})]})]})})]})]})},N.id)),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsx(G,{variant:"outline",onClick:()=>{x(!1),f([])},children:"Close"})})]})]})}),e.jsx(At,{open:p&&d.length>0&&Object.keys(m).length>0,onOpenChange:N=>{N||(x(!1),f([]),v({}))},children:e.jsxs(St,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ct,{children:[e.jsxs(Pt,{className:"flex items-center gap-2",children:[e.jsx(xa,{className:"h-5 w-5"}),"Submit Results for ",d[0]?.patient?.full_name]}),e.jsxs(Ot,{children:["Enter results for ",d.filter(N=>N.status==="Ordered"||N.status==="Sample Collected"||N.status==="In Progress").length," test(s)"]})]}),e.jsxs("div",{className:"space-y-4",children:[d.filter(N=>N.status==="Ordered"||N.status==="Sample Collected"||N.status==="In Progress").map((N,A)=>e.jsx(Ce,{className:"border-2",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 text-blue-700 font-semibold",children:A+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg",children:N.test_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:N.test_type})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{variant:N.priority==="STAT"?"destructive":N.priority==="Urgent"?"default":"secondary",children:N.priority}),e.jsx(He,{variant:N.status==="In Progress"?"secondary":"outline",children:N.status})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:`result_${N.id}`,children:"Result Value *"}),e.jsx(ke,{id:`result_${N.id}`,value:m[N.id]?.result_value||"",onChange:D=>S(N.id,"result_value",D.target.value),placeholder:"Enter result",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:`unit_${N.id}`,children:"Unit"}),e.jsx(ke,{id:`unit_${N.id}`,value:m[N.id]?.unit||"",onChange:D=>S(N.id,"unit",D.target.value),placeholder:"mg/dL, mmol/L, etc."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:`range_${N.id}`,children:"Reference Range"}),e.jsx(ke,{id:`range_${N.id}`,value:m[N.id]?.reference_range||"",onChange:D=>S(N.id,"reference_range",D.target.value),placeholder:"e.g., 70-100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:`abnormal_${N.id}`,children:"Status"}),e.jsxs(sn,{value:m[N.id]?.abnormal_flag?"true":"false",onValueChange:D=>S(N.id,"abnormal_flag",D==="true"),children:[e.jsx(en,{children:e.jsx(rn,{})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"false",children:"Normal"}),e.jsx(_e,{value:"true",children:"Abnormal"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:`notes_${N.id}`,children:"Lab Notes"}),e.jsx(Mn,{id:`notes_${N.id}`,value:m[N.id]?.notes||"",onChange:D=>S(N.id,"notes",D.target.value),placeholder:"Additional notes...",rows:2})]})]})},N.id)),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(G,{variant:"outline",onClick:()=>{x(!1),f([]),v({})},children:"Cancel"}),e.jsxs(G,{onClick:E,children:[e.jsx(ar,{className:"h-4 w-4 mr-2"}),"Submit All Results"]})]})]})]})})]})})}function dM({open:t,onOpenChange:n,prescription:s,medications:a,onDispense:o,loading:c=!1}){const[d,f]=h.useState([]),[p,x]=h.useState("");h.useEffect(()=>{s?.medications&&(f(s.medications.map(w=>({...w,dispensed_quantity:w.quantity,dispensed_dosage:w.dosage}))),x(""))},[s]);const m=d.reduce((w,_)=>{const S=a.find(P=>P.id===_.medication_id)?.unit_price||0,E=_.dispensed_quantity||0;return w+S*E},0),v=(w,_,b)=>{const S=[...d];S[w]={...S[w],[_]:b},f(S)},C=()=>{o({medications:d,notes:p})};return e.jsx(At,{open:t,onOpenChange:n,children:e.jsxs(St,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Dispense Medication"}),e.jsx(Ot,{children:"Review and confirm medication details before dispensing"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Patient Information"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Patient:"}),e.jsx("span",{className:"ml-2 font-medium",children:s?.patient?.full_name})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Medications to Dispense (Editable)"}),d.map((w,_)=>{const b=a.find(N=>N.id===w.medication_id),S=b?.unit_price||0,E=S*(w.dispensed_quantity||0),P=b?.stock_quantity||0;return e.jsx("div",{className:"p-4 border rounded-lg bg-white",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{className:"text-xs",children:"Medication"}),P===0&&e.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Out of Stock!"})]}),e.jsxs(sn,{value:w.medication_id,onValueChange:N=>{console.log("Medication selected:",N);const A=a.find(D=>D.id===N);console.log("Found medication:",A),A&&(v(_,"medication_id",N),v(_,"medication_name",A.name),console.log("Updated medication at index",_,"to",A.name))},children:[e.jsx(en,{className:"h-9",children:e.jsx(rn,{placeholder:"Select medication",children:a.find(N=>N.id===w.medication_id)?.name||w.medication_name||"Select medication"})}),e.jsx(tn,{children:a.filter(N=>N.stock_quantity>0).sort((N,A)=>N.name.localeCompare(A.name)).map(N=>e.jsxs(_e,{value:N.id,children:[N.name," (Stock: ",N.stock_quantity,")"]},N.id))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Prescribed: ",w.medication_name]}),w.medication_id!==a.find(N=>N.name===w.medication_name)?.id&&e.jsx(He,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-300",children:"Substituted"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(Z,{className:"text-xs",children:"Dosage"}),e.jsx(ke,{value:w.dispensed_dosage,onChange:N=>v(_,"dispensed_dosage",N.target.value),placeholder:"e.g., 500mg",className:"h-9"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Prescribed: ",w.dosage]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Z,{className:"text-xs",children:"Quantity"}),e.jsx(ke,{type:"number",min:"0",max:P,value:w.dispensed_quantity,onChange:N=>v(_,"dispensed_quantity",parseInt(N.target.value)||0),className:"h-9"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Prescribed: ",w.quantity," | Stock: ",P]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[w.frequency,"  ",w.duration||"As prescribed"]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-green-700",children:["TSh ",E.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[w.dispensed_quantity,"  TSh ",S.toLocaleString()]})]})]}),w.instructions&&e.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-xs",children:[e.jsx("span",{className:"font-medium",children:"Instructions:"})," ",w.instructions]}),P<w.quantity&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-orange-600 mt-2 p-2 bg-orange-50 rounded",children:[e.jsx(Kc,{className:"h-3 w-3"}),e.jsxs("span",{children:["Low stock: Only ",P," available (prescribed ",w.quantity,")"]})]})]})},`${_}-${w.medication_id}`)})]}),e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Cost:"}),e.jsxs("span",{className:"text-2xl font-bold text-green-700",children:["TSh ",m.toLocaleString()]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[d.length," medication(s)  Total items: ",d.reduce((w,_)=>w+(_.dispensed_quantity||0),0)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"notes",children:"Pharmacist Notes (Optional)"}),e.jsx(Mn,{id:"notes",value:p,onChange:w=>x(w.target.value),placeholder:"Any additional notes or warnings for the patient (e.g., 'Reduced quantity due to affordability')",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(G,{variant:"outline",onClick:()=>n(!1),disabled:c,children:"Cancel"}),e.jsx(G,{onClick:C,disabled:c,children:c?"Processing...":`Dispense All (TSh ${m.toLocaleString()})`})]})]})]})})}function uM(){const{user:t}=Ys()||{},[n,s]=h.useState([]),[a,o]=h.useState([]),[c,d]=h.useState({pendingPrescriptions:0,lowStock:0,totalMedications:0}),[f,p]=h.useState(!1),[x,m]=h.useState(!1),[v,C]=h.useState(null),[w,_]=h.useState(!1),[b,S]=h.useState(null),[E,P]=h.useState(!1),[N,A]=h.useState(null),[D,U]=h.useState([]),[R,L]=h.useState(!1),[pe,ee]=h.useState(0),[ve,ge]=h.useState({}),[V,le]=h.useState(null),[we,fe]=h.useState("pending"),[ne,M]=h.useState(!1),[K,se]=h.useState(null),[T,O]=h.useState(new Set),he=async(ue=!0)=>{if(!t){const ze="User not authenticated";le(ze),ue&&I.error(ze);return}try{p(!0),le(null);const[ze,Ee,Ke,J]=await Promise.allSettled([q.get("/prescriptions?limit=50"),q.get("/pharmacy/medications"),q.get("/patients?fields=id,full_name,date_of_birth"),q.get("/users/profiles?role=doctor")]),ye=ze.status==="fulfilled"?ze.value.data.prescriptions||[]:[],ae=Ee.status==="fulfilled"?Ee.value.data.medications||[]:[],Ze=Ke.status==="fulfilled"?Ke.value.data.patients||[]:[],tt=J.status==="fulfilled"?J.value.data.profiles||[]:[];ze.status==="rejected"&&console.warn("Failed to fetch prescriptions:",ze.reason),Ee.status==="rejected"&&console.warn("Failed to fetch medications:",Ee.reason),Ke.status==="rejected"&&console.warn("Failed to fetch patients:",Ke.reason),J.status==="rejected"&&console.warn("Failed to fetch doctors:",J.reason);const pt=(ye||[]).map(Ie=>({...Ie,patient:(Ze||[]).find(xt=>xt.id===Ie.patient_id)||null,doctor_profile:(tt||[]).find(xt=>xt.id===Ie.doctor_id)||null}));s(pt),o(ae||[]);const yt=(ye||[]).filter(Ie=>Ie.status==="Active"||Ie.status==="Pending").length,Ue=(ae||[]).filter(Ie=>Ie.quantity_in_stock<=Ie.reorder_level).length;d({pendingPrescriptions:yt,lowStock:Ue,totalMedications:(ae||[]).length}),ue&&I.success("Pharmacy data loaded successfully")}catch(ze){console.error("Error loading pharmacy data:",ze);const Ee=ze instanceof Error?ze.message:"Failed to load pharmacy data";le(Ee),ue&&I.error(Ee,{action:{label:"Retry",onClick:()=>he()}})}finally{p(!1)}};h.useEffect(()=>{if(!t)return;he();const ue=setInterval(()=>{he(!1)},3e4);return()=>{clearInterval(ue)}},[t]);const Y=ue=>{se(ue),M(!0)},xe=async ue=>{if(!K||!t?.id){I.error("Missing prescription or user information");return}const ze=K.id,Ee=K.patient_id;ge(Ke=>({...Ke,[ze]:!0}));try{await Be(ze,Ee,ue),M(!1),se(null)}catch(Ke){console.error("Dispense error:",Ke),I.error("Failed to process dispensing")}finally{ge(Ke=>({...Ke,[ze]:!1}))}},Be=async(ue,ze,Ee)=>{if(!t?.id){I.error("User not authenticated");return}ge(Ke=>({...Ke,[ue]:!0}));try{await Wn("pharmacy.dispense.start",{user_id:t.id,prescription_id:ue,patient_id:ze,timestamp:new Date().toISOString()});let Ke;try{Ke=await q.get(`/prescriptions/${ue}`)}catch(Me){console.error("Error fetching prescription:",Me),await Wn("pharmacy.dispense.error",{error:"Failed to fetch prescription",details:Me.message}),I.error("Failed to fetch prescription details");return}const J=Ke.data.prescription;if(!J){await Wn("pharmacy.dispense.error",{error:"Prescription not found",prescription_id:ue}),I.error("Prescription not found");return}if(!J.medications||J.medications.length===0){await Wn("pharmacy.dispense.error",{error:"No medications in prescription",prescription_id:ue}),I.error("Prescription does not have any medications");return}const ye=Ee?.medications||J.medications,ae=[];for(const Me of ye)try{const Tt=await q.get(`/pharmacy/medications/${Me.medication_id}`);ae.push({...Tt.data.medication,prescribed_quantity:Me.dispensed_quantity||Me.quantity,prescribed_dosage:Me.dispensed_dosage||Me.dosage,prescribed_frequency:Me.frequency,prescribed_instructions:Me.instructions})}catch(Tt){console.error("Error fetching medication:",Tt),I.error(`Failed to fetch medication details for ${Me.medication_name}`);return}const Ze=await Q2(),tt=ae.map(Me=>({description:`${Me.name} - ${Me.prescribed_dosage} (${Me.prescribed_frequency})`,item_type:"Medication",medication_id:Me.id,quantity:Me.prescribed_quantity,unit_price:Me.unit_price||0,total_price:(Me.unit_price||0)*Me.prescribed_quantity})),pt=tt.reduce((Me,Tt)=>Me+Tt.total_price,0);let yt=null;try{const Me=await q.get(`/visits?patient_id=${ze}&overall_status=Active&limit=1`);Me.data.visits&&Me.data.visits.length>0&&(yt=Me.data.visits[0].id)}catch{console.warn("Could not fetch visit_id for invoice")}let Ue;try{console.log("Creating invoice with data:",{invoice_number:Ze,patient_id:ze,visit_id:yt,total_amount:pt,items_count:tt.length,items:tt}),Ue=(await q.post("/billing/invoices",{invoice_number:Ze,patient_id:ze,visit_id:yt,total_amount:pt,paid_amount:0,balance:pt,status:"Pending",invoice_date:new Date().toISOString().split("T")[0],items:tt,notes:`Pharmacy dispensing - ${ae.length} medication(s)${Ee?.notes?". "+Ee.notes:""}`})).data.invoice,console.log(" Invoice created:",Ue)}catch(Me){console.error(" Error creating invoice:",Me),console.error("Error response data:",Me.response?.data),console.error("Error response status:",Me.response?.status);const Tt=Me.response?.data?.details||Me.response?.data?.error||Me.message;I.error(`Failed to create invoice: ${Tt}`),await Wn("pharmacy.dispense.error",{error:"Failed to create invoice",details:Tt,response:Me.response?.data});return}for(const Me of ae){const Tt=Me.prescribed_quantity,It=Me.quantity_in_stock-Tt;if(It<0){I.error(`Insufficient stock for ${Me.name}`),await Wn("pharmacy.dispense.error",{error:"Insufficient stock",medication_id:Me.id,medication_name:Me.name,required:Tt,available:Me.quantity_in_stock});return}try{await q.put(`/pharmacy/medications/${Me.id}`,{quantity_in_stock:It})}catch(ss){console.error("Error updating stock:",ss),I.error(`Failed to update stock for ${Me.name}: ${ss.message}`);return}}const Ie={status:"Completed"};Ee?.notes&&(Ie.notes=Ee.notes);try{await q.put(`/prescriptions/${ue}`,Ie)}catch(Me){console.error("Error updating prescription:",Me),await Wn("pharmacy.dispense.error",{error:"Failed to update prescription",details:Me.message,prescription_id:ue}),I.error(`Failed to update prescription: ${Me.message}`);return}let xt;try{xt=await q.get(`/prescriptions?patient_id=${ze}`)}catch(Me){console.error("Error fetching patient prescriptions:",Me),xt={data:{prescriptions:[]}}}const ct=xt.data.prescriptions?.filter(Me=>Me.status==="Active"&&Me.id!==ue).length||0,Ft=ct===0;if(console.log(`Dispensing prescription. Remaining pending prescriptions: ${ct}`),Ft){console.log("This is the last prescription - moving patient to billing");let Me;try{Me=await q.get(`/visits?patient_id=${ze}&overall_status=Active&limit=1`)}catch(It){console.error("Error fetching patient visits:",It),Me={data:{visits:[]}}}const Tt=Me.data.visits;if(Tt&&Tt.length>0){const It=Tt[0];console.log("Updating patient visit to billing stage:",It.id);try{await q.put(`/visits/${It.id}`,{pharmacy_status:"Completed",pharmacy_completed_at:new Date().toISOString(),current_stage:"billing",billing_status:"Pending",overall_status:"Active",updated_at:new Date().toISOString()}),console.log(" Patient visit successfully moved to billing stage"),await Wn("pharmacy.visit.moved_to_billing",{visit_id:It.id,patient_id:ze,user_id:t.id})}catch(ss){console.error("Error updating patient visit:",ss),I.error(`Failed to update patient visit: ${ss.message}`);return}}else console.warn("No active visit found for patient, but continuing with dispensing")}else console.log(`Not moving to billing yet - ${ct} prescriptions still pending`);await Wn("pharmacy.dispense.success",{user_id:t.id,prescription_id:ue,patient_id:ze,medications:ae.map(Me=>({medication_id:Me.id,medication_name:Me.name,quantity:Me.prescribed_quantity})),medication_count:ae.length,invoice_number:Ze,timestamp:new Date().toISOString()}),I.success("Prescription dispensed successfully"),s(Me=>Me.filter(Tt=>Tt.id!==ue))}catch(Ke){console.error("Error dispensing prescription:",Ke);const J=Ke instanceof Error?Ke.message:"Failed to dispense prescription";await Wn("pharmacy.dispense.error",{error:J,prescription_id:ue,user_id:t?.id,timestamp:new Date().toISOString()}),I.error(J)}finally{ge(Ke=>({...Ke,[ue]:!1}))}},re=async ue=>{if(ue.preventDefault(),!b)return;const ze=ue.currentTarget,Ke=new FormData(ze).get("quantity"),J=Ke?Number(Ke):0;if(isNaN(J)){I.error("Please enter a valid quantity");return}if(isNaN(J)){I.error("Please enter a valid quantity");return}try{await q.put(`/pharmacy/medications/${b.id}`,{quantity_in_stock:J})}catch{I.error("Failed to update stock");return}I.success("Stock updated successfully"),_(!1),S(null),he()},$e=async ue=>{ue.preventDefault();const ze=ue.currentTarget,Ee=new FormData(ze),Ke=Ee.get("name");Ee.get("description");const J=Ee.get("quantity"),ye=Ee.get("reorderLevel"),ae=Ee.get("unitPrice");if(!Ke||!J||!ye||!ae){I.error("Please fill in all required fields");return}const Ze=Number(J),tt=Number(ye),pt=Number(ae);if(isNaN(Ze)||isNaN(tt)||isNaN(pt)){I.error("Please enter valid numbers for quantity, reorder level, and unit price");return}const yt={name:Ee.get("name"),description:Ee.get("description")||"",quantity_in_stock:Number(J),reorder_level:Number(ye),unit_price:Number(ae),manufacturer:Ee.get("manufacturer")||"",dosage_form:Ee.get("dosageForm")||"",strength:Ee.get("strength")||"",expiry_date:Ee.get("expiryDate")||null};try{v?await q.put(`/pharmacy/medications/${v.id}`,yt):await q.post("/pharmacy/medications",yt)}catch{I.error(`Failed to ${v?"update":"add"} medication`);return}I.success(`Medication ${v?"updated":"added"} successfully`),m(!1),C(null),he()},qe=ue=>{S(ue),_(!0)},Ge=ue=>{C(ue),m(!0)},be=()=>{const ze=[["name","generic_name","strength","dosage_form","manufacturer","quantity_in_stock","reorder_level","unit_price","expiry_date"].join(","),"Paracetamol,Acetaminophen,500mg,Tablet,ABC Pharma,100,20,5000,2025-12-31","Amoxicillin,Amoxicillin,500mg,Capsule,XYZ Pharma,50,10,8000,2024-06-30","Ibuprofen,Ibuprofen,400mg,Tablet,DEF Pharma,200,30,3000,2025-08-15","Metformin,Metformin HCl,500mg,Tablet,GHI Pharma,150,25,4000,2026-01-20"].join(`
`),Ee=new Blob([ze],{type:"text/csv"}),Ke=URL.createObjectURL(Ee),J=document.createElement("a");J.setAttribute("href",Ke),J.setAttribute("download","medications_template.csv"),document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(Ke)},mt=ue=>{const ze=ue.split(`
`),Ee=ze[0].split(",").map(Ke=>Ke.trim().replace(/"/g,""));return ze.slice(1).map((Ke,J)=>{if(!Ke.trim())return null;const ye=Ke.split(",").map(Ze=>Ze.trim().replace(/"/g,"")),ae={};return Ee.forEach((Ze,tt)=>{const pt=ye[tt]||"";switch(Ze.toLowerCase()){case"name":ae.name=pt;break;case"generic_name":case"generic name":ae.generic_name=pt||null;break;case"strength":ae.strength=pt;break;case"dosage_form":case"dosage form":ae.dosage_form=pt||"Tablet";break;case"manufacturer":ae.manufacturer=pt||null;break;case"quantity_in_stock":case"quantity":case"stock":ae.quantity_in_stock=parseInt(pt)||0;break;case"reorder_level":case"reorder level":ae.reorder_level=parseInt(pt)||10;break;case"unit_price":case"unit price":case"price":ae.unit_price=parseFloat(pt)||0;break;case"expiry_date":case"expiry date":ae.expiry_date=pt||null;break}}),(!ae.name||!ae.strength)&&(ae.error="Missing required fields: name or strength"),ae}).filter(Boolean)},We=async ue=>{const Ee=ue.target.files?.[0];if(!Ee)return;if(!Ee.name.endsWith(".csv")){I.error("Please upload a CSV file");return}A(Ee);const Ke=await Ee.text(),J=mt(Ke),ye=J.filter(Ze=>!Ze.error),ae=J.filter(Ze=>Ze.error);if(U(ye),ae.length>0&&I.warning(`${ae.length} rows have errors and will be skipped`),ye.length===0){I.error("No valid medications found in the file");return}I.success(`Found ${ye.length} valid medications to import`)},Et=async()=>{if(D.length===0){I.error("No medications to import");return}L(!0),ee(0);const ue=D.map(ze=>({name:ze.name,generic_name:ze.generic_name,strength:ze.strength,dosage_form:ze.dosage_form,manufacturer:ze.manufacturer,quantity_in_stock:ze.quantity_in_stock,reorder_level:ze.reorder_level,unit_price:ze.unit_price,expiry_date:ze.expiry_date}));try{await q.post("/pharmacy/medications/bulk",{medications:ue}),I.success(`Successfully imported ${ue.length} medications`),P(!1),A(null),U([]),he()}catch(ze){console.error("Bulk import error:",ze),I.error(`Failed to import medications: ${ze.message}`)}finally{L(!1),ee(0)}};return f?e.jsx(Sn,{title:"Pharmacy Dashboard",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[1,2,3].map(ue=>e.jsx("div",{className:"h-24 bg-gray-200 animate-pulse rounded-lg"},ue))}),e.jsx("div",{className:"h-96 bg-gray-200 animate-pulse rounded-lg"})]})}):e.jsx(Sn,{title:"Pharmacy Dashboard",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(Ce,{children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Pending Prescriptions"}),e.jsx(Yc,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.pendingPrescriptions}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c.pendingPrescriptions===0?"All caught up!":"Awaiting fulfillment"})]})]}),e.jsxs(Ce,{children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Low Stock Items"}),e.jsx(Kc,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.lowStock}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c.lowStock===0?"Stock levels good":"Below reorder level"})]})]}),e.jsxs(Ce,{children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Total Medications"}),e.jsx(Tx,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.totalMedications}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"In inventory"})]})]})]}),e.jsxs(Va,{defaultValue:"prescriptions",className:"w-full",children:[e.jsxs(ya,{className:"grid w-full grid-cols-2",children:[e.jsx(Un,{value:"prescriptions",children:"Prescriptions"}),e.jsx(Un,{value:"inventory",children:"Inventory"})]}),e.jsx(zn,{value:"prescriptions",children:e.jsxs(Ce,{children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Oe,{children:"Recent Prescriptions"}),e.jsx(kt,{children:we==="pending"?n.filter(ue=>ue.status==="Active"||ue.status==="Pending").length>0?`Showing ${Math.min(n.filter(ue=>ue.status==="Active"||ue.status==="Pending").length,10)} of ${n.filter(ue=>ue.status==="Active"||ue.status==="Pending").length} pending`:"No pending prescriptions":n.length>0?`Showing ${Math.min(n.length,10)} of ${n.length} prescriptions`:"No prescriptions found"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"flex items-center gap-1 bg-muted p-1 rounded-lg",children:[e.jsx(G,{variant:we==="pending"?"default":"ghost",size:"sm",onClick:()=>fe("pending"),children:"Pending"}),e.jsx(G,{variant:we==="all"?"default":"ghost",size:"sm",onClick:()=>fe("all"),children:"All"})]})})]}),e.jsx(De,{children:(we==="pending"?n.filter(ue=>ue.status==="Active"||ue.status==="Pending"):n).length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Tx,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:we==="pending"?"No pending prescriptions":"No prescriptions found"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"When prescriptions are created, they will appear here."})]}):e.jsx("div",{className:"space-y-3",children:(()=>{const ze=(we==="pending"?n.filter(Ee=>Ee.status==="Active"||Ee.status==="Pending"):n).reduce((Ee,Ke)=>{const J=Ke.patient_id;return Ee[J]||(Ee[J]={patient:Ke.patient,prescriptions:[]}),Ee[J].prescriptions.push(Ke),Ee},{});return Object.entries(ze).slice(0,10).map(([Ee,Ke])=>{const J=T.has(Ee),ye=Ke.prescriptions;return ye[0],e.jsxs(Ce,{className:"overflow-hidden",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{const ae=new Set(T);J?ae.delete(Ee):ae.add(Ee),O(ae)},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"font-semibold text-lg",children:Ke.patient?.full_name||"Unknown Patient"}),e.jsxs(He,{variant:"secondary",children:[ye.length," prescription",ye.length!==1?"s":""]}),ye.some(ae=>ae.status==="Active"||ae.status==="Pending")&&e.jsx(He,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-300",children:"Pending"})]}),Ke.patient?.date_of_birth&&e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["DOB: ",Fe(new Date(Ke.patient.date_of_birth),"MM/dd/yyyy"),"  ",Ke.patient?.phone||"No phone"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[ye.some(ae=>ae.status==="Active"||ae.status==="Pending")&&e.jsxs(G,{variant:"default",size:"sm",onClick:ae=>{ae.stopPropagation();const Ze=ye.filter(tt=>tt.status==="Active"||tt.status==="Pending");Ze.length>0&&Y(Ze[0])},children:[e.jsx(ar,{className:"h-4 w-4 mr-2"}),"Dispense All (",ye.filter(ae=>ae.status==="Active"||ae.status==="Pending").length,")"]}),e.jsxs(G,{variant:"ghost",size:"sm",children:[J?"Hide":"View"," Prescriptions"]})]})]})}),J&&e.jsx("div",{className:"border-t",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Medication"}),e.jsx(de,{children:"Dosage"}),e.jsx(de,{children:"Quantity"}),e.jsx(de,{children:"Prescribed By"}),e.jsx(de,{children:"Date"}),e.jsx(de,{children:"Status"}),e.jsx(de,{className:"text-right",children:"Actions"})]})}),e.jsx(gn,{children:ye.flatMap(ae=>(Array.isArray(ae.medications)?ae.medications:typeof ae.medications=="string"?JSON.parse(ae.medications):[ae]).map((tt,pt)=>e.jsxs(lt,{className:ve[ae.id]?"opacity-50":"",children:[e.jsxs(oe,{children:[e.jsx("div",{className:"font-medium",children:tt.medication_name||tt.name}),tt.instructions&&e.jsx("div",{className:"text-xs text-muted-foreground",children:tt.instructions})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-sm",children:tt.dosage}),e.jsx("div",{className:"text-xs text-muted-foreground",children:tt.frequency})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"font-medium",children:tt.quantity}),e.jsx("div",{className:"text-xs text-muted-foreground",children:tt.duration})]}),e.jsx(oe,{children:ae.doctor_profile?e.jsx("div",{className:"text-sm",children:ae.doctor_profile.full_name}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}),e.jsx(oe,{children:(()=>{const yt=ae.prescribed_date||ae.prescription_date||ae.created_at;if(!yt)return e.jsx("span",{className:"text-muted-foreground text-sm",children:"-"});try{const Ue=new Date(yt);return isNaN(Ue.getTime())?e.jsx("span",{className:"text-muted-foreground text-sm",children:"-"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm",children:Fe(Ue,"MMM d")}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Fe(Ue,"h:mm a")})]})}catch{return e.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}})()}),e.jsx(oe,{children:e.jsx(He,{variant:ae.status==="Dispensed"?"default":ae.status==="Cancelled"?"destructive":"secondary",className:"capitalize",children:ae.status.toLowerCase()})}),e.jsx(oe,{className:"text-right",children:pt===0&&(ae.status==="Active"||ae.status==="Pending")?e.jsxs(G,{variant:"outline",size:"sm",onClick:yt=>{yt.stopPropagation(),Y(ae)},disabled:ve[ae.id],children:[ve[ae.id]?e.jsx(Kt,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(ar,{className:"h-4 w-4 mr-2"}),"Dispense All"]}):pt===0?e.jsx("span",{className:"text-muted-foreground text-sm",children:"Dispensed"}):null})]},`${ae.id}-${pt}`)))})]})})]},Ee)})})()})})]})}),e.jsxs(zn,{value:"inventory",children:[a.filter(ue=>ue.quantity_in_stock<=5).length>0&&e.jsxs(Ce,{className:"shadow-lg border-red-200 bg-red-50 mb-4",children:[e.jsxs(Re,{children:[e.jsxs(Oe,{className:"flex items-center gap-2 text-red-700",children:[e.jsx(Kc,{className:"h-5 w-5"}),"Critical Low Stock Alert"]}),e.jsxs(kt,{className:"text-red-600",children:[a.filter(ue=>ue.quantity_in_stock<=5).length," medication(s) have 5 or fewer units remaining"]})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-2",children:a.filter(ue=>ue.quantity_in_stock<=5).sort((ue,ze)=>ue.quantity_in_stock-ze.quantity_in_stock).map(ue=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-md border border-red-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Hh,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-red-900",children:[ue.name," (",ue.strength,")"]}),e.jsxs("p",{className:"text-sm text-red-700",children:["Only ",e.jsx("span",{className:"font-bold",children:ue.quantity_in_stock})," units left",ue.quantity_in_stock===0&&e.jsx("span",{className:"ml-2 text-red-800 font-bold",children:"OUT OF STOCK!"})]})]})]}),e.jsx(G,{size:"sm",variant:"destructive",onClick:()=>qe(ue),children:"Restock Now"})]},ue.id))})})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Oe,{children:"Medication Inventory"}),e.jsx(kt,{children:"Track and manage medication stock levels"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(G,{variant:"outline",onClick:()=>P(!0),children:[e.jsx(Dx,{className:"mr-2 h-4 w-4"}),"Import Medications"]}),e.jsxs(G,{onClick:()=>m(!0),children:[e.jsx(jr,{className:"mr-2 h-4 w-4"}),"Add Medication"]}),e.jsx(G,{variant:"outline",onClick:()=>_(!0),children:"Update Stock"})]})]}),e.jsx(De,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Name"}),e.jsx(de,{children:"Generic Name"}),e.jsx(de,{children:"Strength"}),e.jsx(de,{children:"Form"}),e.jsx(de,{children:"Stock"}),e.jsx(de,{children:"Reorder Level"}),e.jsx(de,{children:"Price"}),e.jsx(de,{children:"Status"}),e.jsx(de,{children:"Actions"})]})}),e.jsx(gn,{children:a.map(ue=>{const ze=ue.quantity_in_stock<=ue.reorder_level;return e.jsxs(lt,{children:[e.jsx(oe,{className:"font-medium",children:ue.name}),e.jsx(oe,{className:"text-muted-foreground",children:ue.generic_name||"-"}),e.jsx(oe,{children:ue.strength}),e.jsx(oe,{className:"text-muted-foreground",children:ue.dosage_form||"Tablet"}),e.jsx(oe,{className:"font-semibold",children:ue.quantity_in_stock}),e.jsx(oe,{children:ue.reorder_level}),e.jsxs(oe,{className:"font-medium",children:["TSh",Number(ue.unit_price).toFixed(2)]}),e.jsx(oe,{children:e.jsx(He,{variant:ze?"destructive":"default",children:ze?"Low Stock":"In Stock"})}),e.jsx(oe,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{size:"sm",variant:"outline",onClick:()=>Ge(ue),children:e.jsx(Oc,{className:"h-4 w-4"})}),e.jsx(G,{size:"sm",onClick:()=>qe(ue),children:"Update Stock"})]})})]},ue.id)})})]})})}),e.jsx(At,{open:E,onOpenChange:P,children:e.jsxs(St,{className:"max-w-4xl",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Bulk Import Medications"}),e.jsx(Ot,{children:"Upload a CSV file to import multiple medications at once"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Z,{htmlFor:"csvFile",children:"CSV File"}),e.jsxs(G,{variant:"ghost",size:"sm",onClick:be,className:"text-xs",children:[e.jsx(Yh,{className:"mr-1 h-3 w-3"}),"Download Template"]})]}),e.jsx(ke,{id:"csvFile",type:"file",accept:".csv",onChange:We,disabled:R}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a CSV file with columns: name, generic_name, strength, dosage_form, manufacturer, quantity_in_stock, reorder_level, unit_price, expiry_date"})]}),D.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{children:["Preview (",D.length," medications)"]}),e.jsx("div",{className:"border rounded-lg max-h-60 overflow-y-auto",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Name"}),e.jsx(de,{children:"Strength"}),e.jsx(de,{children:"Stock"}),e.jsx(de,{children:"Price"}),e.jsx(de,{children:"Status"})]})}),e.jsxs(gn,{children:[D.slice(0,10).map((ue,ze)=>e.jsxs(lt,{children:[e.jsx(oe,{className:"font-medium",children:ue.name}),e.jsx(oe,{children:ue.strength}),e.jsx(oe,{children:ue.quantity_in_stock}),e.jsxs(oe,{children:["TSh",Number(ue.unit_price).toFixed(2)]}),e.jsx(oe,{children:e.jsx(ar,{className:"h-4 w-4 text-green-500"})})]},ue.name+ue.strength||ze)),D.length>10&&e.jsx(lt,{children:e.jsxs(oe,{colSpan:5,className:"text-center text-muted-foreground",children:["... and ",D.length-10," more medications"]})})]})]})})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(G,{variant:"outline",onClick:()=>{P(!1),A(null),U([])},disabled:R,children:"Cancel"}),e.jsx(G,{onClick:Et,disabled:D.length===0||R,children:R?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Dx,{className:"mr-2 h-4 w-4"}),"Import ",D.length," Medications"]})})]})]})]})}),e.jsx(At,{open:x,onOpenChange:ue=>{m(ue),ue||C(null)},children:e.jsxs(St,{className:"max-w-2xl",children:[e.jsxs(Ct,{children:[e.jsxs(Pt,{children:[v?"Edit":"Add"," Medication"]}),e.jsxs(Ot,{children:[v?"Update":"Enter"," medication details"]})]}),e.jsxs("form",{onSubmit:$e,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"name",children:"Medication Name *"}),e.jsx(ke,{id:"name",name:"name",defaultValue:v?.name,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"genericName",children:"Generic Name"}),e.jsx(ke,{id:"genericName",name:"genericName",defaultValue:v?.generic_name})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"strength",children:"Strength *"}),e.jsx(ke,{id:"strength",name:"strength",placeholder:"e.g., 500mg",defaultValue:v?.strength,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"dosageForm",children:"Dosage Form *"}),e.jsxs(sn,{name:"dosageForm",defaultValue:v?.dosage_form||"Tablet",children:[e.jsx(en,{children:e.jsx(rn,{})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"Tablet",children:"Tablet"}),e.jsx(_e,{value:"Capsule",children:"Capsule"}),e.jsx(_e,{value:"Syrup",children:"Syrup"}),e.jsx(_e,{value:"Injection",children:"Injection"}),e.jsx(_e,{value:"Cream",children:"Cream"}),e.jsx(_e,{value:"Drops",children:"Drops"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"manufacturer",children:"Manufacturer"}),e.jsx(ke,{id:"manufacturer",name:"manufacturer",defaultValue:v?.manufacturer})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"quantity",children:"Quantity in Stock *"}),e.jsx(ke,{id:"quantity",name:"quantity",type:"number",defaultValue:v?.quantity_in_stock,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"reorderLevel",children:"Reorder Level *"}),e.jsx(ke,{id:"reorderLevel",name:"reorderLevel",type:"number",defaultValue:v?.reorder_level||10,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"unitPrice",children:"Unit Price *"}),e.jsx(ke,{id:"unitPrice",name:"unitPrice",type:"number",step:"0.01",defaultValue:v?.unit_price,required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"expiryDate",children:"Expiry Date"}),e.jsx(ke,{id:"expiryDate",name:"expiryDate",type:"date",defaultValue:v?.expiry_date})]}),e.jsxs(G,{type:"submit",className:"w-full",children:[v?"Update":"Add"," Medication"]})]})]})}),e.jsx(At,{open:w,onOpenChange:_,children:e.jsxs(St,{children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Update Stock"}),e.jsxs(Ot,{children:["Update stock quantity for ",b?.name]})]}),e.jsxs("form",{onSubmit:re,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"currentStock",children:"Current Stock"}),e.jsx(ke,{id:"currentStock",value:b?.quantity_in_stock||0,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"quantity",children:"New Stock Quantity *"}),e.jsx(ke,{id:"quantity",name:"quantity",type:"number",defaultValue:b?.quantity_in_stock||0,required:!0})]}),e.jsx(G,{type:"submit",className:"w-full",children:"Update Stock"})]})]})})]})]})]}),K&&e.jsx(dM,{open:ne,onOpenChange:M,prescription:K,medications:a,onDispense:xe,loading:ve[K.id]})]})})}const Br={apiUrl:"https://api.zenopay.com",apiKey:"YOUR_ZENOPAY_API_KEY_HERE",webhookUrl:"http://localhost:5173".endsWith("/api/webhooks/zenopay")?"http://localhost:5173":"http://localhost:5173/api/webhooks/zenopay"};let fM=class{formatPhoneNumber(n){const s=n.replace(/\D/g,"");return s.startsWith("255")?s:s.startsWith("0")?`255${s.substring(1)}`:s.length===9?`255${s}`:s}generateOrderId(n){return`${n}-${Date.now()}-${Math.random().toString(36).substring(2,8)}`}async initiatePayment(n){const{phoneNumber:s,amount:a,invoiceId:o,paymentMethod:c,description:d}=n;console.log(" Initiating mobile payment:",{phoneNumber:s,amount:a,invoiceId:o,paymentMethod:c,apiUrl:Br.apiUrl,hasApiKey:!0,apiKeyFirstChars:Br.apiKey.substring(0,8)+"..."});try{const f=this.formatPhoneNumber(s),p=this.generateOrderId(o),x={order_id:p,buyer_name:"Patient",buyer_phone:f,buyer_email:"patient@medscribe.com",amount:Math.round(a),webhook_url:Br.webhookUrl,metadata:{invoice_id:o,payment_method:c,description:d||`Payment for invoice ${o}`}},m="https://zenoapi.com",v=[`${m}/api/payments/mobile_money_tanzania`,`${m}/payments/mobile_money_tanzania`,`${Br.apiUrl}/payments/mobile_money_tanzania`,`${Br.apiUrl}/api/payments/mobile_money_tanzania`];let C,w="";for(const b of v){if(console.log(` Trying endpoint: ${b}`),C=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Br.apiKey,Accept:"application/json","User-Agent":"MedScribe-Quest/1.0"},body:JSON.stringify(x)}),w=b,console.log(` Response from ${b}:`,{status:C.status,statusText:C.statusText,ok:C.ok}),C.ok)break;if(C.status===405&&(console.log(` Trying ${b} with different headers...`),C=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Br.apiKey,Accept:"application/json"},body:JSON.stringify(x)}),console.log(" Response with minimal headers:",{status:C.status,statusText:C.statusText,ok:C.ok})),C.status===405){console.log(` ${b} doesn't work, trying next endpoint...`);continue}}if(!C.ok){const b=await C.text();throw console.error(" Payment failed:",{endpoint:w,status:C.status,error:b,responseHeaders:Object.fromEntries(C.headers.entries())}),C.status===404?new Error(`API endpoint not found (${w}). Check if the endpoint exists and API key is valid.`):C.status===401?new Error("Invalid API key. Please check your ZenoPay API key format and permissions."):C.status===405?w.includes("zenoapi.com/api/payments/mobile_money_tanzania")?new Error("405 Method Not Allowed on the working Postman endpoint. This suggests an authentication or request format issue."):new Error(`Method not allowed on ${w}. The endpoint might not accept POST requests.`):new Error(`HTTP error! status: ${C.status} - ${b}`)}const _=await C.json();return console.log(" Payment successful:",_),_?{success:!0,message:`${c} payment request sent successfully via ZenoPay`,transactionId:_.reference||p,orderId:p,status:"pending"}:{success:!1,message:"Failed to initiate payment through ZenoPay",error:"ZENOPAY_ERROR"}}catch(f){return console.error(" ZenoPay payment error:",f.message),{success:!1,message:f.message||"Failed to initiate payment through ZenoPay",error:"ZENOPAY_ERROR"}}}async checkPaymentStatus(n){try{const s=await fetch(`${Br.apiUrl}/api/payments/order-status?order_id=${n}`,{headers:{"x-api-key":Br.apiKey}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const a=await s.json();if(a&&a.data&&a.data.length>0){const o=a.data[0],c=o.payment_status==="COMPLETED"?"completed":"pending";return await this.updatePaymentStatus(n,c),{success:!0,message:"Payment status retrieved successfully",transactionId:o.transid,orderId:o.order_id,status:c}}else return{success:!1,message:"Payment not found",status:"pending"}}catch(s){return console.error("ZenoPay status check error:",s.message),{success:!1,message:s.message||"Failed to check payment status",error:"ZENOPAY_STATUS_ERROR"}}}async updatePaymentStatus(n,s){try{console.log("Payment status update:",{orderId:n,status:s})}catch(a){console.error("Error updating payment status:",a)}}async updateInvoiceAfterPayment(n,s){try{console.log("Invoice update after payment:",{invoiceId:n,amount:s})}catch(a){console.error("Error updating invoice after payment:",a)}}async handlePaymentWebhook(n){try{return console.log("ZenoPay webhook received:",n),!0}catch(s){return console.error("ZenoPay webhook processing error:",s),!1}}};const hM=new fM;function mM(){const[t,n]=h.useState([]),[s,a]=h.useState([]),[o,c]=h.useState([]),[d,f]=h.useState([]),[p,x]=h.useState({unpaid:0,partiallyPaid:0,totalRevenue:0,pendingClaims:0,todayRevenue:0}),[m,v]=h.useState(!1),[C,w]=h.useState(!1),[_,b]=h.useState(!1),[S,E]=h.useState(!1),[P,N]=h.useState(null),[A,D]=h.useState(""),[U,R]=h.useState(""),[L,pe]=h.useState(""),[ee,ve]=h.useState(""),[ge,V]=h.useState(!1),[le,we]=h.useState([]),[fe,ne]=h.useState([]),[M,K]=h.useState([]),[se,T]=h.useState([]),[O,he]=h.useState([]),[Y,xe]=h.useState([]),[Be,re]=h.useState({}),[$e,qe]=h.useState([]);h.useEffect(()=>{We();const J=setInterval(()=>{We()},3e4);return()=>{clearInterval(J)}},[]);const Ge=h.useMemo(()=>le.length?le.reduce((J,ye)=>{const ae=ye.patient_id;return J[ae]||(J[ae]={patient:ye.patient,invoices:[],totalAmount:0,totalPaid:0,unpaidAmount:0,invoiceCount:0,latestInvoiceDate:ye.invoice_date,status:"Unpaid"}),J[ae].invoices.push(ye),J[ae].totalAmount+=Number(ye.total_amount),J[ae].totalPaid+=Number(ye.paid_amount||0),J[ae].invoiceCount+=1,new Date(ye.invoice_date)>new Date(J[ae].latestInvoiceDate)&&(J[ae].latestInvoiceDate=ye.invoice_date),J},{}):{},[le]),be=h.useMemo(()=>{if(!Object.keys(Ge).length)return[];const J=Object.values(Ge);return J.forEach(ye=>{ye.unpaidAmount=ye.totalAmount-ye.totalPaid,ye.totalPaid===0?ye.status="Unpaid":ye.totalPaid>=ye.totalAmount?ye.status="Paid":ye.status="Partially Paid"}),J},[Ge]),mt=h.useMemo(()=>{if(!be.length)return{unpaid:0,partiallyPaid:0,totalRevenue:0,pendingClaims:0,todayRevenue:0};const J=be.filter(Ue=>Ue.status==="Unpaid").length,ye=be.filter(Ue=>Ue.status==="Partially Paid").length,ae=new Date().toISOString().split("T")[0];let Ze=0,tt=[];O&&O.length>0&&O.forEach(Ue=>{let Ie="";Ue.created_at&&(Ue.created_at instanceof Date?Ie=Ue.created_at.toISOString().split("T")[0]:typeof Ue.created_at=="string"?Ie=Ue.created_at.split("T")[0]:Ie=new Date(Ue.created_at).toISOString().split("T")[0]),Ie===ae&&(Ze+=Number(Ue.amount||0),tt.push({amount:Ue.amount,date:Ie,method:Ue.payment_method}))}),console.log("Today Revenue Calculation:",{today:ae,totalPayments:O?.length||0,todayPayments:tt.length,todayRevenue:Ze,sampleTodayPayments:tt.slice(0,5)});const pt=se?.filter(Ue=>Ue.status==="Pending").length||0,yt=O?.filter(Ue=>Ue.created_at?(Ue.created_at instanceof Date?Ue.created_at.toISOString().split("T")[0]:new Date(Ue.created_at).toISOString().split("T")[0])===ae:!1).length||0;return console.log("Billing Stats:",{date:ae,todayRevenue:Ze,todayPayments:yt,unpaidInvoices:J,partiallyPaidInvoices:ye,pendingClaims:pt,totalPatients:be.length}),{unpaid:J,partiallyPaid:ye,totalRevenue:Ze,pendingClaims:pt,todayRevenue:Ze}},[be,se,O]);h.useEffect(()=>{n(be),x(mt)},[be,mt]);const We=async()=>{try{v(!0);const J=new Date().toISOString().split("T")[0],[ye,ae,Ze,tt,pt,yt]=await Promise.all([q.get("/visits?current_stage=billing&overall_status=Active").catch(()=>({data:{visits:[]}})),q.get("/billing/invoices").catch(()=>({data:{invoices:[]}})),q.get("/patients?status=Active").catch(()=>({data:{patients:[]}})),q.get("/insurance/companies").catch(()=>({data:{companies:[]}})),q.get("/insurance/claims").catch(()=>({data:{claims:[]}})),q.get(`/payments?date=${J}`).catch(()=>({data:{payments:[]}}))]),Ue=ye.data.visits||[],Ie=ae.data.invoices||[],xt=Ze.data.patients||[],Ve=tt.data.companies||[],ct=pt.data.claims||[],Ft=yt.data.payments||[],Me=[];we(Ie),ne(xt),K(Ve),T(ct),he(Ft),xe(Me);const Tt={};if(xt)for(const It of xt)Tt[It.id]=5e4;re(Tt),a(xt),c(Ve),f(ct),console.log("Billing Dashboard - Data loaded:",{invoices:Ie.length,patients:xt.length,insuranceCompanies:Ve.length,claims:ct.length})}catch(J){console.error("Error fetching data:",J),I.error("Failed to load billing data")}finally{v(!1)}},Et=J=>{N(J),ve(""),R(""),pe(""),V(!1),b(!0)},ue=async J=>{if(J.preventDefault(),!P)return;const ye=new FormData(J.currentTarget),ae=ye.get("phoneNumber"),Ze=Number(ye.get("amount"));if(!Ze||Ze<=0){I.error("Please enter a valid payment amount");return}const tt=Number(P.total_amount)-Number(P.paid_amount||0);if(Ze>tt){I.error(`Payment amount cannot exceed remaining balance of TSh${tt.toFixed(2)}`);return}if(!/^0[67][0-9]{8}$/.test(ae)){I.error("Please enter a valid Tanzanian phone number (07xxxxxxxx or 06xxxxxxxx)");return}V(!0),R("processing");try{const yt={phoneNumber:ae,amount:Ze,invoiceId:P.id,paymentMethod:ee,description:`Payment for invoice ${P.invoice_number}`},Ue=await hM.initiatePayment(yt);if(Ue.success&&Ue.transactionId){pe(Ue.transactionId),R("pending"),I.success(` ${ee} payment request sent to ${ae}. Waiting for confirmation...`);const Ie={invoice_id:P.id,amount:Ze,payment_method:ee,reference_number:Ue.transactionId,status:"pending",notes:`Mobile payment via ${ee} from ${ae} - Transaction ID: ${Ue.transactionId}`};try{await q.post("/payments",Ie)}catch(xt){console.error("Failed to create pending payment record:",xt)}b(!1),setTimeout(()=>ze(Ue.transactionId),5e3)}else R("failed"),I.error(Ue.message||"Failed to initiate mobile payment")}catch(yt){console.error("Payment error:",yt),R("failed"),I.error("Failed to process mobile payment")}finally{V(!1)}},ze=async J=>{try{let ye;try{ye=(await q.get(`/payments/${J}`)).data.payment}catch(ae){console.error("Error checking payment status:",ae);return}ye&&ye.status==="completed"?(R("completed"),I.success(" Payment confirmed successfully!"),await Ee(ye.invoice_id,ye.amount),setTimeout(()=>{R(""),pe(""),N(null),ve("")},3e3)):ye&&ye.status==="failed"?(R("failed"),I.error(" Payment failed")):setTimeout(()=>ze(J),1e4)}catch(ye){console.error("Error checking payment status:",ye)}},Ee=async(J,ye)=>{try{let ae;try{ae=(await q.get(`/billing/invoices/${J}`)).data.invoice}catch(Ze){console.error("Error fetching invoice:",Ze);return}if(ae){const Ze=Number(ae.paid_amount)+ye,tt=Number(ae.total_amount),pt=Ze>=tt?"Paid":Ze>0?"Partially Paid":"Unpaid";try{await q.put(`/billing/invoices/${J}`,{paid_amount:Ze,status:pt})}catch(yt){console.error("Error updating invoice:",yt);return}if(pt==="Paid"){const yt=ae.patient_id;if(yt){let Ue;try{Ue=(await q.get(`/visits?patient_id=${yt}&current_stage=billing&overall_status=Active&limit=1`)).data.visits}catch(Ie){console.error("Error fetching patient visits:",Ie),Ue=[]}if(Ue&&Ue.length>0)try{await q.put(`/visits/${Ue[0].id}`,{billing_status:"Paid",billing_completed_at:new Date().toISOString(),current_stage:"completed",overall_status:"Completed",updated_at:new Date().toISOString()}),console.log("Patient visit completed and removed from billing queue")}catch(Ie){console.error("Error updating patient visit:",Ie)}}}}}catch(ae){console.error("Error updating invoice after payment:",ae)}},Ke=async J=>{if(J.preventDefault(),["M-Pesa","Airtel Money","Tigo Pesa","Halopesa"].includes(ee))return ue(J);const ye=new FormData(J.currentTarget),ae=Number(ye.get("amount"));if(!ae||ae<=0){I.error("Please enter a valid payment amount");return}if(!P){I.error("No invoice selected");return}const Ze=Number(P.total_amount)-Number(P.paid_amount||0);if(ae>Ze){I.error(`Payment amount cannot exceed remaining balance of TSh${Ze.toFixed(2)}`);return}const tt={invoice_id:P.id,amount:ae,payment_method:ee,reference_number:ye.get("referenceNumber")||null,notes:ye.get("notes")||null,status:"completed"};try{await q.post("/payments",tt)}catch{I.error("Failed to record payment");return}await Wn("billing.payment.received",{invoice_id:P.id,patient_id:P.patient_id,amount:ae,payment_method:ee,reference_number:ye.get("referenceNumber")||null});const pt=Number(P.paid_amount)+ae,yt=Number(P.total_amount),Ue=pt>=yt?"Paid":pt>0?"Partially Paid":"Unpaid";try{await q.put(`/billing/invoices/${P.id}`,{paid_amount:pt,status:Ue})}catch(Ie){console.error("Error updating invoice:",Ie),I.error("Failed to update invoice");return}if(Ue==="Paid")if(console.log("Payment fully completed, updating patient visit...",{patient_id:P?.patient_id,invoice_id:P?.id}),!P?.patient_id)console.error("No patient_id found on invoice"),I.warning("Payment recorded but could not update patient visit - no patient ID");else{let Ie=[];try{Ie=(await q.get(`/visits?patient_id=${P.patient_id}&current_stage=billing&overall_status=Active&limit=1`)).data.visits||[]}catch(xt){console.error("Error fetching patient visit:",xt)}if(console.log("Found visits in billing stage:",Ie.length),!Ie||Ie.length===0){console.log("No visit in billing stage, checking for any active visit...");try{const Ve=(await q.get(`/visits?patient_id=${P.patient_id}&overall_status=Active&limit=1`)).data.visits||[];console.log("Found any active visits:",Ve.length,Ve[0]?.current_stage),Ve&&Ve.length>0&&(Ie=Ve,console.log("Using active visit from stage:",Ve[0].current_stage))}catch(xt){console.error("Error fetching any active visits:",xt)}}if(Ie&&Ie.length>0)try{await q.put(`/visits/${Ie[0].id}`,{billing_status:"Paid",billing_completed_at:new Date().toISOString(),current_stage:"completed",overall_status:"Completed",updated_at:new Date().toISOString()}),console.log("Patient visit completed and removed from billing queue"),I.success("Payment completed! Patient visit finished.")}catch(xt){console.error("Error updating patient visit:",xt),I.error(`Failed to update patient visit: ${xt.message}`)}else{console.warn("No active patient visit found - creating completed visit record");try{await q.post("/visits",{patient_id:P.patient_id,visit_date:new Date().toISOString(),reception_status:"Completed",nurse_status:"Completed",doctor_status:"Completed",lab_status:"Not Required",pharmacy_status:"Completed",billing_status:"Paid",billing_completed_at:new Date().toISOString(),current_stage:"completed",overall_status:"Completed",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("Created completed visit record for payment"),I.success("Payment completed successfully!")}catch(xt){console.error("Error creating visit record:",xt),I.warning("Payment recorded successfully (no visit record created)")}}}I.success(`Payment of TSh${ae.toFixed(2)} recorded successfully`),b(!1),N(null),ve(""),We()};return m?e.jsx(Sn,{title:"Billing Dashboard",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:Array.from({length:4}).map((J,ye)=>e.jsxs(Ce,{className:"border-destructive/20 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-24"}),e.jsx("div",{className:"h-4 w-4 bg-gray-200 rounded animate-pulse"})]}),e.jsx(De,{children:e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-16"})})]},ye))}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid w-full grid-cols-2 gap-2",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsx(Re,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-32"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-48"})]}),e.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse w-32"})]})}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex space-x-4 pb-2 border-b",children:Array.from({length:9}).map((J,ye)=>e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse flex-1"},ye))}),Array.from({length:5}).map((J,ye)=>e.jsx("div",{className:"flex space-x-4 py-2",children:Array.from({length:9}).map((ae,Ze)=>e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse flex-1"},Ze))},ye))]})})]})]})]})}):e.jsx(Sn,{title:"Billing Dashboard",children:e.jsxs("div",{className:"space-y-8",children:[U&&e.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm animate-in slide-in-from-right-2 ${U==="completed"?"bg-green-100 border border-green-500":U==="failed"?"bg-red-100 border border-red-500":"bg-blue-100 border border-blue-500"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[U==="completed"&&e.jsx(ar,{className:"h-6 w-6 text-green-600"}),U==="failed"&&e.jsx(qh,{className:"h-6 w-6 text-red-600"}),U==="pending"&&e.jsx(Kt,{className:"h-6 w-6 text-blue-600 animate-spin"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:`text-sm font-medium ${U==="completed"?"text-green-800":U==="failed"?"text-red-800":"text-blue-800"}`,children:[U==="completed"&&" Payment Completed Successfully!",U==="failed"&&" Payment Failed",U==="pending"&&" Payment Request Sent - Waiting for Confirmation",U==="processing"&&" Processing Payment..."]}),L&&e.jsxs("p",{className:`text-xs mt-1 ${U==="completed"?"text-green-600":U==="failed"?"text-red-600":"text-blue-600"}`,children:["Transaction ID: ",L.slice(-8)]}),U==="pending"&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Customer will receive payment request on their phone"})]})]})}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Ce,{className:"border-destructive/20 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Unpaid Invoices"}),e.jsx(Hh,{className:"h-4 w-4 text-destructive"})]}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold text-destructive",children:p.unpaid})})]}),e.jsxs(Ce,{className:"border-yellow-200 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Partially Paid"}),e.jsx(Ef,{className:"h-4 w-4 text-yellow-600"})]}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:p.partiallyPaid})})]}),e.jsxs(Ce,{className:"border-blue-200 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Pending Claims"}),e.jsx(Qh,{className:"h-4 w-4 text-blue-600"})]}),e.jsx(De,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.pendingClaims})})]}),e.jsxs(Ce,{className:"border-green-200 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Today's Revenue"}),e.jsx(ga,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(De,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["TSh ",p.totalRevenue.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})]}),e.jsxs(Va,{defaultValue:"invoices",className:"space-y-4",children:[e.jsxs(ya,{className:"grid w-full grid-cols-2",children:[e.jsx(Un,{value:"invoices",children:"Invoices & Payments"}),e.jsx(Un,{value:"insurance",children:"Insurance Claims"})]}),e.jsx(zn,{value:"invoices",className:"space-y-4",children:e.jsxs(Ce,{className:"shadow-lg",children:[e.jsx(Re,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Oe,{children:"Invoices"}),e.jsx(kt,{children:"Manage patient invoices and payments"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto"})]})}),e.jsx(De,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{className:"min-w-[120px]",children:"Patient"}),e.jsx(de,{className:"min-w-[100px]",children:"Phone"}),e.jsx(de,{className:"min-w-[120px]",children:"Calculated Cost"}),e.jsx(de,{className:"min-w-[100px]",children:"Total Amount"}),e.jsx(de,{className:"min-w-[100px]",children:"Paid Amount"}),e.jsx(de,{className:"min-w-[100px]",children:"Unpaid Amount"}),e.jsx(de,{className:"min-w-[80px]",children:"Invoice Count"}),e.jsx(de,{className:"min-w-[100px]",children:"Latest Date"}),e.jsx(de,{className:"min-w-[80px]",children:"Status"}),e.jsx(de,{className:"min-w-[100px]",children:"Actions"})]})}),e.jsx(gn,{children:t.filter(J=>J.status!=="Paid").map(J=>e.jsxs(lt,{children:[e.jsx(oe,{className:"font-medium",children:J.patient.full_name}),e.jsx(oe,{className:"text-sm",children:J.patient.phone}),e.jsxs(oe,{className:"font-semibold text-blue-600",children:["TSh",(Be[J.patient.id]||0).toFixed(2)]}),e.jsxs(oe,{children:["TSh",Number(J.totalAmount).toFixed(2)]}),e.jsxs(oe,{children:["TSh",Number(J.totalPaid).toFixed(2)]}),e.jsxs(oe,{children:["TSh",Number(J.unpaidAmount).toFixed(2)]}),e.jsx(oe,{children:J.invoiceCount}),e.jsx(oe,{className:"text-sm",children:Fe(new Date(J.latestInvoiceDate),"MMM dd, yyyy")}),e.jsx(oe,{children:e.jsx(He,{variant:J.status==="Paid"?"default":J.status==="Partially Paid"?"secondary":"destructive",children:J.status})}),e.jsx(oe,{children:(J.status==="Unpaid"||J.status==="Partially Paid")&&e.jsxs(G,{size:"sm",className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white border-0 shadow-md hover:shadow-lg transition-all duration-200 transform hover:scale-105",onClick:()=>{const ye=J.invoices.find(ae=>ae.status!=="Paid");ye&&Et(ye)},children:[e.jsx(Ef,{className:"mr-1 h-3 w-3"}),"Pay Now"]})})]},J.patient.id))})]})})})]})}),e.jsxs(zn,{value:"insurance",className:"space-y-4",children:[e.jsxs(Ce,{className:"border-blue-200 bg-gradient-to-r from-blue-50 to-white shadow-lg",children:[e.jsx(Re,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-600 rounded-lg",children:e.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),e.jsxs("div",{children:[e.jsx(Oe,{className:"text-xl",children:"NHIF Claims Management"}),e.jsx(kt,{className:"text-sm",children:"National Health Insurance Fund - Automated claim submission"})]})]})}),e.jsx(De,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-blue-100",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Claims"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.length})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-green-100",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Approved"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.filter(J=>J.status==="Approved").length})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-yellow-100",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pending"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:d.filter(J=>J.status==="Pending").length})]})]})})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsx(Re,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Oe,{children:"Insurance Claims"}),e.jsx(kt,{children:"Submit and track NHIF claims"})]}),e.jsxs(G,{onClick:()=>E(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(jr,{className:"mr-2 h-4 w-4"}),"Submit New Claim"]})]})}),e.jsx(De,{children:d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 mb-4",children:e.jsx("svg",{className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No claims submitted yet"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Start by submitting your first NHIF claim"}),e.jsxs(G,{onClick:()=>E(!0),variant:"outline",children:[e.jsx(jr,{className:"mr-2 h-4 w-4"}),"Submit First Claim"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{className:"bg-gray-50",children:[e.jsx(de,{className:"font-semibold",children:"Claim Number"}),e.jsx(de,{className:"font-semibold",children:"Patient"}),e.jsx(de,{className:"font-semibold",children:"NHIF Card"}),e.jsx(de,{className:"font-semibold",children:"Claim Amount"}),e.jsx(de,{className:"font-semibold",children:"Approved"}),e.jsx(de,{className:"font-semibold",children:"Status"}),e.jsx(de,{className:"font-semibold",children:"Submitted"})]})}),e.jsx(gn,{children:d.map(J=>e.jsxs(lt,{className:"hover:bg-gray-50",children:[e.jsx(oe,{className:"font-mono font-medium text-blue-600",children:J.claim_number}),e.jsxs(oe,{children:[e.jsx("div",{className:"font-medium",children:J.patient?.full_name||"Unknown"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:J.patient?.phone})]}),e.jsx(oe,{className:"font-mono text-sm",children:J.patient?.insurance_policy_number||"N/A"}),e.jsxs(oe,{className:"font-semibold",children:["TSh ",Number(J.claim_amount).toLocaleString()]}),e.jsxs(oe,{className:"font-semibold text-green-600",children:["TSh ",Number(J.approved_amount||0).toLocaleString()]}),e.jsx(oe,{children:e.jsx(He,{variant:J.status==="Approved"?"default":J.status==="Pending"?"secondary":"destructive",className:J.status==="Approved"?"bg-green-100 text-green-800 hover:bg-green-200":J.status==="Pending"?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-red-100 text-red-800 hover:bg-red-200",children:J.status})}),e.jsxs(oe,{className:"text-sm",children:[e.jsx("div",{children:Fe(new Date(J.submission_date),"MMM dd, yyyy")}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Fe(new Date(J.submission_date),"h:mm a")})]})]},J.id))})]})})})]})]})]}),e.jsx(At,{open:_,onOpenChange:J=>{b(J),J||(R(""),pe(""),ve(""),V(!1))},children:e.jsxs(St,{className:"max-w-2xl w-[95vw] max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Record Payment"}),e.jsxs(Ot,{children:["Record payment for invoice ",P?.invoice_number]})]}),P&&e.jsxs("div",{className:"border rounded-lg p-4 mb-4 bg-gray-50",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Invoice Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Patient:"}),e.jsx("span",{className:"font-medium",children:P.patient?.full_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Invoice Date:"}),e.jsx("span",{children:Fe(new Date(P.invoice_date),"MMM dd, yyyy")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Due Date:"}),e.jsx("span",{children:Fe(new Date(P.due_date),"MMM dd, yyyy")})]}),P.invoice_items&&P.invoice_items.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"font-medium mb-2",children:"Items:"}),e.jsx("div",{className:"space-y-1",children:P.invoice_items.map((J,ye)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:J.description}),e.jsxs("span",{children:[J.quantity,"  TSh",Number(J.unit_price).toFixed(2)," = TSh",Number(J.total_price).toFixed(2)]})]},J.id||ye))})]}),e.jsxs("div",{className:"border-t pt-2 mt-2",children:[e.jsxs("div",{className:"flex justify-between font-semibold text-base",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["TSh",Number(P.total_amount).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Paid:"}),e.jsxs("span",{children:["TSh",Number(P.paid_amount||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between font-semibold text-green-600",children:[e.jsx("span",{children:"Remaining:"}),e.jsxs("span",{children:["TSh",(Number(P.total_amount)-Number(P.paid_amount||0)).toFixed(2)]})]})]})]})]}),e.jsxs("form",{onSubmit:Ke,className:"space-y-4",children:[document.querySelector("form")?.checkValidity()?null:e.jsx("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:e.jsx("p",{className:"text-sm text-red-600",children:" Please fill in all required fields"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"amount",children:"Payment Amount (TSh)"}),e.jsx(ke,{id:"amount",name:"amount",type:"number",step:"0.01",min:"0.01",max:P?Number(P.total_amount)-Number(P.paid_amount||0):void 0,defaultValue:P?(Number(P.total_amount)-Number(P.paid_amount||0)).toFixed(2):"",className:`bg-white ${P?"border-green-300 focus:border-green-500":"border-red-300"}`,required:!0}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[" Enter payment amount (max: TSh",P?(Number(P.total_amount)-Number(P.paid_amount||0)).toFixed(2):"0.00",")"]}),P&&e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-green-700",children:"Remaining Balance:"}),e.jsxs("span",{className:"font-semibold text-green-800",children:["TSh",(Number(P.total_amount)-Number(P.paid_amount||0)).toFixed(2)]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"paymentMethod",children:"Payment Method"}),e.jsxs(sn,{name:"paymentMethod",value:ee,onValueChange:ve,required:!0,children:[e.jsx(en,{className:ee?"border-green-500":"border-red-500",children:e.jsx(rn,{placeholder:"Select payment method"})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"Cash",children:" Cash"}),e.jsx(_e,{value:"Card",children:" Debit/Credit Card"}),e.jsx(_e,{value:"M-Pesa",children:" M-Pesa"}),e.jsx(_e,{value:"Airtel Money",children:" Airtel Money"}),e.jsx(_e,{value:"Tigo Pesa",children:" Tigo Pesa"}),e.jsx(_e,{value:"Halopesa",children:" Halopesa"}),e.jsx(_e,{value:"Bank Transfer",children:" Bank Transfer"}),e.jsx(_e,{value:"Cheque",children:" Cheque"}),e.jsx(_e,{value:"Insurance",children:" Insurance"})]})]}),!ee&&e.jsx("p",{className:"text-sm text-red-600",children:"Please select a payment method"})]}),["M-Pesa","Airtel Money","Tigo Pesa","Halopesa"].includes(ee)&&e.jsxs("div",{className:"space-y-2 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qS,{className:"h-4 w-4 text-blue-600"}),e.jsx(Z,{htmlFor:"phoneNumber",className:"text-blue-800 font-medium",children:"Phone Number *"})]}),e.jsx(ke,{id:"phoneNumber",name:"phoneNumber",placeholder:"0712345678",pattern:"^0[67][0-9]{8}$",title:"Please enter a valid Tanzanian phone number (07xxxxxxxx or 06xxxxxxxx)",className:"border-blue-300 focus:border-blue-500",required:!0}),e.jsx("p",{className:"text-sm text-blue-600",children:" Customer will receive payment request on this number"}),e.jsx("p",{className:"text-xs text-blue-500",children:"Format: 07xxxxxxxx or 06xxxxxxxx"})]}),ee==="Bank Transfer"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"bankName",children:"Bank Name"}),e.jsx(ke,{id:"bankName",name:"bankName",placeholder:"e.g., CRDB Bank",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"accountNumber",children:"Account Number"}),e.jsx(ke,{id:"accountNumber",name:"accountNumber",placeholder:"Account number",required:!0})]})]}),ee==="Cheque"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"chequeNumber",children:"Cheque Number"}),e.jsx(ke,{id:"chequeNumber",name:"chequeNumber",placeholder:"Cheque number",required:!0})]}),ee==="Insurance"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Insurance Company"}),e.jsxs(sn,{name:"insuranceCompanyId",required:!0,children:[e.jsx(en,{children:e.jsx(rn,{placeholder:"Select insurance company"})}),e.jsx(tn,{children:o.map(J=>e.jsxs(_e,{value:J.id,children:[J.name," (",J.coverage_percentage,"% coverage)"]},J.id))})]})]}),["M-Pesa","Airtel Money","Tigo Pesa","Halopesa"].includes(ee)?e.jsx(G,{type:"submit",className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",disabled:ge||!ee||!P,children:ge?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing Payment..."]}):e.jsxs(e.Fragment,{children:[e.jsx(HS,{className:"mr-2 h-4 w-4"}),"Send Payment Request"]})}):e.jsxs(G,{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",disabled:!ee||!P,children:[e.jsx(Ef,{className:"mr-2 h-4 w-4"}),"Record Payment"]})]})]})}),e.jsx(At,{open:S,onOpenChange:E,children:e.jsxs(St,{className:"max-w-md w-[95vw] max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Submit Insurance Claim"}),e.jsx(Ot,{children:"Submit a new insurance claim for an invoice"})]}),e.jsxs("form",{onSubmit:async J=>{J.preventDefault();const ye=new FormData(J.currentTarget);try{v(!0);const ae=ye.get("invoiceId"),Ze=ye.get("insuranceCompanyId"),tt=Number(ye.get("claimAmount")),pt=ye.get("notes"),yt=t.find(ct=>ct.invoices.some(Ft=>Ft.id===ae)),Ue=yt?.invoices.find(ct=>ct.id===ae);if(!yt||!Ue){I.error("Invoice not found");return}const Ie=o.find(ct=>ct.id===Ze);if(!Ie){I.error("Insurance company not found");return}const xt=`CLM-${Date.now().toString().slice(-8)}`,Ve={invoice_id:ae,insurance_company_id:Ze,patient_id:yt.patient?.id,claim_number:xt,claim_amount:tt,notes:pt,status:"Pending",submission_date:new Date().toISOString()};if(Ie.api_key&&Ie.api_endpoint)try{console.log("Submitting claim to insurance API:",Ie.api_endpoint);const ct={ClaimNumber:xt,CardNumber:yt.patient?.insurance_policy_number,PatientName:yt.patient?.full_name,FacilityCode:Ie.facility_code||"HF001",DateOfService:Ue.invoice_date,TotalAmount:tt,Services:Ue.invoice_items?.map(Tt=>({ServiceCode:Tt.item_type||"CONS",ServiceName:Tt.description,Quantity:Tt.quantity,UnitPrice:Tt.unit_price,TotalPrice:Tt.total_price}))||[],Remarks:pt},Ft=await fetch(Ie.api_endpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ie.api_key}`,"X-API-Key":Ie.api_key},body:JSON.stringify(ct)});if(!Ft.ok)throw new Error(`API request failed: ${Ft.statusText}`);const Me=await Ft.json();console.log("Insurance API response:",Me),Ve.notes=`${pt}

API Response: ${JSON.stringify(Me)}`,I.success("Claim submitted to insurance company via API")}catch(ct){console.error("Insurance API error:",ct),I.warning("Claim saved locally but API submission failed. Will retry later."),Ve.notes=`${pt}

API Error: ${ct instanceof Error?ct.message:"Unknown error"}`}else console.log("No API configuration found, saving claim locally only");try{await q.post("/insurance/claims",Ve),I.success("Insurance claim submitted successfully"),E(!1),We()}catch(ct){console.error("Database error:",ct),I.error(`Failed to save claim: ${ct.message}`)}}catch(ae){console.error("Claim submission error:",ae),I.error("Failed to submit claim")}finally{v(!1)}},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"invoiceId",children:"Invoice"}),e.jsxs(sn,{name:"invoiceId",required:!0,children:[e.jsx(en,{children:e.jsx(rn,{placeholder:"Select invoice"})}),e.jsx(tn,{children:t.filter(J=>J.patient?.insurance_company_id&&J.status!=="Paid").map((J,ye)=>e.jsx(h.Fragment,{children:J.invoices.filter(ae=>ae.status!=="Paid").map(ae=>e.jsxs(_e,{value:ae.id,children:[ae.invoice_number," - ",J.patient?.full_name||"Unknown"," (TSh",Number(ae.total_amount).toFixed(2),")"]},ae.id))},J.patient.id||ye))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"insuranceCompanyId",children:"Insurance Company"}),e.jsxs(sn,{name:"insuranceCompanyId",required:!0,children:[e.jsx(en,{children:e.jsx(rn,{placeholder:"Select insurance company"})}),e.jsx(tn,{children:o&&o.length>0?o.map(J=>e.jsxs(_e,{value:J.id,children:[J.name," (",J.coverage_percentage||100,"% coverage)"]},J.id)):e.jsx(_e,{value:"",disabled:!0,children:"No insurance companies available"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"claimAmount",children:"Claim Amount (TSh)"}),e.jsx(ke,{id:"claimAmount",name:"claimAmount",type:"number",step:"0.01",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"notes",children:"Notes"}),e.jsx(Mn,{id:"notes",name:"notes",rows:3})]}),e.jsx(G,{type:"submit",className:"w-full",children:"Submit Claim"})]})]})})]})})}function pM(){const{user:t}=Ys(),[n,s]=h.useState([]),[a,o]=h.useState([]),[c,d]=h.useState([]),[f,p]=h.useState(null),[x,m]=h.useState(!1),[v,C]=h.useState(!1),[w,_]=h.useState(!1),[b,S]=h.useState(!1),[E,P]=h.useState({blood_pressure:"",heart_rate:"",temperature:"",oxygen_saturation:"",weight:"",weight_unit:"kg",height:"",height_unit:"cm",muac:"",muac_unit:"cm",notes:""}),[N,A]=h.useState({patient_id:"",notes:"",category:"general"}),[D,U]=h.useState({patient_id:"",appointment_date:"",appointment_time:"",reason:"",department_id:""}),[R,L]=h.useState({totalPatients:0,todayAppointments:0,pendingVitals:0,completedTasks:0}),[pe,ee]=h.useState(!1),[ve,ge]=h.useState(""),[V,le]=h.useState([]),[we,fe]=h.useState([]),ne=Y=>{p(Y),P({blood_pressure:"",heart_rate:"",temperature:"",oxygen_saturation:"",weight:"",weight_unit:"kg",height:"",height_unit:"cm",muac:"",muac_unit:"cm",notes:""}),m(!0)},M=()=>{S(!0),ge(""),le([])},K=async Y=>{if(!Y.trim()){le([]);return}try{const xe=await q.get(`/patients?search=${encodeURIComponent(Y)}&limit=20`);if(xe.data.error)throw new Error(xe.data.error);le(xe.data.patients||[])}catch(xe){console.error("Search error:",xe),I.error(xe.response?.data?.error||"Failed to search patients")}};h.useEffect(()=>{if(!b)return;const Y=setTimeout(()=>{K(ve)},300);return()=>clearTimeout(Y)},[ve,b]);const se=async()=>{if(f)try{const xe=(await q.get(`/visits?patient_id=${f.id}&current_stage=nurse&overall_status=Active&limit=1`)).data.visits||[];if(xe.length===0){I.error("No active visit found for this patient");return}const Be=xe[0],re=JSON.stringify(E);await q.put(`/visits/${Be.id}`,{nurse_status:"Completed",nurse_notes:re,nurse_completed_at:new Date().toISOString(),current_stage:"doctor",doctor_status:"Pending"}),I.success("Vital signs recorded. Patient sent to doctor."),m(!1),p(null),P({blood_pressure:"",heart_rate:"",temperature:"",oxygen_saturation:"",weight:"",weight_unit:"kg",height:"",height_unit:"cm",muac:"",muac_unit:"cm",notes:""}),fe($e=>$e.filter(qe=>qe.id!==Be.id)),he(!1)}catch(Y){console.error("Vitals submission error:",Y),I.error(Y.response?.data?.error||"Failed to record vital signs")}},T=async()=>{if(f)try{I.success(`Notes added for ${f.full_name}`),C(!1),p(null)}catch(Y){console.error("Notes submission error:",Y),I.error("Failed to add notes")}},O=async()=>{if(f)try{await q.post("/appointments",{patient_id:f.id,doctor_id:t?.id,appointment_date:D.appointment_date,appointment_time:D.appointment_time,reason:D.reason,appointment_type:"Follow-up",status:"Scheduled"}),I.success(`Follow-up scheduled for ${f.full_name}`),_(!1),p(null),U({patient_id:"",appointment_date:"",appointment_time:"",reason:"",department_id:""})}catch(Y){console.error("Schedule error:",Y),I.error(Y.response?.data?.error||"Failed to schedule follow-up")}};h.useEffect(()=>{if(!t)return;he(!0);const Y=setInterval(()=>{he(!1)},3e4);return()=>{clearInterval(Y)}},[t]);const he=async(Y=!0)=>{if(t)try{Y&&ee(!0);const xe=await q.get("/visits?current_stage=nurse&nurse_status=Pending&overall_status=Active"),Be=Array.isArray(xe.data.visits)?xe.data.visits:[],re=new Date().toISOString().split("T")[0],$e=await q.get(`/appointments?date=${re}`),qe=Array.isArray($e.data.appointments)?$e.data.appointments:[],Ge=await q.get("/patients?limit=10&sort=updated_at&order=desc"),be=Array.isArray(Ge.data.patients)?Ge.data.patients:[],mt=Ge.data.total||be.length;fe(Be),s(qe),o(be);const We=qe.filter(Et=>Et.appointment_date?(typeof Et.appointment_date=="string"?Et.appointment_date.split("T")[0]:"")===re:!1).length;L({totalPatients:mt,todayAppointments:We,pendingVitals:Be.length,completedTasks:Be.filter(Et=>Et.nurse_status==="Completed").length})}catch(xe){console.error("Error fetching nurse data:",xe),fe([]),s([]),o([]),L({totalPatients:0,todayAppointments:0,pendingVitals:0,completedTasks:0}),I.error(`Failed to load dashboard data: ${xe.message||"Unknown error"}`)}finally{ee(!1)}};return pe?e.jsx(Sn,{title:"Nurse Dashboard",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"h-20 bg-gray-200 animate-pulse rounded-lg"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(Y=>e.jsx("div",{className:"h-24 bg-gray-200 animate-pulse rounded-lg"},Y))}),e.jsx("div",{className:"h-96 bg-gray-200 animate-pulse rounded-lg"})]})}):e.jsxs(Sn,{title:"Nurse Dashboard",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(_s,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Welcome back, Nurse!"}),e.jsx("p",{className:"text-gray-600",children:"Here's your patient care overview for today"})]})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Ce,{className:"border-blue-200 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"My Patients"}),e.jsx(es,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:R.totalPatients}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total assigned patients"})]})]}),e.jsxs(Ce,{className:"border-green-200 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Today's Schedule"}),e.jsx(ns,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:R.todayAppointments}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Appointments today"})]})]}),e.jsxs(Ce,{className:"border-orange-200 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Pending Vitals"}),e.jsx(yc,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:R.pendingVitals}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vital signs to record"})]})]}),e.jsxs(Ce,{className:"border-purple-200 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Completed Tasks"}),e.jsx(nl,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:R.completedTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tasks completed today"})]})]})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-5 w-5"}),"Patients Waiting for Nurse"]}),e.jsx(kt,{children:"Patients ready for vital signs assessment"})]}),e.jsx(De,{children:we.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No patients waiting"}):e.jsx("div",{className:"space-y-3",children:we.map(Y=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:Y.patient?.full_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Phone: ",Y.patient?.phone,"  Blood Group: ",Y.patient?.blood_group||"N/A"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Checked in: ",Fe(new Date(Y.reception_completed_at||Y.created_at),"MMM dd, yyyy HH:mm")]})]}),e.jsxs(G,{onClick:()=>ne(Y.patient),children:[e.jsx(yc,{className:"h-4 w-4 mr-2"}),"Record Vitals"]})]},Y.id))})})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:"Patient Search"}),e.jsx(kt,{children:"Search for patients in the system"})]}),e.jsx(De,{children:e.jsxs(G,{variant:"default",className:"w-full",onClick:M,children:[e.jsx(es,{className:"h-5 w-5 mr-2"}),"Search Patients"]})})]})]}),e.jsx(At,{open:x,onOpenChange:m,children:e.jsxs(St,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ct,{className:"pb-4 border-b",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(yc,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx(Pt,{className:"text-xl",children:"Record Vital Signs"}),e.jsxs(Ot,{className:"text-sm",children:["Recording vitals for ",e.jsx("span",{className:"font-semibold text-foreground",children:f?.full_name})]})]})]})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide flex items-center gap-2",children:[e.jsx($S,{className:"h-4 w-4"}),"Primary Vitals"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"blood_pressure",className:"text-sm font-medium flex items-center gap-2",children:["Blood Pressure ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(mmHg)"})]}),e.jsx(ke,{id:"blood_pressure",placeholder:"120/80",value:E.blood_pressure,onChange:Y=>P({...E,blood_pressure:Y.target.value}),className:"h-11 text-base"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"heart_rate",className:"text-sm font-medium flex items-center gap-2",children:["Heart Rate ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(bpm)"})]}),e.jsx(ke,{id:"heart_rate",type:"number",placeholder:"72",value:E.heart_rate,onChange:Y=>P({...E,heart_rate:Y.target.value}),className:"h-11 text-base"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"temperature",className:"text-sm font-medium flex items-center gap-2",children:["Temperature ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(C or F)"})]}),e.jsx(ke,{id:"temperature",type:"number",step:"0.1",placeholder:"37.0",value:E.temperature,onChange:Y=>P({...E,temperature:Y.target.value}),className:"h-11 text-base"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"oxygen_saturation",className:"text-sm font-medium flex items-center gap-2",children:["Oxygen Saturation ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(%)"})]}),e.jsx(ke,{id:"oxygen_saturation",type:"number",placeholder:"98",value:E.oxygen_saturation,onChange:Y=>P({...E,oxygen_saturation:Y.target.value}),className:"h-11 text-base"})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Body Measurements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"weight",className:"text-sm font-medium",children:"Weight"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ke,{id:"weight",type:"number",step:"0.1",placeholder:"70.5",value:E.weight,onChange:Y=>P({...E,weight:Y.target.value}),className:"flex-1 h-11 text-base"}),e.jsxs(sn,{value:E.weight_unit,onValueChange:Y=>P({...E,weight_unit:Y}),children:[e.jsx(en,{className:"w-24 h-11",children:e.jsx(rn,{})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"kg",children:"kg"}),e.jsx(_e,{value:"lbs",children:"lbs"}),e.jsx(_e,{value:"g",children:"g"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"height",className:"text-sm font-medium",children:"Height"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ke,{id:"height",type:"number",step:"0.1",placeholder:"175",value:E.height,onChange:Y=>P({...E,height:Y.target.value}),className:"flex-1 h-11 text-base"}),e.jsxs(sn,{value:E.height_unit,onValueChange:Y=>P({...E,height_unit:Y}),children:[e.jsx(en,{className:"w-24 h-11",children:e.jsx(rn,{})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"cm",children:"cm"}),e.jsx(_e,{value:"m",children:"m"}),e.jsx(_e,{value:"ft",children:"ft"}),e.jsx(_e,{value:"in",children:"in"})]})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs(Z,{htmlFor:"muac",className:"text-sm font-medium",children:["MUAC ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(Mid-Upper Arm Circumference)"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ke,{id:"muac",type:"number",step:"0.1",placeholder:"25.5",value:E.muac,onChange:Y=>P({...E,muac:Y.target.value}),className:"flex-1 h-11 text-base",title:"Mid-Upper Arm Circumference"}),e.jsxs(sn,{value:E.muac_unit,onValueChange:Y=>P({...E,muac_unit:Y}),children:[e.jsx(en,{className:"w-24 h-11",children:e.jsx(rn,{})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"cm",children:"cm"}),e.jsx(_e,{value:"mm",children:"mm"}),e.jsx(_e,{value:"in",children:"in"})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[e.jsx(Z,{htmlFor:"vitals_notes",className:"text-sm font-medium",children:"Additional Notes"}),e.jsx(Mn,{id:"vitals_notes",placeholder:"Any observations or additional information...",value:E.notes,onChange:Y=>P({...E,notes:Y.target.value}),rows:3,className:"resize-none"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(G,{variant:"outline",onClick:()=>m(!1),className:"min-w-24",children:"Cancel"}),e.jsxs(G,{onClick:se,className:"min-w-32 bg-blue-600 hover:bg-blue-700",children:[e.jsx(yc,{className:"h-4 w-4 mr-2"}),"Record Vitals"]})]})]})}),e.jsx(At,{open:v,onOpenChange:C,children:e.jsxs(St,{className:"max-w-md",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Add Patient Notes"}),e.jsxs(Ot,{children:["Add notes for ",f?.full_name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"notes_category",children:"Category"}),e.jsxs(sn,{value:N.category,onValueChange:Y=>A({...N,category:Y}),children:[e.jsx(en,{children:e.jsx(rn,{})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"general",children:"General"}),e.jsx(_e,{value:"medication",children:"Medication"}),e.jsx(_e,{value:"symptoms",children:"Symptoms"}),e.jsx(_e,{value:"treatment",children:"Treatment"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"patient_notes",children:"Notes"}),e.jsx(Mn,{id:"patient_notes",placeholder:"Enter your notes...",value:N.notes,onChange:Y=>A({...N,notes:Y.target.value}),rows:4})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(G,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx(G,{onClick:T,children:"Add Notes"})]})]})]})}),e.jsx(At,{open:w,onOpenChange:_,children:e.jsxs(St,{className:"max-w-md",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Schedule Follow-up"}),e.jsxs(Ot,{children:["Schedule a follow-up appointment for ",f?.full_name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"appointment_date",children:"Date"}),e.jsx(ke,{id:"appointment_date",type:"date",value:D.appointment_date,onChange:Y=>U({...D,appointment_date:Y.target.value})})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"appointment_time",children:"Time"}),e.jsx(ke,{id:"appointment_time",type:"time",value:D.appointment_time,onChange:Y=>U({...D,appointment_time:Y.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"reason",children:"Reason"}),e.jsx(ke,{id:"reason",placeholder:"Follow-up reason",value:D.reason,onChange:Y=>U({...D,reason:Y.target.value})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(G,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),e.jsx(G,{onClick:O,children:"Schedule"})]})]})]})}),e.jsx(At,{open:b,onOpenChange:S,children:e.jsxs(St,{className:"max-w-lg",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Search Patients"}),e.jsx(Ot,{children:"Search for patients by name or phone number"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ke,{placeholder:"Search by name or phone...",value:ve,onChange:Y=>ge(Y.target.value),autoFocus:!0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Start typing to search in real-time"})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:V.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:ve?"No patients found":"Enter search term to find patients"}):e.jsx("div",{className:"space-y-2",children:V.map(Y=>e.jsx("div",{className:"p-3 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:Y.full_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Y.phone,"  DOB: ",Fe(new Date(Y.date_of_birth),"MMM dd, yyyy")]})]}),e.jsx(He,{variant:Y.status==="Active"?"default":"secondary",children:Y.status})]})},Y.id))})})]})]})})]})}function gM({appointments:t,onCheckIn:n,onCancel:s}){const a=new Date,o=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0"),f=`${o}-${c}-${d}`;console.log("Today (local):",f,"UTC:",new Date().toISOString().split("T")[0]),console.log("All appointments dates:",t.map(m=>{const v=typeof m.appointment_date=="string"?m.appointment_date:"",C=v.split("T"),w=C[0];return console.log("DEBUG Split:",{dateStr:v,parts:C,extracted:w}),{patient:m.patient?.full_name,date:m.appointment_date,extracted:w,status:m.status}}));const p=t.filter(m=>{let v="";m.appointment_date_only?v=typeof m.appointment_date_only=="string"?m.appointment_date_only.split("T")[0]:new Date(m.appointment_date_only).toISOString().split("T")[0]:m.appointment_date&&(v=(typeof m.appointment_date=="string"?m.appointment_date:"").split("T")[0]);const C=v===f,w=m.status==="Scheduled"||m.status==="Confirmed";return console.log("Checking appointment:",{patient:m.patient?.full_name,rawDate:m.appointment_date,hasDateOnly:!!m.appointment_date_only,dateOnlyValue:m.appointment_date_only,extractedDate:v,extractedType:typeof v,today:f,todayType:typeof f,isToday:C,status:m.status,needsAction:w}),C&&w});console.log("AppointmentsCard:",{today:f,totalAppointments:t.length,todayAppointments:p.length,sampleAppointment:t[0]?{date:t[0].appointment_date,dateType:typeof t[0].appointment_date,status:t[0].status,patient:t[0].patient?.full_name}:null});const x=p.sort((m,v)=>{const C=m.appointment_time||"00:00",w=v.appointment_time||"00:00";return C.localeCompare(w)});return e.jsxs(Ce,{className:"shadow-lg",children:[e.jsx(Re,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-5 w-5"}),"Today's Appointments (",x.length,")"]}),e.jsx(kt,{children:"Manage today's patient schedule"})]}),x.length>5&&e.jsxs(He,{variant:"secondary",className:"ml-2",children:[x.length-5,"+ more"]})]})}),e.jsx(De,{children:x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ns,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"No appointments for today"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"All appointments have been completed or there are no scheduled visits"})]}):e.jsx("div",{className:"space-y-3",children:x.slice(0,5).map(m=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-full",children:e.jsx(ud,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx("p",{className:"font-medium text-base",children:m.patient?.full_name||"Unknown Patient"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(qc,{className:"h-3 w-3"}),e.jsx("span",{children:m.appointment_time}),m.doctor?.full_name&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Dr. ",m.doctor.full_name]})]})]}),m.reason&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"font-medium",children:"Reason:"})," ",m.reason]}),m.department?.name&&e.jsx("p",{className:"text-xs text-blue-600 mt-0.5",children:m.department.name})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{variant:m.status==="Confirmed"?"default":m.status==="Scheduled"?"secondary":"outline",children:m.status}),m.status==="Scheduled"&&e.jsxs(e.Fragment,{children:[e.jsx(G,{size:"sm",onClick:()=>n(m),className:"bg-green-600 hover:bg-green-700",children:"Check In"}),e.jsx(G,{size:"sm",variant:"outline",onClick:()=>s(m.id),className:"text-red-600 hover:text-red-700",children:e.jsx(qh,{className:"h-4 w-4"})})]}),m.status==="Confirmed"&&e.jsx(He,{variant:"default",className:"bg-blue-600",children:"In Progress"})]})]},m.id))})})]})}function xM({patients:t,onQuickService:n}){const s=t.slice(0,5);return e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-5 w-5"}),"Recent Patients (",t.length,")"]}),e.jsx(kt,{children:"Recently registered patients"})]}),e.jsx(De,{children:s.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No patients found"}):e.jsx("div",{className:"space-y-3",children:s.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Wo,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.full_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.phone,"  DOB: ",Fe(new Date(a.date_of_birth),"MMM dd, yyyy")]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{variant:a.status==="Active"?"default":"secondary",children:a.status}),n&&e.jsxs(G,{size:"sm",variant:"outline",onClick:()=>n(a),className:"h-8",children:[e.jsx(_s,{className:"h-4 w-4 mr-1"}),"Quick Service"]})]})]},a.id))})})]})}function vM({open:t,onOpenChange:n,patient:s,onSuccess:a}){const[o,c]=h.useState([]),[d,f]=h.useState(""),[p,x]=h.useState(1),[m,v]=h.useState(!1),[C,w]=h.useState(!1),[_,b]=h.useState(!1),[S,E]=h.useState({full_name:"",phone:"",date_of_birth:"",gender:"Male"});h.useEffect(()=>{t&&(P(),b(!s))},[t,s]);const P=async()=>{v(!0);try{const U=(await q.get("/services")).data.services.filter(R=>["Procedure","Consultation","Emergency","Other"].includes(R.service_type)&&R.is_active);c(U)}catch(D){console.error("Error fetching services:",D),I.error("Failed to load services")}finally{v(!1)}},N=async()=>{if(!d){I.error("Please select a service");return}if(_){if(!S.full_name||!S.phone||!S.date_of_birth){I.error("Please fill in all patient details");return}}else if(!s?.id){I.error("No patient selected");return}w(!0);try{const D=o.find(L=>L.id===d);let U=s?.id;if(_){const L=await q.post("/patients",{...S,status:"Active",address:"Walk-in",email:`walkin_${Date.now()}@temp.com`});if(L.data.error)throw new Error(L.data.error);U=L.data.patient?.id||L.data.patientId,I.success(`Patient ${S.full_name} registered`)}await q.post("/patient-services",{patient_id:U,service_id:d,quantity:p,unit_price:D.base_price,total_price:D.base_price*p,service_date:new Date().toISOString().split("T")[0],status:"Pending"}),await q.post("/visits",{patient_id:U,visit_date:new Date().toISOString().split("T")[0],reception_status:"Checked In",reception_completed_at:new Date().toISOString(),current_stage:"nurse",nurse_status:"Pending",overall_status:"Active",visit_type:"Quick Service"});const R=_?S.full_name:s.full_name;I.success(`${D.service_name} assigned to ${R}. Patient sent to nurse.`),a(),n(!1),f(""),x(1),E({full_name:"",phone:"",date_of_birth:"",gender:"Male"})}catch(D){console.error("Error assigning service:",D),I.error(D.response?.data?.error||"Failed to assign service")}finally{w(!1)}},A=o.find(D=>D.id===d);return e.jsx(At,{open:t,onOpenChange:n,children:e.jsxs(St,{className:"max-w-md",children:[e.jsxs(Ct,{children:[e.jsxs(Pt,{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-5 w-5"}),"Quick Service Assignment"]}),e.jsx(Ot,{children:_?"Register walk-in patient and assign service":`Assign a service directly to ${s?.full_name} without doctor consultation`})]}),m?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Kt,{className:"h-6 w-6 animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[_?e.jsxs("div",{className:"space-y-3 p-3 bg-blue-50 rounded-md",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Walk-in Patient Registration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(Z,{htmlFor:"full_name",className:"text-xs",children:"Full Name *"}),e.jsx(ke,{id:"full_name",value:S.full_name,onChange:D=>E({...S,full_name:D.target.value}),placeholder:"Patient name"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Z,{htmlFor:"phone",className:"text-xs",children:"Phone *"}),e.jsx(ke,{id:"phone",value:S.phone,onChange:D=>E({...S,phone:D.target.value}),placeholder:"+255..."})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Z,{htmlFor:"dob",className:"text-xs",children:"Date of Birth *"}),e.jsx(ke,{id:"dob",type:"date",max:new Date().toISOString().split("T")[0],value:S.date_of_birth,onChange:D=>E({...S,date_of_birth:D.target.value})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Z,{htmlFor:"gender",className:"text-xs",children:"Gender *"}),e.jsxs(sn,{value:S.gender,onValueChange:D=>E({...S,gender:D}),children:[e.jsx(en,{children:e.jsx(rn,{})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"Male",children:"Male"}),e.jsx(_e,{value:"Female",children:"Female"}),e.jsx(_e,{value:"Other",children:"Other"})]})]})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Patient"}),e.jsxs("div",{className:"p-3 bg-muted rounded-md",children:[e.jsx("p",{className:"font-medium",children:s?.full_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s?.phone})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Select Service *"}),e.jsxs(sn,{value:d,onValueChange:f,children:[e.jsx(en,{children:e.jsx(rn,{placeholder:"Choose a service"})}),e.jsx(tn,{children:o.map(D=>e.jsx(_e,{value:D.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:D.service_name}),e.jsx(He,{variant:"outline",className:"text-xs",children:D.service_type})]})},D.id))})]})]}),A&&e.jsxs("div",{className:"p-3 bg-blue-50 rounded-md space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Service Code:"}),e.jsx("span",{className:"text-sm font-mono",children:A.service_code})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Price:"}),e.jsxs("span",{className:"text-sm font-semibold",children:["TSh ",A.base_price.toLocaleString()]})]}),A.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:A.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Quantity"}),e.jsx(ke,{type:"number",min:"1",value:p,onChange:D=>x(parseInt(D.target.value)||1)})]}),A&&e.jsx("div",{className:"p-3 bg-green-50 rounded-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Total Amount:"}),e.jsxs("span",{className:"text-lg font-bold text-green-700",children:["TSh ",(A.base_price*p).toLocaleString()]})]})})]}),e.jsxs(Cb,{children:[e.jsx(G,{variant:"outline",onClick:()=>n(!1),disabled:C,children:"Cancel"}),e.jsx(G,{onClick:N,disabled:C||!d,children:C?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Assigning..."]}):"Assign Service"})]})]})})}function Hs({className:t,...n}){return e.jsx("div",{className:ht("animate-pulse rounded-md bg-muted",t),...n})}function yM(){return e.jsxs(Ce,{children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Hs,{className:"h-4 w-[100px]"}),e.jsx(Hs,{className:"h-4 w-4"})]}),e.jsxs(De,{children:[e.jsx(Hs,{className:"h-8 w-[60px] mb-2"}),e.jsx(Hs,{className:"h-3 w-[120px]"})]})]})}function wM(){return e.jsxs(Ce,{children:[e.jsx(Re,{children:e.jsx(Hs,{className:"h-6 w-[150px]"})}),e.jsx(De,{className:"space-y-4",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Hs,{className:"h-12 w-12 rounded-full"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(Hs,{className:"h-4 w-[200px]"}),e.jsx(Hs,{className:"h-3 w-[150px]"})]})]},t))})]})}function jM(){return e.jsxs(Ce,{children:[e.jsx(Re,{children:e.jsx(Hs,{className:"h-6 w-[150px]"})}),e.jsx(De,{className:"space-y-4",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Hs,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(Hs,{className:"h-4 w-[180px]"}),e.jsx(Hs,{className:"h-3 w-[120px]"})]})]},t))})]})}function bM(){const{user:t}=Ys(),[n,s]=h.useState([]),[a,o]=h.useState([]),[c,d]=h.useState([]),[f,p]=h.useState([]),[x,m]=h.useState(""),[v,C]=h.useState([]),[w,_]=h.useState(!1),[b,S]=h.useState({todayAppointments:0,pendingAppointments:0,completedCheckins:0,totalPatients:0,nurseQueuePatients:0,receptionQueuePatients:0}),[E,P]=h.useState(!1),[N,A]=h.useState(!1),[D,U]=h.useState(!1),[R,L]=h.useState(!1),[pe,ee]=h.useState(!1),[ve,ge]=h.useState(""),[V,le]=h.useState([]),[we,fe]=h.useState(null),[ne,M]=h.useState(!1),[K,se]=h.useState(!1),[T,O]=h.useState(null),[he,Y]=h.useState(!1),[xe,Be]=h.useState(null),[re,$e]=h.useState(2e3),[qe,Ge]=h.useState({}),[be,mt]=h.useState({amount_paid:"",payment_method:"Cash"}),[We,Et]=h.useState({full_name:"",date_of_birth:"",gender:"",phone:"",email:"",blood_group:"",address:""}),[ue,ze]=h.useState(!1),[Ee,Ke]=h.useState(""),[J,ye]=h.useState(""),[ae,Ze]=h.useState(""),[tt,pt]=h.useState(""),[yt,Ue]=h.useState(""),[Ie,xt]=h.useState([]),[Ve,ct]=h.useState({patient_id:"",doctor_id:"",appointment_date:"",appointment_time:"",appointment_type:"Consultation",reason:"",department_id:""});h.useEffect(()=>{if(!t)return;Ft(),Tt();const $=setInterval(()=>{Ft(!1)},3e4);return()=>{clearInterval($)}},[t]);const Ft=async($=!0)=>{if(t){$&&_(!0);try{const Pe=new Date().toISOString().split("T")[0],it=(await q.get("/appointments?order=appointment_time.asc")).data.appointments||[];let bt=[];try{bt=(await q.get("/departments?order=name")).data.departments||[],console.log("Fetched departments:",bt.length),bt.length===0&&(console.warn("No departments found in database"),I.warning("No departments found. Please contact admin to set up departments."))}catch(Se){console.error("Error fetching departments:",Se),console.error("Department error details:",Se.response?.data||Se.message),I.error("Failed to load departments. Please check backend connection.")}const j=[...new Set(it?.map(Se=>Se.doctor_id).filter(Boolean)||[])];let z=it||[];if(j.length>0)try{const yn=(await q.get(`/users/profiles?ids=${j.join(",")}`)).data.profiles||[];z=(it||[]).map(Nn=>({...Nn,doctor:yn.find(Kn=>Kn.id===Nn.doctor_id)||null,department:bt.find(Kn=>Kn.id===Nn.department_id)||null}))}catch(Se){console.warn("Could not fetch doctor profiles for appointments:",Se),z=it||[]}const me=(await q.get("/patients?order=created_at.desc&limit=10")).data.patients||[];let Xe=[];try{Xe=(await q.get("/users/profiles?role=doctor")).data.profiles||[],console.log("Found doctors:",Xe.length),Xe.length===0&&(console.warn("No doctors found in database"),I.warning("No doctors found. Please contact admin to assign doctor roles."))}catch(Se){console.error("Error fetching doctors:",Se),console.error("Doctor error details:",Se.response?.data||Se.message),I.error("Failed to load doctors. Please check backend connection."),Xe=[]}if(!Xe||Xe.length===0){console.log("No doctors found, attempting to create sample doctors...");try{const yn=(await q.get("/users/profiles?limit=5")).data.profiles||[];if(yn&&yn.length>0){for(let Vn=0;Vn<Math.min(3,yn.length);Vn++){const Er=yn[Vn];await q.post("/users/roles",{user_id:Er.id,role:"doctor"})}const Kn=(await q.get("/users/roles?role=doctor")).data.roles||[];if(Kn&&Kn.length>0){const Vn=Kn.map(Hr=>Hr.user_id);Xe=(await q.get(`/users/profiles?ids=${Vn.join(",")}`)).data.profiles||[]||[],console.log("Created and found sample doctors:",Xe.length)}}}catch(Se){console.error("Failed to create sample doctors:",Se)}}let Lt=[];try{Lt=(await q.get("/visits?overall_status=Active")).data.visits||[]}catch(Se){console.error("Error fetching patient visits:",Se)}const Xt=Array.isArray(z)?z:[],$t=Xt.filter(Se=>Se.appointment_date===Pe).length,Cn=Xt.filter(Se=>Se.status==="Scheduled").length,Fs=Xt.filter(Se=>Se.status==="Confirmed").length,as=Lt?.filter(Se=>Se.current_stage==="nurse"&&Se.nurse_status==="Pending").length||0,ps=Lt?.filter(Se=>Se.current_stage==="reception"&&Se.reception_status==="Pending").length||0;s(Xt),o(me||[]),d(bt||[]),p(Xe||[]),console.log("Dashboard data loaded:",{appointments:z?.length||0,patients:me?.length||0,departments:bt?.length||0,doctors:Xe?.length||0,todayAppointments:$t,pendingAppointments:Cn,confirmedAppointments:Fs,patientVisits:Lt?.length||0,nurseQueuePatients:as,receptionQueuePatients:ps}),S({todayAppointments:$t,pendingAppointments:Cn,completedCheckins:Fs,totalPatients:me?.length||0,nurseQueuePatients:as,receptionQueuePatients:ps})}catch(Pe){console.error("Error fetching receptionist data:",Pe),console.error("Error details:",{message:Pe.message,code:Pe.code,details:Pe.details,hint:Pe.hint}),s([]),o([]),d([]),p([]),S({todayAppointments:0,pendingAppointments:0,completedCheckins:0,totalPatients:0,nurseQueuePatients:0,receptionQueuePatients:0}),I.error(`Failed to load dashboard data: ${Pe.message}`)}finally{_(!1)}}},Me=($,Pe)=>{if($.length===0)return null;let nt=$;if(Pe&&(nt=$),nt.length===0)return null;const it=new Date().toISOString().split("T")[0],bt=new Map;n.forEach(H=>{H.appointment_date===it&&H.doctor?.id&&bt.set(H.doctor.id,(bt.get(H.doctor.id)||0)+1)});let j=nt[0],z=bt.get(j.id)||0;return nt.forEach(H=>{const me=bt.get(H.id)||0;me<z&&(j=H,z=me)}),j};h.useEffect(()=>{if(Ve.department_id&&f.length>0&&!Ve.doctor_id){const $=Me(f,Ve.department_id);$&&ct(Pe=>({...Pe,doctor_id:$?.id||""}))}},[Ve.department_id,f]),h.useEffect(()=>{(async()=>{if(!Ee){xt([]),ye("");return}try{const it=((await q.get(`/departments/${Ee}/doctors`)).data.doctors||[]).filter(bt=>bt.assignment_id);xt(it),it.length===1?ye(it[0].id):ye("")}catch(Pe){console.error("Error fetching department doctors:",Pe),xt([])}})()},[Ee]);const Tt=async()=>{try{const $=await q.get("/settings/consultation_fee");$.data&&$.data.value&&$e(Number($.data.value));const nt=(await q.get("/departments/fees")).data.fees||[];if(nt&&nt.length>0){const it={};nt.forEach(bt=>{it[bt.department_id]=bt.fee_amount}),Ge(it)}}catch{console.log("Using default consultation fee")}},It=$=>$&&qe[$]||re,ss=async $=>{try{const nt=new Date().toISOString().split("T")[0],bt=(await q.get(`/payments?patient_id=${$.patient_id}&date=${nt}`)).data.payments||[];if(bt.length>0&&window.confirm(`This patient already paid TSh ${bt[0].amount} today. Skip payment and check in directly?`)){await Ms($.id),I.success("Patient checked in (payment already received today)");return}}catch{console.log("Could not check existing payments, proceeding with payment collection")}O($);const Pe=It($.department_id);mt({amount_paid:Pe.toString(),payment_method:"Cash"}),M(!0)},rs=async()=>{if(!T)return;const $=Number(be.amount_paid),Pe=It(T.department_id);if(isNaN($)||$<Pe){I.error(`Payment must be at least TSh ${Pe.toLocaleString()}`);return}try{const nt={patient_id:T.patient_id,amount:$,payment_method:be.payment_method,payment_type:"Consultation Fee",status:"Completed",payment_date:new Date().toISOString()},it=await q.post("/payments",nt);if(it.status!==200||it.data.error)throw new Error(it.data.error||"Failed to create payment");await Ms(T.id),M(!1),O(null),I.success(`Payment of TSh ${$} received. Patient checked in.`)}catch(nt){console.error("Payment error:",nt),I.error("Failed to process payment")}},Ms=async $=>{try{const Pe=await q.get(`/appointments/${$}`),nt=Pe.data.appointment;if(Pe.status!==200||Pe.data.error)throw new Error(Pe.data.error||"Failed to fetch appointment");const it=await q.put(`/appointments/${$}`,{status:"Confirmed",updated_at:new Date().toISOString()});if(it.status!==200||it.data.error)throw new Error(it.data.error||"Failed to update appointment");const j=(await q.get(`/visits?appointment_id=${$}`)).data.visits||[],z=j.length>0?j[0]:null;if(z){const H=await q.put(`/visits/${z.id}`,{reception_status:"Checked In",reception_completed_at:new Date().toISOString(),current_stage:"nurse",nurse_status:"Pending",updated_at:new Date().toISOString()});if(H.status!==200||H.data.error)throw new Error(H.data.error||"Failed to update visit")}else{const H={patient_id:nt.patient_id,appointment_id:$,doctor_id:nt.doctor_id,visit_date:new Date().toISOString().split("T")[0],reception_status:"Checked In",reception_completed_at:new Date().toISOString(),current_stage:"nurse",nurse_status:"Pending",overall_status:"Active"},me=await q.post("/visits",H);if(me.status!==200||me.data.error){const Xe=await q.put(`/visits?appointment_id=${$}`,{reception_status:"Checked In",reception_completed_at:new Date().toISOString(),current_stage:"nurse",nurse_status:"Pending",updated_at:new Date().toISOString()});if(Xe.status!==200||Xe.data.error)throw new Error(Xe.data.error||"Failed to update visit")}}s(H=>H.filter(me=>me.id!==$)),I.success("Patient checked in and sent to nurse queue"),Wn("appointment.check_in",{appointment_id:$})}catch(Pe){console.error("Check-in error:",Pe),I.error(`Failed to check in: ${Pe.message||"Unknown error"}`)}},hs=async $=>{try{const Pe=await q.put(`/appointments/${$}`,{status:"Cancelled"});if(Pe.status!==200||Pe.data.error)throw new Error(Pe.data.error||"Failed to update appointment");const nt=await q.put(`/visits?appointment_id=${$}`,{overall_status:"Cancelled",reception_status:"Cancelled"});if(nt.status!==200||nt.data.error)throw new Error(nt.data.error||"Failed to update visit");I.success("Appointment cancelled"),Wn("appointment.cancel",{appointment_id:$}),s(it=>it.filter(bt=>bt.id!==$))}catch(Pe){console.error("Cancel error:",Pe),I.error("Failed to cancel appointment")}},En=()=>{Et({full_name:"",date_of_birth:"",gender:"",phone:"",email:"",blood_group:"",address:""}),ze(!1),Ke(""),ye(""),Ze(""),pt(""),Ue(""),P(!0)},Ps=()=>{ct({patient_id:"",doctor_id:"",appointment_date:"",appointment_time:"",appointment_type:"Consultation",reason:"",department_id:""}),A(!0)},Dt=()=>{U(!0),m(""),C([])},an=()=>{L(!0)};h.useEffect(()=>{if(!pe){le([]);return}if(!ve.trim()||ve.trim().length<2){le([]);return}const $=setTimeout(async()=>{try{const Pe=await q.get(`/patients?search=${encodeURIComponent(ve)}&limit=10`);if(Pe.data.error)throw new Error(Pe.data.error);le(Pe.data.patients||[])}catch(Pe){console.error("Search error:",Pe)}},300);return()=>clearTimeout($)},[ve,pe]);const[Qt,ms]=h.useState(null),[ot,wt]=h.useState(!1),Vt=async $=>{try{const Pe=new Date().toISOString().split("T")[0],nt=await q.get(`/visits?patient_id=${$.id}&status=Active&from=${Pe}&to=${Pe}&limit=1`);if(nt.status!==200||nt.data.error)throw new Error(nt.data.error||"Failed to check existing visits");const it=nt.data.visits||[];if(it&&it.length>0){I.error("This patient already has an active visit today. Please complete the current visit first.");return}const j=(await q.get(`/payments?patient_id=${$.id}&date=${Pe}`)).data.payments||[];if(j.length>0&&window.confirm(`${$.full_name} already paid TSh ${j[0].amount} today. Skip payment and create visit directly?`)){await dn($);return}ms($),mt({amount_paid:re.toString(),payment_method:"Cash"}),ee(!1),wt(!0)}catch(Pe){console.error("Error initiating returning patient visit:",Pe),I.error(Pe.message||"Failed to initiate visit")}},on=async()=>{if(!Qt)return;const $=Number(be.amount_paid);if(isNaN($)||$<re){I.error(`Payment must be at least TSh ${re.toLocaleString()}`);return}try{_(!0);const Pe={patient_id:Qt.id,amount:$,payment_method:be.payment_method,payment_type:"Consultation Fee",status:"Completed",payment_date:new Date().toISOString()};await q.post("/payments",Pe),await dn(Qt),I.success(`Payment received. ${Qt.full_name} sent to Nurse.`),wt(!1),ms(null),ge(""),le([])}catch(Pe){console.error("Error completing returning patient visit:",Pe),I.error(Pe.message||"Failed to complete visit")}finally{_(!1)}},dn=async $=>{const Pe={patient_id:$.id,visit_date:new Date().toISOString().split("T")[0],reception_status:"Checked In",reception_completed_at:new Date().toISOString(),current_stage:"nurse",nurse_status:"Pending",overall_status:"Active"},nt=await q.post("/visits",Pe);if(nt.status!==200&&nt.status!==201||nt.data.error)throw new Error(nt.data.error||"Failed to create visit");Ft(!1)},bn=async $=>{if(!$.trim()){C([]);return}try{_(!0);const Pe=await q.get(`/patients?search=${encodeURIComponent($)}&limit=20`);if(Pe.data.error)throw new Error(Pe.data.error);C(Pe.data.patients||[])}catch(Pe){console.error("Search error:",Pe),I.error(Pe.response?.data?.error||"Failed to search patients")}finally{_(!1)}};h.useEffect(()=>{const $=setTimeout(()=>{x.trim().length>=2?bn(x):x.trim().length===0&&C([])},300);return()=>clearTimeout($)},[x]);const vn=async()=>{if(!We.full_name||!We.date_of_birth||!We.gender||!We.phone||!We.address){I.error("Please fill in all required fields");return}if(!["Male","Female","Other"].includes(We.gender)){I.error("Gender must be Male, Female, or Other");return}const $=ue&&Ee?It(Ee):re;P(!1),mt({amount_paid:$.toString(),payment_method:"Cash"}),se(!0)},nn=async()=>{const $=Number(be.amount_paid);if(isNaN($)||$<re){I.error(`Payment must be at least TSh ${re.toLocaleString()}`);return}try{const Pe={full_name:We.full_name,date_of_birth:We.date_of_birth,gender:We.gender,phone:We.phone,email:We.email||null,blood_group:We.blood_group||null,address:We.address||null,status:"Active"},nt=await q.post("/patients",Pe);if(nt.data.error){const j=new Error(nt.data.error||"Failed to register patient");console.error("Patient registration error:",j),I.error(`Registration failed: ${j.message}`);return}const it=nt.data.patient?.id||nt.data.patientId;if(!it){console.error("Patient response:",nt.data),I.error("Patient registered but ID not returned");return}const bt={patient_id:it,amount:$,payment_method:be.payment_method,payment_type:"Consultation Fee",status:"Completed",payment_date:new Date().toISOString()};if(await q.post("/payments",bt),I.success("Patient registered and payment received!"),ue&&Ee&&J&&ae&&tt){const j={patient_id:it,doctor_id:J,department_id:Ee,appointment_date:ae,appointment_time:tt,appointment_type:"Consultation",reason:yt||"Initial consultation",status:"Scheduled"};(await q.post("/appointments",j)).data.error||I.success(`Appointment scheduled for ${ae} at ${tt}`)}else{const j={patient_id:it,visit_date:new Date().toISOString().split("T")[0],reception_status:"Checked In",current_stage:"nurse",overall_status:"Active"},z=await q.post("/visits",j);!z.data.error&&z.data.visitId&&(await q.put(`/visits/${z.data.visitId}`,{nurse_status:"Pending",reception_completed_at:new Date().toISOString()}),I.success("Patient added to nurse queue!"))}se(!1),Et({full_name:"",date_of_birth:"",gender:"",phone:"",email:"",blood_group:"",address:""}),Ft(!1),Wn("patient.register",{patient_id:it,full_name:We.full_name,amount_paid:$})}catch(Pe){console.error("Registration error:",Pe);const nt=Pe.response?.data?.error||Pe.response?.data?.details||Pe.message||"Unknown error";I.error(`Failed to register patient: ${nt}`)}},In=async()=>{if(!Ve.patient_id||!Ve.doctor_id||!Ve.appointment_date||!Ve.appointment_time){I.error("Please fill in all required fields");return}try{const $={patient_id:Ve.patient_id,doctor_id:Ve.doctor_id,appointment_date:Ve.appointment_date,appointment_time:Ve.appointment_time,appointment_type:Ve.appointment_type||"Consultation",reason:Ve.reason||null,notes:null};console.log("Creating appointment with data:",$);const Pe=await q.post("/appointments",$);if(Pe.data.error)throw new Error(Pe.data.error);const nt=Pe.data.appointmentId;if(!nt)throw new Error("Appointment created but ID not returned");try{const it={patient_id:Ve.patient_id,appointment_id:nt,visit_date:Ve.appointment_date,reception_status:"Pending",current_stage:"reception",overall_status:"Active"};await q.post("/visits",it)}catch(it){console.error("Error creating patient visit:",it)}I.success("Appointment booked successfully!"),A(!1),ct({patient_id:"",doctor_id:"",appointment_date:"",appointment_time:"",appointment_type:"Consultation",reason:"",department_id:""}),Ft(!1)}catch($){console.error("Booking error:",$),I.error(`Failed to book appointment: ${$.message||"Unknown error"}`)}};return w?e.jsx(Sn,{title:"Receptionist Dashboard",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map($=>e.jsx(yM,{},$))}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[e.jsx(wM,{}),e.jsx(jM,{})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx(Sn,{title:"Receptionist Dashboard",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-lg border border-green-200",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:e.jsx(kx,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Welcome back, Receptionist!"}),e.jsx("p",{className:"text-gray-600",children:"Here's your front desk overview for today"})]})]})})}),e.jsxs(Ce,{className:"shadow-lg border-green-200 bg-green-50/30",children:[e.jsxs(Re,{className:"bg-green-100/50",children:[e.jsxs(Oe,{className:"flex items-center gap-2 text-green-800",children:[e.jsx(es,{className:"h-5 w-5"}),"Current Patient Workflow Status"]}),e.jsx(kt,{className:"text-green-700",children:"Real-time view of where patients are in the hospital workflow"})]}),e.jsx(De,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Nurse Queue"}),e.jsxs(He,{variant:"default",className:"bg-green-600",children:[b.nurseQueuePatients," patient",b.nurseQueuePatients!==1?"s":""]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Patients waiting for vital signs (from new registrations)"}),e.jsx("div",{className:"text-xs text-green-600",children:" Auto-assigned from patient registration"})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-blue-800",children:"Reception Queue"}),e.jsxs(He,{variant:"default",className:"bg-blue-600",children:[b.receptionQueuePatients," patient",b.receptionQueuePatients!==1?"s":""]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Patients waiting for check-in (from appointments)"}),e.jsx("div",{className:"text-xs text-blue-600",children:" Requires check-in before nurse visit"})]})]})})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-5 w-5"}),"Today's Doctor Appointments by Department"]}),e.jsx(kt,{children:"View which doctors have appointments scheduled today"})]}),e.jsx(De,{children:(()=>{const $=new Date,Pe=`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}-${String($.getDate()).padStart(2,"0")}`,it=n.filter(j=>{let z="";if(j.appointment_date instanceof Date){const H=j.appointment_date;z=`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`}else if(typeof j.appointment_date=="string"){const H=new Date(j.appointment_date);z=`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`}return z===Pe}).reduce((j,z)=>{const H=z.doctor_id;return j[H]||(j[H]={doctor:z.doctor,department:z.department,appointments:[]}),j[H].appointments.push(z),j},{}),bt=Object.values(it);return bt.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(_s,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),e.jsx("p",{children:"No appointments scheduled for today"})]}):e.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:bt.map((j,z)=>e.jsxs("div",{className:"p-4 border rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-blue-900",children:["Dr. ",j.doctor?.full_name||"Unknown"]}),j.department?.name&&e.jsx("p",{className:"text-xs text-blue-600",children:j.department.name})]}),e.jsx(He,{className:"bg-blue-600",children:j.appointments.length})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[j.appointments.length," appointment",j.appointments.length!==1?"s":""," today"]})]},z))})})()})]}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[e.jsx(gM,{appointments:n,onCheckIn:ss,onCancel:hs}),e.jsx(xM,{patients:a,onQuickService:$=>{Be($),Y(!0)}})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:"Quick Actions"}),e.jsx(kt,{children:"Common receptionist tasks"})]}),e.jsx(De,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:[e.jsxs(G,{variant:"outline",className:"h-20 flex-col gap-2",onClick:En,children:[e.jsx(Wo,{className:"h-6 w-6"}),e.jsx("span",{children:"Register New Patient"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:" Goes to Nurse"})]}),e.jsxs(G,{variant:"default",className:"h-20 flex-col gap-2 bg-blue-600 hover:bg-blue-700",onClick:()=>ee(!0),children:[e.jsx(es,{className:"h-6 w-6"}),e.jsx("span",{children:"Returning Patient"}),e.jsx("span",{className:"text-xs",children:" Create New Visit"})]}),e.jsxs(G,{variant:"outline",className:"h-20 flex-col gap-2 bg-green-50 hover:bg-green-100 border-green-200",onClick:()=>{Be(null),Y(!0)},children:[e.jsx(_s,{className:"h-6 w-6 text-green-600"}),e.jsx("span",{className:"text-green-700",children:"Quick Service (Walk-in)"}),e.jsx("span",{className:"text-xs text-green-600",children:" Direct Service Only"})]}),e.jsxs(G,{variant:"outline",className:"h-20 flex-col gap-2",onClick:Ps,children:[e.jsx(ns,{className:"h-6 w-6"}),e.jsx("span",{children:"Book Follow-up Appointment"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:" Scheduled Visit"})]}),e.jsxs(G,{variant:"outline",className:"h-20 flex-col gap-2",onClick:Dt,children:[e.jsx(Ay,{className:"h-6 w-6"}),e.jsx("span",{children:"Patient Search"})]}),e.jsxs(G,{variant:"outline",className:"h-20 flex-col gap-2",onClick:an,children:[e.jsx(Ry,{className:"h-6 w-6"}),e.jsx("span",{children:"View Schedule"})]})]})})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsx(Re,{children:e.jsxs("div",{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(kx,{className:"h-5 w-5"}),"Departments & Doctor Queue"]}),e.jsx(kt,{children:"Available departments and current doctor workload"})]})}),e.jsx(De,{children:e.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:[c.map($=>{const Pe=n.filter(j=>j.department?.id===$.id),nt=new Date,it=`${nt.getFullYear()}-${String(nt.getMonth()+1).padStart(2,"0")}-${String(nt.getDate()).padStart(2,"0")}`,bt=Pe.filter(j=>{if(j.appointment_date instanceof Date){const z=j.appointment_date;return`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}-${String(z.getDate()).padStart(2,"0")}`===it}else if(typeof j.appointment_date=="string"){const z=new Date(j.appointment_date);return`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}-${String(z.getDate()).padStart(2,"0")}`===it}return!1});return e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("h4",{className:"font-medium",children:$.name}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:$.description}),e.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[bt.length," appointments today"]})]},$.id)}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("h4",{className:"font-medium",children:"Doctor Queue Status (Today)"}),we&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-blue-600",children:[e.jsx(Kt,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"Updating..."})]})]}),e.jsx("div",{className:"grid gap-2 md:grid-cols-2 lg:grid-cols-3",children:f.slice(0,6).map($=>{const Pe=new Date,nt=`${Pe.getFullYear()}-${String(Pe.getMonth()+1).padStart(2,"0")}-${String(Pe.getDate()).padStart(2,"0")}`,it=n.filter(j=>{let z="";if(j.appointment_date instanceof Date){const H=j.appointment_date;z=`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`}else if(typeof j.appointment_date=="string"){const H=new Date(j.appointment_date);z=`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`}return z===nt&&j.doctor?.id===$.id}),bt=it.length<8;return e.jsxs("div",{className:`p-3 border rounded-lg ${bt?"border-green-200 bg-green-50":"border-orange-200 bg-orange-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-sm",children:$.full_name}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${bt?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:[it.length,"/8 slots"]})]}),e.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:[bt?"Available":"Busy","  ",it.length," appointments today"]})]},$.id)})})]})]})})]})]})}),e.jsx(At,{open:E,onOpenChange:P,children:e.jsxs(St,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Register New Patient"}),e.jsx(Ot,{children:"Enter patient information to register them"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"full_name",children:"Full Name *"}),e.jsx(ke,{id:"full_name",required:!0,value:We.full_name,onChange:$=>Et({...We,full_name:$.target.value}),placeholder:"John Doe"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"date_of_birth",children:"Date of Birth *"}),e.jsx(ke,{type:"date",id:"date_of_birth",required:!0,max:new Date().toISOString().split("T")[0],value:We.date_of_birth,onChange:$=>Et({...We,date_of_birth:$.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"gender",children:"Gender *"}),e.jsxs("select",{id:"gender",className:"w-full p-2 border rounded-md",value:We.gender,onChange:$=>Et({...We,gender:$.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"phone",children:"Phone *"}),e.jsx(ke,{id:"phone",required:!0,value:We.phone,onChange:$=>Et({...We,phone:$.target.value}),placeholder:"+255 700 000 000"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",children:"Email"}),e.jsx(ke,{type:"email",id:"email",value:We.email,onChange:$=>Et({...We,email:$.target.value}),placeholder:"john@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"blood_group",children:"Blood Group"}),e.jsx(ke,{id:"blood_group",value:We.blood_group,onChange:$=>Et({...We,blood_group:$.target.value}),placeholder:"A+"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"address",children:"Address *"}),e.jsx(ke,{id:"address",required:!0,value:We.address,onChange:$=>Et({...We,address:$.target.value}),placeholder:"Street, City"})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(ad,{id:"book_with_appointment",checked:ue,onCheckedChange:$=>ze($)}),e.jsx(Z,{htmlFor:"book_with_appointment",className:"font-medium cursor-pointer",children:"Book appointment with specialized doctor (pay department fee instead of consultation fee)"})]}),ue&&e.jsxs("div",{className:"space-y-3 ml-6 p-4 border rounded-lg bg-blue-50/50",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"reg_department",children:"Select Department *"}),e.jsxs("select",{id:"reg_department",className:"w-full p-2 border rounded-md",value:Ee,onChange:$=>Ke($.target.value),required:ue,disabled:c.length===0,children:[e.jsx("option",{value:"",children:c.length===0?"Loading departments...":"Select Department"}),c.map($=>e.jsxs("option",{value:$.id,children:[$.name," - TSh ",It($.id).toLocaleString()]},$.id))]}),c.length===0&&e.jsx("p",{className:"text-xs text-amber-600",children:"No departments available. Please create departments first."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"reg_doctor",children:"Select Doctor *"}),e.jsxs("select",{id:"reg_doctor",className:"w-full p-2 border rounded-md",value:J,onChange:$=>ye($.target.value),required:ue,disabled:!Ee||Ie.length===0,children:[e.jsx("option",{value:"",children:Ee?Ie.length===0?"No doctors assigned to this department":"Select Doctor":"Select department first"}),Ie.map($=>e.jsxs("option",{value:$.id,children:["Dr. ",$.full_name]},$.id))]}),Ie.length===1&&J&&e.jsx("p",{className:"text-xs text-green-600",children:" Auto-selected (only doctor in this department)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"reg_appt_date",children:"Appointment Date *"}),e.jsx(ke,{type:"date",id:"reg_appt_date",value:ae,onChange:$=>Ze($.target.value),min:new Date().toISOString().split("T")[0],required:ue})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"reg_appt_time",children:"Time *"}),e.jsx(ke,{type:"time",id:"reg_appt_time",value:tt,onChange:$=>pt($.target.value),required:ue})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"reg_appt_reason",children:"Reason for Visit"}),e.jsx(ke,{id:"reg_appt_reason",value:yt,onChange:$=>Ue($.target.value),placeholder:"e.g., Heart checkup, Follow-up"})]}),e.jsxs("p",{className:"text-xs text-blue-700 bg-blue-100 p-2 rounded",children:[e.jsx("strong",{children:"Note:"})," Patient will be charged TSh ",It(Ee).toLocaleString()," (department fee) and appointment will be scheduled for ",ae||"[date]"," at ",tt||"[time]"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(G,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsx(G,{onClick:vn,disabled:ue&&(!Ee||!J||!ae||!tt),children:ue?"Register & Schedule Appointment":"Register Patient"})]})]})}),e.jsx(At,{open:N,onOpenChange:A,children:e.jsxs(St,{className:"max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs(Ct,{className:"pb-4 border-b",children:[e.jsxs(Pt,{className:"flex items-center gap-2 text-xl",children:[e.jsx(ns,{className:"h-5 w-5 text-blue-600"}),Ve.patient_id?"Book Follow-up Appointment":"Book New Appointment"]}),e.jsx(Ot,{children:Ve.patient_id?"Schedule a follow-up appointment for an existing patient":"Schedule a new appointment for a patient (Note: New patients should be registered first)"})]}),e.jsxs("div",{className:"grid gap-4 py-4 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"appt_patient",children:"Patient *"}),e.jsxs("select",{id:"appt_patient",className:"w-full p-2 border rounded-md",value:Ve.patient_id,onChange:$=>ct({...Ve,patient_id:$.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Patient"}),a.map($=>e.jsxs("option",{value:$.id,children:[$.full_name," - ",$.phone]},$.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"appt_doctor",children:"Doctor *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsxs("select",{id:"appt_doctor",className:"w-full p-2 border rounded-md",value:Ve.doctor_id,onChange:$=>ct({...Ve,doctor_id:$.target.value}),required:!0,disabled:we!==null,children:[e.jsx("option",{value:"",children:we?"Updating doctors...":"Select Doctor"}),f.map($=>e.jsx("option",{value:$.id,children:$.full_name},$.id))]}),we&&e.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:e.jsx(Kt,{className:"h-4 w-4 animate-spin text-blue-500"})})]}),Ve.department_id&&e.jsx(G,{type:"button",variant:"outline",size:"sm",onClick:()=>{const $=Me(f,Ve.department_id);$&&ct(Pe=>({...Pe,doctor_id:$.id}))},className:"px-3",children:"Auto"})]}),Ve.department_id&&Ve.doctor_id&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-green-600",children:""}),e.jsx("span",{className:"text-muted-foreground",children:"Doctor auto-assigned based on availability"}),e.jsx(G,{type:"button",variant:"ghost",size:"sm",onClick:()=>ct($=>({...$,doctor_id:""})),className:"text-xs h-auto p-1",children:"Change"})]}),Ve.department_id&&!Ve.doctor_id&&e.jsx("p",{className:"text-sm text-muted-foreground",children:" Select a department above to auto-assign a doctor"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"appt_date",children:"Date *"}),e.jsx(ke,{type:"date",id:"appt_date",value:Ve.appointment_date,onChange:$=>ct({...Ve,appointment_date:$.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"appt_time",children:"Time *"}),e.jsx(ke,{type:"time",id:"appt_time",value:Ve.appointment_time,onChange:$=>ct({...Ve,appointment_time:$.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"appt_department",children:"Department"}),e.jsxs("select",{id:"appt_department",className:"w-full p-2 border rounded-md",value:Ve.department_id,onChange:$=>ct({...Ve,department_id:$.target.value}),children:[e.jsx("option",{value:"",children:"Select Department"}),c.map($=>e.jsx("option",{value:$.id,children:$.name},$.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"appt_reason",children:"Reason for Visit"}),e.jsx(ke,{id:"appt_reason",value:Ve.reason,onChange:$=>ct({...Ve,reason:$.target.value}),placeholder:"e.g., Regular checkup, Follow-up"})]}),Ve.department_id&&e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-900",children:"Consultation Fee"}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:c.find($=>$.id===Ve.department_id)?.name||"Selected Department"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:["TSh ",It(Ve.department_id).toLocaleString()]}),e.jsx("div",{className:"text-xs text-blue-600",children:qe[Ve.department_id]?"Department rate":"Default rate"})]})]}),e.jsx("div",{className:"mt-2 text-xs text-blue-700 bg-blue-100/50 p-2 rounded",children:" This fee will be collected at reception during check-in"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(G,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),e.jsxs(G,{onClick:In,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:[e.jsx(ns,{className:"h-4 w-4 mr-2"}),"Book Appointment"]})]})]})}),e.jsx(At,{open:D,onOpenChange:U,children:e.jsxs(St,{className:"max-w-2xl",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Patient Search"}),e.jsx(Ot,{children:"Search for patients by name or phone number"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ke,{placeholder:"Search by name or phone (min 2 characters)...",value:x,onChange:$=>m($.target.value),disabled:w,className:"pr-10"}),w&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(Kt,{className:"h-4 w-4 animate-spin text-muted-foreground"})})]}),v.length>0&&e.jsxs("div",{className:"border rounded-lg p-4 max-h-96 overflow-y-auto",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Found ",v.length," patient",v.length!==1?"s":""]}),v.map($=>e.jsxs("div",{className:"p-3 border-b last:border-b-0 hover:bg-gray-50",children:[e.jsx("div",{className:"font-medium",children:$.full_name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[$.phone,"  DOB: ",Fe(new Date($.date_of_birth),"MMM dd, yyyy")]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Gender: ",$.gender,"  Blood Group: ",$.blood_group||"N/A"]}),$.address&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Address: ",$.address]})]},$.id))]}),v.length===0&&x.trim().length>=2&&!w&&e.jsxs("p",{className:"text-center text-muted-foreground py-8",children:['No patients found matching "',x,'"']}),x.trim().length>0&&x.trim().length<2&&e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Type at least 2 characters to search"})]})]})}),e.jsx(At,{open:R,onOpenChange:L,children:e.jsxs(St,{className:"max-w-4xl",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Today's Schedule"}),e.jsx(Ot,{children:"All appointments for today"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:n.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No appointments for today"}):e.jsx("div",{className:"space-y-2",children:n.map($=>e.jsx("div",{className:"p-3 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:$.patient?.full_name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[$.appointment_time,"  Dr. ",$.doctor?.full_name]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:$.reason||"No reason specified"})]}),e.jsx(He,{variant:$.status==="Confirmed"?"default":"secondary",children:$.status})]})},$.id))})})]})}),e.jsx(At,{open:ne,onOpenChange:M,children:e.jsxs(St,{className:"max-w-md",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Collect Consultation Fee"}),e.jsxs(Ot,{children:["Patient: ",T?.patient?.full_name||"Unknown"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Consultation Fee:"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["TSh ",re.toLocaleString()]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"payment_method",children:"Payment Method"}),e.jsxs("select",{id:"payment_method",className:"w-full p-2 border rounded-md",value:be.payment_method,onChange:$=>mt({...be,payment_method:$.target.value}),children:[e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"}),e.jsx("option",{value:"Card",children:"Card"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"amount_paid",children:"Amount Paid"}),e.jsx(ke,{id:"amount_paid",type:"number",value:be.amount_paid,onChange:$=>mt({...be,amount_paid:$.target.value}),placeholder:"Enter amount"})]}),Number(be.amount_paid)>re&&e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-green-800",children:"Change to Return:"}),e.jsxs("span",{className:"text-xl font-bold text-green-600",children:["TSh ",(Number(be.amount_paid)-re).toLocaleString()]})]})}),Number(be.amount_paid)<re&&be.amount_paid!==""&&e.jsx("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:e.jsx("span",{className:"text-sm text-red-600",children:"Insufficient payment amount"})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(G,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),e.jsx(G,{onClick:rs,disabled:Number(be.amount_paid)<re,children:"Confirm Payment & Check In"})]})]})]})}),e.jsx(At,{open:K,onOpenChange:se,children:e.jsxs(St,{className:"max-w-md",children:[e.jsxs(Ct,{children:[e.jsxs(Pt,{children:["Collect ",ue&&Ee?"Department":"Consultation"," Fee"]}),e.jsxs(Ot,{children:["New Patient: ",We.full_name]})]}),e.jsxs("div",{className:"space-y-4",children:[ue&&Ee&&e.jsx("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:e.jsxs("p",{className:"text-sm text-purple-800",children:[e.jsx("strong",{children:"Booking with Appointment:"})," Department-specific fee applies"]})}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:ue&&Ee?"Department Fee:":"Consultation Fee:"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["TSh ",(ue&&Ee?It(Ee):re).toLocaleString()]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"reg_payment_method",children:"Payment Method"}),e.jsxs("select",{id:"reg_payment_method",className:"w-full p-2 border rounded-md",value:be.payment_method,onChange:$=>mt({...be,payment_method:$.target.value}),children:[e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"}),e.jsx("option",{value:"Card",children:"Card"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"reg_amount_paid",children:"Amount Paid"}),e.jsx(ke,{id:"reg_amount_paid",type:"number",value:be.amount_paid,onChange:$=>mt({...be,amount_paid:$.target.value}),placeholder:"Enter amount"})]}),(()=>{const $=ue&&Ee?It(Ee):re;return e.jsxs(e.Fragment,{children:[Number(be.amount_paid)>$&&e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-green-800",children:"Change to Return:"}),e.jsxs("span",{className:"text-xl font-bold text-green-600",children:["TSh ",(Number(be.amount_paid)-$).toLocaleString()]})]})}),Number(be.amount_paid)<$&&be.amount_paid!==""&&e.jsx("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:e.jsx("span",{className:"text-sm text-red-600",children:"Insufficient payment amount"})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(G,{variant:"outline",onClick:()=>{se(!1),P(!0)},children:"Back"}),e.jsx(G,{onClick:nn,disabled:Number(be.amount_paid)<$,children:"Confirm Payment & Register"})]})]})})()]})]})}),e.jsx(At,{open:ot,onOpenChange:wt,children:e.jsxs(St,{className:"max-w-md",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Collect Consultation Fee"}),e.jsxs(Ot,{children:["Returning Patient: ",Qt?.full_name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Consultation Fee:"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["TSh ",re.toLocaleString()]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"ret_payment_method",children:"Payment Method"}),e.jsxs("select",{id:"ret_payment_method",className:"w-full p-2 border rounded-md",value:be.payment_method,onChange:$=>mt({...be,payment_method:$.target.value}),children:[e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"}),e.jsx("option",{value:"Card",children:"Card"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"ret_amount_paid",children:"Amount Paid"}),e.jsx(ke,{id:"ret_amount_paid",type:"number",value:be.amount_paid,onChange:$=>mt({...be,amount_paid:$.target.value}),placeholder:"Enter amount"})]}),Number(be.amount_paid)>re&&e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-green-800",children:"Change to Return:"}),e.jsxs("span",{className:"text-xl font-bold text-green-600",children:["TSh ",(Number(be.amount_paid)-re).toLocaleString()]})]})}),Number(be.amount_paid)<re&&be.amount_paid!==""&&e.jsx("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:e.jsx("span",{className:"text-sm text-red-600",children:"Insufficient payment amount"})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(G,{variant:"outline",onClick:()=>{wt(!1),ee(!0)},children:"Back"}),e.jsx(G,{onClick:on,disabled:Number(be.amount_paid)<re,children:"Confirm Payment & Create Visit"})]})]})]})}),e.jsx(At,{open:pe,onOpenChange:ee,children:e.jsxs(St,{className:"max-w-2xl",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Returning Patient - Create New Visit"}),e.jsx(Ot,{children:"Search for an existing patient and create a new visit"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Search Patient"}),e.jsx(ke,{placeholder:"Search by name or phone (min 2 characters)...",value:ve,onChange:$=>ge($.target.value),autoFocus:!0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Start typing to search in real-time"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto border rounded-lg",children:V.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:ve.trim().length>=2?`No patients found matching "${ve}"`:ve.trim().length>0?"Type at least 2 characters to search":"Start typing to search for patients"}):e.jsx("div",{className:"divide-y",children:V.map($=>e.jsx("div",{className:"p-4 hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-lg",children:$.full_name}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1",children:[e.jsxs("div",{children:[" ",$.phone]}),e.jsxs("div",{children:[" DOB: ",Fe(new Date($.date_of_birth),"MMM dd, yyyy")," (",new Date().getFullYear()-new Date($.date_of_birth).getFullYear()," years)"]}),e.jsxs("div",{children:[" ",$.gender]}),$.blood_group&&e.jsxs("div",{children:[" ",$.blood_group]}),$.allergies&&e.jsxs("div",{className:"text-red-600 font-medium",children:[" Allergies: ",$.allergies]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(G,{variant:"outline",onClick:()=>{Be($),Y(!0),ee(!1)},disabled:w,children:[e.jsx(_s,{className:"h-4 w-4 mr-2"}),"Quick Service"]}),e.jsx(G,{onClick:()=>Vt($),disabled:w,children:w?e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"h-4 w-4 animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Wo,{className:"h-4 w-4 mr-2"}),"Create Visit"]})})]})]})},$.id))})})]})]})}),e.jsx(vM,{open:he,onOpenChange:Y,patient:xe,onSuccess:()=>{I.success("Service assigned successfully"),Ft()}})]})}function NM(){const{user:t}=Ys(),[n,s]=h.useState([]),[a,o]=h.useState([]),[c,d]=h.useState({readyForDischarge:0,completedToday:0,followUps:0}),[f,p]=h.useState(!1),[x,m]=h.useState(!1),[v,C]=h.useState(null),[w,_]=h.useState({discharge_date:new Date().toISOString().split("T")[0],discharge_time:new Date().toTimeString().slice(0,5),discharge_type:"Regular",follow_up_date:"",follow_up_doctor:"",follow_up_notes:"",discharge_instructions:"",medications_summary:"",next_appointment_date:"",next_appointment_time:"",next_appointment_reason:""});h.useEffect(()=>{b()},[t]);const b=async()=>{if(t)try{p(!0);const{data:N}=await q.get("/patient-visits?status=Active&ready_for_discharge=true"),A=N.visits||[],D=new Date().toISOString().split("T")[0],{data:U}=await q.get(`/patient-visits?status=Completed&discharge_date=${D}`),R=U.visits||[],L=A?.filter(le=>le.current_stage==="discharge_ready"||le.billing_status==="Paid"||le.pharmacy_status==="Completed").length||0,pe=R?.length||0,ee=new Date;ee.setDate(ee.getDate()+7);const{data:ve}=await q.get(`/patient-visits?status=Completed&follow_up_from=${D}&follow_up_to=${ee.toISOString().split("T")[0]}`),V=(ve.visits||[])?.length||0;o(A||[]),d({readyForDischarge:L,completedToday:pe,followUps:V})}catch(N){console.error("Error fetching discharge data:",N),I.error("Failed to load discharge data")}finally{p(!1)}},S=async N=>{C(N),_({discharge_date:new Date().toISOString().split("T")[0],discharge_time:new Date().toTimeString().slice(0,5),discharge_type:"Regular",follow_up_date:"",follow_up_doctor:"",follow_up_notes:"",discharge_instructions:"",medications_summary:"",next_appointment_date:"",next_appointment_time:"",next_appointment_reason:""}),m(!0)},E=async()=>{if(v)try{if(await q.put(`/patient-visits/${v.id}`,{overall_status:"Completed",current_stage:"completed",discharge_date:w.discharge_date,discharge_time:w.discharge_time,discharge_type:w.discharge_type,discharge_instructions:w.discharge_instructions,medications_summary:w.medications_summary,follow_up_date:w.follow_up_date||null,follow_up_doctor:w.follow_up_doctor||null,follow_up_notes:w.follow_up_notes||null,discharge_completed_at:new Date().toISOString()}),w.next_appointment_date&&w.next_appointment_time)try{await q.post("/appointments",{patient_id:v.patient_id,appointment_date:w.next_appointment_date,appointment_time:w.next_appointment_time,reason:w.next_appointment_reason||"Follow-up appointment",status:"Scheduled"})}catch(N){console.error("Error creating follow-up appointment:",N),I.error("Discharge completed but failed to create follow-up appointment")}I.success("Patient discharged successfully!"),m(!1),C(null),o(N=>N.filter(A=>A.id!==v.id))}catch(N){console.error("Error processing discharge:",N),I.error("Failed to process discharge")}},P=N=>`
 VISIT SUMMARY - ${N.patient?.full_name}

 Visit Date: ${Fe(new Date(N.visit_date),"MMMM dd, yyyy")}
 Discharge: ${Fe(new Date(N.discharge_date+"T"+N.discharge_time),"MMM dd, yyyy HH:mm")}

 CONSULTATION DETAILS:
 Reception: ${N.reception_status} (${N.reception_completed_at?Fe(new Date(N.reception_completed_at),"HH:mm"):"N/A"})
 Nurse: ${N.nurse_status} (${N.nurse_completed_at?Fe(new Date(N.nurse_completed_at),"HH:mm"):"N/A"})
 Doctor: ${N.doctor_status} (${N.doctor_completed_at?Fe(new Date(N.doctor_completed_at),"HH:mm"):"N/A"})
 Lab: ${N.lab_status} (${N.lab_completed_at?Fe(new Date(N.lab_completed_at),"HH:mm"):"N/A"})
 Pharmacy: ${N.pharmacy_status} (${N.pharmacy_completed_at?Fe(new Date(N.pharmacy_completed_at),"HH:mm"):"N/A"})
 Billing: ${N.billing_status} (${N.billing_completed_at?Fe(new Date(N.billing_completed_at),"HH:mm"):"N/A"})

 DIAGNOSIS & NOTES:
${N.doctor_diagnosis||"No diagnosis recorded"}
${N.doctor_notes||"No doctor notes recorded"}

 PRESCRIPTIONS:
${N.prescriptions?.map(D=>`${D.medication_name} - ${D.dosage} ${D.frequency} for ${D.duration}`).join(`
`)||"No prescriptions"}

 DISCHARGE INSTRUCTIONS:
${N.discharge_instructions||"No specific instructions"}

 FOLLOW-UP:
${N.follow_up_date?`Scheduled for ${Fe(new Date(N.follow_up_date),"MMM dd, yyyy")}`:"No follow-up scheduled"}

 Generated on ${Fe(new Date,"MMM dd, yyyy HH:mm")}
    `.trim();return f?e.jsx(Sn,{title:"Discharge Management",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[1,2,3].map(N=>e.jsx("div",{className:"h-28 bg-gray-200 animate-pulse rounded-lg"},N))}),e.jsx("div",{className:"h-96 bg-gray-200 animate-pulse rounded-lg"})]})}):e.jsx(Sn,{title:"Discharge Management",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(Ce,{className:"border-blue-200 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Ready for Discharge"}),e.jsx(ar,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c.readyForDischarge}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Patients completed all services"})]})]}),e.jsxs(Ce,{className:"border-green-200 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Discharged Today"}),e.jsx(Tf,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.completedToday}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully discharged"})]})]}),e.jsxs(Ce,{className:"border-purple-200 shadow-lg",children:[e.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Oe,{className:"text-sm font-medium",children:"Follow-ups Scheduled"}),e.jsx(ns,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(De,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:c.followUps}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Next 7 days"})]})]})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(ar,{className:"h-5 w-5"}),"Patients Ready for Discharge"]}),e.jsx(kt,{children:"Patients who have completed all required services"})]}),e.jsx(De,{children:a.filter(N=>N.current_stage==="discharge_ready"||N.billing_status==="Paid"||N.pharmacy_status==="Completed").length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No patients ready for discharge"}):e.jsx("div",{className:"space-y-3",children:a.filter(N=>N.current_stage==="discharge_ready"||N.billing_status==="Paid"||N.pharmacy_status==="Completed").map(N=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-green-50",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-green-800",children:N.patient?.full_name}),e.jsx(He,{variant:"default",className:"bg-green-600",children:"Ready for Discharge"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Visit Date: ",Fe(new Date(N.visit_date),"MMM dd, yyyy"),"  Services: Reception  Nurse  Doctor ",N.lab_status==="Completed"&&" Lab ",N.pharmacy_status==="Completed"&&" Pharmacy ",N.billing_status==="Paid"&&" Billing "]}),N.doctor_diagnosis&&e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("strong",{children:"Diagnosis:"})," ",N.doctor_diagnosis]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(G,{variant:"outline",size:"sm",onClick:()=>{const A=P(N);navigator.clipboard.writeText(A),I.success("Visit summary copied to clipboard")},children:[e.jsx(Ry,{className:"h-4 w-4 mr-1"}),"Copy Summary"]}),e.jsxs(G,{onClick:()=>S(N),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Tf,{className:"h-4 w-4 mr-2"}),"Process Discharge"]})]})]},N.id))})})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(Yh,{className:"h-5 w-5"}),"Recent Discharges"]}),e.jsx(kt,{children:"Patients discharged today and recently"})]}),e.jsx(De,{children:a.filter(N=>N.overall_status==="Completed").length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No completed discharges"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Patient"}),e.jsx(de,{children:"Discharge Date"}),e.jsx(de,{children:"Type"}),e.jsx(de,{children:"Follow-up"}),e.jsx(de,{children:"Actions"})]})}),e.jsx(gn,{children:a.filter(N=>N.overall_status==="Completed").slice(0,10).map(N=>e.jsxs(lt,{children:[e.jsx(oe,{className:"font-medium",children:N.patient?.full_name}),e.jsx(oe,{children:N.discharge_date&&N.discharge_time?Fe(new Date(N.discharge_date+"T"+N.discharge_time),"MMM dd, yyyy HH:mm"):"N/A"}),e.jsx(oe,{children:e.jsx(He,{variant:"outline",children:N.discharge_type||"Regular"})}),e.jsx(oe,{children:N.follow_up_date?e.jsx(He,{variant:"secondary",children:Fe(new Date(N.follow_up_date),"MMM dd, yyyy")}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"No follow-up"})}),e.jsx(oe,{children:e.jsxs(G,{variant:"outline",size:"sm",onClick:()=>{const A=P(N);navigator.clipboard.writeText(A),I.success("Discharge summary copied to clipboard")},children:[e.jsx(dd,{className:"h-4 w-4 mr-1"}),"Summary"]})})]},N.id))})]})})})]}),e.jsx(At,{open:x,onOpenChange:m,children:e.jsxs(St,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Process Patient Discharge"}),e.jsxs(Ot,{children:["Complete discharge process for ",v?.patient?.full_name]})]}),e.jsxs("div",{className:"space-y-4",children:[v&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Visit Summary"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Patient:"})," ",v.patient?.full_name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Visit Date:"})," ",Fe(new Date(v.visit_date),"MMM dd, yyyy")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Diagnosis:"})," ",v.doctor_diagnosis||"Not recorded"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Prescriptions:"})," ",v.prescriptions?.length||0," items"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",v.billing_status||v.pharmacy_status]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"discharge_date",children:"Discharge Date"}),e.jsx(ke,{id:"discharge_date",type:"date",value:w.discharge_date,onChange:N=>_({...w,discharge_date:N.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"discharge_time",children:"Discharge Time"}),e.jsx(ke,{id:"discharge_time",type:"time",value:w.discharge_time,onChange:N=>_({...w,discharge_time:N.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"discharge_type",children:"Discharge Type"}),e.jsxs(sn,{value:w.discharge_type,onValueChange:N=>_({...w,discharge_type:N}),children:[e.jsx(en,{children:e.jsx(rn,{})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"Regular",children:"Regular Discharge"}),e.jsx(_e,{value:"Emergency",children:"Emergency Discharge"}),e.jsx(_e,{value:"Transfer",children:"Transfer to Another Facility"}),e.jsx(_e,{value:"Against Medical Advice",children:"Against Medical Advice"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"discharge_instructions",children:"Discharge Instructions"}),e.jsx(Mn,{id:"discharge_instructions",placeholder:"Home care instructions, medication usage, follow-up care...",value:w.discharge_instructions,onChange:N=>_({...w,discharge_instructions:N.target.value}),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"medications_summary",children:"Medications Summary"}),e.jsx(Mn,{id:"medications_summary",placeholder:"Summary of prescribed medications and usage instructions...",value:w.medications_summary,onChange:N=>_({...w,medications_summary:N.target.value}),rows:2})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Follow-up Appointment"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"follow_up_date",children:"Follow-up Date"}),e.jsx(ke,{id:"follow_up_date",type:"date",value:w.follow_up_date,onChange:N=>_({...w,follow_up_date:N.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"follow_up_doctor",children:"Follow-up Doctor"}),e.jsx(ke,{id:"follow_up_doctor",placeholder:"Dr. Smith",value:w.follow_up_doctor,onChange:N=>_({...w,follow_up_doctor:N.target.value})})]})]}),e.jsxs("div",{className:"space-y-2 mt-3",children:[e.jsx(Z,{htmlFor:"follow_up_notes",children:"Follow-up Notes"}),e.jsx(Mn,{id:"follow_up_notes",placeholder:"Reason for follow-up, specific concerns...",value:w.follow_up_notes,onChange:N=>_({...w,follow_up_notes:N.target.value}),rows:2})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Next Appointment (Optional)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"next_appointment_date",children:"Date"}),e.jsx(ke,{id:"next_appointment_date",type:"date",value:w.next_appointment_date,onChange:N=>_({...w,next_appointment_date:N.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"next_appointment_time",children:"Time"}),e.jsx(ke,{id:"next_appointment_time",type:"time",value:w.next_appointment_time,onChange:N=>_({...w,next_appointment_time:N.target.value})})]})]}),e.jsxs("div",{className:"space-y-2 mt-3",children:[e.jsx(Z,{htmlFor:"next_appointment_reason",children:"Reason"}),e.jsx(ke,{id:"next_appointment_reason",placeholder:"Regular checkup, test results, etc.",value:w.next_appointment_reason,onChange:N=>_({...w,next_appointment_reason:N.target.value})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(G,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsxs(G,{onClick:E,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Tf,{className:"h-4 w-4 mr-2"}),"Complete Discharge"]})]})]})})]})})}const _M=async(t,n)=>{try{const s=await q.post("/services",t);return await Wn("medical_service.create",{service_name:t.service_name}),{data:s.data.service,error:null}}catch(s){return console.error("Error creating medical service:",s),{data:null,error:s}}},SM=async t=>{try{const n=new URLSearchParams;t?.is_active,t?.service_type,console.log("Fetching medical services from API...");const s=await q.get(`/services?${n.toString()}`);return console.log("Medical services response:",s.data),{data:s.data.services||[],error:null}}catch(n){return console.error("Error fetching medical services:",n),console.error("Error details:",n.response?.data||n.message),{data:[],error:n}}},CM=async(t,n,s)=>{try{const a=await q.put(`/services/${t}`,n);return await Wn("medical_service.update",{service_id:t}),{data:a.data.service,error:null}}catch(a){return console.error("Error updating medical service:",a),{data:null,error:a}}},PM=async(t,n)=>{try{return await q.delete(`/services/${t}`),await Wn("medical_service.delete",{service_id:t}),{error:null}}catch(s){return console.error("Error deleting medical service:",s),{error:s}}},kM=async t=>{try{return{data:(await q.post("/services/bulk",{services:t})).data,error:null}}catch(n){return console.error("Error bulk importing services:",n),{data:null,error:n}}};function EM(){const{user:t,hasRole:n}=Ys(),[s,a]=h.useState([]),[o,c]=h.useState([]),[d,f]=h.useState([]),[p,x]=h.useState(!0),[m,v]=h.useState(!1),[C,w]=h.useState(!1),[_,b]=h.useState(null),[S,E]=h.useState([]),[P,N]=h.useState(null),[A,D]=h.useState(!1),[U,R]=h.useState({service_code:"",service_name:"",service_type:"",description:"",base_price:0,currency:"TSh"}),[L,pe]=h.useState(null),[ee,ve]=h.useState(!1),ge=["Consultation","Procedure","Surgery","Emergency","Ward Stay","Other"],V=T=>{const O=T.split(/\r?\n/).filter(re=>re.trim().length>0);if(O.length===0)return[];const he=O[0].split(",").map(re=>re.trim()),Y=["service_code","service_name","service_type","base_price"];for(const re of Y)if(!he.includes(re))throw new Error(`Missing required column: ${re}`);const xe=re=>he.indexOf(re),Be=[];for(let re=1;re<O.length;re++){const $e=O[re].split(",");if($e.length===1&&$e[0].trim()==="")continue;const qe={service_code:$e[xe("service_code")]?.trim()||"",service_name:$e[xe("service_name")]?.trim()||"",service_type:$e[xe("service_type")]?.trim()||"",description:he.includes("description")&&$e[xe("description")]?.trim()||"",base_price:parseFloat($e[xe("base_price")]||"0")||0,currency:he.includes("currency")&&$e[xe("currency")]?.trim()||"TSh",is_active:he.includes("is_active")?$e[xe("is_active")]?.trim().toLowerCase()==="true":!0};qe.service_code&&qe.service_name&&qe.service_type&&qe.base_price>0&&Be.push(qe)}return Be},le=()=>{const T=["service_code","service_name","service_type","description","base_price","currency"],O=["LAB001,MALARIA (MRDT),Laboratory,Malaria Rapid Diagnostic Test - 20 min turnaround,5000,TSH","LAB002,MALARIA (BS),Laboratory,Malaria Blood Smear - 1 hour turnaround,8000,TSH","LAB003,HEPATITIS B,Laboratory,Hepatitis B Test - 20 min turnaround,15000,TSH","LAB004,H. PYLORI,Laboratory,H. Pylori Test - 20 min turnaround,12000,TSH","LAB005,HIV,Laboratory,HIV Test - 20 min turnaround,10000,TSH","LAB006,VDRL,Laboratory,VDRL Test - 15 min turnaround,8000,TSH","LAB007,BLOOD GLUCOSE TEST,Laboratory,Blood Glucose Test - 5 min turnaround,3000,TSH","LAB008,HAEMOGLOBIN TEST,Laboratory,Haemoglobin Test - 5 min turnaround,3000,TSH","LAB009,ABO BLOOD GROUPING,Laboratory,ABO Blood Grouping - 10 min turnaround,5000,TSH","LAB010,URINALYSIS,Laboratory,Urinalysis - 20 min turnaround,5000,TSH","LAB011,URINE SEDIMENT,Laboratory,Urine Sediment - 20 min turnaround,6000,TSH","LAB012,URINE PREGNANCY TEST,Laboratory,Urine Pregnancy Test - 5 min turnaround,3000,TSH","LAB013,STOOL ANALYSIS,Laboratory,Stool Analysis - 20 min turnaround,5000,TSH","RAD001,X-RAY CHEST,Radiology,Chest X-Ray,25000,TSH","RAD002,X-RAY ABDOMEN,Radiology,Abdominal X-Ray,25000,TSH","RAD003,ULTRASOUND,Radiology,Ultrasound Scan,35000,TSH","CONS001,GENERAL CONSULTATION,Consultation,General Medical Consultation,20000,TSH","CONS002,SPECIALIST CONSULTATION,Consultation,Specialist Doctor Consultation,50000,TSH","PROC001,WOUND DRESSING,Procedure,Wound Dressing and Care,10000,TSH","PROC002,INJECTION,Procedure,Injection Administration,5000,TSH","PROC003,IV CANNULATION,Procedure,IV Cannula Insertion,8000,TSH","SURG001,MINOR SURGERY,Surgery,Minor Surgical Procedure,100000,TSH","EMRG001,EMERGENCY CARE,Emergency,Emergency Room Care,30000,TSH","WARD001,GENERAL WARD,Ward Stay,General Ward Per Day,50000,TSH","WARD002,PRIVATE WARD,Ward Stay,Private Ward Per Day,100000,TSH"],he=[T.join(","),...O].join(`
`),Y=new Blob([he],{type:"text/csv;charset=utf-8;"}),xe=URL.createObjectURL(Y),Be=document.createElement("a");Be.href=xe,Be.download="medical_services_template.csv",Be.click(),URL.revokeObjectURL(xe),I.success("Template downloaded! Includes all lab tests from your image.")};h.useEffect(()=>{we()},[t]);const we=async()=>{if(t){x(!0);try{console.log("Fetching medical services data...");const{data:T,error:O}=await SM();O?(console.error("Error fetching services:",O),I.error("Failed to load medical services. Check console for details.")):(console.log("Received services:",T),a(T||[]),T&&T.length>0&&I.success(`Loaded ${T.length} medical services`)),c([]),f([])}catch(T){console.error("Error fetching data:",T),I.error("Failed to load medical services data")}finally{x(!1)}}},fe=async()=>{if(!U.service_code||!U.service_name||!U.service_type||!U.base_price){I.error("Please fill in all required fields");return}try{const{data:T,error:O}=await _M({...U,is_active:!0},t.id);O?(console.error("Error adding service:",O),I.error("Failed to add medical service")):(I.success("Medical service added successfully"),v(!1),R({service_code:"",service_name:"",service_type:"",description:"",base_price:0,currency:"TSh"}),we())}catch(T){console.error("Error adding service:",T),I.error("Failed to add medical service")}},ne=T=>{pe(T),ve(!0)},M=async()=>{if(L){if(!L.service_code||!L.service_name||!L.service_type||!L.base_price){I.error("Please fill in all required fields");return}try{const{error:T}=await CM(L.id,{service_code:L.service_code,service_name:L.service_name,service_type:L.service_type,description:L.description,base_price:L.base_price,currency:L.currency,is_active:L.is_active},t.id);T?(console.error("Error updating service:",T),I.error("Failed to update medical service")):(I.success("Medical service updated successfully"),ve(!1),pe(null),we())}catch(T){console.error("Error updating service:",T),I.error("Failed to update medical service")}}},K=async T=>{if(confirm("Are you sure you want to delete this service? This action cannot be undone."))try{const{error:O}=await PM(T,t.id);O?(console.error("Error deleting service:",O),I.error("Failed to delete medical service")):(I.success("Medical service deleted successfully"),we())}catch(O){console.error("Error deleting service:",O),I.error("Failed to delete medical service")}},se=()=>{const T=U.service_type,he=`${T==="Consultation"?"CONS":T==="Procedure"?"PROC":T==="Surgery"?"SURG":T==="Emergency"?"EMER":T==="Ward Stay"?"WARD":"OTHER"}-${Math.random().toString(36).substring(2,6).toUpperCase()}`;R(Y=>({...Y,service_code:he}))};return!t||!n("doctor")&&!n("nurse")&&!n("admin")?e.jsx(Sn,{title:"Medical Services",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_s,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Only medical staff can access this page."})]})})}):p?e.jsx(Sn,{title:"Medical Services",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary"})})}):e.jsx(Sn,{title:"Medical Services Management",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Medical Services & Lab Tests"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage medical services, lab tests, procedures, and their pricing"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(G,{onClick:()=>v(!0),children:[e.jsx(jr,{className:"mr-2 h-4 w-4"}),"Add New Service"]}),e.jsx(G,{variant:"outline",onClick:()=>w(!0),children:"Import CSV"}),e.jsx(G,{variant:"ghost",onClick:le,children:"Download Template"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(Ce,{className:"shadow-lg",children:[e.jsx(Re,{className:"pb-3",children:e.jsxs(Oe,{className:"text-lg flex items-center gap-2",children:[e.jsx(_s,{className:"h-5 w-5 text-blue-500"}),"Available Services"]})}),e.jsxs(De,{children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:s.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total services in catalog"})]})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsx(Re,{className:"pb-3",children:e.jsxs(Oe,{className:"text-lg flex items-center gap-2",children:[e.jsx(ga,{className:"h-5 w-5 text-green-500"}),"Avg Service Cost"]})}),e.jsxs(De,{children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["TSh",s.length>0?(s.reduce((T,O)=>T+(Number(O.base_price)||0),0)/s.length).toFixed(0):"0"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Average price per service"})]})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsx(Re,{className:"pb-3",children:e.jsxs(Oe,{className:"text-lg flex items-center gap-2",children:[e.jsx(jr,{className:"h-5 w-5 text-purple-500"}),"Services Today"]})}),e.jsxs(De,{children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:o.filter(T=>T.service_date===new Date().toISOString().split("T")[0]).length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Services provided today"})]})]})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:"Medical Services & Lab Tests Catalog"}),e.jsx(kt,{children:"All available medical services, lab tests, procedures, and their pricing. Use the import feature to bulk upload lab tests from CSV."})]}),e.jsx(De,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Service Code"}),e.jsx(de,{children:"Service Name"}),e.jsx(de,{children:"Type"}),e.jsx(de,{children:"Description"}),e.jsx(de,{children:"Price"}),e.jsx(de,{children:"Status"}),e.jsx(de,{className:"text-right",children:"Actions"})]})}),e.jsx(gn,{children:s.map(T=>e.jsxs(lt,{children:[e.jsx(oe,{className:"font-mono text-sm",children:T.service_code}),e.jsx(oe,{className:"font-medium",children:T.service_name}),e.jsx(oe,{children:e.jsx(He,{variant:"outline",children:T.service_type})}),e.jsx(oe,{className:"text-sm text-muted-foreground",children:T.description||"No description"}),e.jsxs(oe,{className:"font-semibold",children:["TSh",T.base_price.toLocaleString()]}),e.jsx(oe,{children:e.jsx(He,{variant:T.is_active?"default":"secondary",children:T.is_active?"Active":"Inactive"})}),e.jsx(oe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(G,{variant:"ghost",size:"sm",onClick:()=>ne(T),className:"h-8 w-8 p-0",children:e.jsx(WS,{className:"h-4 w-4"})}),e.jsx(G,{variant:"ghost",size:"sm",onClick:()=>K(T.id),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(lh,{className:"h-4 w-4"})})]})})]},T.id))})]})})})]}),e.jsxs(Ce,{className:"shadow-lg",children:[e.jsxs(Re,{children:[e.jsx(Oe,{children:"Recent Patient Services"}),e.jsx(kt,{children:"Services provided to patients recently"})]}),e.jsx(De,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Patient"}),e.jsx(de,{children:"Service"}),e.jsx(de,{children:"Quantity"}),e.jsx(de,{children:"Unit Price"}),e.jsx(de,{children:"Total"}),e.jsx(de,{children:"Date"}),e.jsx(de,{children:"Status"})]})}),e.jsx(gn,{children:o.slice(0,10).map(T=>e.jsxs(lt,{children:[e.jsxs(oe,{className:"font-medium",children:["Patient ID: ",T.patient_id.slice(0,8),"..."]}),e.jsx(oe,{children:T.service?.service_name||"Unknown Service"}),e.jsx(oe,{children:T.quantity}),e.jsxs(oe,{children:["TSh",T.unit_price.toLocaleString()]}),e.jsxs(oe,{className:"font-semibold",children:["TSh",T.total_price.toLocaleString()]}),e.jsx(oe,{children:new Date(T.service_date).toLocaleDateString()}),e.jsx(oe,{children:e.jsx(He,{variant:T.status==="Completed"?"default":"secondary",children:T.status})})]},T.id))})]})})})]}),e.jsx(At,{open:m,onOpenChange:v,children:e.jsxs(St,{className:"max-w-md",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Add New Medical Service"}),e.jsx(Ot,{children:"Add a new medical problem, test, or service with pricing"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"service_type",children:"Service Type *"}),e.jsxs(sn,{value:U.service_type,onValueChange:T=>{R(O=>({...O,service_type:T})),setTimeout(se,100)},children:[e.jsx(en,{children:e.jsx(rn,{placeholder:"Select type"})}),e.jsx(tn,{children:ge.map(T=>e.jsx(_e,{value:T,children:T},T))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"service_code",children:"Service Code"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ke,{id:"service_code",value:U.service_code,onChange:T=>R(O=>({...O,service_code:T.target.value})),placeholder:"CONS-001"}),e.jsx(G,{type:"button",variant:"outline",size:"sm",onClick:se,children:"Auto"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"service_name",children:"Service Name *"}),e.jsx(ke,{id:"service_name",value:U.service_name,onChange:T=>R(O=>({...O,service_name:T.target.value})),placeholder:"General Consultation"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"description",children:"Description"}),e.jsx(Mn,{id:"description",value:U.description,onChange:T=>R(O=>({...O,description:T.target.value})),placeholder:"Brief description of the service",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"base_price",children:"Base Price (TSh) *"}),e.jsx(ke,{id:"base_price",type:"number",value:U.base_price,onChange:T=>R(O=>({...O,base_price:parseFloat(T.target.value)||0})),placeholder:"50000"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(G,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),e.jsx(G,{onClick:fe,children:"Add Service"})]})]})]})}),e.jsx(At,{open:ee,onOpenChange:ve,children:e.jsxs(St,{className:"max-w-md",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Edit Medical Service"}),e.jsx(Ot,{children:"Update service details and pricing"})]}),L&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"edit_service_type",children:"Service Type *"}),e.jsxs(sn,{value:L.service_type,onValueChange:T=>{pe(O=>O?{...O,service_type:T}:null)},children:[e.jsx(en,{children:e.jsx(rn,{placeholder:"Select type"})}),e.jsx(tn,{children:ge.map(T=>e.jsx(_e,{value:T,children:T},T))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"edit_service_code",children:"Service Code *"}),e.jsx(ke,{id:"edit_service_code",value:L.service_code,onChange:T=>pe(O=>O?{...O,service_code:T.target.value}:null),placeholder:"CONS-001"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"edit_service_name",children:"Service Name *"}),e.jsx(ke,{id:"edit_service_name",value:L.service_name,onChange:T=>pe(O=>O?{...O,service_name:T.target.value}:null),placeholder:"General Consultation"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"edit_description",children:"Description"}),e.jsx(Mn,{id:"edit_description",value:L.description||"",onChange:T=>pe(O=>O?{...O,description:T.target.value}:null),placeholder:"Brief description of the service",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"edit_base_price",children:"Base Price (TSh) *"}),e.jsx(ke,{id:"edit_base_price",type:"number",value:L.base_price,onChange:T=>pe(O=>O?{...O,base_price:parseFloat(T.target.value)||0}:null),placeholder:"50000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"edit_is_active",children:"Status"}),e.jsxs(sn,{value:L.is_active?"active":"inactive",onValueChange:T=>{pe(O=>O?{...O,is_active:T==="active"}:null)},children:[e.jsx(en,{children:e.jsx(rn,{})}),e.jsxs(tn,{children:[e.jsx(_e,{value:"active",children:"Active"}),e.jsx(_e,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(G,{variant:"outline",onClick:()=>{ve(!1),pe(null)},children:"Cancel"}),e.jsx(G,{onClick:M,children:"Update Service"})]})]})]})}),e.jsx(At,{open:C,onOpenChange:T=>{w(T),T||(b(null),E([]),N(null))},children:e.jsxs(St,{className:"max-w-2xl",children:[e.jsxs(Ct,{children:[e.jsx(Pt,{children:"Import Medical Services & Lab Tests (CSV)"}),e.jsx(Ot,{children:'Upload a CSV file to bulk import lab tests and medical services. Use service_type = "Laboratory" for lab tests, "Radiology" for X-rays, "Consultation" for doctor visits, etc. Download the template which includes all 13 lab tests from your dispensary.'})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ke,{type:"file",accept:".csv",onChange:async T=>{N(null);const O=T.target.files?.[0]||null;if(b(O),E([]),!!O)try{const he=await O.text(),Y=V(he);E(Y.slice(0,10))}catch(he){N(he?.message||"Failed to read CSV file")}}}),e.jsx(G,{type:"button",variant:"ghost",onClick:le,children:"Download Template"})]}),P&&e.jsx("div",{className:"text-sm text-red-600",children:P}),S.length>0&&e.jsxs("div",{className:"border rounded-md overflow-hidden",children:[e.jsx("div",{className:"px-3 py-2 text-sm font-medium bg-muted",children:"Preview (first 10 rows)"}),e.jsx("div",{className:"max-h-64 overflow-auto",children:e.jsxs(mn,{children:[e.jsx(pn,{children:e.jsxs(lt,{children:[e.jsx(de,{children:"Code"}),e.jsx(de,{children:"Name"}),e.jsx(de,{children:"Type"}),e.jsx(de,{children:"Price"}),e.jsx(de,{children:"Status"})]})}),e.jsx(gn,{children:S.map((T,O)=>e.jsxs(lt,{children:[e.jsx(oe,{className:"font-mono text-xs",children:T.service_code}),e.jsx(oe,{className:"text-sm",children:T.service_name}),e.jsx(oe,{children:e.jsx(He,{variant:"outline",children:T.service_type})}),e.jsxs(oe,{className:"font-semibold",children:["TSh",Number(T.base_price||0).toLocaleString()]}),e.jsx(oe,{children:e.jsx(He,{variant:T.is_active?"default":"secondary",children:T.is_active?"Active":"Inactive"})})]},O))})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(G,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),e.jsx(G,{onClick:async()=>{if(!_){N("Please choose a CSV file");return}D(!0),N(null);try{const T=await _.text(),O=V(T);if(O.length===0){N("No valid rows found in CSV"),D(!1);return}const{data:he,error:Y}=await kM(O);Y?(N("Failed to import services"),I.error("Failed to import services")):(I.success(`Successfully imported ${he?.results?.success||0} services`),he?.results?.failed>0&&I.warning(`${he.results.failed} services failed to import`),w(!1),b(null),E([]),we())}catch(T){console.error("CSV import error:",T),N(T?.message||"Failed to import CSV")}finally{D(!1)}},disabled:A||!_,children:A?"Importing":"Import Services"})]})]})]})})]})})}function TM(){return e.jsx(Sn,{title:"Activity Logs",children:e.jsx(Vb,{})})}class DM{config;baseUrl;constructor(n){this.config=n,this.baseUrl=n.environment==="production"?"https://api.zenopay.com/v1":"https://sandbox-api.zenopay.com/v1"}async initiatePayment(n){try{const s=await fetch(`${this.baseUrl}/payments/initiate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`,"X-Merchant-Id":this.config.merchantId},body:JSON.stringify({amount:n.amount,currency:n.currency||"USD",reference:n.reference,description:n.description,customer:{email:n.customerEmail,phone:n.customerPhone,name:n.customerName},callback_url:n.callbackUrl,return_url:n.returnUrl})}),a=await s.json();return s.ok?{success:!0,transactionId:a.transaction_id,paymentUrl:a.payment_url,reference:a.reference,message:"Payment initiated successfully"}:{success:!1,error:a.message||"Payment initiation failed"}}catch(s){return console.error("ZenoPay initiation error:",s),{success:!1,error:s instanceof Error?s.message:"Network error"}}}async verifyPayment(n){try{const s=await fetch(`${this.baseUrl}/payments/verify/${n}`,{method:"GET",headers:{Authorization:`Bearer ${this.config.apiKey}`,"X-Merchant-Id":this.config.merchantId}}),a=await s.json();return s.ok?{success:a.status==="success",status:a.status,transactionId:a.transaction_id,reference:a.reference,amount:a.amount,currency:a.currency,paidAt:a.paid_at,message:a.message}:{success:!1,status:"failed",transactionId:"",reference:n,amount:0,currency:"USD",message:a.message||"Verification failed"}}catch(s){return console.error("ZenoPay verification error:",s),{success:!1,status:"failed",transactionId:"",reference:n,amount:0,currency:"USD",message:s instanceof Error?s.message:"Network error"}}}async getPaymentStatus(n){try{const s=await fetch(`${this.baseUrl}/payments/status/${n}`,{method:"GET",headers:{Authorization:`Bearer ${this.config.apiKey}`,"X-Merchant-Id":this.config.merchantId}}),a=await s.json();if(!s.ok)throw new Error(a.message||"Failed to get payment status");return{success:a.status==="success",status:a.status,transactionId:a.transaction_id,reference:a.reference,amount:a.amount,currency:a.currency,paidAt:a.paid_at,message:a.message}}catch(s){throw console.error("ZenoPay status check error:",s),s}}async refundPayment(n,s,a){try{const o=await fetch(`${this.baseUrl}/payments/refund`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`,"X-Merchant-Id":this.config.merchantId},body:JSON.stringify({transaction_id:n,amount:s,reason:a})}),c=await o.json();return o.ok?{success:!0,transactionId:c.refund_id,reference:c.reference,message:"Refund processed successfully"}:{success:!1,error:c.message||"Refund failed"}}catch(o){return console.error("ZenoPay refund error:",o),{success:!1,error:o instanceof Error?o.message:"Network error"}}}}const RM={apiKey:"YOUR_ZENOPAY_API_KEY_HERE",merchantId:"YOUR_ZENOPAY_MERCHANT_ID_HERE",environment:"production"},AM=new DM(RM);function OM(){const[t]=IT(),n=si(),[s,a]=h.useState(!0),[o,c]=h.useState("pending"),[d,f]=h.useState(null);h.useEffect(()=>{p()},[]);const p=async()=>{try{const v=t.get("reference"),C=localStorage.getItem("pending_payment");let w=null;C&&(w=JSON.parse(C));const _=v||w?.reference;if(!_){I.error("No payment reference found"),c("failed"),a(!1);return}const b=await AM.verifyPayment(_);b.success&&b.status==="success"?(c("success"),f(b),w?.invoiceId&&await x(w.invoiceId,b.transactionId,b.amount),localStorage.removeItem("pending_payment"),I.success("Payment verified successfully!")):(c(b.status==="pending"?"pending":"failed"),f(b),b.status==="failed"?I.error("Payment verification failed"):b.status==="pending"&&I.info("Payment is still processing"))}catch(v){console.error("Payment verification error:",v),c("failed"),I.error("Failed to verify payment")}finally{a(!1)}},x=async(v,C,w)=>{try{console.log("Payment verified:",{invoiceId:v,transactionId:C,amount:w}),I.info("Payment verified - recording feature coming soon")}catch(_){console.error("Error updating payment in database:",_),I.error("Payment verified but failed to update records")}},m=()=>{I.info("Receipt download feature coming soon")};return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsx(Ce,{className:"w-full max-w-md",children:e.jsx(De,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 py-8",children:[e.jsx(Kt,{className:"h-16 w-16 animate-spin text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Verifying Payment..."}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Please wait while we confirm your payment with ZenoPay"})]})})})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsxs(Ce,{className:"w-full max-w-md",children:[e.jsx(Re,{children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o==="success"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-full bg-green-100 p-3",children:e.jsx(ar,{className:"h-12 w-12 text-green-600"})}),e.jsx(Oe,{className:"text-2xl text-center",children:"Payment Successful!"}),e.jsx(kt,{className:"text-center",children:"Your payment has been processed successfully"})]}),o==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-full bg-yellow-100 p-3",children:e.jsx(Kt,{className:"h-12 w-12 text-yellow-600 animate-spin"})}),e.jsx(Oe,{className:"text-2xl text-center",children:"Payment Pending"}),e.jsx(kt,{className:"text-center",children:"Your payment is being processed"})]}),o==="failed"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-full bg-red-100 p-3",children:e.jsx(qh,{className:"h-12 w-12 text-red-600"})}),e.jsx(Oe,{className:"text-2xl text-center",children:"Payment Failed"}),e.jsx(kt,{className:"text-center",children:"There was an issue processing your payment"})]})]})}),e.jsxs(De,{className:"space-y-6",children:[d&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(He,{variant:o==="success"?"default":o==="pending"?"secondary":"destructive",children:o.toUpperCase()})]}),d.transactionId&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Transaction ID"}),e.jsx("span",{className:"text-sm font-mono",children:d.transactionId})]}),d.reference&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Reference"}),e.jsx("span",{className:"text-sm font-semibold",children:d.reference})]}),d.amount&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Amount"}),e.jsxs("span",{className:"text-lg font-bold",children:[d.currency," ",d.amount.toFixed(2)]})]}),d.paidAt&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Paid At"}),e.jsx("span",{className:"text-sm",children:new Date(d.paidAt).toLocaleString()})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[o==="success"&&e.jsxs(G,{onClick:m,variant:"outline",className:"w-full",children:[e.jsx(dd,{className:"h-4 w-4 mr-2"}),"Download Receipt"]}),o==="pending"&&e.jsxs(G,{onClick:p,variant:"outline",className:"w-full",children:[e.jsx(Kt,{className:"h-4 w-4 mr-2"}),"Check Status Again"]}),e.jsxs(G,{onClick:()=>n("/billing"),className:"w-full",children:[e.jsx(AS,{className:"h-4 w-4 mr-2"}),"Back to Billing"]})]}),o==="failed"&&d?.message&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800",children:d.message})})]})]})})}const MM=new BE,FM=()=>e.jsx(zE,{client:MM,children:e.jsxs(gE,{children:[e.jsx(eP,{}),e.jsx(RP,{}),e.jsx(FT,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(LT,{children:e.jsxs(RT,{children:[e.jsx(ls,{path:"/",element:e.jsx($T,{})}),e.jsx(ls,{path:"/auth",element:e.jsx(aD,{})}),e.jsx(ls,{path:"/admin",element:e.jsx(tr,{requiredRole:"admin",children:e.jsx(iM,{})})}),e.jsx(ls,{path:"/doctor",element:e.jsx(tr,{requiredRole:"doctor",children:e.jsx(oM,{})})}),e.jsx(ls,{path:"/patient",element:e.jsx(tr,{children:e.jsx(lM,{})})}),e.jsx(ls,{path:"/lab",element:e.jsx(tr,{requiredRole:"lab_tech",children:e.jsx(cM,{})})}),e.jsx(ls,{path:"/pharmacy",element:e.jsx(tr,{requiredRole:"pharmacist",children:e.jsx(uM,{})})}),e.jsx(ls,{path:"/billing",element:e.jsx(tr,{requiredRole:"billing",children:e.jsx(mM,{})})}),e.jsx(ls,{path:"/nurse",element:e.jsx(tr,{requiredRole:"nurse",children:e.jsx(pM,{})})}),e.jsx(ls,{path:"/receptionist",element:e.jsx(tr,{requiredRole:"receptionist",children:e.jsx(bM,{})})}),e.jsx(ls,{path:"/discharge",element:e.jsx(tr,{requiredRole:"receptionist",children:e.jsx(NM,{})})}),e.jsx(ls,{path:"/services",element:e.jsx(tr,{children:e.jsx(EM,{})})}),e.jsx(ls,{path:"/logs",element:e.jsx(tr,{requiredRole:"admin",children:e.jsx(TM,{})})}),e.jsx(ls,{path:"/billing/payment-success",element:e.jsx(OM,{})})]})})})]})});R_.createRoot(document.getElementById("root")).render(e.jsx(FM,{}));export{G as B,ns as C,At as D,ke as I,Z as L,sn as S,Mn as T,q as a,m4 as b,St as c,Ct as d,Pt as e,Ot as f,en as g,rn as h,tn as i,e as j,_e as k,h as r,I as u};
