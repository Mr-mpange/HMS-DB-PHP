import{r as a,a as g,j as e,D as E,b as B,B as D,C as _,c as q,d as O,e as L,f as V,L as n,S as c,g as l,h as d,i as p,k as m,I as f,T as y,u as S}from"./index-Be6vUPLL.js";const H=({patients:N,onSuccess:v})=>{const[o,h]=a.useState(!1),[I,T]=a.useState([]),[i,x]=a.useState([]),[A,r]=a.useState([]),[j,F]=a.useState("");a.useEffect(()=>{o&&(k(),b())},[o]),a.useEffect(()=>{r(i)},[j,i]);const k=async()=>{try{T([])}catch(t){console.error("Error fetching departments:",t)}},b=async()=>{try{const{data:t}=await g.get("/users",{params:{role:"doctor"}}),s=t.users||[];x(s),r(s)}catch(t){console.error("Error fetching doctors:",t),x([]),r([])}},w=async t=>{t.preventDefault();const s=new FormData(t.currentTarget),C={patient_id:s.get("patientId"),doctor_id:s.get("doctorId"),appointment_date:s.get("appointmentDate"),appointment_time:s.get("appointmentTime"),appointment_type:"Consultation",reason:s.get("reason"),notes:s.get("notes")};try{await g.post("/appointments",C),S.success("Appointment booked successfully"),h(!1),v()}catch(u){console.error("Error booking appointment:",u),S.error(u.response?.data?.error||"Failed to book appointment")}};return e.jsxs(E,{open:o,onOpenChange:h,children:[e.jsx(B,{asChild:!0,children:e.jsxs(D,{children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Book Appointment"]})}),e.jsxs(q,{className:"max-w-2xl",children:[e.jsxs(O,{children:[e.jsx(L,{children:"Book New Appointment"}),e.jsx(V,{children:"Schedule an appointment for a patient"})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"patientId",children:"Patient"}),e.jsxs(c,{name:"patientId",required:!0,children:[e.jsx(l,{children:e.jsx(d,{placeholder:"Select patient"})}),e.jsx(p,{children:N.map(t=>e.jsx(m,{value:t.id,children:t.full_name},t.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"departmentId",children:"Department"}),e.jsxs(c,{name:"departmentId",onValueChange:t=>F(t),children:[e.jsx(l,{children:e.jsx(d,{placeholder:"Select department"})}),e.jsx(p,{children:I.map(t=>e.jsx(m,{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"doctorId",children:"Doctor"}),e.jsxs(c,{name:"doctorId",required:!0,children:[e.jsx(l,{children:e.jsx(d,{placeholder:"Select doctor"})}),e.jsx(p,{children:A.map(t=>e.jsx(m,{value:t.id,children:t.full_name},t.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"appointmentDate",children:"Appointment Date"}),e.jsx(f,{id:"appointmentDate",name:"appointmentDate",type:"date",required:!0,min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"appointmentTime",children:"Appointment Time"}),e.jsx(f,{id:"appointmentTime",name:"appointmentTime",type:"time",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"reason",children:"Reason for Visit"}),e.jsx(y,{id:"reason",name:"reason",placeholder:"Describe the reason for the appointment",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"notes",children:"Additional Notes"}),e.jsx(y,{id:"notes",name:"notes",placeholder:"Any special instructions or notes"})]}),e.jsx(D,{type:"submit",className:"w-full",children:"Book Appointment"})]})]})]})};export{H as default};
